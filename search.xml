<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>å¹¿åº¦ä¼˜å…ˆæœç´¢ BFS å’Œæ·±åº¦ä¼˜å…ˆæœç´¢ DFS</title>
    <url>/2019/12/14/%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2-BFS-%E5%92%8C%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2-DFS/</url>
    <content><![CDATA[<p>æœ€è¿‘åœ¨å†™ <code>virtual dom</code> æ–¹é¢çš„é€»è¾‘ï¼Œç”¨åˆ° <code>BFS</code> å’Œ <code>DFS</code>ã€‚æ€»ç»“ä¸€æ³¢~ğŸ˜€</p>
<p><code>Virtual Dom</code> çš„ç¤ºä¾‹ <code>json</code> å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">const vNode = {
  node: &quot;root&quot;,
  child: [
    {
      node: &quot;element1&quot;,
      chlid: [
        {
          node: &quot;element3&quot;
        },
        {
          node: &quot;element4&quot;
        }
      ]
    },
    {
      node: &quot;element2&quot;
    }
  ]
};

</code></pre>
<p><code>Virtual Dom</code> çš„æ ‘å¦‚ä¸‹ï¼š</p>
<p><img src="https://i.loli.net/2019/12/13/Li2XeM8a46u3jZV.png" alt="image.png"></p>
<h3 id="å¹¿åº¦ä¼˜å…ˆæœç´¢-BFS"><a href="#å¹¿åº¦ä¼˜å…ˆæœç´¢-BFS" class="headerlink" title="å¹¿åº¦ä¼˜å…ˆæœç´¢  BFS"></a>å¹¿åº¦ä¼˜å…ˆæœç´¢  BFS</h3><p><code>BFS</code> ï¼šé€å±‚è®¿é—®èŠ‚ç‚¹ï¼Œä»å·¦åˆ°å³è®¿é—®å®Œæˆä¸€å±‚è®¿é—®åï¼Œè®¿é—®ä¸‹ä¸€å±‚ï¼Œä¸”æ¯ä¸ªèŠ‚ç‚¹åªè®¿é—®ä¸€æ¬¡ã€‚</p>
<p>ä¸Šé¢çš„æ ‘ç”¨ <code>BFS</code> é¡ºåºå°±æ˜¯ï¼š<code>root</code> -&gt; <code>element1</code> -&gt; <code>element2</code> -&gt; <code>element3</code> -&gt; <code>element4</code>ã€‚</p>
<p>å®ç°æ€è·¯ï¼š</p>
<ul>
<li>è®¾ç½®é˜Ÿåˆ— <code>queue</code>ï¼Œå°±å°†<strong>æ ¹èŠ‚ç‚¹</strong>æ·»åŠ åˆ°é˜Ÿåˆ— <code>queue</code>ï¼›</li>
<li>åˆ¤æ–­å½“é˜Ÿåˆ— <code>queue</code> æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºåˆ™å¼¹å‡ºé˜Ÿå¤´èŠ‚ç‚¹ <code>currentNode</code>ï¼›</li>
<li>å°†é˜Ÿå¤´èŠ‚ç‚¹ <code>currentNode</code> æ·»åŠ åˆ°ç»“æœé˜Ÿåˆ— <code>lists</code>ï¼›</li>
<li>åˆ¤æ–­é˜Ÿå¤´èŠ‚ç‚¹ <code>currentNode</code> æ˜¯å¦æœ‰å­èŠ‚ç‚¹ï¼Œæœ‰åˆ™å°†å­èŠ‚ç‚¹<strong>ä»å·¦åˆ°å³</strong>ä¾æ¬¡æ·»åŠ åˆ°é˜Ÿåˆ— <code>queue</code>ï¼›</li>
<li>é‡å¤æ­¥éª¤2~4ã€‚</li>
</ul>
<p>ç®€å•ç†è§£å°±æ˜¯ï¼š</p>
<ul>
<li>æ ¹èŠ‚ç‚¹è¿›é˜Ÿåˆ—ï¼›</li>
<li>åˆ¤æ–­é˜Ÿå¤´èŠ‚ç‚¹æ˜¯å¦å­èŠ‚ç‚¹ï¼Œæœ‰åˆ™å°†å­èŠ‚ç‚¹<strong>ä»å·¦åˆ°å³</strong>ä¾æ¬¡è¿›é˜Ÿåˆ—ï¼Œé˜Ÿå¤´èŠ‚ç‚¹å‡ºé˜Ÿåˆ—ã€‚</li>
<li>é‡å¤2ã€‚</li>
</ul>
<p>ç”¨ <code>js</code> ä»£ç å®ç°å¦‚ä¸‹ï¼šï¼ˆæ³¨æ„ï¼šåˆ¤æ–­æ¡ä»¶ä¸ºé˜Ÿåˆ—é•¿åº¦ï¼‰</p>
<pre><code class="javascript">/**
 * BFS éé€’å½’å†™æ³•
 * @param {*} root æ ¹èŠ‚ç‚¹
 */
const BFS = root =&gt; {
  if (Object.prototype.toString.call(root) != &#39;[object Object]&#39;) {
    throw(new Error(&#39;root ç±»å‹é”™è¯¯ï¼&#39;));
    return;
  }
  let resLists = []; // å­˜æ”¾ BFS èŠ‚ç‚¹é˜Ÿåˆ—
  if (!Object.keys(root).length) {
    return lists;
  }
  let queue = []; // ä¸´æ—¶é˜Ÿåˆ—ï¼Œæ¯é‡åˆ°ä¸€ä¸ªèŠ‚ç‚¹å°±å­˜æ”¾è¿›é˜Ÿåˆ—
  queue.unshift(root);
  while (queue.length) {
    // queue é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œéå†ä¸´æ—¶é˜Ÿåˆ—
    let currentNode = queue.pop(); // å¼¹å‡ºä¸´æ—¶é˜Ÿåˆ—çš„ä¸€ä¸ªèŠ‚ç‚¹
    const hasChild =
      currentNode.hasOwnProperty(&quot;child&quot;) &amp;&amp; currentNode.child.length; // åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹
    if (hasChild) {
      const childrenNodes = currentNode.child; // å­èŠ‚ç‚¹æ•°ç»„
      for (let i = 0, len = childrenNodes.length; i &lt; len; i++) {
        const currentChildNode = childrenNodes[i]; // å½“å‰å­èŠ‚ç‚¹
        queue.unshift(currentChildNode); // æ·»åŠ åˆ°é˜Ÿåˆ—
      }
    }
    resLists.push(currentNode); // å½“å‰èŠ‚ç‚¹å­˜æ”¾åˆ° BFS èŠ‚ç‚¹é˜Ÿåˆ—
  }
  return resLists;
};
</code></pre>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://i.loli.net/2019/12/13/fQRoxlaeU1mXEku.png" alt="image.png"></p>
<h3 id="æ·±åº¦ä¼˜å…ˆæœç´¢-DFS"><a href="#æ·±åº¦ä¼˜å…ˆæœç´¢-DFS" class="headerlink" title="æ·±åº¦ä¼˜å…ˆæœç´¢  DFS"></a>æ·±åº¦ä¼˜å…ˆæœç´¢  DFS</h3><p> <code>DFS</code>ï¼šå¯¹æ¯ä¸€ä¸ªå¯èƒ½çš„åˆ†æ”¯è·¯å¾„æ·±å…¥åˆ°ä¸èƒ½å†æ·±å…¥ä¸ºæ­¢ï¼Œä¸”æ¯ä¸ªèŠ‚ç‚¹åªè®¿é—®ä¸€æ¬¡ã€‚</p>
<p>ä¸Šé¢çš„æ ‘ç”¨ <code>BFS</code> é¡ºåºå°±æ˜¯ï¼š<code>root</code>  -&gt; <code>element1</code> -&gt; <code>element3</code> -&gt; <code>element4</code> -&gt; <code>element2</code>ã€‚</p>
<p>å®ç°æ€è·¯1ï¼ˆéé€’å½’ï¼‰:</p>
<ul>
<li>æ ¹èŠ‚ç‚¹è¿›æ ˆ <code>stack</code>ï¼›</li>
<li>åˆ¤æ–­æ ˆ <code>stack</code> æ˜¯å¦ä¸ºç©ºï¼Œåˆ¤æ–­æ ˆé¡¶å…ƒç´ æ˜¯å¦æœ‰æœ‰å­èŠ‚ç‚¹ï¼Œæœ‰åˆ™å°†æ ˆé¡¶å…ƒç´ çš„å­èŠ‚ç‚¹<strong>ä»å³åˆ°å·¦</strong>ä¾æ¬¡è¿›æ ˆï¼›</li>
<li>å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå­˜è¿› <code>lists</code>;</li>
<li>é‡å¤2~3ï¼›</li>
</ul>
<p>ç®€å•ç†è§£å°±æ˜¯ï¼š</p>
<ul>
<li>æ ¹èŠ‚ç‚¹è¿›æ ˆï¼›</li>
<li>å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œåˆ¤æ–­æ ˆé¡¶å…ƒç´ æ˜¯å¦å­èŠ‚ç‚¹ï¼Œæœ‰åˆ™å°†å­èŠ‚ç‚¹<strong>ä»å³åˆ°å·¦</strong>ä¾æ¬¡è¿›æ ˆï¼›</li>
<li>é‡å¤2ã€‚</li>
</ul>
<p>ä»£ç å¦‚ä¸‹ï¼šï¼ˆæ³¨æ„ï¼šåˆ¤æ–­æ¡ä»¶ä¸ºæ ˆé•¿åº¦ï¼‰</p>
<pre><code class="javascript">const DFS = root =&gt; {
  if (Object.prototype.toString.call(root) != &quot;[object Object]&quot;) {
    throw new Error(&quot;root ç±»å‹é”™è¯¯ï¼&quot;);
  }
  let resLists = []; // å­˜æ”¾ BFS èŠ‚ç‚¹é˜Ÿåˆ—
  if (!Object.keys(root).length) {
    return lists;
  }
  let stack = []; // æ ˆï¼Œæ¯é‡åˆ°ä¸€ä¸ªèŠ‚ç‚¹å°±å­˜æ”¾è¿›æ ˆ
  stack.push(root);
  while (stack.length) {
    let currentNode = stack.pop(); // å¼¹å‡ºæ ˆé¡¶å…ƒç´ 
    const hasChild =
      currentNode.hasOwnProperty(&quot;child&quot;) &amp;&amp; currentNode.child.length; // åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹
    if (hasChild) {
      const childrenNodes = currentNode.child; // å­èŠ‚ç‚¹æ•°ç»„
      for (let i = childrenNodes.length - 1; i &gt;= 0; i--) {
        const currentChildNode = childrenNodes[i]; // å½“å‰å­èŠ‚ç‚¹
        stack.push(currentChildNode); // æ·»åŠ åˆ°é˜Ÿåˆ—
      }
    }
    resLists.push(currentNode); // å½“å‰èŠ‚ç‚¹å­˜æ”¾åˆ° DFS ç»“æœåˆ—è¡¨
  }
  return resLists;
};
</code></pre>
<p>å®ç°æ€è·¯2ï¼ˆé€’å½’ï¼‰ï¼š</p>
<ul>
<li>å½“å‰èŠ‚ç‚¹å…¥æ ˆ <code>stack</code>ï¼›</li>
<li>åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹ï¼›</li>
<li>æœ‰å­èŠ‚ç‚¹ï¼š<ul>
<li>å°†å­èŠ‚ç‚¹ä»å³åˆ°å·¦ä¾æ¬¡è¿›è¡Œé€’å½’ï¼›ï¼ˆæ ˆæ˜¯å…ˆè¿›åå‡º ï¼‰</li>
<li>æ‰€æœ‰å­èŠ‚ç‚¹é€’å½’ç»“æŸï¼Œå½“å‰èŠ‚ç‚¹å‡ºæ ˆï¼›</li>
</ul>
</li>
<li>æ— ï¼š<ul>
<li>å½“å‰èŠ‚ç‚¹å‡ºæ ˆã€‚</li>
</ul>
</li>
</ul>
<p>ä»£ç å®ç°å¦‚ä¸‹ï¼šï¼ˆæ³¨æ„ï¼šåˆ¤æ–­å…³é”®ä¸ºèŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹ï¼‰</p>
<pre><code class="javascript">var stack = []; // æ ˆ
var lists = []; // å­˜æ”¾ DFS èŠ‚ç‚¹
/**
 * å…¨å±€å˜é‡å®ç°
 * @param {*} currentNode : å½“å‰èŠ‚ç‚¹
 */
const DFS = currentNode =&gt; {
  let hasChild =
    currentNode.hasOwnProperty(&quot;child&quot;) &amp;&amp; currentNode.child.length; // åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹

  stack.push(currentNode); // æ¨å…¥æ ˆ
  if (hasChild) {
    let len = currentNode.child.length;
    for (let i = len - 1; i &gt;= 0; i--) {
      const currentChildNode = currentNode.child[i]; // å½“å‰å­èŠ‚ç‚¹
      DFS(currentChildNode); // é€’å½’
    }
    lists.unshift(stack.pop()); // å‡ºæ ˆ
  } else {
    lists.unshift(stack.pop()); // å‡ºæ ˆ
  }
};
</code></pre>
<pre><code class="javascript">/**
 * éå…¨å±€å˜é‡æ–¹å¼å®ç°
 * @param {*} currentNode : å½“å‰èŠ‚ç‚¹
 * @param {*} cache : ç¼“å­˜æ ˆå’ŒèŠ‚ç‚¹
 */
const DFS = (currentNode = {}, cache = { lists: [], stack: [] }) =&gt; {
  if (Object.prototype.toString.call(currentNode) != &quot;[object Object]&quot;) {
    throw new Error(&quot;root ç±»å‹é”™è¯¯ï¼&quot;);
  }
  let hasChild =
    currentNode.hasOwnProperty(&quot;child&quot;) &amp;&amp; currentNode.child.length; // åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹

  let { lists, stack } = cache;

  stack.push(currentNode); // æ¨å…¥æ ˆ
  if (hasChild) {
    let len = currentNode.child.length;
    for (let i = len - 1; i &gt;= 0; i--) { // æ³¨æ„è¿™é‡Œè¦ä»å³å‘å·¦å¾ªç¯ï¼Œå› ä¸º stack æ˜¯å…ˆè¿›åå‡º
      const currentChildNode = currentNode.child[i]; // å½“å‰å­èŠ‚ç‚¹
      const {
        lists: newLists,
        stack: newStack
      } = DFS(currentChildNode, {
        lists,
        stack
      }); // é€’å½’
      lists = newLists; // æ›´æ–° lists
      stack = newStack; // æ›´æ–°æ ˆ
    }
    lists.unshift(stack.pop()); // å‡ºæ ˆ
  } else {
    lists.unshift(stack.pop()); // å‡ºæ ˆ
  }
  // å‡½æ•°è¿”å›ç»“æœï¼Œå¦‚æœæ ˆä¸­è¿˜æœ‰èŠ‚ç‚¹ï¼Œè¯æ˜è¿˜æ²¡å›æº¯å®Œæˆï¼Œåˆ™è¿”å›ç¼“å­˜ï¼›å¦åˆ™å‡½æ•°æ‰§è¡Œç»“æŸ
  const res = stack.length
    ? {
        lists: lists,
        stack: stack
      }
    : lists;
  return res;
};
</code></pre>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://i.loli.net/2019/12/13/WoE4fxkBRCs3NOd.png" alt="image.png"></p>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>å°ç¨‹åºå·¥ç¨‹åŒ–</title>
    <url>/2019/11/05/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%B7%A5%E7%A8%8B%E5%8C%96/</url>
    <content><![CDATA[<h2 id="gulp"><a href="#gulp" class="headerlink" title="gulp"></a><em>gulp</em></h2><p><a href="https://www.gulpjs.com.cn/" target="_blank" rel="noopener">ğŸ‘‰å®˜æ–¹æ–‡æ¡£ä¼ é€é—¨</a></p>
<h2 id="gulp-ç¼–è¯‘é¡¹ç›®"><a href="#gulp-ç¼–è¯‘é¡¹ç›®" class="headerlink" title="gulp ç¼–è¯‘é¡¹ç›®"></a><em>gulp</em> ç¼–è¯‘é¡¹ç›®</h2><p>æ—¥å¸¸è¿›è¡Œå°ç¨‹åºå¼€å‘ï¼Œé‡åˆ°çš„é—®é¢˜æœ‰ï¼š</p>
<ul>
<li>å¦‚æœåœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·è¿›è¡Œå¼€å‘çš„è¯ï¼Œæ•ˆç‡ä½ï¼›</li>
<li>ä¸æ”¯æŒ <em>less</em> cssé¢„ç¼–è¯‘å™¨ ï¼›</li>
<li><em>autoprefixer</em> ï¼›</li>
<li>â€¦</li>
</ul>
<p>è€ƒè™‘åˆ°å°ç¨‹åºæ˜¯å¤šé¡µé¢åº”ç”¨ï¼Œæˆ‘ä»¬åªè¦åœ¨ <em>src</em> ç›®å½•æ·»åŠ å°ç¨‹åºåˆå§‹åŒ–æ—¶æ‰€éœ€è¦çš„ç›¸å…³é…ç½®æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ <em>gulp</em> å°† <em>src</em> ä¸‹çš„ä»£ç æ¬ç§»åˆ° <em>dist</em> æ‰“åŒ…ç›®å½•å³å¯ã€‚</p>
<h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><pre><code>â””â”€â”€â”€gulpTask ç›®å½•ï¼šä¸»è¦å­˜æ”¾ gulp ä»£ç é€»è¾‘
|     â””â”€â”€â”€baseConfig.js // gulp è·¯å¾„å’Œ blob é…ç½®ä¿¡æ¯
|     â””â”€â”€â”€clean.js // æ¸…ç† dist nodejs è„šæœ¬æ–‡ä»¶
|     â””â”€â”€â”€taskControler.js // gulp ä»»åŠ¡å®šä¹‰
|â”€â”€â”€src
|     â””â”€â”€â”€common // å…¬å…±ä»£ç 
|         â””â”€â”€â”€less
|             â””â”€â”€â”€...
|         â””â”€â”€â”€js
|             â””â”€â”€â”€...
|     â””â”€â”€â”€components // ç»„ä»¶
|             â””â”€â”€â”€...
|     â””â”€â”€â”€pages // é¡µé¢
|             â””â”€â”€â”€...
|     â””â”€â”€â”€router // è·¯ç”±
|             â””â”€â”€â”€router.js // è·¯ç”±å¤„ç†é€»è¾‘
|             â””â”€â”€â”€routerPath.js // è·¯ç”±è¡¨
|     â””â”€â”€â”€api // è¯·æ±‚æ•°æ®æ¥å£ç»Ÿä¸€å¤„ç†
|             â””â”€â”€â”€api.js
|     â””â”€â”€â”€http // http ç½‘ç»œè¯·æ±‚
|             â””â”€â”€â”€baseConfig.js // åŸºæœ¬é…ç½®
|             â””â”€â”€â”€devConfig.js // å¼€å‘åŸºæœ¬é…ç½®
|             â””â”€â”€â”€prodConfig.js // ç”Ÿäº§åŸºæœ¬é…ç½®
|             â””â”€â”€â”€request.js // è¯·æ±‚å¤„ç†é€»è¾‘
|    â””â”€â”€â”€app.js
|    â””â”€â”€â”€app.json
|    â””â”€â”€â”€project.config.json
|    â””â”€â”€â”€sitemap.json
â””â”€â”€â”€.eslintrc // eslint é…ç½®
â””â”€â”€â”€.gitignore // git é…ç½®
â””â”€â”€â”€gulpfile.js // gulp ä¸»å…¥å£
â””â”€â”€â”€package.json
â””â”€â”€â”€README.md
</code></pre><h3 id="gulp-é…ç½®æ–‡ä»¶-baseConfig-js"><a href="#gulp-é…ç½®æ–‡ä»¶-baseConfig-js" class="headerlink" title="gulp é…ç½®æ–‡ä»¶ baseConfig.js"></a><em>gulp</em> é…ç½®æ–‡ä»¶ <em>baseConfig.js</em></h3><p>å°† <em>gulp</em> ç›¸å…³è·¯å¾„å’Œ <em>blob</em> é…ç½®ä¿¡æ¯ç»Ÿä¸€åœ¨ <em>baseConfig.js</em> ä¸­è¿›è¡Œé…ç½®ã€‚</p>
<pre><code class="javascript">const path = require(&quot;path&quot;);

const srcPath = path.resolve(__dirname, &quot;../src&quot;);
const distPath = path.resolve(__dirname, &quot;../dist&quot;);
const isDev = process.argv.includes(&quot;--development&quot;);

module.exports = {
  isDev, // å½“å‰ç¯å¢ƒ
  srcPath, // src æºè·¯å¾„
  distPath, // dist ç¼–è¯‘ç›®æ ‡è·¯å¾„
  basePath: [
    srcPath
  ],
  otherPath: [
    srcPath,
    `!${srcPath}/**/**/*.less`,
    `!${srcPath}/**/**/*.wxml`,
    `!${srcPath}/**/**/*.json`,
    `!${srcPath}/**/**/*.js`,
    `!${srcPath}/static/icons/*.jpg`,
    `!${srcPath}/static/icons/*.png`,
    `!${srcPath}/static/images/*.jpg`,
    `!${srcPath}/static/images/*.png`,
  ],
  lessPath: [ // less blob
    `${srcPath}/**/**/*.less`,
  ],
  jsPath: [ // js blob
    `${srcPath}/**/**/*.js`,
  ],
  wxmlPath: [ // wxml blob
    `${srcPath}/**/**/*.wxml`,
  ],
  jsonPath: [ // json blob
    `${srcPath}/**/**/*.json`,
  ],
  lessImportPath: [
    `${srcPath}/common/less/*.less`
  ],
  iconPath: [
    `${srcPath}/static/icons/*.jpg`,
    `${srcPath}/static/icons/*.png`
  ],
  imagePath: [
    `${srcPath}/static/images/*.jpg`,
    `${srcPath}/static/images/*.gif`,
    `${srcPath}/static/images/*.png`
  ]
}
</code></pre>
<h3 id="gulp-å¼€å‘æµç¨‹"><a href="#gulp-å¼€å‘æµç¨‹" class="headerlink" title="gulp å¼€å‘æµç¨‹"></a><em>gulp</em> å¼€å‘æµç¨‹</h3><p>ä¸»è¦æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://i.loli.net/2019/11/05/yxatp6HzRUAm9G4.png" alt="image-20191105174239088.png"></p>
<h4 id="gulp-çš„å„ä¸ªä»»åŠ¡ï¼šï¼ˆtaskControler-js-æ–‡ä»¶ï¼‰"><a href="#gulp-çš„å„ä¸ªä»»åŠ¡ï¼šï¼ˆtaskControler-js-æ–‡ä»¶ï¼‰" class="headerlink" title="gulp çš„å„ä¸ªä»»åŠ¡ï¼šï¼ˆtaskControler.js æ–‡ä»¶ï¼‰"></a><em>gulp</em> çš„å„ä¸ªä»»åŠ¡ï¼šï¼ˆ<em>taskControler.js</em> æ–‡ä»¶ï¼‰</h4><ul>
<li><p>æ¯æ¬¡è¿›è¡Œ <em>gulp</em> ä»»åŠ¡å‰éƒ½è¦æ¸…ç©º <em>dist</em> æ‰“åŒ…åçš„ç›®å½•ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;clean:dist&quot;, done =&gt; {
    // console.log(&quot;:::: clean:dist&quot;);

    src(baseConfig.distPath, {
        read: true,
        allowEmpty: true,
    })
        .pipe(clean())

    done();
})
</code></pre>
<p>ä½†æ˜¯ï¼Œä¸Šé¢è¿™æ ·å¤„ç†ä¼šæœ‰é—®é¢˜ï¼šç¬¬äºŒæ¬¡è¿è¡Œ <em>gulp</em> å‘½åçš„æ—¶å€™ä¼šæœ‰æ–‡ä»¶æƒé™ç­‰é—®é¢˜ã€‚æ•…ï¼š<em>dist</em> æ–‡ä»¶çš„å¤„ç†é€šè¿‡ <em>nodejs</em> è¿›è¡Œå¤„ç†ã€‚</p>
<pre><code class="javascript">// gulp-clean æ¸…ç©º dist å‘½ä»¤ä¼šæœ‰æƒé™ç­‰ä¸€ç³»åˆ—é—®é¢˜ï¼Œæ•…ï¼šç›´æ¥ç”¨ node è¿›è¡Œåˆ é™¤ dist
const path = require(&quot;path&quot;);
const chalk = require(&quot;chalk&quot;);
const rimraf = require(&quot;rimraf&quot;);

const distPath = path.resolve(__dirname, &#39;../dist&#39;);
rimraf(distPath, err =&gt; {
  if (err) {
    console.log(chalk.red(err));
  }
})
</code></pre>
<p>ç„¶ååœ¨ <em>package.json</em> ä¸­é…ç½®è„šæœ¬å‘½ä»¤ï¼š</p>
<pre><code class="json">&quot;scripts&quot;: {
    &quot;build:dev&quot;: &quot;node gulpTask/clean.js &amp;&amp; gulp dev --development&quot;,
    &quot;build:prod&quot;: &quot;node gulpTask/clean.js &amp;&amp; gulp prod --production&quot;
},
</code></pre>
<p>è¿™æ ·æ¯æ¬¡æ‰§è¡Œ <em>gulp</em> å‘½ä»¤å‰éƒ½ä¼šåˆ é™¤ <em>dist</em> ç›®å½•ã€‚</p>
</li>
<li><p>å¤„ç† <em>less</em> æ–‡ä»¶ã€‚éœ€è¦è§£å†³çš„é—®é¢˜æœ‰ï¼š</p>
<ul>
<li>å¼€å‘ç¯å¢ƒä¸å‹ç¼©ä»£ç ï¼Œç”Ÿäº§ç¯å¢ƒå‹ç¼©ä»£ç ï¼›</li>
<li>è‡ªåŠ¨æ·»åŠ å±æ€§å‰ç¼€ï¼Œ<em>autoperfixer</em>ï¼›</li>
<li>å°† <em>less</em> æ–‡ä»¶çš„åç¼€æ›´æ”¹ä¸º <em>wxss</em>ï¼›</li>
<li>å°† <em>less</em> æ–‡ä»¶å†…éƒ¨çš„ <em>@import</em> å¼•ç”¨æ–‡ä»¶çš„åç¼€æ›´æ”¹ä¸º <em>wxss</em>ã€‚</li>
</ul>
<p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;compile:less&quot;, done =&gt; {
    // console.log(&quot;:::: compile:less&quot;);

    src(baseConfig.lessPath, {
        base: &quot;src&quot;
    })
        .pipe(changed(baseConfig.distPath))
        .pipe(gulpif(!this.isDev, cleanCss()))
        .pipe(autoprefixer())
    // .pipe(less({
    //   paths: baseConfig.lessImportPath,
    //   plugins: [autoprefix]
    // }))
        .pipe(rename(function (path) { // æ›´æ”¹ .less æ–‡ä»¶åç¼€ä¸º .wxss
        path.extname = &quot;.wxss&quot;;
    }))
        .pipe(replace(/\.less/g, &quot;.wxss&quot;)) // ä¿®æ”¹ less æ–‡ä»¶å†…éƒ¨çš„å¼•ç”¨ .less æ–‡ä»¶åç¼€ä¸º .wxss
        .pipe(dest(baseConfig.distPath));

    done();
})
</code></pre>
<p>è¿™é‡Œé‡åˆ°ä¸€ä¸ªå‘ï¼Œç”¨ l<em>ess-plugin-autoprefix @import</em> ä¼šæœ‰é—®é¢˜ï¼Œ<em>@import</em> è¯­å¥ä¼šè¢«åˆ é™¤ã€‚åé¢æ”¹ç”¨ <em>gulp-autoprefixer</em>ã€‚</p>
</li>
<li><p>å¤„ç† <em>js</em> æ–‡ä»¶ã€‚éœ€è¦è§£å†³çš„é—®é¢˜æœ‰ï¼š</p>
<ul>
<li><em>eslint</em> ä»£ç æ ¼å¼æ£€æŸ¥ï¼›</li>
<li>å¼€å‘ç¯å¢ƒä¸å‹ç¼©ä»£ç ï¼Œç”Ÿäº§ç¯å¢ƒå‹ç¼©ä»£ç ï¼›</li>
</ul>
<p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;compile:js&quot;, done =&gt; {
  // console.log(&quot;:::: compile:js&quot;);

  src(baseConfig.jsPath, {
      base: &quot;src&quot;
    })
    .pipe(changed(baseConfig.distPath))
    // .pipe(babel({ // å…ˆé€šè¿‡ babel è½¬åŒ–è¯­æ³•ç„¶åæ‰èƒ½è¿›è¡Œå‹ç¼© --&gt; å¾®ä¿¡å¼€å‘è€…å·¥å…·æœ‰ es6 è½¬ es5 åŠŸèƒ½
    //   presets: [&quot;@babel/env&quot;]
    // }))
    .pipe(eslint())
    // .pipe(eslint.format())
    .pipe(gulpif(!this.isDev, uglify()))
    .pipe(dest(baseConfig.distPath));

  done();
})
</code></pre>
<p>è¿™é‡ŒåŸæœ¬åŠ äº† <em>babel</em> è¿›è¡Œ <em>es6</em> åˆ° <em>es5</em> çš„è½¬åŒ–ï¼Œä½†æ˜¯å¾®ä¿¡å¼€å‘è€…å·¥å…·æœ¬èº«å°±æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œæ•…å»é™¤ã€‚å¦ä¸€ä¸ªå‘æ˜¯ï¼Œç”¨ <em>gulp-uglify</em> ä¸èƒ½è¿›è¡Œ <em>es6</em> ä»£ç çš„å‹ç¼©ï¼Œè¦ç”¨ <em>gulp-uglify-es</em> ã€‚</p>
</li>
<li><p>å¤„ç† <em>wxml</em> æ–‡ä»¶ã€‚éœ€è¦è§£å†³çš„é—®é¢˜æœ‰ï¼š</p>
<ul>
<li>å¼€å‘ç¯å¢ƒä¸å‹ç¼©ä»£ç ï¼Œç”Ÿäº§ç¯å¢ƒå‹ç¼©ä»£ç ï¼›</li>
</ul>
<p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;compile:wxml&quot;, done =&gt; {
  // console.log(&quot;:::: compile:wxml&quot;);

  src(baseConfig.wxmlPath, {
      base: &quot;src&quot;
    })
    .pipe(changed(baseConfig.distPath))
    .pipe(gulpif(!this.isDev, htmlmin({
      collapseWhitespace: true
    })))
    .pipe(dest(baseConfig.distPath));

  done();
})
</code></pre>
</li>
<li><p>å¤„ç† <em>json</em> æ–‡ä»¶ã€‚éœ€è¦è§£å†³çš„é—®é¢˜æœ‰ï¼š</p>
<ul>
<li>å¼€å‘ç¯å¢ƒä¸å‹ç¼©ä»£ç ï¼Œç”Ÿäº§ç¯å¢ƒå‹ç¼©ä»£ç ï¼›</li>
</ul>
<p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;compile:json&quot;, done =&gt; {
  // console.log(&quot;:::: compile:json&quot;);

  src(baseConfig.jsonPath, {
      base: &quot;src&quot;
    })
    .pipe(changed(baseConfig.distPath))
    .pipe(gulpif(!this.isDev, prettyData({
      type: &quot;minify&quot;,
      preserveComments: true,
      extensions: {
        &quot;json&quot;: &quot;json&quot;,
      }
    })))
    .pipe(dest(baseConfig.distPath));

  done();
})
</code></pre>
</li>
<li><p>å…¶ä»–æ‰€æœ‰æ–‡ä»¶ã€‚</p>
<p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;compile:other&quot;, done =&gt; {
      // console.log(&quot;:::: compile:other&quot;);

      src(baseConfig.otherPath, {
          base: &quot;src&quot;
        })
        .pipe(changed(baseConfig.distPath))
        .pipe(dest(baseConfig.distPath));

      done();
    })
</code></pre>
</li>
<li><p>å›¾ç‰‡å‹ç¼©ã€‚</p>
<p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;minify:image&quot;, async done =&gt; {
  // console.log(&quot;:::: minify:image&quot;);

  src(baseConfig.imagePath, {
      base: &quot;src&quot;
    })
    .pipe(imagemin([imagemin.optipng(), imagemin.gifsicle(), imagemin.jpegtran()]))
    .pipe(dest(baseConfig.distPath))

  done();
})
</code></pre>
</li>
<li><p>å¼€å‘ç¯å¢ƒå¼€å¯ç›‘æ§ <em>watch</em>ã€‚</p>
<p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;watch&quot;, done =&gt; {
  // console.log(&quot;:::: compile:other&quot;);

  watch(baseConfig.basePath, {
    base: &quot;src&quot;
  }, series(&quot;compile:less&quot;, &quot;compile:js&quot;, &quot;compile:wxml&quot;, &quot;compile:json&quot;, &quot;compile:other&quot;, &quot;minify:image&quot;))

  done();
})
</code></pre>
</li>
<li><p>æœ€åï¼Œå°†ä»»åŠ¡è¿›è¡Œ <em>id</em> ç»‘å®šå¤„ç†ï¼Œè¿˜æœ‰ä¸åŒç¯å¢ƒçš„åŒºåˆ†ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;default&quot;, parallel(&quot;compile:less&quot;, &quot;compile:js&quot;, &quot;compile:wxml&quot;, &quot;compile:json&quot;, &quot;compile:other&quot;, &quot;minify:image&quot;));
task(`dev-${id}`, series(&quot;default&quot;, &quot;watch&quot;));
task(`prod-${id}`, series(&quot;default&quot;));
</code></pre>
</li>
</ul>
<h4 id="gulp-å…¥å£æ–‡ä»¶å¤„ç†ï¼šï¼ˆgulpfile-js-æ–‡ä»¶ï¼‰"><a href="#gulp-å…¥å£æ–‡ä»¶å¤„ç†ï¼šï¼ˆgulpfile-js-æ–‡ä»¶ï¼‰" class="headerlink" title="gulp å…¥å£æ–‡ä»¶å¤„ç†ï¼šï¼ˆgulpfile.js æ–‡ä»¶ï¼‰"></a><em>gulp</em> å…¥å£æ–‡ä»¶å¤„ç†ï¼šï¼ˆ<em>gulpfile.js</em> æ–‡ä»¶ï¼‰</h4><p>ä¸»è¦æ˜¯å¯¹ä¸åŒç¯å¢ƒçš„åŒºåˆ†ï¼Œè¿˜æœ‰ <em>taskControler.js</em> å®šä¹‰çš„å„ä¸ªä»»åŠ¡è¿›è¡Œå¼•ç”¨ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">const {
  task,
  series
} = require(&quot;gulp&quot;);
const TaskControler = require(&quot;./gulpTask/taskControler&quot;);
// é¡¹ç›® ID
const id = require(&quot;./package.json&quot;).name || &quot;min-program&quot;;

new TaskControler(id);

/*---------- ç›¸å…³çš„ gulp ä»»åŠ¡ ----------*/

// dev å¼€å‘ç¯å¢ƒä»»åŠ¡
task(&quot;dev&quot;, series(`dev-${id}`));

// prod ç”Ÿäº§ç¯å¢ƒä»»åŠ¡
task(&quot;prod&quot;, series(`prod-${id}`));
</code></pre>
<p>æ¥ç€ï¼Œåªéœ€è¦æ‰§è¡Œ <code>npm run build:dev</code>æˆ– <code>npm run build:prod</code>ï¼Œç„¶åå°†ç”Ÿæˆçš„ <em>dist</em> ç›®å½•ä¸¢åˆ°å¾®ä¿¡å¼€å‘è€…å·¥å…·å³å¯ã€‚</p>
<h2 id="è·¯ç”±å°è£…"><a href="#è·¯ç”±å°è£…" class="headerlink" title="è·¯ç”±å°è£…"></a>è·¯ç”±å°è£…</h2><ul>
<li><p>è·¯ç”±è¡¨æ–‡ä»¶</p>
<pre><code class="javascript">/**
 * è·¯ç”±è·¯å¾„
 */
const routerPath = {
  index: &quot;/pages/index/index&quot;,
  detail: &quot;/pages/detail/detail&quot;,
}

module.exports = routerPath;
</code></pre>
</li>
<li><p>è·¯ç”±é€»è¾‘å¤„ç†</p>
<p>æœ€åä½¿ç”¨è·¯ç”±çš„æ–¹å¼ä¸ºï¼š</p>
<pre><code class="javascript">app.Router.push({
    path: &#39;detail&#39;,
    query: {
        name: &#39;Ertsul&#39;,
        age: 23
    }
})
</code></pre>
<p>éœ€è¦å¤„ç†çš„é—®é¢˜æœ‰ï¼šè·¯ç”±å‚æ•°è½¬åŒ–ä¸ºå°ç¨‹åºçš„æ ¼å¼ã€æœ‰å‚æ— å‚è·¯ç”±ã€‚</p>
<p>è·¯ç”±å‚æ•°è½¬åŒ–ä¸ºå°ç¨‹åºçš„æ ¼å¼ã€‚</p>
<pre><code class="javascript">/**
 * å¤„ç†è·¯ç”±å‚æ•°ï¼Œæ‹¼æ¥æˆå­—ç¬¦ä¸²å½¢å¼
 * @param {*} queryObj ï¼š è·¯ç”±å‚æ•°
 */
function dealQuery(queryObj) {
  let tempArr = [];
  for (let key in queryObj) {
    if (queryObj.hasOwnProperty(key)) {
      const value = queryObj[key];
      const item = `${key}=${value}`;
      tempArr.push(item);
    }
  }
  return &quot;?&quot; + tempArr.join(&quot;&amp;&quot;);
}
</code></pre>
<p>å°è£…ä¸€ä¸ªå¯¹è±¡ï¼Œæ·»åŠ  <em>push</em> å¯¹å¤–æš´éœ²çš„æ–¹æ³•ï¼Œæ·»åŠ å†…éƒ¨è·³è½¬çš„æ–¹æ³•ã€‚</p>
<pre><code class="javascript">let Router = {
  /**
   * 
   * @param {String} param0 : è·¯å¾„
   * @param {Object} param1 : å‚æ•°
   * @param {String} param2 : ç±»å‹ï¼ŒredirectTo/reLaunch/back/navigateTo
   */
  push({
    path = &quot;&quot;,
    query = {},
    type = &quot;navigateTo&quot;
  }) {
    if (!path) {
      return;
    }
    // è·å–å¯¹åº”çš„å°ç¨‹åºè·¯å¾„
    let url = routerPath[path] || routerPath[&#39;index&#39;];
    let params = &quot;&quot;;
    // å¤„ç† query 
    if (Object.keys(query) &amp;&amp; Object.prototype.toString.call(query) == &#39;[object Object]&#39;) {
      params = dealQuery(query);
    } else {
      console.error(&quot;è·¯ç”±å‚æ•°ç±»å‹é”™è¯¯ï¼&quot;);
      return;
    }
    url += params;
    this.to(url, type); // æ‰§è¡Œè·³è½¬
  },
  /**
   * 
   * @param {*} url : è·¯å¾„ + å‚æ•°
   * @param {*} type : ç±»å‹ï¼ŒredirectTo/reLaunch/back/navigateTo
   */
  to(url, type = &quot;&quot;) {
    switch (type) {
      case &quot;redirectTo&quot;:
        wx.redirectTo({
          url
        });
        break;
      case &quot;reLaunch&quot;:
        wx.reLaunch({
          url
        });
        break;
      case &quot;back&quot;:
        wx.navigateBack({
          delta: 1
        });
        break;
      case &quot;navigateTo&quot;:
        wx.navigateTo({
          url
        });
        break;
    }
  }
}
</code></pre>
<p>æœ€åå°† <em>Router</em> å¯¹è±¡æŒ‚è½½åˆ° <em>app</em> å¯¹è±¡ã€‚</p>
<pre><code class="javascript">const Router = require(&quot;./router/router&quot;);

//app.js
App({
  Router,
  ...
})
</code></pre>
</li>
</ul>
<h2 id="http-å°è£…åŠå…¶æ¥å£ç»Ÿä¸€ç®¡ç†"><a href="#http-å°è£…åŠå…¶æ¥å£ç»Ÿä¸€ç®¡ç†" class="headerlink" title="http å°è£…åŠå…¶æ¥å£ç»Ÿä¸€ç®¡ç†"></a>http å°è£…åŠå…¶æ¥å£ç»Ÿä¸€ç®¡ç†</h2><p><em>http</em> å°è£…ï¼Œå¯ä»¥æ·»åŠ ä¸€äº›è¯·æ±‚å…¬å…±å‚æ•°ç­‰ã€‚æ ¸å¿ƒä»£ç ä¸ºï¼š</p>
<pre><code class="javascript">function request({
  url = &#39;&#39;,
  data = {},
  method = &#39;POST&#39;,
  header = {
    &#39;content-type&#39;: &#39;application/json&#39; // é»˜è®¤å€¼
  }
}) {
  return new Promise(async (resolve, reject) =&gt; {
    wx.request({
      url,
      data,
      method,
      header,
      success(res) {
        resolve(res);
      },
      fail(err) {
        reject(err);
      }
    })
  })
}
</code></pre>
<p>æ¥å£ç»Ÿä¸€ç®¡ç†ã€‚æ¥å£ç»Ÿä¸€ç®¡ç†æœ‰åˆ©äºåæœŸç»´æŠ¤ã€‚</p>
<pre><code class="javascript">const request = require(&#39;../http/request&#39;);
const baseConfig = require(&#39;../http/baseConfig&#39;);

// get ä¾‹å­
const getList = request({
  method: &#39;GET&#39;,
  url: baseConfig.baseUrl + &#39;/list?page=1&amp;size=10&#39;,
})

// post ä¾‹å­
const updateInfo = request({
  method: &#39;POST&#39;,
  url: baseConfig.baseUrl + &#39;/updateInfo&#39;,
  data: {
    name: &#39;Ertsul&#39;,
    age: 23
  }
})

module.exports = {
  getList,
  updateInfo
}
</code></pre>
]]></content>
      <categories>
        <category>minapp</category>
      </categories>
      <tags>
        <tag>minapp</tag>
      </tags>
  </entry>
  <entry>
    <title>Git æ“ä½œï¼ˆè¡¥å……ï¼‰</title>
    <url>/2019/10/12/Git-%E6%93%8D%E4%BD%9C%EF%BC%88%E8%A1%A5%E5%85%85%EF%BC%89/</url>
    <content><![CDATA[<h2 id="cherry-pick"><a href="#cherry-pick" class="headerlink" title="cherry-pick"></a>cherry-pick</h2><p><em>cherry-pick</em> å¯ä»¥å°†åˆ†æ”¯ <em>B</em> çš„ä»»ä½•<strong>ä¸€ä¸ª</strong> <em>commit</em> åˆå¹¶åˆ°åˆ†æ”¯ <em>A</em>ã€‚</p>
<p><strong>æƒ…æ™¯</strong>ï¼š<em>dev</em> åˆ†æ”¯æœ‰ä¸¤ä¸ª <em>commit</em>ï¼Œåˆ†åˆ«æ˜¯ï¼šåˆ›å»º <em>b.txt</em> æ–‡ä»¶ <em>commitB</em>ã€åˆ›å»º <em>c.txt</em> æ–‡ä»¶ <em>commitC</em>ã€‚ç°åœ¨æˆ‘ä»¬åªæƒ³è¦åˆå¹¶ <em>commitAB åˆ° </em>master<em> åˆ†æ”¯ã€‚ä¸‹é¢æ˜¯ </em>master<em> å’Œ </em>dev* ä¸¤ä¸ªåˆ†æ”¯çš„æƒ…å†µï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-049b7c95c62a3131.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-d46ecad032fee3ba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>å¦‚æœç›´æ¥ç”¨ <em>git merge</em> ä¼šå°† <em>commitC</em> ä¹Ÿåˆå¹¶åˆ° <em>master</em>ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚è¿™æ—¶å€™ï¼Œ<em>cherry-pick</em> å°±æ´¾ä¸Šç”¨åœºäº†ã€‚ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<ul>
<li>åˆ‡æ¢åˆ°ç›®æ ‡åˆ†æ”¯ã€‚</li>
<li><em>cherry-pick</em> å¾…åˆå¹¶çš„ <em>commitID</em>ã€‚</li>
</ul>
<p>ä¸Šé¢çš„æƒ…æ™¯ï¼Œåªéœ€è¦ï¼š</p>
<pre><code class="powershell">git checkout master
git cherry-pick 8f2aa26
</code></pre>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-4c396adb0bb8588a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>ä¸è¿‡ï¼Œ<em>cherry-pick</em> åªèƒ½åˆå¹¶å•ä¸ªæŒ‡å®šçš„ <em>commit</em>ã€‚â˜ <a href="http://git-scm.com/docs/git-cherry-pick" target="_blank" rel="noopener">cherry-pick æ›´å¤šæ“ä½œ</a></p>
<h2 id="rebase"><a href="#rebase" class="headerlink" title="rebase"></a>rebase</h2><p><em>rebaseå˜åŸº</em> æ˜¯ <em>Git</em> ä¸­æ•´åˆæ¥è‡ªä¸åŒåˆ†æ”¯ä¿®æ”¹çš„ä¸€ç§æ“ä½œã€‚ï¼ˆå¦ä¸€ç§æ˜¯ <em>merge</em>ï¼‰</p>
<p><strong>æƒ…æ™¯1</strong>ï¼š<em>dev</em> åˆ†æ”¯æœ‰ä¸¤ä¸ª <em>commit</em> ï¼Œåˆ†åˆ«æ˜¯ï¼šåˆ›å»º <em>d.txt</em> æ–‡ä»¶ <em>commitD</em>ã€åˆ›å»º <em>e.txt</em> æ–‡ä»¶ <em>commitE</em>ã€‚ç°åœ¨æˆ‘ä»¬æƒ³è¦å°† <em>dev</em> åˆ†æ”¯çš„æ‰€æœ‰ <em>commit</em> åˆå¹¶åˆ° <em>master</em>ã€‚ä¸‹é¢æ˜¯ <em>dev</em> åˆ†æ”¯çš„æƒ…å†µï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-293e36b78fb47d5a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>æƒ³è¦é€šè¿‡ <em>rebase</em> å˜åŸºå°† <em>commit</em> åˆå¹¶åˆ° <em>master</em>ï¼Œåªéœ€è¦ï¼š</p>
<ul>
<li>å°† <em>dev</em> åˆ†æ”¯å˜åŸºåˆ° <em>master</em> åˆ†æ”¯ã€‚</li>
<li>åˆ‡æ¢åˆ° <em>master</em> åˆ†æ”¯ã€‚</li>
<li>æ‰§è¡Œ <em>merge</em> æ“ä½œã€‚</li>
</ul>
<pre><code class="powershell">git rebase master
git checkout master 
git merge --no-ff dev
</code></pre>
<p>æœ€åç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-0417d63fc36aef1f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1570868576457.png"></p>
<p>é€šè¿‡ <em>rebase</em> åˆå¹¶åˆ†æ”¯è·Ÿ <em>merge</em> åˆå¹¶æ˜¯ä¸ä¸€æ ·çš„ã€‚â˜ <a href="[http://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%8F%98%E5%9F%BA](http://git-scm.com/book/zh/v2/Git-åˆ†æ”¯-å˜åŸº">ç‚¹å‡»æŸ¥çœ‹åŒºåˆ«</a>)</p>
<p><strong>æƒ…æ™¯2</strong>ï¼š<em>dev</em> åˆ†æ”¯ä¸Šæœ‰å››ä¸ª <em>commit</em>ï¼Œé¡ºåºåˆ†åˆ«æ˜¯ï¼šåˆ›å»º <em>f.txt</em> æ–‡ä»¶ <em>commitF</em>ã€å¢åŠ  <em>f.txt</em> æ–‡ä»¶å†…å®¹ <em>commitF1</em>ã€åˆ›å»º <em>g.txt</em> æ–‡ä»¶ <em>commitG</em>ã€å¢åŠ  <em>g.txt</em> æ–‡ä»¶å†…å®¹ <em>commitG1</em>ã€‚ç°åœ¨åªæƒ³è¦å°† <em>dev</em> åˆ†æ”¯ä¸Šå…³äºæ–‡ä»¶ <em>f.txt</em> çš„æ‰€æœ‰æ“ä½œåˆå¹¶åˆ° <em>master</em> åˆ†æ”¯ã€‚ä¸‹é¢æ˜¯ <em>dev</em> åˆ†æ”¯çš„æƒ…å†µï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-b9f954b059404b15.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>ç°åœ¨åªæƒ³è¦å°† <em>dev</em> åˆ†æ”¯ä¸Šå…³äºæ–‡ä»¶ <em>f.txt</em> çš„æ‰€æœ‰æ“ä½œåˆå¹¶åˆ° <em>master</em> åˆ†æ”¯ï¼Œéœ€è¦ï¼š</p>
<ul>
<li>ä»¥ <em>f.txt</em> çš„æœ€åä¸€ä¸ªä¿®æ”¹çš„ <em>commitID</em> æ–°å»ºä¸€ä¸ªåˆ†æ”¯ <em>dev-temp</em>ã€‚</li>
<li>å°†ä»¥ <em>dev-temp</em> åˆ†æ”¯ä¸Šå…³äº <em>f.txt</em> çš„ç¬¬ä¸€ä¸ªä¿®æ”¹çš„ <em>commitID</em> <em>rabase</em> å˜åŸºåˆ° <em>master</em> åˆ†æ”¯ã€‚</li>
<li>åˆ‡æ¢åˆ° <em>master</em> åˆ†æ”¯ã€‚</li>
<li><em>merge</em> <em>dev-temp</em> åˆ†æ”¯åˆ° <em>master</em> åˆ†æ”¯ã€‚</li>
</ul>
<pre><code class="powershell">git checkout -b dev-temp 884c858
git rebase --onto master 3b0bfd7^
git checkout master 
git merge --no-ff dev-temp
</code></pre>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-e52de0c710b4437c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><strong>æƒ…æ™¯3</strong>ï¼š<em>dev</em> åˆ†æ”¯ä¸Šæœ‰å››ä¸ª <em>commit</em>ï¼Œé¡ºåºåˆ†åˆ«æ˜¯ï¼šåˆ›å»º <em>i.txt</em> æ–‡ä»¶ <em>commitI</em>ã€å¢åŠ  <em>i.txt</em> æ–‡ä»¶å†…å®¹ <em>commitI1</em>ã€åˆ›å»º <em>j.txt</em> æ–‡ä»¶ <em>commitJ</em>ã€å¢åŠ  <em>j.txt</em> æ–‡ä»¶å†…å®¹ <em>commitJ1</em>ã€‚ç°åœ¨åªæƒ³è¦å°† <em>dev</em> åˆ†æ”¯ä¸Šå…³äºæ–‡ä»¶ <em>j.txt</em> çš„æ‰€æœ‰æ“ä½œåˆå¹¶åˆ° <em>master</em> åˆ†æ”¯ã€‚ä¸‹é¢æ˜¯ <em>dev</em> åˆ†æ”¯çš„æƒ…å†µï¼šï¼ˆå…¶å®è·Ÿä¸Šé¢çš„æƒ…å†µå’Œæ“ä½œä¸€æ ·ï¼‰</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-59f2f8f60f66ef93.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>ç°åœ¨åªæƒ³è¦å°† <em>dev</em> åˆ†æ”¯ä¸Šå…³äºæ–‡ä»¶ <em>j.txt</em> çš„æ‰€æœ‰æ“ä½œåˆå¹¶åˆ° <em>master</em> åˆ†æ”¯ï¼Œéœ€è¦ï¼š</p>
<ul>
<li>ä»¥ <em>j.txt</em> çš„æœ€åä¸€ä¸ªä¿®æ”¹çš„ <em>commitID</em> æ–°å»ºä¸€ä¸ªåˆ†æ”¯ <em>dev-temp1</em>ã€‚</li>
<li>å°†ä»¥ <em>dev-temp1</em> åˆ†æ”¯ä¸Šå…³äº <em>j.txt</em> çš„ç¬¬ä¸€ä¸ªä¿®æ”¹çš„ <em>commitID</em> <em>rabase</em> å˜åŸºåˆ° <em>master</em> åˆ†æ”¯ã€‚</li>
<li>åˆ‡æ¢åˆ° <em>master</em> åˆ†æ”¯ã€‚</li>
<li><em>merge</em> <em>dev-temp1</em> åˆ†æ”¯åˆ° <em>master</em> åˆ†æ”¯ã€‚</li>
</ul>
<pre><code class="powershell">git checkout -b dev-temp1 54ea4bd
git rebase --onto master e31249b^
git checkout master 
git merge --no-ff dev-temp1
</code></pre>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-8507dd6818db90d9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><a href="[http://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%8F%98%E5%9F%BA](http://git-scm.com/book/zh/v2/Git-åˆ†æ”¯-å˜åŸº">rebaseæ›´å¤šæ“ä½œ</a>)</p>
<h2 id="åˆå¹¶å¤šä¸ª-commit-ä¸ºä¸€ä¸ª-commit"><a href="#åˆå¹¶å¤šä¸ª-commit-ä¸ºä¸€ä¸ª-commit" class="headerlink" title="åˆå¹¶å¤šä¸ª commit ä¸ºä¸€ä¸ª commit"></a>åˆå¹¶å¤šä¸ª commit ä¸ºä¸€ä¸ª commit</h2><p>åˆå¹¶å¤šä¸ª <em>commit</em> ä¸ºä¸€ä¸ª <em>commit</em> åŒæ ·éœ€è¦ <em>rebase</em>ã€‚</p>
<p>å¦‚ä¸‹å›¾ï¼šè¦å°†æœ€æ–°çš„ä¸¤ä¸ª <em>commit</em> åˆå¹¶ä¸ºä¸€ä¸ª <em>commit</em>ã€‚å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p>
<ul>
<li><p>æ‰¾åˆ°è¿™ä¸‰ä¸ª <em>commit</em> çš„å‰ä¸€ä¸ª <em>commit</em> çš„ <em>commitID</em>ï¼Œæ‰§è¡Œ <code>git rebase -i commitID</code></p>
</li>
<li><p>è¿™æ—¶å€™ä¼šè¿›å…¥ <em>vi</em> ç¼–è¾‘ã€‚</p>
<ul>
<li><code>pick</code> çš„æ„æ€æ˜¯è¦ä¼šæ‰§è¡Œè¿™ä¸ª <em>commit</em></li>
<li><code>squash</code> çš„æ„æ€æ˜¯è¿™ä¸ª commit ä¼šè¢«åˆå¹¶åˆ°å‰ä¸€ä¸ª <em>commit</em></li>
</ul>
</li>
<li><p>ä¹‹åä¼šè¿›å…¥ <em>vi</em> ç¼–è¾‘ <em>commit</em> ä¿¡æ¯ã€‚åªéœ€è¦å°†åŸå…ˆçš„ <em>commit</em> ä¿¡æ¯æ³¨é‡Šï¼Œåœ¨é¡¶éƒ¨æ·»åŠ æ–°çš„ <em>commit</em> ä¿¡æ¯ã€‚</p>
</li>
<li><p>å®Œæˆã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-a8a97ecd1b5c4901.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-5528059b7ca9273d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-d173423d001b4e65.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-d7e5d016bfa4b80b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-cb502bcc195b4fba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
</li>
</ul>
<h2 id="åˆ é™¤åˆ†æ”¯"><a href="#åˆ é™¤åˆ†æ”¯" class="headerlink" title="åˆ é™¤åˆ†æ”¯"></a>åˆ é™¤åˆ†æ”¯</h2><p>åˆ é™¤åˆ†æ”¯åŒ…æ‹¬åˆ é™¤æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯ï¼š</p>
<ul>
<li>åˆ é™¤æœ¬åœ°åˆ†æ”¯<ul>
<li>å¦‚æœ¬åœ°åˆ†æ”¯ä¸æ˜¯æ‰“å¼€çŠ¶æ€ï¼Œåˆ™ï¼š<code>git branch -d branchName</code></li>
<li>å¦‚æœ¬åœ°åˆ†æ”¯æ˜¯æ‰“å¼€çŠ¶æ€ï¼Œåˆ™ï¼š<code>git branch -D branchName</code></li>
</ul>
</li>
<li>åˆ é™¤è¿œç¨‹åˆ†æ”¯<ul>
<li><code>git push origin --delete branchName</code></li>
</ul>
</li>
</ul>
<h2 id="æ¢å¤åˆ†æ”¯"><a href="#æ¢å¤åˆ†æ”¯" class="headerlink" title="æ¢å¤åˆ†æ”¯"></a>æ¢å¤åˆ†æ”¯</h2><p>æ¢å¤åˆ†æ”¯ï¼Œæˆ‘ä»¬åªéœ€è¦ä»¥ä¹‹å‰åˆ†æ”¯çš„ <em>commitID</em> æ–°å¼€ä¸€ä¸ªåˆ†æ”¯å³å¯ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-a2e8638e3cc8a3ac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>å¦‚æœä¸è®°å¾— <em>commitID</em>ï¼Œå¯ä»¥é€šè¿‡ <em>git reflog</em> è¿›è¡ŒæŸ¥çœ‹ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-ba394e5b699ff0f0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1570871432663.png"></p>
<h2 id="æ’¤é”€æœ¬åœ°ä¿®æ”¹"><a href="#æ’¤é”€æœ¬åœ°ä¿®æ”¹" class="headerlink" title="æ’¤é”€æœ¬åœ°ä¿®æ”¹"></a>æ’¤é”€æœ¬åœ°ä¿®æ”¹</h2><ul>
<li><p>æ’¤é”€æŒ‡å®šæœ¬åœ°æ–‡ä»¶çš„ä¿®æ”¹ï¼ˆæœªæäº¤çŠ¶æ€ï¼‰ï¼š<code>git checkout -- fileName</code></p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-75f7a0a74ac422d1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
</li>
<li><p>æ’¤é”€æœ¬åœ°çš„æ‰€æœ‰ä¿®æ”¹ï¼ˆæœªæäº¤çŠ¶æ€ï¼‰ï¼š<code>git reset --hard</code></p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-0359a8aee6d9ae94.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
</li>
</ul>
<h2 id="å…¶ä»–åŸºæœ¬æ“ä½œ"><a href="#å…¶ä»–åŸºæœ¬æ“ä½œ" class="headerlink" title="å…¶ä»–åŸºæœ¬æ“ä½œ"></a>å…¶ä»–åŸºæœ¬æ“ä½œ</h2><ul>
<li>ç”Ÿæˆæœ¬åœ°çš„ <em>key</em>ï¼Œå¹¶æ·»åŠ åˆ°è¿œç¨‹ä»“åº“</li>
</ul>
<pre><code>ssh-keygen -t rsa
</code></pre><ul>
<li>åˆå§‹åŒ–æœ¬åœ°ç›®å½•</li>
</ul>
<pre><code>git init
</code></pre><ul>
<li>æ·»åŠ åˆ°æœ¬åœ°ä»“åº“</li>
</ul>
<pre><code>git add filename
</code></pre><ul>
<li>æäº¤åˆ°ä»“åº“ï¼ˆ<em>git</em> æäº¤çš„æ˜¯ä¿®æ”¹ï¼‰</li>
</ul>
<pre><code>git commit -m &quot;description&quot;
</code></pre><ul>
<li>æŸ¥çœ‹ä»“åº“çŠ¶æ€</li>
</ul>
<pre><code>git status
</code></pre><ul>
<li>æŸ¥çœ‹ä¸åŒç‚¹</li>
</ul>
<pre><code>git diff filename
</code></pre><ul>
<li>ç‰ˆæœ¬å›é€€</li>
</ul>
<pre><code>git reset --hard
</code></pre><ul>
<li>ç¬¬ä¸€åˆ†æ”¯ <em>master</em> åˆ›å»ºåˆ†æ”¯ <em>v1</em> ï¼ˆ<em>HEAD</em> æŒ‡å‘å½“å‰åˆ†æ”¯ï¼‰</li>
</ul>
<pre><code>// åˆ›å»ºå¹¶æŒ‡å‘æ–°åˆ†æ”¯
git checkout -b v1 
// åˆ†æ­¥æ‰§è¡Œ
git branch v1
git checkouut v1
</code></pre><ul>
<li>åˆå¹¶åˆ°å½“å‰åˆ†æ”¯</li>
</ul>
<pre><code>git merge v1
</code></pre><ul>
<li>åˆ é™¤æŒ‡å®šåˆ†æ”¯</li>
</ul>
<pre><code>git branch -d v1
</code></pre><ul>
<li>æŒ‡å®šåˆ†æ”¯å°†è¿œç¨‹ä»“åº“çš„ä»£ç æ‹‰åˆ°æœ¬åœ°</li>
</ul>
<pre><code>git clone gitAddress -b branchName
</code></pre><ul>
<li>å°†æœ¬åœ°çš„ä»£ç æäº¤åˆ°è¿œç¨‹ä»“åº“</li>
</ul>
<pre><code>git pull    //è·å–æœ€æ–°çš„æ›´æ”¹
git add modefied_filename
git commit -m &quot;description&quot;
git push  // æ¨é€
</code></pre><ul>
<li>å†²çªè§£å†³<br>å¯ä»¥ç”¨ä¸Šé¢çš„æ–¹æ³•è§£å†³å°±è§£å†³ï¼Œä¸è¡Œçš„è¯å°±ç”¨ä¸‹é¢çš„æ–¹æ³•ï¼š<ul>
<li>ç”¨è¿œç¨‹ä»“åº“çš„ä»£ç å®Œå…¨è¦†ç›–æœ¬åœ°ä»£ç ã€‚</li>
</ul>
</li>
</ul>
<pre><code>git reset --hard // ç‰ˆæœ¬å›é€€
git pull

</code></pre><ul>
<li>ä¿®æ”¹ commit æäº¤çš„å†…å®¹</li>
</ul>
<pre><code>git commit --amend

</code></pre><ul>
<li>æ‰“å° log æ•°é‡</li>
</ul>
<pre><code>git log -p -3

</code></pre><ul>
<li>æ–‡ä»¶è¢«æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œæ’¤é”€è¯¥æ–‡ä»¶åˆ°å·¥ä½œç›®å½•</li>
</ul>
<pre><code>git reset HEAD fliename

</code></pre><ul>
<li>å·¥ä½œç›®çš„åˆ é™¤æ–‡ä»¶åï¼Œè¿˜æœ‰åœ¨æš‚å­˜åŒºä¸­åˆ é™¤è¯¥æ–‡ä»¶</li>
</ul>
<pre><code>rm filename
git rm filename

</code></pre><ul>
<li>æ’¤é”€å¯¹å½“å‰æ–‡ä»¶çš„ä¿®æ”¹ï¼Œæ¢å¤åˆ°ä¸Šä¸€æ¬¡å¿«ç…§çš„çŠ¶æ€</li>
</ul>
<pre><code>git checkout -- filename

</code></pre><ul>
<li><em>HEAD</em> æŒ‡é’ˆæŒ‡å‘å½“å‰çš„åˆ†æ”¯ï¼Œæäº¤åéƒ½ä¼šå¿«è¿›ï¼ˆ<em>fast-forward</em> ï¼šæŒ‡é’ˆå³ç§»ï¼‰ã€‚</li>
<li><em>rebase</em> åˆå¹¶åˆ†æ”¯<br>å˜åŸºæ˜¯å°†ä¸€ç³»åˆ—æäº¤æŒ‰ç…§åŸæœ‰æ¬¡åºä¾æ¬¡åº”ç”¨åˆ°å¦ä¸€åˆ†æ”¯ä¸Šï¼Œè€Œåˆå¹¶æ˜¯æŠŠæœ€ç»ˆç»“æœåˆåœ¨ä¸€èµ·ã€‚ä½¿å¾—æäº¤å†å²æ›´åŠ æ•´æ´ã€‚ ä½ åœ¨æŸ¥çœ‹ä¸€ä¸ªç»è¿‡å˜åŸºçš„åˆ†æ”¯çš„å†å²è®°å½•æ—¶ä¼šå‘ç°ï¼Œå°½ç®¡å®é™…çš„å¼€å‘å·¥ä½œæ˜¯å¹¶è¡Œçš„ï¼Œä½†å®ƒä»¬çœ‹ä¸Šå»å°±åƒæ˜¯ä¸²è¡Œçš„ä¸€æ ·ï¼Œæäº¤å†å²æ˜¯ä¸€æ¡ç›´çº¿æ²¡æœ‰åˆ†å‰ã€‚</li>
</ul>
<pre><code>git checkout dev
......ä¿®æ”¹......
git add filename
git commit -m &quot;......&quot;
git rebase master
git checkout master
git merge dev

</code></pre>]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Git æ“ä½œ</title>
    <url>/2019/10/12/Git-%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<p>æƒ³å¿…æ¯ä¸ªå¼€å‘è€…å¯¹Gitå¹¶ä¸é™Œç”Ÿï¼Œå…ˆæ¥çœ‹çœ‹å®˜æ–¹å¯¹äºGitçš„å®šä¹‰ï¼š</p>
<blockquote>
<p>Gitæ˜¯ä¸€ä¸ªå…è´¹å’Œå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ—¨åœ¨å¿«é€Ÿå’Œæœ‰æ•ˆç‡åœ°å¤„ç†ä»å¤§åˆ°å°çš„é¡¹ç›®ã€‚</p>
</blockquote>
<h4 id="å®‰è£…-Git-å’ŒæŸ¥çœ‹-Git-ç‰ˆæœ¬"><a href="#å®‰è£…-Git-å’ŒæŸ¥çœ‹-Git-ç‰ˆæœ¬" class="headerlink" title="å®‰è£… Git å’ŒæŸ¥çœ‹ Git ç‰ˆæœ¬"></a>å®‰è£… Git å’ŒæŸ¥çœ‹ Git ç‰ˆæœ¬</h4><ul>
<li>å®‰è£…ï¼ˆä»…è¯´æ˜åœ¨ <em>Linux</em> ç³»ç»Ÿä¸‹çš„å®‰è£…ï¼Œè‹¥æ‚¨æ˜¯windowsç³»ç»Ÿï¼Œç›´æ¥å®˜ç½‘ä¸‹è½½å®‰è£…å°±è¡Œ~ï¼‰</li>
</ul>
<pre><code>sudo apt install git
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-1b4d4c825d3e9cf1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></p>
<p>ç”±äºæˆ‘ä¹‹å‰å·²ç»å®‰è£…è¿‡äº†ï¼Œæ‰€ä»¥è¿™é‡Œå‡çº§ç­‰éƒ½æ˜¯ <em>0</em>ã€‚</p>
<ul>
<li>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</li>
</ul>
<pre><code>git
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-b029bb624636ebb1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></p>
<p>è¾“å…¥gitå‘½ä»¤åï¼Œå‡ºç°ä¸€ç³»åˆ—å…³äºGitçš„å‚æ•°å’Œå‘½ä»¤ç­‰ï¼Œè¯´æ˜å®‰è£…æˆåŠŸäº†ã€‚</p>
<ul>
<li>æŸ¥çœ‹ <em>Git</em> ç‰ˆæœ¬</li>
</ul>
<pre><code>git --version
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-d93c79710b9cfdfd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></p>
<h4 id="åˆ›å»º-Git-ä»“åº“"><a href="#åˆ›å»º-Git-ä»“åº“" class="headerlink" title="åˆ›å»º Git ä»“åº“"></a>åˆ›å»º Git ä»“åº“</h4><p>æ‰€è°“ <em>Git</em> ä»“åº“ï¼ˆ<em>repository</em>ï¼‰ï¼Œä¹Ÿå«ç‰ˆæœ¬åº“ã€‚ç®€å•ç†è§£ï¼Œå°±æ˜¯å¯ä»¥è¢« <em>Git</em> ç®¡ç†ï¼ˆä¿®æ”¹ï¼Œåˆ é™¤ç­‰ï¼‰çš„ç›®å½•ã€‚</p>
<ul>
<li>æ–°å»ºæœ¬åœ°ç›®å½•ï¼Œå¹¶åˆ‡æ¢åˆ°æ–°ç›®å½•</li>
</ul>
<pre><code>mkdir gitFile
cd gitFile
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-86edbf8888ce2c68.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></p>
<ul>
<li>å°†æœ¬åœ°ç›®å½•åˆå§‹åŒ–ä¸º <em>Git</em> ä»“åº“</li>
</ul>
<pre><code>git init
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-c56d293f662bf4ac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></p>
<ul>
<li>æŸ¥çœ‹ <em>Git</em> ä»“åº“çš„ç›®å½•</li>
</ul>
<pre><code>ls -al
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-9af646e821d36e81.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"><br>æ‚¨ä¼šå‘ç°ï¼Œè¿™é‡Œå¤šäº†ä¸€ä¸ª <em>.git</em> çš„ç›®å½•ï¼Œä½œç”¨æ˜¯ <em>Git</em> æ¥è·Ÿè¸ªç®¡ç† <em>Git</em> ä»“åº“çš„ï¼›æ³¨æ„ï¼Œå¦‚æœè¾“å…¥çš„å‘½ä»¤æ˜¯ <em>ls</em> æ˜¯ä¸ä¼šçœ‹åˆ° <em>.git</em>ï¼Œå› ä¸ºè¿™ä¸ªç›®å½•é»˜è®¤æ˜¯éšè—çš„ã€‚</p>
<h4 id="å°†æ–‡ä»¶æ”¾åˆ°Gitä»“åº“ï¼ˆä¸€å®šè¦åœ¨-git-init-çš„ç›®å½•ï¼å­ç›®å½•ä¸‹ï¼‰"><a href="#å°†æ–‡ä»¶æ”¾åˆ°Gitä»“åº“ï¼ˆä¸€å®šè¦åœ¨-git-init-çš„ç›®å½•ï¼å­ç›®å½•ä¸‹ï¼‰" class="headerlink" title="å°†æ–‡ä»¶æ”¾åˆ°Gitä»“åº“ï¼ˆä¸€å®šè¦åœ¨ git init çš„ç›®å½•ï¼å­ç›®å½•ä¸‹ï¼‰"></a>å°†æ–‡ä»¶æ”¾åˆ°Gitä»“åº“ï¼ˆä¸€å®šè¦åœ¨ <em>git init</em> çš„ç›®å½•ï¼å­ç›®å½•ä¸‹ï¼‰</h4><ul>
<li>æ–°å»º <em>test.txt</em> æ–‡ä»¶å¹¶è¾“å…¥å†…å®¹</li>
</ul>
<pre><code>cat &gt; test.txt
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-838f0f3715084789.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></p>
<ul>
<li>å°† <em>test.txt</em> æ–‡ä»¶ä¸Šä¼ åˆ°Gitä»“åº“</li>
</ul>
<pre><code>git add test.txt 
</code></pre><ul>
<li>å‘ŠçŸ¥ <em>Git</em> ä»“åº“æäº¤äº†æ–°æ–‡ä»¶ï¼Œå¹¶æ·»åŠ æ ‡æ³¨ä¿¡æ¯</li>
</ul>
<pre><code>git commit -m &quot;My first git.&quot;

</code></pre><p><em>-m</em> åé¢æ˜¯ <em>commit</em> ä¿¡æ¯ã€‚<br>å¾ˆç®€å•å§ï½åªéœ€è¦ä¸¤æ­¥ï¼Œå°±å¯ä»¥å°†æ–‡ä»¶ä¸Šä¼ åˆ°Gitä»“åº“ã€‚</p>
<ul>
<li>æŸ¥çœ‹ <em>Git</em> ä»“åº“çš„å½“å‰çŠ¶æ€</li>
</ul>
<pre><code>git status

</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-6e47af6a618c047d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"><br>å€˜è‹¥ä¿®æ”¹äº†æ–‡ä»¶ï¼Œä½†æ²¡æœ‰æäº¤ï¼Œç»“æœæ˜¯è¿™æ ·çš„ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-0910cc6291dbadfc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></p>
<p>æäº¤åçš„ç»“æœæ˜¯è¿™æ ·çš„ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-07671c9d269aa1b8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></p>
<ul>
<li>æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹å†…å®¹<br>å¦‚æœä¿®æ”¹äº†æ–‡ä»¶ï¼Œä½†è¿˜æ²¡æäº¤ï¼Œå¯ä»¥å¯¹æ¯”æ–‡ä»¶å‰åçš„ä¿®æ”¹å†…å®¹ã€‚</li>
</ul>
<pre><code>git diff test.txt

</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-3373c8bc3a0b6df4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></p>
<p>å¯çŸ¥ï¼Œæ–‡ä»¶ <em>test.txt</em> æ·»åŠ äº†æ–°çš„ä¸€è¡Œ <em>This is the third line.</em></p>
<h4 id="åˆ›å»ºGitHubè´¦å·"><a href="#åˆ›å»ºGitHubè´¦å·" class="headerlink" title="åˆ›å»ºGitHubè´¦å·"></a>åˆ›å»ºGitHubè´¦å·</h4><p>å¦‚æœæ²¡æœ‰ <em>GitHub</em> è´¦å·ï¼Œå¾—å…ˆåˆ°<a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>å®˜ç½‘æ³¨å†Œè´¦å·ã€‚æ³¨å†Œç™»å½•ä¸ºå¸¸è§„æ“ä½œï¼Œä¸å¤šè¯´ã€‚</p>
<h4 id="SSHè®¾ç½®"><a href="#SSHè®¾ç½®" class="headerlink" title="SSHè®¾ç½®"></a>SSHè®¾ç½®</h4><p>ç”±äºGitå’ŒGitHubä¹‹é—´æ˜¯é€šè¿‡SSHåŠ å¯†ä¼ è¾“çš„ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡ŒSSHè®¾ç½®ã€‚</p>
<ul>
<li>åˆ›å»ºSSH Keyï¼ˆç”¨æˆ·ä¸»ç›®å½•ï¼‰</li>
</ul>
<pre><code>ssh-keygen -t rsa -C &quot;ä½ çš„é‚®ç®±&quot;

</code></pre><p>æ¥ä¸‹æ¥å›è½¦é»˜è®¤å°±å¥½äº†ã€‚</p>
<ul>
<li>åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹æ‰¾åˆ° <em>.ssh</em> ç›®å½•</li>
</ul>
<pre><code>ls -al | find -name &quot;*.ssh&quot;

</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-0d28f60589a3fe46.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></p>
<ul>
<li>å‘ç°å­˜åœ¨ <em>.ssh</em> ç›®å½•ï¼Œåˆ‡æ¢åˆ° <em>.ssh</em> ç›®å½•ï¼Œå‘ç°æ–‡ä»¶ä¸­ç§˜é’¥æœ‰ <em>id_rsa</em>ï¼ˆç§é’¥ï¼‰å’Œ <em>id_rsa.pub</em>ï¼ˆå…¬é’¥ï¼‰ï¼Œå…¶ä¸­æ˜¯ <em>id_rsa.pub</em> æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„<br><img src="http://upload-images.jianshu.io/upload_images/659084-b56f8d1860d46e2c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></li>
<li>æ‰“å¼€ <em>ip_rsa.pub</em> ï¼Œå¹¶å¤åˆ¶</li>
</ul>
<pre><code>cat ip_rsa.pub

</code></pre><h4 id="åœ¨-GitHub-ä¸­æ·»åŠ -SSH-Key"><a href="#åœ¨-GitHub-ä¸­æ·»åŠ -SSH-Key" class="headerlink" title="åœ¨ GitHub ä¸­æ·»åŠ  SSH Key"></a>åœ¨ <em>GitHub</em> ä¸­æ·»åŠ  <em>SSH Key</em></h4><ul>
<li>Settings-&gt;SSH and GRG keys-&gt;new SSH key<br><img src="http://upload-images.jianshu.io/upload_images/659084-5c62e09650873795.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"><br><img src="http://upload-images.jianshu.io/upload_images/659084-25987355f4a0e8cf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"><br><img src="http://upload-images.jianshu.io/upload_images/659084-313107faef8abb08.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"><br><img src="http://upload-images.jianshu.io/upload_images/659084-382e08b98c30ba58.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></li>
<li>åˆ›å»ºæˆåŠŸåï¼Œè·³è½¬é¡µé¢ä¸­ä½ ä¼šçœ‹åˆ°ä½ æ–°å»ºçš„ssh key<br><img src="http://upload-images.jianshu.io/upload_images/659084-48ad323d9452d92a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></li>
</ul>
<h4 id="åˆ›å»º-GitHub-ä»“åº“"><a href="#åˆ›å»º-GitHub-ä»“åº“" class="headerlink" title="åˆ›å»º GitHub ä»“åº“"></a>åˆ›å»º <em>GitHub</em> ä»“åº“</h4><ul>
<li>ç™»å½•GitHubè´¦å·åï¼Œåˆ›å»ºæ–°çš„ä»“åº“ï¼Œä»“åº“åç§°çœ‹è‡ªå·±éœ€è¦å‘½åï¼Œå…¶ä»–é»˜è®¤å°±å¥½äº†ã€‚æˆ‘è¿™é‡Œä¸ºäº†æµ‹è¯•ï¼Œå°±å–ä¸º<strong>test</strong><br><img src="http://upload-images.jianshu.io/upload_images/659084-1ae7942e887d2f50.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"><br><img src="http://upload-images.jianshu.io/upload_images/659084-db087fe0ca9607ae.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></li>
<li>GitHubä»“åº“åˆ›å»ºæˆåŠŸåï¼Œä¼šæœ‰SSHå’ŒHTTPSåœ°å€<br><img src="http://upload-images.jianshu.io/upload_images/659084-1efaa0a539fbbd68.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></li>
</ul>
<h4 id="Git-è¿æ¥-GitHubï¼Œå¹¶æ¨é€æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹ä»“åº“"><a href="#Git-è¿æ¥-GitHubï¼Œå¹¶æ¨é€æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="Git è¿æ¥ GitHubï¼Œå¹¶æ¨é€æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹ä»“åº“"></a><em>Git</em> è¿æ¥ <em>GitHub</em>ï¼Œå¹¶æ¨é€æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹ä»“åº“</h4><ul>
<li>åœ¨æœ¬åœ°ä»“åº“çš„ç›®å½• <em>gitFile</em> ä¸‹è¿è¡Œå‘½ä»¤</li>
</ul>
<pre><code>git remote add origin ä»“åº“çš„SSHåœ°å€

</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-955edfecc27bf5ef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"><br>æ³¨æ„ï¼Œè¿™é‡Œçš„ <em>origin</em> æ˜¯è¿œç¨‹ä»“åº“çš„åå­—ï¼ˆ<em>Git</em>çš„é»˜è®¤å«æ³•ï¼‰</p>
<ul>
<li>å°†æœ¬åœ°ä»“åº“ <em>Git</em> çš„æ–‡ä»¶æ¨é€åˆ°è¿œç¨‹ä»“åº“ <em>GitHub</em></li>
</ul>
<pre><code>git push -u origin master

</code></pre><p>ä¸å‡ºæ„å¤–ï¼Œåœ¨GitHubçš„ <em>test</em> ä»“åº“ä¸­ä¼šçœ‹åˆ°æˆ‘ä»¬ä¼ é€çš„æ–‡ä»¶<br><img src="http://upload-images.jianshu.io/upload_images/659084-3ceb742e8262ac94.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></p>
<h4 id="ä»-GitHub-ä¸­å…‹éš†æ–‡ä»¶åˆ°æœ¬åœ°"><a href="#ä»-GitHub-ä¸­å…‹éš†æ–‡ä»¶åˆ°æœ¬åœ°" class="headerlink" title="ä» GitHub ä¸­å…‹éš†æ–‡ä»¶åˆ°æœ¬åœ°"></a>ä» <em>GitHub</em> ä¸­å…‹éš†æ–‡ä»¶åˆ°æœ¬åœ°</h4><ul>
<li>åœ¨ <em>GitHub</em> ä¸­åˆ›å»ºæ–‡ä»¶ï¼Œå¹¶ä¸”å¤åˆ¶<em>SSH</em> åœ°å€<br><img src="http://upload-images.jianshu.io/upload_images/659084-8555c272dc15e144.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"><br><img src="http://upload-images.jianshu.io/upload_images/659084-29aec05f56492874.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"><br><img src="http://upload-images.jianshu.io/upload_images/659084-1e5de00c4bbe4477.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></li>
<li>è¾“å…¥ä»¥ä¸‹å…‹éš†å‘½ä»¤</li>
</ul>
<pre><code>git clone SSHåœ°å€

</code></pre><p>ä½ ä¼šå‘ç°ï¼Œ<em>GitHub</em> ä¸­çš„ç›®å½•åŒ…æ‹¬ä½ åˆšæ‰æ–°å»ºçš„æ–‡ä»¶éƒ½å­˜åœ¨æœ¬åœ°ç›®å½•ä¸­äº†ã€‚</p>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>é˜²æŠ–å’ŒèŠ‚æµ</title>
    <url>/2019/02/18/%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81/</url>
    <content><![CDATA[<h2 id="é˜²æŠ–"><a href="#é˜²æŠ–" class="headerlink" title="é˜²æŠ–"></a>é˜²æŠ–</h2><ul>
<li>å¯¹äºä¸€äº›é«˜é¢‘è§¦å‘æ“ä½œçš„åœºæ™¯ï¼Œæˆ‘ä»¬éœ€è¦åŠ é˜²æŠ–æ“ä½œã€‚æ¯”å¦‚ï¼šç›‘å¬é¡µé¢æ»šåŠ¨ã€è¾“å…¥å®æ—¶æ˜¾ç¤ºæœç´¢ç»“æœç­‰ã€‚è¿™äº›éƒ½éœ€è¦åŠ é˜²æŠ–æ“ä½œï¼Œä¸ç„¶å¯¹é¡µé¢æ€§èƒ½æœ‰å¾ˆå¤§çš„å‰¯ä½œç”¨ã€‚</li>
<li>ç®€å•æ¦‚æ‹¬ï¼šé˜²æŠ–å°±æ˜¯å°†é«˜é¢‘æ“ä½œä¼˜åŒ–ä¸ºæœ€åä¸€æ¬¡æ‰§è¡Œã€‚</li>
</ul>
<p>å®ç°ï¼š</p>
<pre><code>function debounce(fn, wait, immediate = false) {
  var timeout, result;

  timeout &amp;&amp; clearTimeout(timeout);
  var debounced = function () {
    var context = this;
    var args = arguments;

    if (immediate) { // äº‹ä»¶åœæ­¢è§¦å‘å n ç§’ï¼Œè§¦å‘äº‹ä»¶ç«‹åˆ»æ‰§è¡Œå›è°ƒ
      var callNow = !timeout;
      timeout = setTimeout(function () {
        timeout = null;
      }, wait)
      if (callNow) {
        result = fn.apply(context, args);
      }
    } else { // äº‹ä»¶åœæ­¢è§¦å‘åï¼Œæ‰§è¡Œå›è°ƒå‡½æ•°
      timeout = setTimeout(function () {
        fn.apply(context, args);
      }, wait);
    }
  }

  debounced.cancel = function () {
    clearTimeout(timeout);
    timeout = null;
  }

  return debounced;
}
</code></pre><h2 id="èŠ‚æµ"><a href="#èŠ‚æµ" class="headerlink" title="èŠ‚æµ"></a>èŠ‚æµ</h2><p>æ¯æ®µæ—¶é—´åæ‰§è¡Œä¸€æ¬¡ï¼Œå°†é«˜é¢‘è½¬åŒ–ä¸ºä½é¢‘ã€‚</p>
<ul>
<li>æ—¶é—´æˆ³</li>
</ul>
<pre><code>function throttle(fn, wait) {
    var previous = 0;

    return function () {
        var args = arguments;
        var context = this;
        var now = +new Date();
        if (now - previous &gt; wait) {
            fn.apply(context, args);
            previous = now;
        }
    }
}
</code></pre><ul>
<li>å®šæ—¶å™¨</li>
</ul>
<pre><code>function throttle(fn, wait) {
    var timeout;

    return function() {
        var args = arguments;
        var context = this;
        if (!timeout) {
            timeout = setTimeout(function() {
                timeout = null;
                fn.apply(context, args);
            }, wait)
        }
    }
}
</code></pre>]]></content>
      <categories>
        <category>frontEnd</category>
        <category>js</category>
      </categories>
      <tags>
        <tag>frontEnd</tag>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>vue-cli3.0é¡¹ç›®åˆ›å»º+é…ç½®+è‡ªåŠ¨éƒ¨ç½²</title>
    <url>/2019/02/17/vue-cli3-0%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA-%E9%85%8D%E7%BD%AE-%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[<h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><ul>
<li><p>å®‰è£… <strong>vue3.0</strong> è„šæ‰‹æ¶</p>
<pre><code>npm install -g @vue/cli
</code></pre></li>
<li><p>åˆ›å»ºé¡¹ç›®</p>
<pre><code>vue create my_project
</code></pre><p>ä¸€ç³»åˆ—é€‰æ‹©ä¹‹åï¼Œå¯ä»¥ä¿å­˜ä½ å½“å‰çš„é€‰æ‹©é…ç½®ï¼Œä¹‹ååˆ›å»ºé¡¹ç›®çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥ç”¨äº†ã€‚</p>
</li>
<li><p>å®‰è£…ä¾èµ–</p>
<pre><code>cd my_project
</code></pre></li>
</ul>
<p>æœ€åçš„é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-5267ed577dcb2fc6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="è¿è¡Œé¡¹ç›®"><a href="#è¿è¡Œé¡¹ç›®" class="headerlink" title="è¿è¡Œé¡¹ç›®"></a>è¿è¡Œé¡¹ç›®</h2><p><strong>vue3.0</strong> è¿è¡Œé¡¹ç›®ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li><p>å‘½ä»¤è¡Œæ–¹å¼ï¼š</p>
<pre><code>npm run serve
</code></pre></li>
<li><p>UIè§†å›¾æ–¹å¼ï¼Œè¿™ä¹Ÿæ˜¯3.0ç‰ˆæœ¬çš„ä¸€å¤§äº®ç‚¹ã€‚é€šè¿‡UIè§†å›¾æ–¹å¼ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¾ˆå¤šäº‹ï¼Œå¦‚ï¼šè¿è¡Œé¡¹ç›®ã€å®‰è£…ä¾èµ–ã€å®‰è£…æ’ä»¶ç­‰ã€‚</p>
<pre><code>vue ui
</code></pre></li>
</ul>
<h2 id="webpack-é…ç½®"><a href="#webpack-é…ç½®" class="headerlink" title="webpack é…ç½®"></a>webpack é…ç½®</h2><p>vue å·²ç»å¸®æˆ‘ä»¬é…ç½®äº†å¾ˆå¤šï¼Œé¢å¤–è‡ªå·±åˆæ·»åŠ äº†ä¸€äº›é…ç½®ï¼›åœ¨æ ¹ç›®å½•æ·»åŠ  <strong>vue.config.js</strong> é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code>const path = require(&#39;path&#39;);
const px2rem = require(&#39;postcss-px2rem&#39;);
const VconsoleWebpackPlugin = require(&#39;vconsole-webpack-plugin&#39;);
const TerserWebpackPlugin = require(&#39;terser-webpack-plugin&#39;);
// åˆ¤æ–­æ˜¯å¦ä¸ºç”Ÿäº§ç¯å¢ƒ
const isProduction = process.env.NNODE_ENV === &#39;production&#39;;
// è·¯å¾„å¤„ç†å‡½æ•°
const resolve = name =&gt; path.resolve(__dirname, name);

module.exports = {
  publicPath: isProduction ? &#39;/production&#39; : &#39;/&#39;, // éƒ¨ç½²åº”ç”¨åŒ…æ—¶çš„åŸºæœ¬ URL
  productionSourceMap: !isProduction, // ç”Ÿäº§ç¯å¢ƒä¸å¼€å¯ source-map
  devServer: { // webpack-dev-server çš„é…ç½®
    port: 8089, // æœ¬åœ°ç«¯å£
    open: true, // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    // proxy: { // ä»£ç†
    //   &#39;/api&#39;: {
    //     target: &#39;&lt;url&gt;&#39;,
    //     ws: true,
    //     changeOrigin: true
    //   },
    // }
  },
  css: {
    extract: isProduction, // ç”Ÿäº§ç¯å¢ƒå°† css å•ç‹¬æŠ½ç¦»æˆä¸€ä¸ªæ–‡ä»¶
    sourceMap: !isProduction, // ç”Ÿæˆç¯å¢ƒä¸å¼€å¯ source-map
    loaderOptions: {
      postcss: {
        // ç§»åŠ¨ç«¯ä½¿ç”¨rem
        plugins: [
          px2rem({
            remUnit: 75
          })
        ]
      },
      // å…¨å±€å…±äº«variables.scss
      sass: {
        // @/ æ˜¯ src/ çš„åˆ«å
        // æ‰€ä»¥è¿™é‡Œå‡è®¾ä½ æœ‰ `src/variables.scss` è¿™ä¸ªæ–‡ä»¶
        data: `@import &quot;@/variables.scss&quot;;`
      }
    }
  },
  configureWebpack: config =&gt; {
    const devPlugins = [
      new VconsoleWebpackPlugin({ // å¾®ä¿¡ç§»åŠ¨ç«¯è°ƒè¯•æ§åˆ¶å°
        enable: !isProduction
      })
    ];
    const prodPlugins = [
      new TerserWebpackPlugin({
        terserOptions: { // æ‰“åŒ…æ—¶å€™çš„é…ç½®
          warnings: false,
          compress: true,
          drop_console: true,
          drop_debugger: true,
          pure_funcs: [&#39;console.log&#39;]
        }
      })
    ];
    if (isProduction) { // ç”Ÿäº§ç¯å¢ƒ
      config.optimization.minimizer = [
        ...config.optimization.minimizer,
        ...prodPlugins
      ]
    } else { // å¼€å‘ç¯å¢ƒ
      config.plugins = [...config.plugins, ...devPlugins]
    }
  },
  chainWebpack: config =&gt; {
    // è‡ªå®šä¹‰å…¨å±€å˜é‡
    // config
    //   .plugin(&#39;define&#39;)
    //   .tap((args) =&gt; {
    //     args[0].PRODUCTION = isProduction ? JSON.stringify(&#39;&#39;) :
    //       JSON.stringify(
    //         &#39;other/&#39;,
    //       );
    //     return args;
    //   });
    // åˆ«åè®¾ç½®
    config.resolve.alias
      .set(&#39;js&#39;, resolve(&#39;src/assets/js&#39;))
      .set(&#39;scss&#39;, resolve(&#39;src/assets/scss&#39;))
      .set(&#39;images&#39;, resolve(&#39;src/assets/images&#39;))
      .set(&#39;components&#39;, resolve(&#39;src/components&#39;));
  }
}
</code></pre><h2 id="è·¯ç”±é…ç½®"><a href="#è·¯ç”±é…ç½®" class="headerlink" title="è·¯ç”±é…ç½®"></a>è·¯ç”±é…ç½®</h2><p><strong>vue3.0</strong> çš„è·¯ç”±é…ç½®å·²ç»å¾ˆå®Œå–„äº†ï¼Œè¿™é‡Œæˆ‘ä»…ä»…å°æ”¹åŠ¨ï¼Œå°è£…äº†è·¯ç”±æ‡’åŠ è½½å‡½æ•°ï¼š</p>
<pre><code>import Vue from &#39;vue&#39;
import Router from &#39;vue-router&#39;
import Home from &#39;./views/Home.vue&#39;

Vue.use(Router)
// è·¯ç”±æ‡’åŠ è½½
// route level code-splitting
// this generates a separate chunk (about.[hash].js) for this route
// which is lazy-loaded when the route is visited.
const addRouterComponent = path =&gt; import(path);

export default new Router({
  mode: &#39;history&#39;,
  base: process.env.BASE_URL,
  routes: [{
      path: &#39;/&#39;,
      name: &#39;home&#39;,
      component: Home
    },
    {
      path: &#39;/about&#39;,
      name: &#39;about&#39;,
      component: addRouterComponent(&#39;./views/About.vue&#39;)
    }
  ]
})
</code></pre><h2 id="axios-çš„é…ç½®"><a href="#axios-çš„é…ç½®" class="headerlink" title="axios çš„é…ç½®"></a>axios çš„é…ç½®</h2><p>åœ¨ <strong>scr</strong> ç›®å½•ä¸‹æ·»åŠ  <strong>api</strong> ç›®å½•ï¼Œå¹¶æ–°å»ºä¸¤ä¸ªæ–‡ä»¶ï¼š<strong>config.js</strong> å’Œ <strong>api.js</strong>ã€‚é…ç½®å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>config.js</strong></li>
</ul>
<pre><code>import axios from &#39;axios&#39;;
import qs from &#39;qs&#39;;

axios.defaults.withCredentials = false;
// è¯·æ±‚æ‹¦æˆªå™¨
axios.interceptors.request.use(
  request =&gt; {
    request.data = request.data || {};
    const hasHttp = /^http(|s):\/\//.test(request.url);
    if (!hasHttp) { // æ—  http or https å¤´å¤„ç†
      request.url = `https://${request.url}`;
    }
    if (request.data) {
      request.data = {
        // commom: &#39;&#39;, è¿™é‡Œå¯ä»¥æ·»åŠ ä¸€äº›å…¬å…±çš„è¯·æ±‚å‚æ•°
        data: JSON.stringify(request.data)
      };
      request.data = qs.stringify(request.data);
    }
    return request;
  },
  error =&gt; Promise.reject(error)
);
// å“åº”æ‹¦æˆªå™¨
axios.interceptors.response.use(
  response =&gt; {
    const responseData = response.data;
    if (responseData.errcode !== 0) { // é”™è¯¯å¤„ç†
      return Promise.reject(responseData.msg || &#39;æœªçŸ¥é”™è¯¯&#39;);
    }
    responseData.result = responseData.result || {};
    return responseData;
  },
  error =&gt; Promise.reject(error)
);

export {
  axios
};
</code></pre><ul>
<li><strong>api.js</strong></li>
</ul>
<pre><code>import {
  axios
} from &#39;./config.js&#39;;

// ä¾‹å­ 1
export const aApi1Name = params =&gt; axios.post(url, params);
// ä¾‹å­ 2
export const aApi2Name = params =&gt; axios.get(url, params);
</code></pre><h2 id="æ‰“åŒ…åè‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨"><a href="#æ‰“åŒ…åè‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨" class="headerlink" title="æ‰“åŒ…åè‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨"></a>æ‰“åŒ…åè‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨</h2><p>ä½¿ç”¨çš„æ˜¯ <strong>scp2</strong>ï¼›é€šè¿‡å‘è„šæœ¬ä¼ é€’ä¸åŒå‚æ•°ï¼Œéƒ¨ç½²åˆ°ä¸åŒçš„æœåŠ¡å™¨è·¯å¾„ï¼›åœ¨æ ¹ç›®å½•æ·»åŠ  <strong>deploy.js</strong> è„šæœ¬ã€‚ç›¸å…³é…ç½®å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>package.json</strong></li>
</ul>
<pre><code>&quot;buildTest&quot;: &quot;vue-cli-service build &amp;&amp; node deploy.js development&quot;,
&quot;buildProd&quot;: &quot;vue-cli-service build &amp;&amp; node deploy.js production&quot;
</code></pre><ul>
<li><strong>deploy.js</strong></li>
</ul>
<pre><code>const qs = require(&#39;qs&#39;);

// åˆ¤æ–­æ˜¯å¦è¾“å‡ºå¸®åŠ©ä¿¡æ¯
const helpMessage = `usage: node deploy.js [deploy_target]`;
if (
  process.argv.length !== 3 ||
  process.argv[2] === &#39;-h&#39; ||
  process.argv[2] === &#39;--help&#39;
) {
  console.log(helpMessage);
  process.exit(0);
}

// åˆ¤æ–­æ˜¯å¦æ˜¯ç”Ÿäº§ç¯å¢ƒ
const isProduction = process.argv[2] === &#39;production&#39;;

// è®¾ç½®éƒ¨ç½²çš„æ–‡ä»¶è·¯å¾„ï¼Œæ­£æœ or æµ‹æœ
let deployPath = &#39;&#39;;
if (isProduction) {
  deployPath = &#39;/production&#39;
} else {
  deployPath = &#39;/test&#39;
}

// è®¾ç½®æœåŠ¡å™¨æœåŠ¡å™¨ä¿¡æ¯
const SERVER_INFO = {
  host: &#39;134.175.150.8&#39;,
  port: 22,
  username: &#39;&#39;,
  password: &#39;&#39;,
  path: deployPath
}

// éƒ¨ç½²åˆ°æœåŠ¡å™¨
client.scp(&#39;./dist/&#39;, SERVER_INFO, err =&gt; {
  if (err) {
    console.log(&#39;Deploy Failed!\n&#39;, err);
  }
})

console.log(`Deploy ${isProduction ? &#39;production&#39; : &#39;developemt&#39;} finished!`);
</code></pre><p>æ€»ç»“ï¼šé€šè¿‡ä¸Šé¢çš„é…ç½®ï¼ŒåŸºæœ¬å¯ä»¥å®ç° <strong>vue</strong> é¡¹ç›®ä»åˆ›å»ºåˆ°é…ç½®åˆ°æ‰“åŒ…è‡ªåŠ¨éƒ¨ç½²çš„è¿‡ç¨‹ã€‚</p>
]]></content>
      <categories>
        <category>frontEnd</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>frontEnd</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>websocket</title>
    <url>/2019/02/17/websocket/</url>
    <content><![CDATA[<h2 id="HTTP-HTTPS-åè®®"><a href="#HTTP-HTTPS-åè®®" class="headerlink" title="HTTP/HTTPS åè®®"></a>HTTP/HTTPS åè®®</h2><ul>
<li>ä¸€ä¸ª <strong>request</strong> å¯¹åº”ä¸€ä¸ª <strong>response</strong>ã€‚ä¸€èˆ¬ä½¿ç”¨ <strong>è½®è¯¢</strong> æœºåˆ¶è·å–ä¿¡æ¯ã€‚</li>
<li>è™½ç„¶åæœŸæœ‰ <strong>keep-alive</strong>ï¼Œå¯ä»¥ä¸€æ¬¡è¿æ¥ä¸­å¤„ç†å¤šä¸ª <strong>request</strong> åˆå¹¶å‘é€ï¼Œæ¥æ”¶å¤šä¸ª <strong>response</strong>ï¼Œå¯¹æ¯ä¸ªè¯·æ±‚ä»ç„¶éœ€è¦å•ç‹¬å‘ <strong>header</strong>ã€‚</li>
<li><strong>HTTP</strong> çš„ <strong>response</strong> æ˜¯è¢«åŠ¨çš„ï¼Œé€šä¿¡åªèƒ½ç”±å®¢æˆ·ç«¯å‘èµ·ï¼Œåšä¸åˆ°æœåŠ¡ç«¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€ä¿¡æ¯ã€‚</li>
<li><strong>HTTP</strong> æ˜¯æ— çŠ¶æ€åè®®ã€‚</li>
<li>éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ã€‚</li>
<li>HTTPï¼šTCP + HTTP</li>
<li>HTTPSï¼šTCP + HTTP + TLS</li>
</ul>
<h4 id="ajax-è½®è¯¢"><a href="#ajax-è½®è¯¢" class="headerlink" title="ajax è½®è¯¢"></a>ajax è½®è¯¢</h4><p><strong>ajax è½®è¯¢</strong> æ˜¯æŒ‡å®¢æˆ·ç«¯ <strong>ä¸æ–­</strong> å‘æœåŠ¡å™¨å‘é€èµ„æºè¯·æ±‚ <strong>request</strong>ï¼ŒæœåŠ¡ç«¯ä¸ç®¡æœ‰æ— ç›®æ ‡èµ„æºï¼Œéƒ½ä¼šè¿”å› <strong>response</strong> ç»“æœã€‚è¿™æ ·å°±è¦æ±‚æœåŠ¡å™¨æ‹¥æœ‰æ›´å¥½çš„å¤„ç†é€Ÿåº¦ã€‚</p>
<h4 id="long-poll-é•¿è½®è¯¢"><a href="#long-poll-é•¿è½®è¯¢" class="headerlink" title="long poll / é•¿è½®è¯¢"></a>long poll / é•¿è½®è¯¢</h4><p><strong>long poll</strong> æ¯” <strong>ajax è½®è¯¢</strong> å¥½ç‚¹ï¼Œ<strong>ä¸ä¼šä¸æ–­</strong> å‘æœåŠ¡å™¨å‘é€èµ„æºè¯·æ±‚ <strong>request</strong>ï¼Œä¸€æ—¦æ¥å—å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæœ‰èµ„æºå°±è¿”å›ï¼›æ— èµ„æºå°±æŒ‚èµ·ï¼Œç›´åˆ°æœ‰èµ„æºæ‰è¿”å› <strong>response</strong> ç»“æœï¼ˆæœ‰ä¸”ä»…æœ‰è¿”å›ä¸€æ¬¡ï¼‰ã€‚é«˜å¹¶å‘ï¼Œéœ€è¦æœåŠ¡å™¨å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚çš„èƒ½åŠ›ã€‚</p>
<h2 id="websocket-åè®®"><a href="#websocket-åè®®" class="headerlink" title="websocket åè®®"></a>websocket åè®®</h2><ul>
<li><strong>websocket</strong> æ˜¯ <strong>html5</strong> å‡ºçš„åè®®ã€‚</li>
<li><strong>websocket</strong> æ˜¯ä¸€ä¸ªæŒä¹…åŒ–çš„åè®®ï¼Œ<strong>websocket</strong> åªéœ€è¦ä¸€æ¬¡è¯·æ±‚ï¼ˆä¸€æ¬¡ <strong>HTTP æ¡æ‰‹</strong> ï¼‰ï¼Œå°±å¯ä»¥å¾—åˆ°æ‰€éœ€çš„èµ„æºã€‚</li>
<li>æœåŠ¡ç«¯å¯ä»¥ <strong>ä¸»åŠ¨</strong> å‘å®¢æˆ·ç«¯æ¨é€ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ <strong>ä¸»åŠ¨</strong> å‘æœåŠ¡ç«¯æ¨é€æ¶ˆæ¯ï¼Œå®ç°â€œåŒå‘å¹³ç­‰â€ï¼Œæ˜¯å±äºæœåŠ¡å™¨æ¨é€æŠ€æœ¯çš„ä¸€ç§ã€‚</li>
<li>ä¸ <strong>HTTP</strong> æœ‰è¾ƒå¥½çš„å…¼å®¹æ€§ï¼Œåœ¨æ¡æ‰‹é˜¶æ®µé‡‡ç”¨ <strong>HTTP</strong> åè®®ã€‚</li>
<li>é»˜è®¤ç«¯å£ <strong>80</strong> and <strong>443</strong>ã€‚</li>
<li>æ•°æ®æ ¼å¼è½»é‡ï¼Œæ€§èƒ½å¼€é”€å°ï¼Œé€šä¿¡é«˜æ•ˆï¼Œå¯ä»¥å‘é€æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥äºŒè¿›åˆ¶æ•°æ®ã€‚</li>
<li>æ²¡æœ‰åŒæºç­–ç•¥ã€‚</li>
<li>WSï¼šTCP + WS</li>
<li>WSSï¼šTCP + WS + TLS</li>
</ul>
<h4 id="websocket-æ¡æ‰‹"><a href="#websocket-æ¡æ‰‹" class="headerlink" title="websocket æ¡æ‰‹"></a>websocket æ¡æ‰‹</h4><pre><code>GET /chat HTTP/1.1
Host: server.example.com
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==
Sec-WebSocket-Protocol: chat, superchat
Sec-WebSocket-Version: 13
</code></pre><ul>
<li>Upgrade/Connectionï¼šé€šçŸ¥æœåŠ¡å™¨å‘èµ·çš„æ˜¯ <strong>wesocket</strong> åè®®ã€‚</li>
<li>Sec-WebSocket-Keyï¼šæµè§ˆå™¨éšæœºç”Ÿæˆçš„ <strong>Base64 encode</strong> çš„å€¼ï¼Œç”¨äºéªŒè¯æœåŠ¡å™¨æ˜¯ä¸æ˜¯ <strong>websocket åè®®</strong>ã€‚</li>
<li>Sec-WebSocket-Protocolï¼šç”¨æˆ·å®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œç”¨æ¥åŒºåˆ† <strong>åŒ url</strong> ä¸‹ï¼Œä¸åŒçš„æœåŠ¡æ‰€éœ€è¦çš„åè®®ã€‚</li>
<li>Sec-WebSocket-Versionï¼šåè®®ç‰ˆæœ¬ã€‚</li>
</ul>
<h4 id="æœåŠ¡å™¨è¿”å›"><a href="#æœåŠ¡å™¨è¿”å›" class="headerlink" title="æœåŠ¡å™¨è¿”å›"></a>æœåŠ¡å™¨è¿”å›</h4><pre><code>HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk=
Sec-WebSocket-Protocol: chat
</code></pre><ul>
<li>Upgrade/Connectionï¼šé€šçŸ¥å®¢æˆ·ç«¯å‡çº§çš„æ˜¯ <strong>websocket</strong> åè®®ã€‚</li>
<li>Sec-WebSocket-Acceptï¼šç»æœåŠ¡å™¨ç¡®è®¤ï¼ŒåŠ å¯†åçš„ <strong>Sec-WebSocket-Key</strong>ã€‚</li>
<li>Sec-WebSocket-Protocolï¼šæœ€ç»ˆä½¿ç”¨çš„åè®®ã€‚</li>
</ul>
<h4 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h4><pre><code>ws.addEventListener(&#39;open&#39;, function () {
    console.log(&#39;Open the websocket...&#39;);
    ws.send(&#39;Hello websocket...&#39;);
});
ws.addEventListener(&#39;message&#39;, function (e) {
    console.log(&#39;Ready state: &#39; + ws.readyState, &#39;Receive the websocket message...&#39; + e.data);
    ws.close();
    setTimeout(() =&gt; {
        console.log(&#39;Ready state: &#39; + ws.readyState);
    }, 1000)
});
ws.addEventListener(&#39;close&#39;, function () {
    console.log(&#39;Ready state: &#39; + ws.readyState, &#39;Close the websocket...&#39;);
})
</code></pre><p>ç»“æœï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-021a1bb1915811bd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>å‚è€ƒï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-d06ed1bfe9c9fadb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<ul>
<li><a href="https://www.zhihu.com/search?type=content&amp;q=websocket" target="_blank" rel="noopener">https://www.zhihu.com/search?type=content&amp;q=websocket</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2017/05/websocket.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2017/05/websocket.html</a></li>
</ul>
]]></content>
      <categories>
        <category>frontEnd</category>
      </categories>
      <tags>
        <tag>frontEnd</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”¨æˆ·è®¤è¯å°æ€»ç»“</title>
    <url>/2019/02/17/%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81%E5%B0%8F%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h2 id="ç”¨æˆ·è®¤è¯"><a href="#ç”¨æˆ·è®¤è¯" class="headerlink" title="ç”¨æˆ·è®¤è¯"></a>ç”¨æˆ·è®¤è¯</h2><p>ä¸€èˆ¬çš„ç”¨æˆ·è®¤è¯æµç¨‹å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-bdfa6d0008a02e53.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/800" alt="image.png"></p>
<p>ä½†æ˜¯ï¼Œè¿™ç§æ¨¡å¼çš„æ‰©å±•æ€§ä¸å¥½ã€‚å•ä¸ªæœåŠ¡å™¨æ²¡é—®é¢˜ï¼Œå¦‚æœå¤šä¸ªæœåŠ¡å™¨é›†ç¾¤ï¼Œè¦æ±‚å…±äº« <strong>session</strong> ï¼Œæ¯ä¸ªæœåŠ¡å™¨éƒ½èƒ½è®¿é—®åˆ° <strong>session</strong> ã€‚</p>
<ul>
<li>è§£å†³æ–¹æ¡ˆä¸€ï¼š<strong>session</strong> æ•°æ®æŒä¹…åŒ–ï¼Œå†™å…¥æ•°æ®åº“æˆ–è€…å…¶ä»–æŒä¹…å±‚ã€‚å„ä¸ªæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œå‘æŒä¹…å±‚å‘é€æ•°æ®è¯·æ±‚ã€‚<ul>
<li>ç¼ºç‚¹ï¼šå·¥ç¨‹é‡å¤§ã€‚</li>
</ul>
</li>
<li>è§£å†³æ–¹æ¡ˆäºŒï¼šæœåŠ¡å™¨ä¸ä¿å­˜ <strong>session</strong> æ•°æ®ï¼Œæ‰€æœ‰çš„æ•°æ®ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½å‘å›æœåŠ¡å™¨ã€‚å¦‚ï¼šJWT(Json Web Token)ã€‚</li>
</ul>
<h2 id="JWT"><a href="#JWT" class="headerlink" title="JWT"></a>JWT</h2><p><strong>JWT</strong> æœåŠ¡å™¨ä¸ä¿å­˜ <strong>session</strong> æ•°æ®ï¼Œåœ¨æœåŠ¡å™¨è®¤è¯ä¹‹åï¼Œè¿”å›ä¸€ä¸ª <strong>JSON</strong> å¯¹è±¡ã€‚æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code>{
    &quot;å§“å&quot;: &quot;zero&quot;,
    &quot;è§’è‰²&quot;: &quot;ç®¡ç†å‘˜&quot;,
    &quot;åˆ°æœŸæ—¶é—´&quot;: &quot;2018å¹´10æœˆ6æ—¥0ç‚¹0åˆ†&quot;
}
</code></pre><p>ä¹‹åï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„ç”¨æˆ·è®¤è¯éƒ½é è¿™ä¸ª <strong>JSON</strong> å¯¹è±¡ï¼Œå½“ç„¶ï¼Œè¿™ä¸ªå¯¹è±¡åé¢ä¼šåŠ ä¸Šç­¾åï¼Œä¿è¯æ•°æ®ä¸è¢«ç¯¡æ”¹ã€‚</p>
<h4 id="JWT-çš„æ•°æ®ç»“æ„"><a href="#JWT-çš„æ•°æ®ç»“æ„" class="headerlink" title="JWT çš„æ•°æ®ç»“æ„"></a>JWT çš„æ•°æ®ç»“æ„</h4><ul>
<li><strong>JWT</strong> æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œä¸­é—´ç”¨ <strong>.</strong> åˆ†éš”ï¼Œå†…éƒ¨æ²¡æœ‰æ¢è¡Œã€‚</li>
<li>ç»„æˆç”±ä¸‰ä¸ªéƒ¨åˆ†ï¼š<strong>Header.Payload.Signature</strong><ul>
<li>Headerï¼šå¤´éƒ¨ã€‚<strong>JSON</strong> å¯¹è±¡ï¼Œæè¿° <strong>JWT</strong> çš„å…ƒæ•°æ®ã€‚</li>
<li>Payloadï¼šè´Ÿè½½ã€‚<strong>JSON</strong> å¯¹è±¡ï¼Œå­˜æ”¾å®é™…éœ€è¦ä¼ é€’çš„æ•°æ®ï¼›ä¸åŠ å¯†ã€‚</li>
<li>Signatureï¼šç­¾åã€‚å¯¹ <strong>Header</strong> å’Œ <strong>Payload</strong> çš„ç­¾åï¼Œé˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹ã€‚</li>
</ul>
</li>
</ul>
<p>Header æ ¼å¼ï¼š</p>
<pre><code>{
  &quot;alg&quot;: &quot;HS256&quot;,   // ç­¾åçš„ç®—æ³•
  &quot;typ&quot;: &quot;JWT&quot;      // token ç±»å‹
}
</code></pre><p>Payload ä¸ƒä¸ªå­—æ®µï¼š</p>
<ul>
<li>iss (issuer)ï¼šç­¾å‘äºº</li>
<li>exp (expiration time)ï¼šè¿‡æœŸæ—¶é—´</li>
<li>sub (subject)ï¼šä¸»é¢˜</li>
<li>aud (audience)ï¼šå—ä¼—</li>
<li>nbf (Not Before)ï¼šç”Ÿæ•ˆæ—¶é—´</li>
<li>iat (Issued At)ï¼šç­¾å‘æ—¶é—´</li>
<li>jti (JWT ID)ï¼šç¼–å·</li>
</ul>
<h4 id="JWT-çš„ä½¿ç”¨æ–¹å¼"><a href="#JWT-çš„ä½¿ç”¨æ–¹å¼" class="headerlink" title="JWT çš„ä½¿ç”¨æ–¹å¼"></a>JWT çš„ä½¿ç”¨æ–¹å¼</h4><ul>
<li>å­˜å‚¨åœ¨ <strong>cookie</strong> ä¸­ã€‚</li>
<li>å­˜å‚¨åœ¨ <strong>localStorage</strong> ä¸­ã€‚</li>
<li>å®¢æˆ·ç«¯æ¯æ¬¡ä¸æœåŠ¡å™¨è¿›è¡Œé€šä¿¡çš„æ—¶å€™ï¼Œéƒ½ä¼šå¸¦ä¸Š <strong>JWT</strong>ã€‚</li>
</ul>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="http://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html</a></li>
</ul>
]]></content>
      <categories>
        <category>frontEnd</category>
      </categories>
      <tags>
        <tag>frontEnd</tag>
      </tags>
  </entry>
  <entry>
    <title>web safe</title>
    <url>/2019/02/17/web-safe/</url>
    <content><![CDATA[<h2 id="CSRF-Cross-Site-Request-Forgery"><a href="#CSRF-Cross-Site-Request-Forgery" class="headerlink" title="CSRF : Cross Site Request Forgery"></a>CSRF : Cross Site Request Forgery</h2><p><strong>CSRF</strong> è·¨ç«™è¯·æ±‚ä¼ªé€ ã€‚<br>æ˜¯ä¸€ç§åŠ«æŒå—ä¿¡ä»»ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€éé¢„æœŸè¯·æ±‚çš„æ”»å‡»æ–¹å¼ã€‚ç®€è€Œè¨€ä¹‹ï¼šç”¨æˆ·åœ¨ç™»å½•çš„æƒ…å†µä¸‹è®¿é—®äº†é’“é±¼ç½‘ç«™ï¼Œé’“é±¼ç½‘ç«™é€šè¿‡ç”¨æˆ·å‘å…¶ä»–ç½‘ç«™å‘é€è¯·æ±‚ï¼Œè¿™æ ·å°±è¾¾åˆ°äº†æ¨¡æ‹Ÿç”¨æˆ·çš„ç›®çš„ã€‚å…·ä½“å®ç°å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-9ce93c3bff5d427b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h4 id="é˜²å¾¡æ‰‹æ®µ"><a href="#é˜²å¾¡æ‰‹æ®µ" class="headerlink" title="é˜²å¾¡æ‰‹æ®µ"></a>é˜²å¾¡æ‰‹æ®µ</h4><ul>
<li>éªŒè¯ç å®ç°ç”¨æˆ·éªŒè¯ã€‚éªŒè¯ç å¼ºåˆ¶ç”¨æˆ·å¿…é¡»ä¸åº”ç”¨è¿›è¡Œäº¤äº’ï¼Œæ‰èƒ½å®Œæˆæœ€ç»ˆçš„è¯·æ±‚ã€‚</li>
<li>é€šè¿‡ referer å®ç°ç”¨æˆ·éªŒè¯ã€‚æ ¹æ® <strong>HTTP</strong> åè®®ï¼Œåœ¨ <strong>HTTP</strong> å¤´ä¸­æœ‰ä¸€ä¸ªå­—æ®µå« <strong>Referer</strong>ï¼Œå®ƒè®°å½•äº†è¯¥ <strong>HTTP</strong> è¯·æ±‚çš„ <strong>æ¥æºåœ°å€</strong>ã€‚é€šè¿‡ <strong>Referer Check</strong>ï¼Œå¯ä»¥æ£€æŸ¥è¯·æ±‚æ˜¯å¦æ¥è‡ªåˆæ³•çš„â€æºâ€ã€‚</li>
<li>é€šè¿‡ token å®ç°ç”¨æˆ·éªŒè¯ã€‚</li>
<li>å°½é‡ä¸è¦åœ¨é¡µé¢çš„é“¾æ¥ä¸­æš´éœ²ç”¨æˆ·éšç§ä¿¡æ¯ã€‚</li>
<li>å¯¹äºç”¨æˆ·ä¿®æ”¹åˆ é™¤ç­‰æ“ä½œæœ€å¥½éƒ½ä½¿ç”¨ post æ“ä½œã€‚</li>
<li>é¿å…å…¨ç«™é€šç”¨çš„ cookieï¼Œä¸¥æ ¼è®¾ç½® cookie çš„åŸŸã€‚</li>
</ul>
<h2 id="XSS-Cross-Site-Script"><a href="#XSS-Cross-Site-Script" class="headerlink" title="XSS : Cross Site Script"></a>XSS : Cross Site Script</h2><p><strong>XSS</strong> è·¨ç«™è„šæœ¬æ”»å‡»ã€‚<br>æ”»å‡»è€…å‘ç”¨æˆ·çš„ç½‘ç«™åµŒå…¥çš„ js è„šæœ¬ä»£ç ï¼Œå½“ç”¨æˆ·è®¿é—®è¯¥ç½‘ç«™çš„æ—¶å€™ï¼Œè¯¥ js è„šæœ¬ä»£ç å°±ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ”»å‡»ç”¨æˆ·çš„ç›®çš„ã€‚</p>
<h4 id="åå°„å‹-XSS-æ”»å‡»"><a href="#åå°„å‹-XSS-æ”»å‡»" class="headerlink" title="åå°„å‹ XSS æ”»å‡»"></a>åå°„å‹ XSS æ”»å‡»</h4><p>åˆç§°éæŒä¹…æ€§è·¨ç«™è„šæœ¬æ”»å‡»ã€‚å‘å‡ºè¯·æ±‚æ—¶ï¼ŒXSS ä»£ç å‡ºç°åœ¨ <strong>URL</strong> ä¸­ï¼Œä½œä¸ºè¾“å…¥æäº¤åˆ°æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨ç«¯è§£æåå“åº”ï¼ŒXSS éšå“åº”å†…å®¹ä¸€èµ·è¿”å›ç»™æµè§ˆå™¨ï¼Œæœ€åæµè§ˆå™¨è§£ææ‰§è¡Œ XSS ä»£ç ã€‚æ¼æ´äº§ç”Ÿçš„åŸå› æ˜¯æ”»å‡»è€…æ³¨å…¥çš„æ•°æ®åæ˜ åœ¨å“åº”ä¸­ã€‚ä¸€ä¸ªå…¸å‹çš„éæŒä¹…æ€§ XSS åŒ…å«ä¸€ä¸ªå¸¦ XSS æ”»å‡»å‘é‡çš„é“¾æ¥(å³æ¯æ¬¡æ”»å‡»éœ€è¦ç”¨æˆ·çš„ç‚¹å‡»)ã€‚<br>æ¯”å¦‚ï¼š</p>
<pre><code>http://www.test.com/message.php?send=&lt;script&gt;alert(â€˜foolish!â€™)&lt;/script&gt;ï¼
</code></pre><h4 id="å­˜å‚¨å‹-XSS-æ”»å‡»"><a href="#å­˜å‚¨å‹-XSS-æ”»å‡»" class="headerlink" title="å­˜å‚¨å‹ XSS æ”»å‡»"></a>å­˜å‚¨å‹ XSS æ”»å‡»</h4><p>XSS æäº¤çš„ä»£ç ä¼šå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼ˆæ•°æ®åº“ï¼Œå†…å­˜ï¼Œæ–‡ä»¶ç³»ç»Ÿç­‰ï¼‰ï¼Œä¸‹æ¬¡è¯·æ±‚ç›®æ ‡é¡µé¢æ—¶ä¸ç”¨å†æäº¤ XSS ä»£ç ã€‚è¿™ç§æ”»å‡»æ–¹å¼çš„ç¨³å®šæ€§å¾ˆå¥½ã€‚<br>æ¯”å¦‚ï¼š</p>
<blockquote>
<p>æ”»å‡»è€…åœ¨ value å¡«å†™<code>&lt;script&gt;alert(â€˜foolish!â€™)&lt;/script&gt;</code>ã€æˆ–è€… html å…¶ä»–æ ‡ç­¾ï¼ˆç ´åæ ·å¼ã€‚ã€‚ã€‚ï¼‰ã€ä¸€æ®µæ”»å‡»å‹ä»£ç ã€‘ï¼›å°†æ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼›å…¶ä»–ç”¨æˆ·å–å‡ºæ•°æ®æ˜¾ç¤ºçš„æ—¶å€™ï¼Œå°†ä¼šæ‰§è¡Œè¿™äº›æ”»å‡»æ€§ä»£ç ã€‚</p>
</blockquote>
<h4 id="å…·ä½“æ–¹å¼"><a href="#å…·ä½“æ–¹å¼" class="headerlink" title="å…·ä½“æ–¹å¼"></a>å…·ä½“æ–¹å¼</h4><ul>
<li>æ”»å‡»è€…å‘æœåŠ¡å™¨æ³¨å…¥ js ä»£ç ã€‚</li>
<li>è¯±å¯¼ç”¨æˆ·è®¿é—®å—åˆ°æ”»å‡»çš„ç½‘ç«™ã€‚</li>
<li>ç”¨æˆ·è®¿é—®å—åˆ°æ”»å‡»çš„ç½‘ç«™ï¼Œæ‰§è¡Œæ³¨å…¥çš„ js ä»£ç ã€‚</li>
</ul>
<h4 id="XSS-é˜²å¾¡æ–¹å¼"><a href="#XSS-é˜²å¾¡æ–¹å¼" class="headerlink" title="XSS é˜²å¾¡æ–¹å¼"></a>XSS é˜²å¾¡æ–¹å¼</h4><ul>
<li>HttpOnly</li>
<li>è¾“å…¥æ£€æŸ¥</li>
<li>è¾“å‡ºæ£€æŸ¥</li>
</ul>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<ul>
<li><a href="https://www.cnblogs.com/shytong/p/5308667.html" target="_blank" rel="noopener">https://www.cnblogs.com/shytong/p/5308667.html</a></li>
<li><a href="https://github.com/dwqs/blog/issues/68" target="_blank" rel="noopener">https://github.com/dwqs/blog/issues/68</a></li>
<li><a href="https://www.cnblogs.com/phpstudy2015-6/p/6767032.html#_label3" target="_blank" rel="noopener">https://www.cnblogs.com/phpstudy2015-6/p/6767032.html#_label3</a></li>
</ul>
]]></content>
      <categories>
        <category>frontEnd</category>
        <category>web-safe</category>
      </categories>
      <tags>
        <tag>frontEnd</tag>
        <tag>web-safe</tag>
      </tags>
  </entry>
  <entry>
    <title>Ajaxå’Œè·¨åŸŸæ€»ç»“</title>
    <url>/2019/02/17/Ajax%E5%92%8C%E8%B7%A8%E5%9F%9F%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h2 id="Ajaxï¼ˆJavaScriptå®ç°ï¼‰"><a href="#Ajaxï¼ˆJavaScriptå®ç°ï¼‰" class="headerlink" title="Ajaxï¼ˆJavaScriptå®ç°ï¼‰"></a>Ajaxï¼ˆJavaScriptå®ç°ï¼‰</h2><h4 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h4><p>Ajaxï¼ˆAsync Javascript And Xmlï¼‰ï¼šå¼‚æ­¥Jså’ŒXmlï¼Œæ„æ€å°±æ˜¯ç”¨Jsæ‰§è¡Œå¼‚æ­¥ç½‘ç»œè¯·æ±‚ã€‚ä½œç”¨ä¸»è¦æ˜¯åœ¨ä¸é‡æ–°åŠ è½½<strong>å…¨éƒ¨ç½‘é¡µ</strong>çš„æƒ…å†µä¸‹ï¼Œå¯¹<strong>éƒ¨åˆ†é¡µé¢</strong>è¿›è¡Œæ›´æ–°ã€‚</p>
<h4 id="åˆ›å»ºXMLHttpRequestå¯¹è±¡"><a href="#åˆ›å»ºXMLHttpRequestå¯¹è±¡" class="headerlink" title="åˆ›å»ºXMLHttpRequestå¯¹è±¡"></a>åˆ›å»ºXMLHttpRequestå¯¹è±¡</h4><p>é™¤äº†IE5å’ŒIE6ä¸æ”¯æŒä¹‹å¤–ï¼ˆæ”¯æŒActiveXObjectå¯¹è±¡ï¼‰ï¼Œå‡ ä¹ç°åœ¨æ‰€æœ‰çš„æœ‰å†…å»ºçš„XMLHttpRequestå¯¹è±¡ã€‚æ‰€ä»¥åœ¨åˆ›å»ºè¯·æ±‚å¯¹è±¡ä¹‹å‰åˆ¤æ–­ä¸‹å°±å¥½äº†ï¼š</p>
<pre><code>let xhr = null;
xhr = window.XMLHttpRequest ? new xmlHttpRequest() : new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;)
// æˆ–è€…
if(window.XMLHttpRequest){
    xhr = new XMLHttpRequest()
}else{
    xhr = new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;)
}
</code></pre><h4 id="é€šè¿‡open-å’Œsend-å‘æœåŠ¡å™¨å‘é€è¯·æ±‚"><a href="#é€šè¿‡open-å’Œsend-å‘æœåŠ¡å™¨å‘é€è¯·æ±‚" class="headerlink" title="é€šè¿‡open()å’Œsend()å‘æœåŠ¡å™¨å‘é€è¯·æ±‚"></a>é€šè¿‡open()å’Œsend()å‘æœåŠ¡å™¨å‘é€è¯·æ±‚</h4><ul>
<li>xhr.open(method, url, async)<br>è¿™ä¸ªæ–¹æ³•çš„å‚æ•°åˆ†åˆ«æ˜¯ï¼šmethodè¯·æ±‚çš„ç±»å‹GETæˆ–è€…POSTï¼›URLè¯·æ±‚çš„æ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šçš„åœ°å€ï¼›asyncæ˜¯å¦å¼‚æ­¥è¯·æ±‚trueæˆ–è€…falseï¼ˆä¸€èˆ¬ä¸è®¾ç½®ä¸ºfalseï¼‰ã€‚</li>
<li>xhr.send()ï¼šå‘é€è¯·æ±‚ã€‚</li>
<li>xhr.setRequestHeader(header, value)ï¼šå¦‚æœæ˜¯POSTçš„è¯ï¼Œè¦è®¾ç½®å‘é€çš„HTTPå¤´ï¼Œç„¶åé€šè¿‡sendæ–¹æ³•å‘é€å†…å®¹ã€‚å‚æ•°åˆ†åˆ«æ˜¯ï¼šå‘é€çš„å¤´éƒ¨åç§°ï¼Œå¤´éƒ¨çš„å€¼ã€‚ä¸€èˆ¬éƒ½æ˜¯å›ºå®šçš„ã€‚</li>
</ul>
<pre><code>// å‘æµè§ˆå™¨å‘é€è¯·æ±‚
xhr.open(&#39;GET&#39;, &#39;./server.php&#39;, true)
// æ·»åŠ HTTPå¤´ï¼ˆPOSTæ–¹æ³•ï¼‰
xhr.setRequestHeader(&#39;Content-Text&#39;, &#39;application/x-www-form-urlencoded&#39;)   
xhr.send()
</code></pre><p>GETæ–¹æ³•ä¸éœ€è¦å‚æ•°ï¼ŒPOSTæ–¹æ³•åˆ™éœ€è¦æŠŠbodyå‚æ•°ï¼›å¦‚æœè¦æƒ³å‘æœåŠ¡å™¨å‘é€ç›¸å…³çš„å‚æ•°ï¼Œåˆ™é€šè¿‡opené‡Œé¢çš„ç¬¬äºŒä¸ªå‚æ•°urlè¿›è¡Œå‘é€ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code>url = &quot;./filePath?paramName=&quot; + paramValue + ...;
</code></pre><h4 id="åˆ¤æ–­å‡†å¤‡çŠ¶æ€"><a href="#åˆ¤æ–­å‡†å¤‡çŠ¶æ€" class="headerlink" title="åˆ¤æ–­å‡†å¤‡çŠ¶æ€"></a>åˆ¤æ–­å‡†å¤‡çŠ¶æ€</h4><pre><code>xhr.onreadystatechange = function () {
    if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) {
        ...
    }
}
</code></pre><ul>
<li>xhr.onreadystatechangeæ–¹æ³•ä¸­ï¼Œæ¯å½“readyStateæ”¹å˜æ—¶ï¼Œå°±ä¼šè§¦å‘xhr.onreadystatechangeäº‹ä»¶ã€‚</li>
<li>readyStateå±æ€§ï¼šå­˜æœ‰XMLHttpRequestçš„çŠ¶æ€ä¿¡æ¯ã€‚0ï¼šè¯·æ±‚æœªåˆå§‹åŒ–ï¼›1ï¼šæœåŠ¡å™¨é“¾æ¥å·²ç»å»ºç«‹ï¼›2ï¼šè¯·æ±‚å·²ç»æ¥å—ï¼›3ï¼šè¯·æ±‚å¤„ç†ä¸­ï¼›4ï¼šè¯·æ±‚å·²å®Œæˆï¼Œä¸”å“åº”å·²å°±ç»ªã€‚ä¸€å…±æœ‰5ä¸ªçŠ¶æ€ï¼Œæ‰€ä»¥onreadystatechangeäº‹ä»¶ä¼šè¢«è§¦å‘5æ¬¡ã€‚</li>
<li>å®é™…ä¸Šonreadystateschangeæ˜¯é€šè¿‡å›è°ƒå‡½æ•°å®ç°çš„ï¼Œå³ï¼šæ¯å½“readyStateçš„çŠ¶æ€æ”¹å˜æ—¶ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°å°±ä¼šè¢«æ‰§è¡Œã€‚</li>
<li>statuså±æ€§ï¼šè¡¨ç¤ºå“åº”çš„ç»“æœã€‚</li>
</ul>
<p>æ€»çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>document.getElementById(&#39;btn&#39;).onclick = function () {
// åˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼ˆå…ˆåˆ¤æ–­æµè§ˆå™¨ç±»å‹ï¼‰
// var xhr = null;
// if (window.XMLHttpRequest) {
//     xhr = new XMLHttpRequest()
// } else {
//     xhr = new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;)
// }
xhr = (window.XMLHttpRequest) ? (new XMLHttpRequest()) : (new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;))
// åˆ¤æ–­å“åº”çŠ¶æ€å¹¶æ‰§è¡Œç›¸å…³çš„æ“ä½œ
xhr.onreadystatechange = function () {
    if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) {
        let data = xhr.responseText
        console.log(data);
        document.getElementById(&#39;myDiv&#39;).innerText = data
    }
}
// å‘æµè§ˆå™¨å‘é€è¯·æ±‚
let url = &quot;./server.txt&quot;
xhr.open(&#39;GET&#39;, url, true)
// æ·»åŠ HTTPå¤´ï¼ˆPOSTæ–¹æ³•ï¼‰
// xhr.setRequestHeader(&#39;Content-Text&#39;, &#39;application/x-www-form-urlencoded&#39;)
xhr.send(null);
}
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-b5b344a3944ba224.gif?imageMogr2/auto-orient/strip" alt="å¼‚æ­¥1.gif"></p>
<p>ä½†æ˜¯ï¼Œç”±äºåœ¨<strong>åŒæºç­–ç•¥</strong>çš„ä½œç”¨ä¸‹ï¼Œæµè§ˆå™¨åªèƒ½åŒæºçš„å…¶ä»–åŸŸçš„èµ„æºï¼Œå…ˆçœ‹çœ‹ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥ï½</p>
<h2 id="åŒæºç­–ç•¥-SOPï¼ˆSame-origin-policyï¼‰"><a href="#åŒæºç­–ç•¥-SOPï¼ˆSame-origin-policyï¼‰" class="headerlink" title="åŒæºç­–ç•¥/SOPï¼ˆSame origin policyï¼‰"></a>åŒæºç­–ç•¥/SOPï¼ˆSame origin policyï¼‰</h2><p>æ¥è‡ªç™¾åº¦çš„è§£é‡Šï¼š</p>
<blockquote>
<p>åŒæºç­–ç•¥ï¼ˆSame origin policyï¼‰æ˜¯ä¸€ç§çº¦å®šï¼Œå®ƒæ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ï¼ˆé˜²æ­¢CSRF/XSRFæ”»å‡»ï¼šè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰ã€‚ç°åœ¨æ‰€æœ‰æ”¯æŒJavaScript çš„æµè§ˆå™¨éƒ½ä¼šä½¿ç”¨è¿™ä¸ªç­–ç•¥ã€‚æ‰€è°“åŒæºæ˜¯æŒ‡ï¼ŒåŸŸåï¼Œåè®®ï¼Œç«¯å£ç›¸åŒã€‚</p>
</blockquote>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æµè§ˆå™¨åªèƒ½è¯·æ±‚åŒæºçš„å…¶ä»–åŸŸçš„èµ„æºï¼Œå³åŒæºçš„ç½‘é¡µæ‰èƒ½ç›¸äº’è·å–èµ„æºï¼Œè€Œä¸èƒ½è®¿é—®å…¶ä»–åŸŸçš„èµ„æºï¼›ä½†æ˜¯æœ‰ä¸€ä¸ªä¾‹å¤–ï¼ŒåŒæºç­–ç•¥ä¸ä¼šé˜»æ­¢åŠ¨æ€è„šæœ¬æ’å…¥åˆ°æ–‡æ¡£ä¸­ï¼›å…¶ä¸­ï¼Œ<strong><script>\</script></strong>æ˜¯å¼€æ”¾ç­–ç•¥ï¼›å½“webç½‘é¡µæ‰§è¡Œä¸€ä¸ªè„šæœ¬ä¹‹å‰ï¼Œä¼šæ£€æŸ¥æ˜¯å¦åŒæºï¼Œåªæœ‰åŒæºæ‰ä¼šè¢«æ‰§è¡Œï¼ŒéåŒæºåˆ™ä¼šè¢«æ‹’ç»è®¿é—®ã€‚<br>æˆªå–ç½‘ä¸Šçš„å›¾ç‰‡è¯´æ˜åŒæºï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-80411ea5e317ed19.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></p>
<h2 id="è·¨åŸŸ"><a href="#è·¨åŸŸ" class="headerlink" title="è·¨åŸŸ"></a>è·¨åŸŸ</h2><p>è·¨åŸŸå°±æ˜¯çªç ´åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œè·å–å…¶ä»–æºçš„èµ„æºã€‚<br>éåŒæºä¸»è¦æœ‰ä¸‰ç§è¡Œä¸ºä¼šå—åˆ°é™åˆ¶ï¼š</p>
<ul>
<li>Cookie,LocalStorageå’ŒIndexDBæ— æ³•è¯»å–ã€‚</li>
<li>DOMæ— æ³•è·å–ã€‚</li>
<li>Ajaxæ— æ³•è·å–ã€‚</li>
</ul>
<h4 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h4><p>JSONPæ˜¯å®ç°è·¨åŸŸçš„å¸¸ç”¨æ–¹æ³•ï¼Œä½†æ˜¯JSONPåªèƒ½å®ç°GETæ–¹æ³•ã€‚å®é™…ä¸Šæ˜¯æ˜¯åˆ©ç”¨äº†æµè§ˆå™¨å…è®¸è·¨åŸŸå¼•ç”¨JavaScriptèµ„æºï¼ˆscriptæ ‡ç­¾æ˜¯å¼€æ”¾ç­–ç•¥ï¼‰ã€‚</p>
<p>ä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­ï¼šæˆ‘ä»¬ä»360æµè§ˆå™¨é¦–é¡µçš„å¤©æ°”æŸ¥è¯¢è·å–å¤©æ°”æŸ¥è¯¢çš„å¼‚æ­¥è¯·æ±‚åœ°å€ï¼›è¿™é‡Œæˆ‘ä»¬å®ç°é€šè¿‡æœ¬åœ°localhostæœåŠ¡å™¨è·¨åŸŸè¯·æ±‚360çš„å¤©æ°”æŸ¥è¯¢ï¼Œæ¥è¯´æ˜JSONPæ€ä¹ˆå®ç°è·¨åŸŸã€‚<br>æˆ‘ä»¬è¯·æ±‚èµ„æºçš„åœ°å€ä¸ºï¼š<br><a href="https://cdn.weather.hao.360.cn/sed_api_weather_info.php?code=101280501&amp;v=2&amp;param=weather&amp;app=hao360&amp;_jsonp=__jsonp21__&amp;t=2521600" target="_blank" rel="noopener">https://cdn.weather.hao.360.cn/sed_api_weather_info.php?code=101280501&amp;v=2&amp;param=weather&amp;app=hao360&amp;_jsonp=__jsonp21__&amp;t=2521600</a><br>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€è¿™ä¸ªåœ°å€ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°è¿™æ ·çš„æ•°æ®ï¼š__jsonp21__({â€¦})ã€‚<br>è§£é‡Šï¼šJSONPè¿”å›çš„é€šå¸¸æ˜¯ä»¥å‡½æ•°çš„å½¢å¼è¿”å›ï¼Œå‰é¢è¿™ä¸ª__jsonp21__æ˜¯å‡½æ•°åï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­äº‹å…ˆå‡†å¤‡å¥½åç§°ä¸º__jsonp21__çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯¹è·¨åŸŸè¯·æ±‚åˆ°çš„æ•°æ®å°±æ˜¯æ”¾åœ¨è¿™ä¸ªå‡½æ•°ä¸­çš„ï¼Œç„¶ååŠ¨æ€åŠ è½½ä¸€ä¸ª<strong>script</strong>èŠ‚ç‚¹ï¼Œç›¸å½“äºåŠ¨æ€è¯»å–å¤–åŸŸçš„JavaScriptèµ„æºï¼Œæœ€åå°±ç­‰ç€æ¥æ”¶å›è°ƒäº†ã€‚</p>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code> // è¯·æ±‚çš„åœ°å€ä¸ºï¼šhttps://cdn.weather.hao.360.cn/sed_api_weather_info.php?code=101280501&amp;v=2&amp;param=weather&amp;app=hao360&amp;_jsonp=__jsonp21__&amp;t=2521600

function __jsonp21__(data) {   // å°†è¦å¤„ç†äº†çš„æ•°æ®æ”¾åœ¨è¿™ä¸ªå‡½æ•°ä¸­
    console.log(data);  // å¾—åˆ°çš„æ˜¯è·¨åŸŸè¯·æ±‚çš„æ•°æ®
    let myDiv = document.getElementById(&#39;myDiv&#39;)  
    myDiv.innerHTML = data.area
}
window.onload = function () { 
    let btn = document.getElementById(&#39;btn&#39;)
    btn.addEventListener(&#39;click&#39;, function () {  
        let url = &#39;https://cdn.weather.hao.360.cn/sed_api_weather_info.php?code=101280501&amp;v=2&amp;param=weather&amp;app=hao360&amp;_jsonp=__jsonp21__&amp;t=2521600&#39;
        let scriptTag = document.createElement(&#39;script&#39;)    // åŠ¨æ€åˆ›å»ºscriptæ ‡ç­¾ 
        scriptTag.setAttribute(&#39;src&#39;, url)      // å°†å…¶ä»–æºçš„åœ°å€è®¾ç½®ä¸ºåŠ¨æ€scriptçš„srcå±æ€§
        // console.log(scriptTag);  // å¾—åˆ°çš„æ˜¯scriptæ ‡ç­¾
        document.getElementsByTagName(&#39;body&#39;)[0].appendChild(scriptTag)  // å°†åŠ¨æ€åˆ›å»ºçš„scriptæ ‡ç­¾æ·»åŠ åˆ°htmlé¡µé¢ä¸­
    })
}
</code></pre><p>æ³¨æ„ï¼šæ•°æ®å¤„ç†çš„å‡½æ•°åè¦è·Ÿè·¨åŸŸè¿”å›çš„å‡½æ•°åä¸€æ ·ï¼Œè¿™æ ·æˆ‘ä»¬é€šè¿‡JSONPè¯·æ±‚æ•°æ®çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨æ‰èƒ½è¿”å›æ•°æ®ã€‚<br>æœ€ç»ˆç»“æœå¦‚ä¸‹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-df752a8458c616ff.gif?imageMogr2/auto-orient/strip" alt="è·¨åŸŸ1.gif"></p>
<p>å†å¥ä¸€ä¸ªä¾‹å­ï¼š<br>è¯·æ±‚åœ°å€æ˜¯<a href="http://api.money.126.net/data/feed/0000001,1399001?callback=refreshPrice" target="_blank" rel="noopener">http://api.money.126.net/data/feed/0000001,1399001?callback=refreshPrice</a></p>
<pre><code>function refreshPrice(data) { 
console.log(data);
}
window.onload = function () {  
    let scriptTag = document.createElement(&#39;script&#39;)
    let url = &#39;http://api.money.126.net/data/feed/0000001,1399001?callback=refreshPrice&#39;
    scriptTag.setAttribute(&#39;src&#39;, url)
    document.getElementsByTagName(&#39;body&#39;)[0].appendChild(scriptTag)
}
</code></pre><h2 id="Ajaxï¼ˆJQueryå®ç°ï¼‰"><a href="#Ajaxï¼ˆJQueryå®ç°ï¼‰" class="headerlink" title="Ajaxï¼ˆJQueryå®ç°ï¼‰"></a>Ajaxï¼ˆJQueryå®ç°ï¼‰</h2><p>åœ¨JQueryä¸­ï¼Œå®ç°Ajaxä¸»è¦æ˜¯ç”±<strong>$.ajax({â€¦})</strong>æ–¹æ³•å®ç°ã€‚æ–¹æ³•çš„å¸¸ç”¨å‚æ•°æœ‰ï¼š</p>
<ul>
<li>asyncï¼šæ˜¯å¦å®ç°å¼‚æ­¥åŠ è½½ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæ˜¯trueã€‚</li>
<li>typeï¼šGETæˆ–è€…POSTã€‚</li>
<li>urlï¼šå‘é€è¯·æ±‚çš„åœ°å€ã€‚</li>
<li>timeoutï¼šè®¾ç½®è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ã€‚</li>
<li>successï¼šè¯·æ±‚æˆåŠŸåçš„å›è°ƒå‡½æ•°ã€‚</li>
<li>errorï¼šè¯·æ±‚å¤±è´¥åçš„å›è°ƒå‡½æ•°ã€‚</li>
<li>jsonpï¼šåœ¨ä¸€ä¸ªJSONPè¯·æ±‚ä¸­é‡å†™å›è°ƒå‡½æ•°çš„åå­—ï¼Œé»˜è®¤ä¸ºcallbackï¼Œç”¨æ¥é‡æ–°å‘½åå›è°ƒæˆ‘ä»¬è·¨åŸŸè¯·æ±‚æ—¶å€™çš„å‡½æ•°åå­—ã€‚è¿™ä¸ªå€¼ç”¨æ¥æ›¿ä»£åœ¨ â€œcallback=?â€ è¿™ç§ GET æˆ– POST è¯·æ±‚ä¸­ URL å‚æ•°é‡Œçš„ â€œcallbackâ€ éƒ¨åˆ†ï¼Œæ¯”å¦‚ {jsonp:â€™onJsonPLoadâ€™} ä¼šå¯¼è‡´å°† â€œonJsonPLoad=?â€ ä¼ ç»™æœåŠ¡å™¨ã€‚</li>
<li>jsonpCallbackï¼šä¸ºJSONPè¯·æ±‚æŒ‡å®šä¸€ä¸ªå›è°ƒå‡½æ•°åã€‚ </li>
<li>dataTypeï¼šé¢„æœŸæœåŠ¡å™¨è¿”å›çš„æ•°æ®ç±»å‹ã€‚ä¸æŒ‡å®šçš„è¯ï¼ŒJQueryhiè‡ªåŠ¨åˆ¤æ–­ã€‚â€xmlâ€: è¿”å› XML æ–‡æ¡£ï¼Œå¯ç”¨jQueryå¤„ç†ã€‚</li>
</ul>
<blockquote>
<p>â€œhtmlâ€: è¿”å›çº¯æ–‡æœ¬ HTML ä¿¡æ¯ï¼›åŒ…å«çš„ script æ ‡ç­¾ä¼šåœ¨æ’å…¥ dom æ—¶æ‰§è¡Œï¼›â€scriptâ€: è¿”å›çº¯æ–‡æœ¬JavaScriptä»£ç ã€‚ä¸ä¼šè‡ªåŠ¨ç¼“å­˜ç»“æœã€‚é™¤éè®¾ç½®äº†â€cacheâ€å‚æ•°ã€‚æ³¨æ„ï¼šåœ¨è¿œç¨‹è¯·æ±‚æ—¶(ä¸åœ¨åŒä¸€ä¸ªåŸŸä¸‹)ï¼Œæ‰€æœ‰POSTè¯·æ±‚éƒ½å°†è½¬ä¸ºGETè¯·æ±‚ã€‚ï¼ˆå› ä¸ºå°†ä½¿ç”¨DOMçš„ scriptæ ‡ç­¾æ¥åŠ è½½ï¼‰ï¼›â€jsonâ€: è¿”å›JSONæ•°æ®ï¼›â€jsonpâ€: JSONPæ ¼å¼ã€‚ä½¿ç”¨ JSONP å½¢å¼è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¦‚ â€œmyurl?callback=?â€ jQuery å°†è‡ªåŠ¨æ›¿æ¢ ? ä¸ºæ­£ç¡®çš„å‡½æ•°åï¼Œä»¥æ‰§è¡Œå›è°ƒå‡½æ•°ï¼›â€textâ€: è¿”å›çº¯æ–‡æœ¬å­—ç¬¦ä¸²ã€‚</p>
</blockquote>
<p>ç”¨JQueryå®ç°åŒæºçš„Ajaxè¯·æ±‚ï¼š</p>
<pre><code>$(function () {  
    $(&#39;button&#39;).on(&#39;click&#39;, function () {  
        $.ajax({
            url: &#39;./server.txt&#39;,    // è¯·æ±‚åœ°å€
            type: &#39;GET&#39;,    // è¯·æ±‚æ–¹å¼
            async: true,    // æ˜¯å¦å¼‚æ­¥
            success: function (data) {  
                console.log(data);
            }   // è¯·æ±‚æˆåŠŸåæ‰§è¡Œçš„å‡½æ•°
        })
    })
})
</code></pre><p>å®ç°ç»“æœå¦‚ä¸‹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-b1fcb9ed574a8a24.gif?imageMogr2/auto-orient/strip" alt="å¼‚æ­¥2.gif"></p>
<p>ç”¨JQueryå®ç°éåŒæºçš„JSONPè·¨åŸŸè¯·æ±‚ï¼š</p>
<pre><code>$(function () {  
$(&#39;button&#39;).on(&#39;click&#39;, function () {  
    $.ajax({
        url: &#39;https://cdn.weather.hao.360.cn/sed_api_weather_info.php?code=101280501&amp;v=2&amp;param=weather&amp;app=hao360&amp;_jsonp=__jsonp21__&amp;t=2521600&#39;,
        type: &#39;GET&#39;,
        async: true,
        dataType: &#39;jsonp&#39;,
        jsonp: &#39;_jsonp&#39;,
        jsonpCallback: &#39;__jsonp21__&#39;,
        success: function (data) {  
            console.log(data);
            $(&#39;#myDiv&#39;).html(data.area)
        },
        error: function (err) {  
            console.log(err);
        }
    })
})
})
</code></pre><p>å®ç°ç»“æœå¦‚ä¸‹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-14e8fc745c21ab00.gif?imageMogr2/auto-orient/strip" alt="è·¨åŸŸ2.gif"></p>
]]></content>
      <categories>
        <category>frontEnd</category>
        <category>js</category>
      </categories>
      <tags>
        <tag>frontEnd</tag>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>3Dç«‹ä½“éª°å­</title>
    <url>/2019/02/16/3D%E7%AB%8B%E4%BD%93%E9%AA%B0%E5%AD%90/</url>
    <content><![CDATA[<p>CSS3ç¡®å®å¾ˆå¼ºå¤§ï¼Œå¾ˆå¤šé«˜å¤§ä¸Šçš„åŠ¨ç”»éƒ½å¯ä»¥å®ç°ï¼Œè¿™é‡Œæ¥å®ç°ä¸‹3Dç«‹æ–¹ä½“ï¼Œæ•ˆæœå›¾å¦‚ä¸‹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-21400fd37137e37c.gif?imageMogr2/auto-orient/strip" alt="3Dç«‹æ–¹ä½“.gif"></p>
<h2 id="html"><a href="#html" class="headerlink" title="html"></a>html</h2><p>å…¶å®ï¼Œå®ç°3Dç«‹æ–¹ä½“éœ€è¦çš„htmlååˆ†ç®€å•ï¼Œåªéœ€è¦ä¸€ä¸ªulæ ‡ç­¾é‡Œé¢åŒ…è£¹6ä¸ªliæ ‡ç­¾ï¼Œåˆ†åˆ«ç”¨æ¥è¡¨ç¤º3Dç«‹æ–¹ä½“çš„6ä¸ªé¢[ å‰ï¼Œä¸‹ï¼Œåï¼Œä¸Šï¼Œå·¦ï¼Œå³ ]ã€‚å…·ä½“ä»£ç å¦‚ä¸‹:</p>
<pre><code>&lt;ul&gt;
    &lt;li&gt;1&lt;/li&gt;
    &lt;li&gt;2&lt;/li&gt;
    &lt;li&gt;3&lt;/li&gt;
    &lt;li&gt;4&lt;/li&gt;
    &lt;li&gt;5&lt;/li&gt;
    &lt;li&gt;6&lt;/li&gt;
&lt;/ul&gt;
</code></pre><h2 id="CSS3"><a href="#CSS3" class="headerlink" title="CSS3"></a>CSS3</h2><h4 id="ul"><a href="#ul" class="headerlink" title="ul"></a>ul</h4><p>åŸºæœ¬çš„å®½é«˜è¿™äº›å°±ä¸è¯´äº†ï¼›ä½œä¸ºæ•´ä¸ª3Dç«‹æ–¹ä½“çš„çˆ¶çº§å…ƒç´ ï¼Œéœ€è¦è®¾ç½®positiionå±æ€§ä¸ºrelativeï¼Œè¿˜è¦æœ€é‡è¦çš„æ˜¯è®¾ç½®å®ƒçš„åŠ¨ç”»ç±»å‹tranform-styleä¸ºpreserve-3dï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å®ƒçš„æ‰€æœ‰å­å…ƒç´ éƒ½è¿›è¡Œ3dåŠ¨ç”»ã€‚</p>
<h4 id="li"><a href="#li" class="headerlink" title="li"></a>li</h4><p>å®½é«˜è®¾ç½®ä¸º100%ï¼Œpositionå±æ€§è®¾ç½®ä¸ºabsoluteã€‚</p>
<ul>
<li>å‰<br>è®¾ç½®èƒŒæ™¯ï¼Œå¹¶ä¸”æ²¿ç€Zè½´ç§»åŠ¨50pxï¼Œå³å®½é«˜çš„ä¸€åŠ(ä¸ºä»€ä¹ˆå¾—æ·»åŠ è¿™ä¸ª, åé¢ç”¨åŠ¨ç”»è¿›è¡Œè§£é‡Šè¯´æ˜)ã€‚</li>
<li>ä¸‹<br>è®¾ç½®èƒŒæ™¯ï¼Œæ²¿ç€<strong>Xè½´</strong>æ—‹è½¬-90degï¼Œä½œä¸ºåº•é¢ï¼ŒåŒæ ·ï¼Œå¹¶ä¸”æ²¿ç€Zè½´ç§»åŠ¨50pxã€‚</li>
<li>å<br>è®¾ç½®èƒŒæ™¯ï¼Œæ²¿ç€<strong>Xè½´</strong>æ—‹è½¬-180degï¼Œä½œä¸ºåé¢ï¼ŒåŒæ ·ï¼Œå¹¶ä¸”æ²¿ç€Zè½´ç§»åŠ¨50pxã€‚</li>
<li>ä¸Š<br>è®¾ç½®èƒŒæ™¯ï¼Œæ²¿ç€<strong>Xè½´</strong>æ—‹è½¬90degï¼Œä½œä¸ºä¸Šé¢ï¼ŒåŒæ ·ï¼Œå¹¶ä¸”æ²¿ç€Zè½´ç§»åŠ¨50pxã€‚</li>
<li>å·¦<br>è®¾ç½®èƒŒæ™¯ï¼Œæ²¿ç€<strong>Yè½´</strong>æ—‹è½¬-90degï¼Œä½œä¸ºå·¦é¢ï¼ŒåŒæ ·ï¼Œå¹¶ä¸”æ²¿ç€Zè½´ç§»åŠ¨50pxã€‚</li>
<li><p>å³<br>è®¾ç½®èƒŒæ™¯ï¼Œæ²¿ç€<strong>Yè½´</strong>æ—‹è½¬90degï¼Œä½œä¸ºå³é¢ï¼ŒåŒæ ·ï¼Œå¹¶ä¸”æ²¿ç€Zè½´ç§»åŠ¨50pxã€‚<br><img src="http://upload-images.jianshu.io/upload_images/659084-133d15ade6726266.gif?imageMogr2/auto-orient/strip" alt="æ•ˆæœ.gif"></p>
<h4 id="ç»“å°¾è¯´æ˜"><a href="#ç»“å°¾è¯´æ˜" class="headerlink" title="ç»“å°¾è¯´æ˜"></a>ç»“å°¾è¯´æ˜</h4><p>è¿™é‡Œè¯´æ˜ä¸Šé¢é‚£ä¸ªtranslateï¼Œå…ˆæ¥çœ‹çœ‹å¦‚æœä¸æ·»åŠ è¿™ä¸ªå±æ€§æ˜¯æ€æ ·çš„æ•ˆæœï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-2e1633af2155afdb.gif?imageMogr2/auto-orient/strip" alt="åŠ¨ç”».gif"><br>å¯è§ï¼Œæ‰€æœ‰çš„é¢éƒ½äº¤é›†äºç«‹æ–¹ä½“çš„ä¸­å¿ƒç‚¹ã€‚ç”±äºæœªå¯¹6ä¸ªé¢ä½œä»»ä½•åŠ¨ç”»å¤„ç†çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„é¢éƒ½é›†åˆåœ¨ä¸€èµ·ã€‚æ‰€ä»¥åœ¨é¢ä½œæ—‹è½¬çš„åŒæ—¶éœ€è¦å¯¹å…¶è¿›è¡ŒZè½´çš„ä½ç§»å¤„ç†ã€‚</p>
<h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><pre><code>&lt;style&gt;
  * {
      margin: 0;
      padding: 0;
  }

  body {
      background-color: black;
  }

  ul {
      list-style: none;
      width: 100px;
      height: 100px;
      position: relative;
      cursor: pointer;
      margin: 150px auto;

      transition: 1s;    /* è®¾ç½®è¿‡æ¸¡æ—¶é—´ */
      transform-style: preserve-3d;   /* è®¾ç½®æ‰€æœ‰çš„å­å…ƒç´ å®ç°3DåŠ¨ç”» */
  }

  /* è®¾ç½®é¼ æ ‡æ‚¬åœçš„åŠ¨ç”» */
  ul:hover {
      transform: rotateX(120deg) rotateY(120deg);
  }

  ul li {
      width: 100%;
      height: 100%;
      text-align: center;
      line-height: 100px;
      font-size: 40px;
      font-weight: 700;
      position: absolute;
      top: 0px;
  }
  /* å‰ */
  ul li:nth-child(1) {
      background-color: rgba(225, 0, 0, .4);
      transform: rotateX(0deg) translateZ(50px);
  }
  /* ä¸‹ */
  ul li:nth-child(2) {
      background-color: rgba(0, 255, 0, .4);
      transform: rotateX(-90deg) translateZ(50px);
  }
  /* å */
  ul li:nth-child(3) {
      background-color: rgba(0, 0, 255, .4);
      transform: rotateX(-180deg) translateZ(50px);
  }
  /* ä¸Š */
  ul li:nth-child(4) {
      background-color: rgba(125, 125, 0, .4);
      transform: rotateX(90deg) translateZ(50px);
  }
  /* å·¦ */
  ul li:nth-child(5) {
      background-color: rgba(0, 125, 125, .4);
      transform: rotateY(-90deg) translateZ(50px);
  }
  /* å³ */
  ul li:nth-child(6) {
      background-color: rgba(10, 45, 36, .4);
      transform: rotateY(90deg) translateZ(50px);
  }
&lt;/style&gt;
</code></pre></li>
</ul>
]]></content>
      <categories>
        <category>frontEnd</category>
        <category>css</category>
      </categories>
      <tags>
        <tag>frontEnd</tag>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>DOMäº‹ä»¶</title>
    <url>/2019/02/16/DOM%E4%BA%8B%E4%BB%B6/</url>
    <content><![CDATA[<h2 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h2><p>äº‹ä»¶å°±æ˜¯ç”¨æˆ·æˆ–è€…æµè§ˆå™¨è¿›è¡Œçš„ç‰¹å®šè¡Œä¸ºï¼Œæ¯”å¦‚ï¼šé¼ æ ‡ç‚¹å‡»äº‹ä»¶ã€‚</p>
<h2 id="äº‹ä»¶åç§°"><a href="#äº‹ä»¶åç§°" class="headerlink" title="äº‹ä»¶åç§°"></a>äº‹ä»¶åç§°</h2><p>æ¯”å¦‚ï¼šclickå°±æ˜¯ä¸€ä¸ªäº‹ä»¶åã€‚</p>
<h2 id="äº‹ä»¶æµçš„æ‰§è¡Œè¿‡ç¨‹"><a href="#äº‹ä»¶æµçš„æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="äº‹ä»¶æµçš„æ‰§è¡Œè¿‡ç¨‹"></a>äº‹ä»¶æµçš„æ‰§è¡Œè¿‡ç¨‹</h2><p>äº‹ä»¶æµï¼šæŒ‡çš„æ˜¯ <em>DOM</em> äº‹ä»¶æµï¼ˆå¤šä¸ªäº‹ä»¶æŒ‰ç…§ä¸€å®šé¡ºåºæ‰§è¡Œï¼‰ï¼ŒDOM(æ–‡æ¡£å¯¹è±¡æ¨¡å‹)ç»“æ„æ˜¯ä¸€ä¸ªæ ‘å‹ç»“æ„ï¼Œå½“ä¸€ä¸ªHTMLå…ƒç´ äº§ç”Ÿä¸€ä¸ªäº‹ä»¶æ—¶ï¼Œè¯¥äº‹ä»¶ä¼šåœ¨å…ƒç´ èŠ‚ç‚¹ä¸æ ¹ç»“ç‚¹ä¹‹é—´çš„è·¯å¾„ä¼ æ’­ï¼Œè·¯å¾„æ‰€ç»è¿‡çš„ç»“ç‚¹éƒ½ä¼šæ”¶åˆ°è¯¥äº‹ä»¶ï¼Œè¿™ä¸ªä¼ æ’­è¿‡ç¨‹å¯ç§°ä¸ºDOMäº‹ä»¶æµã€‚<br>äº‹ä»¶æµçš„æ‰§è¡Œè¿‡ç¨‹ï¼šä»windowå¼€å§‹ï¼Œæœ€åå›åˆ°windowã€‚<br>äº‹ä»¶æµè¢«åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šäº‹ä»¶æ•è·ï¼ˆ1-5ï¼‰ï¼Œäº‹ä»¶è§¦å‘ï¼ˆ5-6ï¼‰ï¼Œäº‹ä»¶å†’æ³¡ï¼ˆ6-10ï¼‰ã€‚</p>
<p>æ¥è‡ªç½‘ä¸Šçš„å›¾ç‰‡ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-eb2b449c3348c5d6?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="äº‹ä»¶æµ.png"></p>
<h4 id="äº‹ä»¶å†’æ³¡"><a href="#äº‹ä»¶å†’æ³¡" class="headerlink" title="äº‹ä»¶å†’æ³¡"></a><a href="#äº‹ä»¶å†’æ³¡" title="äº‹ä»¶å†’æ³¡"></a>äº‹ä»¶å†’æ³¡</h4><p>æ¥è‡ªç™¾åº¦çš„è§£é‡Šï¼š</p>
<blockquote>
<p>å½“äº‹ä»¶å‘ç”Ÿåï¼Œè¿™ä¸ªäº‹ä»¶å°±è¦å¼€å§‹ä¼ æ’­(ä»é‡Œåˆ°å¤–æˆ–è€…ä»å¤–å‘é‡Œ)ã€‚ä¸ºä»€ä¹ˆè¦ä¼ æ’­å‘¢ï¼Ÿå› ä¸ºäº‹ä»¶æºæœ¬èº«ï¼ˆå¯èƒ½ï¼‰å¹¶æ²¡æœ‰å¤„ç†äº‹ä»¶çš„èƒ½åŠ›ï¼Œå³å¤„ç†äº‹ä»¶çš„å‡½æ•°ï¼ˆæ–¹æ³•ï¼‰å¹¶æœªç»‘å®šåœ¨è¯¥äº‹ä»¶æºä¸Šã€‚</p>
</blockquote>
<p>å°±æ¯”å¦‚ï¼šæˆ‘ä»¬ç”¨buttonäº§ç”Ÿä¸€ä¸ªclickäº‹ä»¶ï¼Œä½†æ˜¯ç”±äºbuttonæŒ‰é’®æœ¬èº«å¯èƒ½ä¸èƒ½å¤„ç†è¿™ä¸ªäº‹ä»¶ï¼Œå°±è¦å¼€å§‹ä¼ æ’­å‡ºå»è¿™ä¸ªäº‹ä»¶ã€‚<br>å®ç°äº‹ä»¶å†’æ³¡çš„æ¡ä»¶æ˜¯ï¼šå…ƒç´ ä¹‹é—´æœ‰åµŒå¥—ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰ç›¸åŒçš„äº‹ä»¶ï¼Œè¿™æ ·å½“æœ€é‡Œå±‚çš„äº‹ä»¶è§¦å‘æ—¶ï¼Œè¿™ä¸ªäº‹ä»¶å°±ä¼šä¸€çº§ä¸€çº§å‘ä¸Šä¼ æ’­ï¼Œä¹Ÿå°±æ˜¯â€å†’æ³¡â€œã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šåœ¨ä¸€ä¸ªdivé‡Œé¢åµŒå¥—å¦ä¸€ä¸ªdivï¼Œä¸¤ä¸ªdivéƒ½ç»‘å®šäº†ç›¸åŒçš„äº‹ä»¶ç›‘å¬å‡½æ•°clickã€‚è¿™æ ·ï¼Œå½“é‡Œå±‚ç‚¹å‡»äº‹ä»¶è§¦å‘æ—¶ï¼Œå¤–å±‚çš„ç‚¹å‡»äº‹ä»¶ä¹Ÿä¼šè¢«è§¦å‘ã€‚</p>
<pre><code>&lt;div id=&quot;outer&quot;&gt;
 &lt;div id=&quot;inner&quot;&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;script&gt;
 window.onload = function () {
   let inner = document.getElementById(&#39;inner&#39;)
   let outer = document.getElementById(&#39;outer&#39;)
   inner.addEventListener(&#39;click&#39;, function (e) {
     console.log(&#39;inner&#39;);
   })
   outer.addEventListener(&#39;click&#39;, function () { 
     console.log(&#39;outer&#39;);
   })
 }
&lt;/script&gt;
</code></pre><p>ç»“æœä¸ºï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-be2355e585a26bc5?imageMogr2/auto-orient/strip" alt="äº‹ä»¶å†’æ³¡.gif"></p>
<h5 id="é˜»æ­¢äº‹ä»¶å†’æ³¡"><a href="#é˜»æ­¢äº‹ä»¶å†’æ³¡" class="headerlink" title="é˜»æ­¢äº‹ä»¶å†’æ³¡"></a>é˜»æ­¢äº‹ä»¶å†’æ³¡</h5><ul>
<li>ä¸€èˆ¬æµè§ˆå™¨ï¼ševent.stopPropagation()</li>
<li>IEæµè§ˆå™¨ï¼ševent.cancelBubble = true</li>
</ul>
<h5 id="é˜»æ­¢é»˜è®¤äº‹ä»¶"><a href="#é˜»æ­¢é»˜è®¤äº‹ä»¶" class="headerlink" title="é˜»æ­¢é»˜è®¤äº‹ä»¶"></a>é˜»æ­¢é»˜è®¤äº‹ä»¶</h5><ul>
<li>ä¸€èˆ¬æµè§ˆå™¨ï¼ševent.preventDefault()</li>
<li>IEæµè§ˆå™¨ï¼ševent.returnValue = false</li>
</ul>
<h2 id="addEventListenerçš„ç¬¬ä¸‰ä¸ªå‚æ•°"><a href="#addEventListenerçš„ç¬¬ä¸‰ä¸ªå‚æ•°" class="headerlink" title="addEventListenerçš„ç¬¬ä¸‰ä¸ªå‚æ•°"></a>addEventListenerçš„ç¬¬ä¸‰ä¸ªå‚æ•°</h2><p>addEventListeneræ–¹æ³•ç”¨äºå°†äº‹ä»¶å’Œå‡½æ•°è¿›è¡Œç»‘å®šï¼Œå‡½æ•°ä¸ºï¼šaddEventListener(event, fn, useCapture)ï¼Œè¿™äº›å‚æ•°åˆ†åˆ«æ˜¯ï¼šäº‹ä»¶åï¼Œäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•° <strong>useCapture</strong> æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨æ¥è®¾ç½®è¯¥äº‹ä»¶çš„æ‰§è¡Œæ˜¯åœ¨å“ªä¸ªé˜¶æ®µå‘ç”Ÿçš„ï¼ˆé»˜è®¤æ˜¯åœ¨å†’æ³¡é˜¶æ®µï¼‰ã€‚</p>
<ul>
<li>trueï¼šè¡¨ç¤ºè¯¥äº‹ä»¶æ˜¯åœ¨â€œäº‹ä»¶æ•è·é˜¶æ®µâ€è§¦å‘çš„ã€‚ï¼ˆç”±å¤–å‘å†…ï¼‰</li>
<li>falseï¼šè¡¨ç¤ºè¯¥äº‹ä»¶æ˜¯åœ¨â€œäº‹ä»¶å†’æ³¡é˜¶æ®µâ€è§¦å‘çš„ã€‚ï¼ˆç”±å†…å‘å¤–ï¼‰</li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­ï¼šåœ¨ä¸€ä¸ªdivé‡Œé¢åµŒå¥—å¦ä¸€ä¸ªdivï¼Œä¸¤ä¸ªdivéƒ½ç»‘å®šäº†ç›¸åŒçš„äº‹ä»¶ç›‘å¬å‡½æ•°clickã€‚</p>
<p>å°†ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®ä¸ºtrueï¼Œäº‹ä»¶åœ¨ <strong>æ•è·é˜¶æ®µ</strong> æ‰§è¡Œï¼š</p>
<pre><code>&lt;div id=&quot;outer&quot;&gt;
 &lt;div id=&quot;inner&quot;&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;script&gt;
 window.onload = function () {
 let inner = document.getElementById(&#39;inner&#39;)
 let outer = document.getElementById(&#39;outer&#39;)
 inner.addEventListener(&#39;click&#39;, function (e) {
 console.log(&#39;inner&#39;);
 }, true)
 outer.addEventListener(&#39;click&#39;, function () { 
 console.log(&#39;outer&#39;);
 }, true)
 }
&lt;/script&gt;
</code></pre><p>ç”±äºæ˜¯ <strong>æ•è·é˜¶æ®µ</strong> æ‰§è¡Œï¼Œå³ï¼šç”±å¤–å‘å†…æ‰§è¡Œï¼Œæ‰€ä»¥ç»“æœä¸ºï¼š outer innerã€‚</p>
<p>ç»“æœä¸ºï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-82bb228984257ae1?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>å°†ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®ä¸ºfalseï¼Œäº‹ä»¶åœ¨ <strong>å†’æ³¡é˜¶æ®µ</strong> æ‰§è¡Œï¼Œè¾“å‡ºç»“æœä¸ºï¼š inner outerã€‚<br><img src="http://upload-images.jianshu.io/upload_images/659084-1d1d0c25024cc18d?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="äº‹ä»¶å¤„ç†å‡½æ•°-äº‹ä»¶ç›‘å¬å‡½æ•°"><a href="#äº‹ä»¶å¤„ç†å‡½æ•°-äº‹ä»¶ç›‘å¬å‡½æ•°" class="headerlink" title="äº‹ä»¶å¤„ç†å‡½æ•°/äº‹ä»¶ç›‘å¬å‡½æ•°"></a>äº‹ä»¶å¤„ç†å‡½æ•°/äº‹ä»¶ç›‘å¬å‡½æ•°</h2><p>äº‹ä»¶è§¦å‘åçš„å¤„ç†å‡½æ•°ã€‚å¦‚ï¼šbtn.onclick = fnï¼Œfnå°±æ˜¯äº‹ä»¶å¤„ç†å‡½æ•°/äº‹ä»¶ç›‘å¬å‡½æ•°ã€‚</p>
<h4 id="HTMLäº‹ä»¶å¤„ç†ç¨‹åº"><a href="#HTMLäº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="HTMLäº‹ä»¶å¤„ç†ç¨‹åº"></a>HTMLäº‹ä»¶å¤„ç†ç¨‹åº</h4><p>ä¾‹å¦‚ï¼š</p>
<pre><code>&lt;button onclick = &quot;fn()&quot;&gt;click&lt;/button&gt;
</code></pre><p>è¿™ç§æ–¹å¼çš„ç¼ºç‚¹æ˜¯ï¼šç»“æ„å’Œè¡Œä¸ºè€¦åˆåœ¨ä¸€èµ·ã€‚</p>
<h4 id="DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åº"><a href="#DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åº"></a>DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åº</h4><p>å½¢å¼ä¸ºï¼šele.on + â€˜äº‹ä»¶åç§°â€™ = äº‹ä»¶å¤„ç†å‡½æ•°<br>ä¾‹å¦‚ï¼š ele.onclick = function() {â€¦}ï¼ŒthisæŒ‡å‘å½“å‰å…ƒç´ ã€‚</p>
<h4 id="DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åº"><a href="#DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åº"></a>DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åº</h4><p>è¿™ç§æ–¹å¼ä¸»è¦æ˜¯é€šè¿‡è¿™ä¸¤ä¸ªæ–¹æ³•ï¼šaddEventListener()ï¼ŒremoveEventListener()<br>è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹å°±æ˜¯ï¼šå¯ä»¥åŒä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºç»‘å®šå¤šä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p>
<h2 id="äº‹ä»¶å§”æ‰˜"><a href="#äº‹ä»¶å§”æ‰˜" class="headerlink" title="äº‹ä»¶å§”æ‰˜"></a>äº‹ä»¶å§”æ‰˜</h2><p>äº‹ä»¶å§”æ‰˜è¦å¤„ç†çš„é—®é¢˜æ˜¯ï¼šè§£å†³äº‹ä»¶å¤„ç†ç¨‹åºè¿‡å¤šçš„é—®é¢˜ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å°†å¾ˆå¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºå§”æ‰˜ç»™ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œé€šè¿‡è¿™ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºæ¥ç®¡ç†è¿™ä¹ˆå¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºã€‚<br>å¥½å¤„ï¼šå‡å°‘å¯¹DOMçš„è®¿é—®ï¼Œæé«˜æ€§èƒ½ï¼›å¯ä»¥å¯¹åæ¥æ·»åŠ è¿›æ¥çš„å…ƒç´ ä¹Ÿèƒ½ç»‘å®šå§”æ‰˜äº‹ä»¶ã€‚</p>
<p>ä¾‹å¦‚ï¼šåœ¨ä¸€ä¸ª ul æ ‡ç­¾ä¸­æœ‰å¾ˆå¤šä¸ª li æ ‡ç­¾ï¼Œæˆ‘ä»¬çš„éœ€æ±‚è€Œæ˜¯ç‚¹å‡»æ¯ä¸€ä¸ª li æ ‡ç­¾æ˜¾ç¤ºæ¯ä¸€ä¸ª li æ ‡ç­¾çš„å†…å®¹ã€‚<br>å¦‚æœæ²¡æœ‰ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œæˆ‘ä»¬éœ€è¦ç»™æ¯ä¸€ä¸ª li æ ‡ç­¾éƒ½æ·»åŠ äº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œå¾ˆæ˜æ˜¾ï¼Œè¿™æ ·çš„æ•ˆç‡å¹¶ä¸é«˜ï¼Œè€Œä¸”å¯¹æ•´ä¸ªç½‘é¡µçš„æ€§èƒ½ä¹Ÿä¼šå½±å“ï¼›å¦‚æœæˆ‘ä»¬ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œå°†è¿™äº› li çš„äº‹ä»¶å§”æ‰˜ç»™ ul æ ‡ç­¾ï¼Œè¿™æ ·å°±å¯ä»¥åªç”¨ä¸€ä¸ªäº‹ä»¶ç›‘å¬å‡½æ•°å®ç°ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;ul id=&quot;list&quot;&gt; 
 &lt;li&gt;111111&lt;/li&gt;
 &lt;li&gt;222222&lt;/li&gt;
 &lt;li&gt;333333&lt;/li&gt;
 &lt;li&gt;444444&lt;/li&gt;
&lt;/ul&gt;

&lt;script&gt;
 window.onload = function () { 
 // ä¼ ç»Ÿçš„æ–¹æ³•
 // let lis = document.getElementsByTagName(&#39;li&#39;)
 // console.log(lis);
 // for(let i = 0; i &lt; lis.length; i++){
 //     lis[i].addEventListener(&#39;click&#39;, function () { 
 //         console.log(this.innerHTML);
 //     })
 // }
 // ä½¿ç”¨äº‹ä»¶å§”æ‰˜
 let list = document.getElementById(&#39;list&#39;)
 list.addEventListener(&#39;click&#39;, function (e) { 
   let target = e.target
   console.log(target.innerHTML);
 }, false)
 }
&lt;/script&gt;
</code></pre><p>äº‹ä»¶å§”æ‰˜ä¸€èˆ¬ä½¿ç”¨çš„æ˜¯ <strong>äº‹ä»¶å†’æ³¡é˜¶æ®µ</strong> è¿›è¡Œï¼ˆè™½ç„¶äº‹ä»¶æ•è·é˜¶æ®µä¹Ÿå¯ä»¥ï¼‰ï¼Œå› ä¸ºäº‹ä»¶å†’æ³¡çš„äº‹ä»¶æµæ¨¡å‹è¢«æ‰€æœ‰çš„ä¸»æµæµè§ˆå™¨å…¼å®¹ï¼Œäº‹ä»¶å†’æ³¡çš„å…¼å®¹æ€§æ›´å¥½ã€‚</p>
]]></content>
      <categories>
        <category>frontEnd</category>
        <category>js</category>
      </categories>
      <tags>
        <tag>frontEnd</tag>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>px/em/remæ€»ç»“</title>
    <url>/2019/02/16/px-em-rem%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h2 id="px"><a href="#px" class="headerlink" title="px"></a>px</h2><p>å¯¹äº<strong>px</strong>ï¼Œå¤§å®¶éƒ½ä¸é™Œç”Ÿã€‚å®ƒæ˜¯ä¸€ä¸ªç›¸å¯¹äºå±å¹•çš„ç›¸å¯¹é•¿åº¦å•ä½ã€‚</p>
<h2 id="em"><a href="#em" class="headerlink" title="em"></a>em</h2><p><strong>em</strong>ä¹Ÿæ˜¯ä¸€ä¸ªç›¸å¯¹é•¿åº¦å•ä½ï¼Œä½†å®ƒç›¸å¯¹çš„æ˜¯çˆ¶çº§å…ƒç´ çš„å­—ä½“å¤§å°ã€‚<br>å¯¹äºemæœ‰ä¸€ä¸ªæ¨ç®—è¿‡ç¨‹ï¼š<br>å¦‚æœæ²¡æœ‰å®šä¹‰è‡ªå·±çš„font-sizeï¼Œåˆ™ï¼šæµè§ˆå™¨é»˜è®¤ï¼š<em>1em = 16px</em><br>æ‰€ä»¥ï¼š<br><em>12px = 0.75em</em><br><em>10px = 0.625em</em><br>ä½†æ˜¯å¦‚æœæ¯æ¬¡éƒ½è¿™æ ·è¿›è¡Œè®¡ç®—å¾ˆéº»çƒ¦ï¼Œè€Œä¸”å¼€å‘æ•ˆç‡ä¹Ÿå¾ˆä½ï¼Œå› æ­¤ä¸ºäº†ç®€åŒ–è®¡ç®—ï¼Œæˆ‘ä»¬å°†æµè§ˆå™¨çš„font-sizeè®¾ç½®ä¸º<strong>62.5%</strong>ï¼Œè¿™æ ·ï¼š<br><strong>1em = ï¼ˆ16px * 62.5%ï¼‰ = 10pxï¼› 1.2em = 12px</strong><br>ä¾æ¬¡ç±»æ¨ï¼Œè¦ä½¿ç”¨emè¿™ä¸ªç›¸å¯¹é•¿åº¦å•ä½ï¼Œåªè¦æˆ‘ä»¬åœ¨bodyæ ‡ç­¾é‡Œé¢è®¾ç½®äº†font-sizeä¸º62.5%ï¼Œè¿™æ ·åªè¦å°±å¯ä»¥å¾—åˆ°è®¡ç®—å…¬å¼ï¼š<strong>(n)px = (n \ 10)em</strong></p>
<p>ä½†æ˜¯ï¼Œemå•ä½æ˜¯ç›¸å¯¹çš„ï¼Œä¸æ˜¯å›ºå®šçš„ï¼Œæ˜¯é€çº§ç»§æ‰¿çš„ï¼ˆä¸€å±‚ä¸€å±‚å‘ä¸Šè®¡ç®—ï¼‰ï¼Œä¸¾ä¸ªä¾‹å­ï¼š<br>æ¯”å¦‚ï¼Œä¸€ä¸ªdivé‡Œé¢åµŒå¥—äº†ä¸€ä¸ªdivï¼Œè¿™ä¸¤ä¸ªdivéƒ½è®¾ç½®äº†font-sizeä¸º1.2emï¼Œæµè§ˆå™¨çš„font-sizeè®¾ç½®ä¸º62.5%ï¼Œæ­¤æ—¶ï¼Œæœ€é‡Œå±‚çš„divçš„font-sizeå¤§å°æ˜¯ï¼š<strong>ï¼ˆ1.2 * 1.2ï¼‰ = 1.44em</strong>ã€‚</p>
<h2 id="rem"><a href="#rem" class="headerlink" title="rem"></a>rem</h2><p><strong>rem</strong>ä¹Ÿæ˜¯ç›¸å¯¹é•¿åº¦å•ä½ï¼Œä»å®ƒçš„å•ä½ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå®ƒè·Ÿ<strong>em</strong>æ¯”è¾ƒï¼Œå¤šäº†ä¸ª <strong>r</strong> å­—æ¯ï¼Œå®ƒçš„æ„æ€å°±æ˜¯<strong>rootï¼ˆæ ¹ï¼‰</strong>çš„æ„æ€ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å®ƒæ˜¯ç›¸å¯¹äºæ ¹èŠ‚ç‚¹ï¼ˆhtmlæ ‡ç­¾ï¼‰çš„font-sizeè€Œè¨€çš„ã€‚è¿™æ ·å­ï¼Œå°±æ¶ˆé™¤äº†<strong>em</strong>å•ä½é€çº§ç»§æ‰¿çš„ç¼ºç‚¹ã€‚<br>ä¸¾ä¸ªä¾‹å­ï¼š<br>å…ˆå°†<strong>html</strong>æ ‡ç­¾è®¾ç½®ä¸º62.5%ï¼Œè¿™æ ·ï¼Œhtmlé‡Œé¢çš„ä»»ä½•å­æ ‡ç­¾éƒ½æ˜¯ç»§æ‰¿äºè¿™ä¸ªæ ‡ç­¾ï¼Œä¹Ÿå°±æ˜¯è¯´ç›¸å¯¹äºè¿™ä¸ªæ ‡ç­¾ã€‚æ‰€ä»¥ï¼Œä¸è®ºæ ‡ç­¾ä¸­æœ‰å¤šå°‘çº§çš„åµŒå¥—ï¼Œæœ€é‡Œå±‚æ ‡ç­¾çš„font-sizeçš„è®¡ç®—å…¬å¼æ°¸è¿œæ˜¯ï¼š<strong>(n)px = (n \ 10)rem</strong></p>
]]></content>
      <categories>
        <category>frontEnd</category>
        <category>css</category>
      </categories>
      <tags>
        <tag>frontEnd</tag>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>jsçš„åŸå‹å’Œç»§æ‰¿</title>
    <url>/2019/02/16/js%E7%9A%84%E5%8E%9F%E5%9E%8B%E5%92%8C%E7%BB%A7%E6%89%BF/</url>
    <content><![CDATA[<h2 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h2><p>åŸå‹æ¨¡å¼åœ¨ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ä¸­çš„å®šä¹‰ï¼š</p>
<blockquote>
<p>æˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeï¼ˆåŸå‹ï¼‰å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œè¿™ä¸ªå¯¹è±¡çš„ç”¨é€”æ˜¯åŒ…å«å¯ä»¥ç”±ç‰¹å®šç±»å‹çš„æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ã€‚å¦‚æœæŒ‰ç…§å­—é¢æ„æ€æ¥ç†è§£ï¼Œé‚£ä¹ˆprototypeå°±æ˜¯é€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°è€Œåˆ›å»ºçš„é‚£ä¸ªå¯¹è±¡å®ä¾‹çš„åŸå‹å¯¹è±¡ã€‚ä½¿ç”¨è¿™ä¸ªå¯¹è±¡çš„å¥½å¤„å°±æ˜¯å¯ä»¥è®©æ‰€æœ‰å¯¹è±¡å®ä¾‹å…±äº«å®ƒåŒ…å«çš„å±æ€§å’Œæ–¹æ³•ã€‚</p>
</blockquote>
<p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ª__proto__å±æ€§ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ‹¥æœ‰è¿™ä¸ªå±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘å¯¹åº”çš„æ„é€ å‡½æ•°çš„prototypeå±æ€§ã€‚</p>
<p>é€šè¿‡åŸå‹å¯¹è±¡ï¼Œæˆ‘ä»¬å°±ä¸ç”¨å°†ä¿¡æ¯æ·»åŠ åˆ°æ„é€ å‡½æ•°ä¸­äº†ã€‚</p>
<h4 id="å®ä¾‹å¯¹è±¡å…±äº«åŸå‹å¯¹è±¡çš„å±æ€§"><a href="#å®ä¾‹å¯¹è±¡å…±äº«åŸå‹å¯¹è±¡çš„å±æ€§" class="headerlink" title="å®ä¾‹å¯¹è±¡å…±äº«åŸå‹å¯¹è±¡çš„å±æ€§"></a>å®ä¾‹å¯¹è±¡å…±äº«åŸå‹å¯¹è±¡çš„å±æ€§</h4><pre><code>function Person(){}
Person.prototype.name = &#39;A&#39;
Person.prototype.age = 1
// å®ä¾‹å¯¹è±¡å…±äº«åŸå‹å¯¹è±¡çš„å±æ€§
let p1 = new Person()
console.log(p1.name, p1.age);   // A 1
let p2 = new Person()
console.log(p2.name, p2.age);   // A 1
</code></pre><h4 id="constructorï¼ˆæ„é€ å‡½æ•°ï¼‰å±æ€§"><a href="#constructorï¼ˆæ„é€ å‡½æ•°ï¼‰å±æ€§" class="headerlink" title="constructorï¼ˆæ„é€ å‡½æ•°ï¼‰å±æ€§"></a>constructorï¼ˆæ„é€ å‡½æ•°ï¼‰å±æ€§</h4><p>æ¯ä¸ªåŸå‹å¯¹è±¡åœ¨é»˜è®¤æƒ…å†µä¸‹éƒ½ä¼šè‡ªåŠ¨è·å–ä¸€ä¸ªconstructorï¼ˆæ„é€ å‡½æ•°ï¼‰å±æ€§ï¼Œè¿™ä¸ªå±æ€§åŒ…å«ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘è¿™ä¸ªåŸå‹æ‰€åœ¨çš„å‡½æ•°ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œåˆ›å»ºPersonå‡½æ•°åï¼Œå®ƒçš„prototypeæŒ‡å‘å®ƒçš„åŸå‹å¯¹è±¡ï¼Œè¿™ä¸ªåŸå‹å¯¹è±¡å°±ä¼šè·å–è·å–constructorå±æ€§ï¼ŒæŒ‡å‘Personå‡½æ•°ã€‚</p>
<h4 id="åˆ¤æ–­å®ä¾‹å¯¹è±¡ä¸åŸå‹å¯¹è±¡ä¹‹é—´çš„å…³ç³»"><a href="#åˆ¤æ–­å®ä¾‹å¯¹è±¡ä¸åŸå‹å¯¹è±¡ä¹‹é—´çš„å…³ç³»" class="headerlink" title="åˆ¤æ–­å®ä¾‹å¯¹è±¡ä¸åŸå‹å¯¹è±¡ä¹‹é—´çš„å…³ç³»"></a>åˆ¤æ–­å®ä¾‹å¯¹è±¡ä¸åŸå‹å¯¹è±¡ä¹‹é—´çš„å…³ç³»</h4><ul>
<li>Obj.prototype.isPrototypeOf(obj)</li>
</ul>
<pre><code>console.log(Person.prototype.isPrototypeOf(p1)) // true
</code></pre><ul>
<li>Object.getPrototypeOf(obj)ï¼šè¿”å›å¯¹è±¡å®ä¾‹çš„åŸå‹[es5]</li>
</ul>
<pre><code>console.log(Object.getPrototypeOf(p1) == Person.prototype);   // true
console.log(Object.getPrototypeOf(p1).name);    // A
</code></pre><ul>
<li>obj.hasOwnPrototype(attr)ï¼šæ£€æµ‹ä¸€ä¸ªå±æ€§æ˜¯å¦å­˜åœ¨äºå®ä¾‹ä¸­ã€‚åªæœ‰å½“å®ä¾‹å¯¹è±¡é‡å†™åŸå‹å¯¹è±¡çš„å±æ€§åï¼ˆéåŸå‹å±æ€§ï¼‰æ‰ä¼šè¿”å›trueã€‚</li>
</ul>
<pre><code>console.log(p1.hasOwnProperty(&#39;name&#39;)); // false
p1.name = &#39;Ertsul&#39;
console.log(p1.hasOwnProperty(&#39;name&#39;)); //true
</code></pre><ul>
<li><p>inæ“ä½œç¬¦ï¼šé€šè¿‡inæ“ä½œç¬¦å’ŒhasOwnProperty()å¯ä»¥åˆ¤æ–­æŸå±æ€§å­˜åœ¨äºå®ä¾‹è¿˜æ˜¯åŸå‹å¯¹è±¡ä¸­ã€inåˆ¤æ–­æ˜¯å¦å­˜åœ¨å±æ€§ï¼ŒhasOwnProperty()åˆ¤æ–­å­˜åœ¨äºå“ªé‡Œã€‚ã€‘å¯ä»¥å•ç‹¬ä½¿ç”¨å’Œfor-inå¾ªç¯ä½¿ç”¨ï¼šæ— è®ºå±æ€§å±äºå®ä¾‹è¿˜æ˜¯åŸå‹ä¸­ï¼Œéƒ½ä¼šè¿”å›trueã€‚(â€˜nameâ€™ in person1)</p>
</li>
<li><p>è·å–æ‰€æœ‰å®ä¾‹çš„å±æ€§åå­—ï¼Œæ— è®ºæ˜¯å¦å¯ä»¥æšä¸¾ã€‚</p>
</li>
</ul>
<pre><code>console.log(Object.getOwnPropertyNames(p1)); // [&quot;name&quot;]
</code></pre><ul>
<li>instanceof</li>
</ul>
<pre><code>console.log(p1 instanceof Person);    // true
</code></pre><h4 id="æ›´ç®€å•çš„è¯­æ³•"><a href="#æ›´ç®€å•çš„è¯­æ³•" class="headerlink" title="æ›´ç®€å•çš„è¯­æ³•"></a>æ›´ç®€å•çš„è¯­æ³•</h4><pre><code>function Person() {  }
Person.prototype = {
 name: &#39;001&#39;
}
let p1 = new Person()
console.log(p1.name);
</code></pre><p>è¿™é‡Œçš„ä¾‹å¤–æ˜¯ï¼šconstructorå±æ€§ä¸å†æŒ‡å‘Personï¼›æœ¬è´¨ä¸Šç›¸å½“äºå®Œå…¨é‡å†™äº†Personå¯¹è±¡äº†ã€‚æ³¨ï¼šé‡å†™åŸå‹å¯¹è±¡åˆ‡æ–­äº†ç°æœ‰åŸå‹ä¸ä»»ä½•ä¹‹å‰å·²ç»å­˜åœ¨çš„å¯¹è±¡å®ä¾‹ä¹‹é—´çš„è”ç³»ï¼Œå®ƒä»¬å¼•ç”¨çš„ä»ç„¶æ˜¯æœ€åˆçš„åŸå‹ã€‚[è¯¦è§ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹P156-P157ï¼ŒåŸå‹çš„åŠ¨æ€æ€§]</p>
<p>####æœç´¢æœºåˆ¶</p>
<ul>
<li>è§£é‡Šå™¨ä¼šç°åœ¨ç›®æ ‡å¯¹è±¡ä¸­æœç´¢ç›®æ ‡å±æ€§ï¼Œå¦‚æœå½“å‰å¯¹è±¡æ²¡æœ‰ç›®æ ‡å±æ€§ï¼Œè§£é‡Šå™¨ç»§ç»­åœ¨ç›®æ ‡å¯¹è±¡çš„åŸå‹å¯¹è±¡ä¸­æœç´¢ã€‚</li>
<li>é€šè¿‡deleteåªèƒ½åˆ é™¤å¯¹è±¡çš„å±æ€§ï¼Œè€Œä¸èƒ½åˆ é™¤åŸå‹å¯¹è±¡ä¸­çš„å±æ€§ã€‚</li>
</ul>
<h4 id="ç»„åˆæ¨¡å¼ï¼ˆé»˜è®¤ç±»å‹ï¼‰ï¼šæ„é€ å‡½æ•°æ¨¡å¼-åŸå‹æ¨¡å¼"><a href="#ç»„åˆæ¨¡å¼ï¼ˆé»˜è®¤ç±»å‹ï¼‰ï¼šæ„é€ å‡½æ•°æ¨¡å¼-åŸå‹æ¨¡å¼" class="headerlink" title="ç»„åˆæ¨¡å¼ï¼ˆé»˜è®¤ç±»å‹ï¼‰ï¼šæ„é€ å‡½æ•°æ¨¡å¼ + åŸå‹æ¨¡å¼"></a>ç»„åˆæ¨¡å¼ï¼ˆé»˜è®¤ç±»å‹ï¼‰ï¼šæ„é€ å‡½æ•°æ¨¡å¼ + åŸå‹æ¨¡å¼</h4><p>æ„é€ å‡½æ•°æ¨¡å¼ç”¨äºå®šä¹‰å®ä¾‹å±æ€§ï¼Œè€ŒåŸå‹æ¨¡å¼ç”¨äºå®šä¹‰æ–¹æ³•å’Œå…±äº«çš„å±æ€§ã€‚</p>
<h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><h4 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h4><pre><code>// çˆ¶äº²
function Father() { 
 this.fatherProperty = true
}
Father.prototype.getFatherValue = function () { 
 return this.fatherProperty
}
// å„¿å­
function Son() { 
 this.sonProperty = false
}
// ç»§æ‰¿çˆ¶äº²ï¼šé€šè¿‡å®ä¾‹åŒ–çˆ¶äº²ï¼Œå°†å®ä¾‹åŒ–å¯¹è±¡ä½œä¸ºå„¿å­çš„åŸå‹ï¼Œè¿™æ ·å„¿å­å°±ç»§æ‰¿äº†çˆ¶äº²çš„å±æ€§
Son.prototype = new Father()
Son.prototype.getSonValue = function () { 
 return this.sonProperty
}

let instance = new Son()
console.log(instance.fatherProperty);   // true
</code></pre><p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œé€šè¿‡å®ä¾‹åŒ–çˆ¶äº²ï¼Œå°†å®ä¾‹åŒ–å¯¹è±¡ä½œä¸ºå„¿å­çš„åŸå‹ï¼Œè¿™æ ·å„¿å­å°±ç»§æ‰¿äº†çˆ¶äº²çš„å±æ€§ã€‚ï¼ˆé‡å†™å„¿å­çš„åŸå‹ï¼‰ã€‚è¿™é‡Œï¼Œå„¿å­åŸå‹å¯¹è±¡çš„[[prototype]]ï¼ˆæ³¨ï¼šä¸æ˜¯prototypeï¼Œ[[prototype]]å­˜åœ¨äºåŸå‹ä¸­ï¼‰æŒ‡å‘çš„æ˜¯çˆ¶äº²çš„åŸå‹å¯¹è±¡ï¼Œè€Œçˆ¶äº²çš„åŸå‹å¯¹è±¡çš„[[prototype]]æŒ‡å‘çš„æ˜¯Object Prototypeã€‚ï¼ˆç”±äºæ‰€æœ‰å‡½æ•°çš„é»˜è®¤åŸå‹éƒ½æ˜¯Objectçš„å®ä¾‹ï¼Œæ‰€ä»¥é»˜è®¤åŸå‹éƒ½ä¼šåŒ…å«ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆï¼ŒæŒ‡å‘Object.prototypeï¼‰</p>
<h4 id="å€Ÿç”¨æ„é€ å‡½æ•°"><a href="#å€Ÿç”¨æ„é€ å‡½æ•°" class="headerlink" title="å€Ÿç”¨æ„é€ å‡½æ•°"></a>å€Ÿç”¨æ„é€ å‡½æ•°</h4><ul>
<li>ä¸»è¦æ˜¯ä¸ºäº†è§£å†³å› ä¸ºå¼•ç”¨ç±»å‹å€¼çš„åŸå‹å±æ€§ä¼šè¢«æ‰€æœ‰å®ä¾‹å…±äº«çš„é—®é¢˜ã€‚</li>
<li><strong>å€Ÿç”¨æ„é€ å‡½æ•°/ä¼ªé€ å¯¹è±¡/ç»å…¸ç»§æ‰¿</strong>ï¼šåœ¨å­ç±»å‹æ„é€ å‡½æ•°çš„å†…éƒ¨è°ƒç”¨è¶…ç±»å‹æ„é€ å‡½æ•°ã€‚</li>
</ul>
<pre><code>// çˆ¶äº²
    function Father() { 
     this.info = [&#39;Zero&#39;]
    }
    // å„¿å­
    function Son() { 
     // ç»§æ‰¿çˆ¶äº²ï¼šåœ¨å­ç±»å‹æ„é€ å‡½æ•°çš„å†…éƒ¨è°ƒç”¨è¶…ç±»å‹æ„é€ å‡½æ•°
     // ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ï¼šå‡½æ•°åªä¸è¿‡æ˜¯åœ¨ç‰¹å®šç¯å¢ƒä¸­æ‰§è¡Œä»£ç çš„å¯¹è±¡ï¼Œå› æ­¤é€šè¿‡ä½¿ç”¨ apply()å’Œ call() å¯ä»¥åœ¨æ–°åˆ›å»ºçš„å¯¹è±¡ä¸Šæ‰§è¡Œæ„é€ å‡½æ•°ã€‚ 
     Father.call(this)        // å€Ÿç”¨è¶…ç±»çš„æ„é€ å‡½æ•°
    }

    let f = new Father()
    f.info.push(&#39;100&#39;)
    console.log(f.info);    // [&quot;Zero&quot;, &quot;100&quot;]

    let s = new Son()
    console.log(s.info);    // [&quot;Zero&quot;]
</code></pre><p>å¦‚æœåœ¨ç»§æ‰¿çš„æ—¶å€™è¦ä¼ é€’å‚æ•°ï¼Œåˆ™åœ¨åé¢æ·»åŠ å‚æ•°å³å¯ã€‚å¦‚ï¼šFather.call(thisï¼Œ param1, param2)</p>
<h4 id="proto"><a href="#proto" class="headerlink" title="__proto__"></a>__proto__</h4><p>é€šè¿‡<strong>__proto__</strong>ä¹Ÿå¯ä»¥å®ç°å­ç±»å‹å¯¹è¶…ç±»å‹çš„ç»§æ‰¿ã€‚</p>
<pre><code>const obj = {
 num : 123 
}
const obj1 = {
 __proto__ : obj
}
console.log(obj1.num);  // 123
</code></pre><h4 id="Object-create-source"><a href="#Object-create-source" class="headerlink" title="Object.create(source)"></a>Object.create(source)</h4><pre><code>const obj = {
 num : 123 
}
const obj2 = Object.create(obj)
console.log(obj2.num);  // 123
</code></pre><h4 id="Object-assign-Object-create-obj-â€¦"><a href="#Object-assign-Object-create-obj-â€¦" class="headerlink" title="Object.assign(Object.create(obj), {â€¦})"></a>Object.assign(Object.create(obj), {â€¦})</h4><pre><code>const obj = {
 num : 123 
}
const obj3 = Object.assign(
 Object.create(obj),
 {
 num2 : 234
 }
)
console.log(obj3.num, obj3.num2);   // 123 234
</code></pre><h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2><h4 id="ç»§æ‰¿æœºåˆ¶å¦‚ä¸‹å›¾ï¼š"><a href="#ç»§æ‰¿æœºåˆ¶å¦‚ä¸‹å›¾ï¼š" class="headerlink" title="ç»§æ‰¿æœºåˆ¶å¦‚ä¸‹å›¾ï¼š"></a>ç»§æ‰¿æœºåˆ¶å¦‚ä¸‹å›¾ï¼š</h4><p><img src="http://upload-images.jianshu.io/upload_images/659084-862bb97f2e2fe227.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h4 id="æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š"><a href="#æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š" class="headerlink" title="æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š"></a>æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</h4><pre><code>// çˆ¶ç±»
function SuperType(){
}
// å­ç±»
function SubType(){

}
// å­ç±»ç»§æ‰¿çˆ¶ç±»
SubType.prototype = new SuperType();
// å®ä¾‹åŒ–çˆ¶ç±»å’Œå­ç±»
let superIns = new SuperType();
let subIns = new SubType();

// å­ç±»
console.log(SubType.prototype);     // SuperType {}
console.log(subIns.__proto__);      // SuperType {}

// çˆ¶ç±»
console.log(SuperType.prototype);       // {constructor: Æ’} 
console.log(superIns.__proto__);        // {constructor: Æ’}

console.log(SuperType.prototype.__proto__);     
// {constructor: Æ’, __defineGetter__: Æ’, __defineSetter__: Æ’, hasOwnProperty: Æ’, __lookupGetter__: Æ’, â€¦}
// å³ï¼š Object prototype

console.log(SuperType.prototype.__proto__.constructor);
// Æ’ Object() { [native code] } å³ï¼šObject
</code></pre>]]></content>
      <categories>
        <category>frontEnd</category>
        <category>js</category>
      </categories>
      <tags>
        <tag>frontEnd</tag>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>jsçš„å­˜å‚¨å’Œæ‹·è´</title>
    <url>/2019/02/16/js%E7%9A%84%E5%AD%98%E5%82%A8%E5%92%8C%E6%8B%B7%E8%B4%9D/</url>
    <content><![CDATA[<h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><h4 id="åŸºæœ¬æ•°æ®ç±»å‹"><a href="#åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹"></a>åŸºæœ¬æ•°æ®ç±»å‹</h4><ul>
<li>Number</li>
<li>String</li>
<li>Boolean</li>
<li>Undefined</li>
<li>Null<h4 id="å¼•ç”¨ç±»å‹"><a href="#å¼•ç”¨ç±»å‹" class="headerlink" title="å¼•ç”¨ç±»å‹"></a>å¼•ç”¨ç±»å‹</h4>å¤šä¸ªåŸºæœ¬æ•°æ®ç±»å‹å¤åˆå½¢æˆã€‚</li>
<li>Object</li>
</ul>
<h2 id="å­˜å‚¨æ–¹å¼"><a href="#å­˜å‚¨æ–¹å¼" class="headerlink" title="å­˜å‚¨æ–¹å¼"></a>å­˜å‚¨æ–¹å¼</h2><h4 id="åŸºæœ¬æ•°æ®ç±»å‹çš„å­˜å‚¨æ–¹å¼"><a href="#åŸºæœ¬æ•°æ®ç±»å‹çš„å­˜å‚¨æ–¹å¼" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹çš„å­˜å‚¨æ–¹å¼"></a>åŸºæœ¬æ•°æ®ç±»å‹çš„å­˜å‚¨æ–¹å¼</h4><ul>
<li>æ¯å½“å®šä¹‰ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡ï¼Œä¼šåœ¨ <strong>æ ˆåŒº</strong> å¼€è¾Ÿä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œç”¨äºå­˜æ”¾è¯¥å˜é‡ã€‚æ ˆåŒºçš„ç‰¹ç‚¹æ˜¯ï¼šé™æ€åˆ†é…ï¼Œå¤§å°å›ºå®šã€‚</li>
<li>å½“ä¸€ä¸ªå˜é‡é€šè¿‡ç›´æ¥å¤åˆ¶çš„æ–¹å¼å¤åˆ¶ç»™å¦ä¸€ä¸ªå˜é‡ï¼Œç³»ç»Ÿä¼šåœ¨ <strong>æ ˆåŒº</strong>  é‡æ–°å¼€è¾Ÿä¸€ä¸ªå†…å­˜ç©ºé—´ï¼›ä¸¤ä¸ªå˜é‡äº’ä¸å½±å“ã€‚</li>
</ul>
<pre><code>let num1 = 10;
let num2 = num1;
num2 = 20;
console.log(num1);     // 10 
</code></pre><h4 id="å¼•ç”¨ç±»å‹çš„å­˜å‚¨æ–¹å¼"><a href="#å¼•ç”¨ç±»å‹çš„å­˜å‚¨æ–¹å¼" class="headerlink" title="å¼•ç”¨ç±»å‹çš„å­˜å‚¨æ–¹å¼"></a>å¼•ç”¨ç±»å‹çš„å­˜å‚¨æ–¹å¼</h4><ul>
<li>æ¯å½“å®šä¹‰ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œå¦‚ï¼šå¯¹è±¡ï¼Œä¼šåœ¨ <strong>å †åŒº</strong> å¼€è¾Ÿä¸€ä¸ªå†…å­˜ç©ºé—´ï¼›ç„¶åå¦‚æœåˆ›å»ºä¸€ä¸ªè¯¥å¯¹è±¡çš„å®ä¾‹ï¼Œä¼šåœ¨ <strong>æ ˆåŒº</strong> å¼€è¾Ÿä¸€ä¸ªå†…å­˜å­˜æ”¾è¯¥å®ä¾‹ï¼Œè¯¥å®ä¾‹å®é™…ä¸Šæ˜¯ä¸€ä¸ªæŒ‡å‘ <strong>å †å†…å­˜</strong> å¯¹è±¡çš„æŒ‡é’ˆã€‚å †åŒºçš„ç‰¹ç‚¹æ˜¯ï¼šåŠ¨æ€åˆ†é…ï¼Œå¤§å°ä¸å›ºå®šã€‚</li>
<li>å½“ä¸€ä¸ªå®ä¾‹ç›´æ¥å¤åˆ¶ç»™å¦ä¸€ä¸ªå®ä¾‹ï¼Œç³»ç»Ÿä¼šåœ¨ <strong>æ ˆåŒº</strong>  é‡æ–°å¼€è¾Ÿä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œä½†æ˜¯æ–°å®ä¾‹åŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ªæŒ‡å‘  <strong>å †å†…å­˜</strong> å¯¹è±¡çš„æŒ‡é’ˆï¼Œæ‰€ä»¥ï¼Œè¿™æ ·çš„æ“ä½œï¼Œè¿™æ ·çš„ä¿®æ”¹éƒ½ä¼šå¯¹æ–°æ—§å®ä¾‹äº§ç”Ÿå½±å“ã€‚</li>
</ul>
<pre><code>let obj1 = {
    name: &#39;zero&#39;,
    age: 22,
    num: [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;]
}

//ç›´æ¥å¤åˆ¶
let obj2 = obj1;

obj2.name = &#39;Ertsul&#39;;
obj2.num[0] = &#39;ä¸€&#39;;
console.log(obj1, obj2);
// name:&quot;Ertsul&quot;
// age:22
// num:[&quot;ä¸€&quot;, &quot;2&quot;, &quot;3&quot;]
</code></pre><h2 id="æµ…æ‹·è´å’Œæ·±æ‹·è´"><a href="#æµ…æ‹·è´å’Œæ·±æ‹·è´" class="headerlink" title="æµ…æ‹·è´å’Œæ·±æ‹·è´"></a>æµ…æ‹·è´å’Œæ·±æ‹·è´</h2><h4 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h4><p>ä¸¤è€…çš„åŒºåˆ«ä¸»è¦åœ¨äº <strong>å¤åˆ¶å±‚æ¬¡</strong> çš„ä¸åŒï¼š</p>
<ul>
<li>æµ…æ‹·è´ä¸»è¦å¤åˆ¶åˆ°å¯¹è±¡å±æ€§è¿™ä¸€å±‚æ¬¡ï¼Œå¦‚æœå¯¹è±¡é‡Œé¢æœ‰å­å¯¹è±¡ï¼Œåˆ™æ— æ³•å¯¹å­å¯¹è±¡å®Œæˆå¤åˆ¶ï¼›ä¹‹åå¯¹äºå­å¯¹è±¡çš„ä¿®æ”¹ <strong>ä¼š</strong> å½±å“åˆ°åŸå¤åˆ¶å¯¹è±¡ã€‚</li>
<li>æ·±æ‹·è´åˆ™æ˜¯æµ…æ‹·è´çš„ <strong>åŠ å¼ºç‰ˆ</strong> ï¼Œå¯ä»¥å®ç°å¯¹äºå­å¯¹è±¡çš„æ‹·è´ï¼›ä¹‹åå¯¹äºå­å¯¹è±¡çš„ä¿®æ”¹ <strong>ä¸ä¼š</strong> å½±å“åˆ°åŸå¤åˆ¶å¯¹è±¡ã€‚ä¸»è¦å®ç°æ–¹æ³•æœ‰ï¼š<ul>
<li>é€’å½’</li>
<li>JSONè§£æ<h4 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h4></li>
</ul>
</li>
</ul>
<pre><code>// æµ…æ‹·è´
function shallowCopy(source) {
    let result = {};
    for(let key in source){
        result[key] = source[key]
    }
    return result;
}
let obj1 = {
    name: &#39;zero&#39;,
    age: 22,
    num: [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;]
}

let obj2 = {};
obj2 = shallowCopy(obj1);

obj2.name = &#39;Ertsul&#39;;    // ä¸ä¼šäº§ç”Ÿå½±å“
obj2.num[0] = &#39;ä¸€&#39;;      // äº§ç”Ÿå½±å“
console.log(&quot;obj1&quot;, obj1);
console.log(&quot;obj2&quot;, obj2);
</code></pre><p>ç»“æœå¦‚å›¾ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-2238425cd781911c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h4 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h4><h5 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h5><pre><code>// é€’å½’å®ç°æ·±æ‹·è´
function deepCopy(source, res){
    var res = res || {};
    for(let i in source){
        if(typeof source[i] === &#39;object&#39;){
            if(source[i].constructor === Array){
                res[i] = []
            }else {
                res[i] = {}
            }
            deepCopy(source[i], res[i]);   // é€’å½’å­å¯¹è±¡å±æ€§
        }else{
            res[i] = source[i]
        }
    }
    return res;
}

let obj1 = {
    name: &#39;zero&#39;,
    age: 22,
    num: [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;]
}

let result = {}
result = deepCopy(obj1, result);
result.name = &#39;Ertsul&#39;;
result.num[1] = &#39;äºŒ&#39;;
console.log(&quot;result&quot;, result);
console.log(&quot;obj1&quot;, obj1);
</code></pre><p>ç»“æœå¦‚å›¾ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-522f00e896a05506.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h5 id="JSONè§£æ"><a href="#JSONè§£æ" class="headerlink" title="JSONè§£æ"></a>JSONè§£æ</h5><pre><code>// JSONå®ç°æ·±æ‹·è´
let obj1 = {
    name: &#39;zero&#39;,
    age: 22,
    num: [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;]
}
let result1 = JSON.parse(JSON.stringify(obj1));
result1.num[2] = &#39;ä¸‰&#39;;
console.log(&#39;result1&#39;, result1);
console.log(&#39;obj1&#39;, obj1);
</code></pre><p>ç»“æœå¦‚å›¾ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-b747df9bb831bf93.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
]]></content>
      <categories>
        <category>frontEnd</category>
        <category>js</category>
      </categories>
      <tags>
        <tag>frontEnd</tag>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js/es6å°çŸ¥è¯†å¤§æ‚çƒ©</title>
    <url>/2019/02/16/js-es6%E5%B0%8F%E7%9F%A5%E8%AF%86%E5%A4%A7%E6%9D%82%E7%83%A9/</url>
    <content><![CDATA[<h4 id="åˆå¹¶ä¸¤ä¸ªæ•°ç»„"><a href="#åˆå¹¶ä¸¤ä¸ªæ•°ç»„" class="headerlink" title="åˆå¹¶ä¸¤ä¸ªæ•°ç»„"></a>åˆå¹¶ä¸¤ä¸ªæ•°ç»„</h4><ul>
<li>æ•°ç»„çš„è§£æ„ <strong>[â€¦arr1, â€¦arr2]</strong></li>
<li>Array.prototype.push.apply(arr1, arr2)ï¼Œæœ€ååˆå¹¶åˆ°arr1ã€‚</li>
<li>arr3 = Array.prototype.slice.call(arr1, arr2)ï¼Œæœ€ååˆå¹¶åˆ°arr3ã€‚</li>
</ul>
<pre><code>let arr1 = [1, 2, 3];
let arr2 = [4, 5, 6];
let arr3 = [...arr1,  ...arr2];
console.log(arr3);
Array.prototype.push.apply(arr1,  arr2);
console.log(arr1);
</code></pre><h4 id="arguments-ä¼ªæ•°ç»„-è½¬åŒ–ä¸ºæ•°ç»„"><a href="#arguments-ä¼ªæ•°ç»„-è½¬åŒ–ä¸ºæ•°ç»„" class="headerlink" title="arguments/ä¼ªæ•°ç»„ è½¬åŒ–ä¸ºæ•°ç»„"></a>arguments/ä¼ªæ•°ç»„ è½¬åŒ–ä¸ºæ•°ç»„</h4><ul>
<li>[â€¦arguments]</li>
<li>Array.prototype.slice.call(arguments)</li>
</ul>
<pre><code>(function Fn() {
    let arr = [...arguments, &#39;Ertsul&#39;];
    console.log(arr);
})(&#39;zero&#39;);
(function Fn1() {
    let arr = Array.prototype.slice.call(arguments);
    console.log(arr);
})(&#39;zero&#39;);
</code></pre><h4 id="åˆ¤æ–­å­—ç¬¦ç±»å‹"><a href="#åˆ¤æ–­å­—ç¬¦ç±»å‹" class="headerlink" title="åˆ¤æ–­å­—ç¬¦ç±»å‹"></a>åˆ¤æ–­å­—ç¬¦ç±»å‹</h4><ul>
<li>Object.prototype.toString.call()</li>
<li>typeof</li>
<li>instanceof</li>
</ul>
<h4 id="åˆ›å»ºå®ä¾‹çš„æ–¹æ³•"><a href="#åˆ›å»ºå®ä¾‹çš„æ–¹æ³•" class="headerlink" title="åˆ›å»ºå®ä¾‹çš„æ–¹æ³•"></a>åˆ›å»ºå®ä¾‹çš„æ–¹æ³•</h4><ul>
<li>å­—é¢é‡ let obj = {â€¦}</li>
<li>new Object()æ„é€ å‡½æ•°</li>
<li>æ„é€ å‡½æ•°</li>
<li>Object.create()</li>
<li>å·¥å‚æ¨¡å¼</li>
</ul>
<pre><code>// å­—é¢é‡
let obj1 = {
    name: &#39;zero&#39;,
    age: 22
};
// Object æ„é€ å‡½æ•°
let obj2 = new Object();
obj2.name = &#39;zero&#39;;
console.log(obj2.name);
// å·¥å‚æ¨¡å¼
function Person(name) {
    let obj = new Object();
    obj.name = name;
    return obj;
}
let p1 = Person(&#39;zero&#39;);
console.log(p1.name);
// æ„é€ å‡½æ•°
function Animal(name) {
    this.name = name;
}
let a2 = new Animal(&#39;dog&#39;);
console.log(a2.name);
</code></pre><h4 id="æ•°ç»„çš„æ‹†è§£-flat"><a href="#æ•°ç»„çš„æ‹†è§£-flat" class="headerlink" title="æ•°ç»„çš„æ‹†è§£ flat"></a>æ•°ç»„çš„æ‹†è§£ flat</h4><pre><code>let arr2 = [1, [2, 3, [100, 8989]], [4, 5, 6, 7, 8]];
const flat = arr =&gt; arr.toString().split(&#39;,).map(item =&gt; +item);
console.log(flat(arr2)); // [1, 2, 3, 100, 8989, 4, 5, 6, 7, 8]
</code></pre><h4 id="ç»§æ‰¿çš„æ–¹æ³•-â€“-8ç§"><a href="#ç»§æ‰¿çš„æ–¹æ³•-â€“-8ç§" class="headerlink" title="ç»§æ‰¿çš„æ–¹æ³• â€“ 8ç§"></a>ç»§æ‰¿çš„æ–¹æ³• â€“ 8ç§</h4><ul>
<li>é€šè¿‡åŸå‹ç»§æ‰¿<ul>
<li>ç¼ºç‚¹ï¼šå¼•ç”¨ç±»å‹å­˜åœ¨å…±äº«é—®é¢˜ã€‚</li>
</ul>
</li>
</ul>
<pre><code>function Fn1() { ... }
function Fn2() { ... }
Fn2.prototype = new Fn1();
</code></pre><ul>
<li>æ„é€ å‡½æ•°ï¼šé€šè¿‡ <strong>call</strong> æ›´æ”¹ <strong>this</strong> æŒ‡å‘ï¼›å®é™…ä¸Šæ˜¯è°ƒç”¨äº†çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚<ul>
<li>ç¼ºç‚¹ï¼šçˆ¶ç±»ä¸­çš„æ–¹æ³•ï¼ˆæ„é€ å‡½æ•°ä¸­ï¼‰å­ç±»ä¸å¯è§ã€‚</li>
</ul>
</li>
</ul>
<pre><code>function Fn1() { ... }
function Fn2() { 
  Fn1.call(this);   // å°† this ç»‘å®šåˆ° Fn1
}
</code></pre><pre><code>function SuperType(){

}
SuperType.prototype.sayHi = function(){
    console.log(&#39;Hi&#39;);
}

function subType(){
    SuperType.call(this);
}

let superIns = new SuperType();
superIns.sayHi();   // Hi

let subIns = new subType();
subIns.sayHi();     // Uncaught TypeError
</code></pre><ul>
<li>ç»„åˆç»§æ‰¿ï¼ˆåŸå‹ + æ„é€ ï¼‰<br>å±æ€§é€šè¿‡æ„é€ å‡½æ•°ç»§æ‰¿ï¼›æ–¹æ³•é€šè¿‡åŸå‹ç»§æ‰¿ã€‚è®°å¾—è¦æ›´æ”¹ <strong>Fn2.prototype.constructor</strong> çš„æŒ‡å‘ï¼ŒæŒ‡å‘å­ç±»ã€‚</li>
</ul>
<pre><code>// ç»„åˆç»§æ‰¿
function Fn1() {
    this.name = &#39;zero&#39;
}

Fn1.prototype.sayName = function () {
    console.log(this.name);
};

function Fn2() {
    // ç»§æ‰¿å±æ€§
    Fn1.call(this);
    this.age = 22;
}
// ç»§æ‰¿æ–¹æ³•
Fn2.prototype = new Fn1();
Fn2.prototype.constructor = Fn2;   // éœ€è¦ä¿®å¤æ„é€ å‡½æ•°æŒ‡å‘

Fn2.prototype.sayAge = function () {
    console.log(this.age);
};

let f = new Fn2();
f.sayName();
f.sayAge();
</code></pre><ul>
<li>å®ä¾‹ç»§æ‰¿<br>åœ¨ä¸€ä¸ªå‡½æ•°å†…å®ä¾‹åŒ–ï¼Œç„¶åæ·»åŠ æ–°å±æ€§ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡ã€‚</li>
</ul>
<pre><code>function Fn() { ... }
function Fn2(name) {
 let obj = new Fn();
 obj.name = name;
 return obj;
}
</code></pre><ul>
<li>åŸå‹å¼ç»§æ‰¿<br>å°†çˆ¶ç±»ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œåˆ›å»ºä¸€ä¸ªä¸´æ—¶å‡½æ•°ï¼Œç»§æ‰¿äºçˆ¶ç±»ï¼Œè¿”å›çˆ¶ç±»ã€‚</li>
</ul>
<pre><code>function SuperType(name) {
    this.name = name
}

function Object(o){
    function F(){}
    F.prototype = o;
    return new F();
}

let subType = Object(new SuperType(&#39;zero&#39;));
console.log(subType.__proto__); // SuperType å› ä¸ºæ˜¯å®ä¾‹ï¼Œæ‰€ä»¥åªèƒ½æ˜¯ __proto__
</code></pre><ul>
<li>æ‹·è´ç»§æ‰¿<br>å°†åŸå‹/çˆ¶ç±»ä¸Šçš„å±æ€§å…¨éƒ¨æ‹·è´åˆ°å­ç±»ä¸Šã€‚</li>
</ul>
<pre><code>// æ‹·è´ç»§æ‰¿
function Fn1() {
    this.name = &#39;zero&#39;;
    this.age = 22
}
function Fn2() {
    let f1 = new Fn1();
    // æ³¨æ„è¿™é‡Œè¦ç”¨ in æ“ä½œç¬¦
    for (let item in f1) {
        Fn2.prototype[item] = f1[item];
    }
    Fn2.prototype.ownFun = function () {
        console.log(&#39;my own function.&#39;);
    }
}

let f = new Fn2();
console.log(f.name + &quot;, &quot; + f.age);
f.ownFun();
</code></pre><ul>
<li>å¯„ç”Ÿç»„åˆå¼æ¨¡å‹<ul>
<li>é€šè¿‡ä¸€ä¸ªå‡½æ•°ï¼ˆåˆ›å»ºå¯¹è±¡ï¼Œå¢å¼ºå¯¹è±¡æ²¡ï¼ŒæŒ‡å®šå¯¹è±¡ï¼‰ï¼šå®ç°çˆ¶ç±»å­ç±»çš„æ–¹æ³•ç»§æ‰¿ã€‚</li>
<li>é€šè¿‡æ„é€ å‡½æ•°å®ç°å±æ€§çš„ç»§æ‰¿ã€‚</li>
</ul>
</li>
</ul>
<pre><code>// å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿
function inheritPrototype(subType, superType) {
    // åˆ›å»ºå¯¹è±¡ï¼šæ–°å»ºçš„å¯¹è±¡æŒ‡å‘çˆ¶ç±»çš„åŸå‹
    let prototype = Object(superType.prototype);
    // å¢å¼ºå¯¹è±¡ï¼šæ–°å»ºå¯¹è±¡çš„ constructor æŒ‡å‘å­ç±»
    prototype.constructor = subType;
    // æŒ‡å®šå¯¹è±¡ï¼šå­ç±»çš„åŸå‹æŒ‡å‘æ–°å»ºå¯¹è±¡
    subType.prototype = prototype;
}

function Fn1() {
    this.name = &#39;Ertsul&#39;;
}

Fn1.prototype.sayName = function () {
    console.log(this.name);
};

function Fn2() {
    Fn1.call(this);
    this.age = 22;
}

inheritPrototype(Fn2, Fn1);

Fn2.prototype.sayAge = function () {
    console.log(this.age);
};

let f = new Fn2();
f.sayName();f.sayAge();
</code></pre><ul>
<li>es6 çš„ extends </li>
</ul>
<pre><code>// class
class F1 {
    constructor(name) {
        this.name = name;
    }
}

class F2 extends F1 {
    constructor(name, age){
        super(name);    // è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°
        this.age = age;
    }
    showMsg(){
        console.log(this.name + &#39;, &#39; + this.age);
    }
}

let p = new F2(&#39;zero&#39;, 22);
p.showMsg();  // zero, 22
</code></pre><h4 id="æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰"><a href="#æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰" class="headerlink" title="æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰"></a>æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰</h4><ul>
<li>éå†å¯¹è±¡å¯¹è±¡è¿›è¡Œåˆ¤æ–­ã€‚</li>
<li>å°†å¯¹è±¡è½¬åŒ–ä¸ºå­—ç¬¦ä¸²è¿›è¡Œåˆ¤æ–­ã€‚</li>
</ul>
<pre><code>let obj1 = {
    name: &#39;a&#39;,
    age: 1
}
let obj2 = obj1;
let obj3 = {
    name: &#39;a&#39;,
    age: 2
}
console.log(JSON.stringify(obj1));
console.log(JSON.parse(JSON.stringify(obj1)));
console.log(JSON.stringify(obj1) == JSON.stringify(obj2));  // true
console.log(JSON.stringify(obj1) == JSON.stringify(obj3));  // false    
</code></pre><h4 id="å°è£…ä¸€ä¸ªæ—¶é—´å‡½æ•°ï¼Œæ—¶é—´é€šè¿‡-time-ä¼ é€’ï¼Œå›è°ƒå‡½æ•°é€šè¿‡-then-å‡½æ•°æ‰§è¡Œ"><a href="#å°è£…ä¸€ä¸ªæ—¶é—´å‡½æ•°ï¼Œæ—¶é—´é€šè¿‡-time-ä¼ é€’ï¼Œå›è°ƒå‡½æ•°é€šè¿‡-then-å‡½æ•°æ‰§è¡Œ" class="headerlink" title="å°è£…ä¸€ä¸ªæ—¶é—´å‡½æ•°ï¼Œæ—¶é—´é€šè¿‡ time ä¼ é€’ï¼Œå›è°ƒå‡½æ•°é€šè¿‡ then å‡½æ•°æ‰§è¡Œ"></a>å°è£…ä¸€ä¸ªæ—¶é—´å‡½æ•°ï¼Œæ—¶é—´é€šè¿‡ time ä¼ é€’ï¼Œå›è°ƒå‡½æ•°é€šè¿‡ then å‡½æ•°æ‰§è¡Œ</h4><pre><code>function time(time){
    return new Promise((resolve, reject) =&gt; {
        setTimeout(resolve, time);
    })
}

let t = new time(5000);
t.then((a, b) =&gt; {
    console.log(&#39;time&#39;);
})
</code></pre><h4 id="åŸå‹ç›¸å…³çš„API"><a href="#åŸå‹ç›¸å…³çš„API" class="headerlink" title="åŸå‹ç›¸å…³çš„API"></a>åŸå‹ç›¸å…³çš„API</h4><ul>
<li>Person.prototype.isPrototypeOf(p1)ï¼šåˆ¤æ–­æ˜¯å¦å±äºæŸä¸ªå®ä¾‹</li>
<li>Object.getPrototypeOf(p1)ï¼šè·å–åŸå‹</li>
<li>p1.hasOwnProperty(â€˜nameâ€™)ï¼šåˆ¤æ–­æŸä¸ªå±æ€§æ˜¯å¦å±äºæŸä¸ªå®ä¾‹ï¼ˆåªèƒ½è·å–å±æ€§å®ä¾‹ï¼‰</li>
<li>inæ“ä½œç¬¦ï¼šåˆ¤æ–­æŸä¸ªå±æ€§æ˜¯å¦å±äºæŸä¸ªå®ä¾‹ï¼ˆä¸ç®¡æ˜¯å®ä¾‹ä¸­è¿˜æ˜¯åŸå‹ä¸­ï¼‰</li>
</ul>
<pre><code>function Person(name, age) {
    this.name = name;
    this.age = age;
}

let p1 = new Person(&#39;Ertsul&#39;, 22);
console.log(Person.prototype);      // constructor f
console.log(Person.prototype.constructor);  // Person
console.log(Person.prototype.__proto__);    // constructor çš„åŸå‹
console.log(p1.__proto__);      // // constructor f

console.log(Person.prototype.isPrototypeOf(p1));    // true
console.log(Person.isPrototypeOf(p1));      // false
console.log(Object.getPrototypeOf(p1));     // constructor f

console.log(p1.hasOwnProperty(&#39;name&#39;));     // true å­˜åœ¨å®ä¾‹ä¸­

Person.prototype.num = 100

console.log(p1.hasOwnProperty(&#39;num&#39;));      // fasle    å­˜åœ¨åŸå‹ä¸­

console.log(&#39;num&#39; in p1);   // true ä¸ç®¡æ˜¯å®ä¾‹è¿˜æ˜¯åŸå‹ä¸­
</code></pre><h4 id="js-åˆ¤æ–­æ•°ç»„ç±»å‹"><a href="#js-åˆ¤æ–­æ•°ç»„ç±»å‹" class="headerlink" title="js åˆ¤æ–­æ•°ç»„ç±»å‹"></a>js åˆ¤æ–­æ•°ç»„ç±»å‹</h4><ul>
<li>arr instanceof Array</li>
<li>arr.constructor === Array</li>
</ul>
<pre><code>let arr = [1, 2, 3];
let obj = {}
function judgeFn(arr){
    // return arr.constructor === Array ? true : false
    return arr instanceof Array ? true : false
}
console.log(judgeFn(arr));  // true
console.log(judgeFn(obj )); // false
</code></pre><h4 id="æ—¥æœŸæ ¼å¼åŒ–"><a href="#æ—¥æœŸæ ¼å¼åŒ–" class="headerlink" title="æ—¥æœŸæ ¼å¼åŒ–"></a>æ—¥æœŸæ ¼å¼åŒ–</h4><pre><code>/* æ—¥æœŸæ ¼å¼åŒ– */
function formatNumber(num) {
    const n = `${num}`;        // è½¬åŒ–ä¸ºå­—ç¬¦ä¸²
    return n[1] ? n : `0${n}`;
}
function formatTime(date){
    // å¹´ æœˆ æ—¥
    const year = date.getFullYear();
    const month = date.getMonth() + 1;
    const day = date.getDate();
    // æ—¶ åˆ† ç§’
    const hour = date.getHours();
    const minute = date.getMinutes();
    const second = date.getSeconds();

    return `${[year, month, day].map(formatNumber).join(&#39;-&#39;)} ${[hour, minute, second].map(formatNumber).join(&#39;:&#39;)}`
}
let time = new Date();
console.log(time);        // Tue Aug 14 2018 16:52:06 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)
let t1 = formatTime(time);
console.log(t1);        // 2018-08-14 16:52:06
</code></pre><h4 id="å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ ‡å‡†æ—¥æœŸæ ¼å¼"><a href="#å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ ‡å‡†æ—¥æœŸæ ¼å¼" class="headerlink" title="å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ ‡å‡†æ—¥æœŸæ ¼å¼"></a>å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ ‡å‡†æ—¥æœŸæ ¼å¼</h4><pre><code>/* å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ ‡å‡†æ—¥æœŸæ ¼å¼ */
function time2string(str) {
    const chunks = str.split(&#39; &#39;);
    const date = chunks[0].split(&#39;-&#39;);
    const time = chunks[1].split(&#39;:&#39;);

    return new Date(date[0], date[1] - 1, date[2], time[0], time[1], time[2]);
}
let str = &quot;2018-08-14 23:59:59&quot;;
let t2 = time2string(str);
console.log(t2);    // Tue Aug 14 2018 23:59:59 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)
</code></pre><h4 id="é˜²æŠ–èŠ‚æµ"><a href="#é˜²æŠ–èŠ‚æµ" class="headerlink" title="é˜²æŠ–èŠ‚æµ"></a>é˜²æŠ–èŠ‚æµ</h4><pre><code>/* é˜²æŠ–èŠ‚æµ debounce throttle */
// é˜²æŠ– - è¿ç»­å¿«é€Ÿè§¦å‘çš„è§£å†³æ–¹æ¡ˆ
function debounce(fn, wait) {
    let timeout = null;    // åˆå§‹åŒ– timer å®šæ—¶å™¨
    return function (){
        timeout &amp;&amp; clearTimeout(timeout);    // æ¸…ç©ºå®šæ—¶å™¨
        timeout = setTimeout(fn, wait);        // è®¾ç½®å®šæ—¶å™¨
    }
}
// èŠ‚æµ - ä¸€å®šæ—¶é—´å†…è¯·æ±‚ä¸€æ¬¡ -- å®šæ—¶å™¨æ³•
function throttle1(fn, wait) {
    let timer = null;    // åˆå§‹åŒ– timer å®šæ—¶å™¨
    return function () {
        let context = this;        // ä¿å­˜ä¸Šä¸‹æ–‡ this
        let args = arguments;    // è®°å½•å‚æ•°
        if(!timer) {    // å®šæ—¶å™¨ä¸ºç©º
            timer = setTimeout(() =&gt; {
                fn.apply(context, args);
                timer = null;    // æ¸…ç©ºå®šæ—¶å™¨
            }, wait);
        }
    }
}
// èŠ‚æµ - ä¸€å®šæ—¶é—´å†…è¯·æ±‚ä¸€æ¬¡ -- æ—¶é—´æˆ³æ³•
function throttle2(fn, wait) {
    let prev = Date.now();    // è®°å½•å‰ä¸€ä¸ªæ—¶é—´
    return function () {
        let context = this;        // ä¿å­˜ä¸Šä¸‹æ–‡ this
        let args = arguments;    // è®°å½•å‚æ•°
        let now = Date.now();     // è®°å½•å½“å‰æ—¶é—´
        if(now - prev &gt;= wait){        // æ—¶é—´æˆ³å¤§äºè®¾ç½®çš„æ—¶é—´
            fn.apply(context, args);
            prev = Date.now();    // è®°å½•å‰ä¸€ä¸ªæ—¶é—´
        }
    }
}

// window.addEventListener(&#39;scroll&#39;, debounce(() =&gt; {
 //    console.log(Math.random());
// }, 500));
// window.addEventListener(&#39;scroll&#39;, throttle1(() =&gt; {
//     console.log(Math.random());
// }, 1000));
window.addEventListener(&#39;scroll&#39;, throttle2(() =&gt; {
    console.log(Math.random());
}, 1000))
</code></pre><ul>
<li>JSON.stringfy(obj, [replace, space])<ul>
<li>å·§ç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯ä»¥å®ç°jsonå¯¹è±¡çš„è¿‡æ»¤æ›¿æ¢ã€‚</li>
<li>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæ˜¯ç¼©è¿›çš„ç©ºæ ¼æ•°ã€‚    </li>
<li>å¦‚æœè¢«åºåˆ—åŒ–å¯¹è±¡å†…éƒ¨å«æœ‰toJSONæ–¹æ³•ï¼Œåˆ™è¯¥å¯¹è±¡ä¸ä¼šè¢«åºåˆ—åŒ–ï¼Œè€Œæ˜¯åºåˆ—åŒ–toJSONæ–¹æ³•çš„è¿”å›å€¼ã€‚</li>
</ul>
</li>
</ul>
<pre><code>let obj1 = {
    name: &#39;zero&#39;,
    age: 22,
    hobby: &#39;ball&#39;
};

let str1 = JSON.stringify(obj1);
console.log(str1, typeof str1, str1.constructor === String);    // {&quot;name&quot;:&quot;zero&quot;,&quot;age&quot;:22,&quot;hobby&quot;:&quot;ball&quot;} string true
let str2 = JSON.stringify(obj1, (key, value) =&gt; {
    if(value === &#39;zero&#39;) {
        return &#39;Ertsul.&#39;
    }else {
        return value;
    }
});
console.log(str2);  // {&quot;name&quot;:&quot;Ertsul.&quot;,&quot;age&quot;:22,&quot;hobby&quot;:&quot;ball&quot;}

let obj2 = {
    num: 100,
    toJSON(){
        return &#39;apple&#39;
    }
};

let str3 = JSON.stringify(obj2);
console.log(str3);  // apple
</code></pre><ul>
<li>æ•°ç»„çš„ sort()<br>sort()é»˜è®¤ä¼šå°†æ¯ä¸ªå…ƒç´ è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åæŒ‰ç…§å­—ç¬¦ä¸²è¿›è¡Œæ’åºï¼Œæ˜¯ä¸ç¨³å®šçš„æ’åºã€‚<br>å¦‚æœè¦å¯¹æ•°ç»„çš„æ•°å­—è¿›è¡Œæ’åºï¼Œåˆ™éœ€è¦ï¼š<blockquote>
<p>array.sort((val1, val2) =&gt; {return val - val2});</p>
</blockquote>
</li>
</ul>
<p>é€šè¿‡è¿™æ ·å®ç°ï¼Œå› ä¸ºä¼ é€’çš„å‚æ•°æ˜¯æ•°å­—ï¼Œæ‰€ä»¥é€šè¿‡å‡æ³•æ“ä½œï¼ˆå­—ç¬¦è¿›è¡Œå‡æ³•æ“ä½œè¿”å›çš„æ˜¯NaNï¼‰ï¼Œå¯ä»¥å¾—åˆ°é¢„æœŸç»“æœã€‚</p>
<pre><code>let arr10 = [1, 2, 19, 12, 22];
console.log(arr10.sort()); // [1, 12, 19, 2, 22]
console.log(arr10.sort((val1, val2) =&gt; {  // [1, 2, 12, 19, 22]
  return val1 - val2;
}));  
</code></pre><ul>
<li>reduceå‡½æ•°<blockquote>
<p>reduce() æ–¹æ³•å¯¹ç´¯åŠ å™¨å’Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼ˆä»å·¦åˆ°å³ï¼‰åº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå°†å…¶ç®€åŒ–ä¸ºå•ä¸ªå€¼ã€‚</p>
</blockquote>
</li>
</ul>
<p>å…¶å®Œæ•´çš„å‡½æ•°ä¸ºï¼š </p>
<pre><code>arr.reduce((prev, next, cur, srcArr) =&gt; {
  ......
}, initVal)
</code></pre><ul>
<li>prev: ä¸Šæ¬¡è¿”å›çš„å€¼</li>
<li>next: ä¸‹ä¸€ä¸ªæ•°ç»„å…ƒç´ çš„å€¼</li>
<li>cur: å½“å‰æ•°ç»„å…ƒç´ çš„ç´¢å¼•å€¼</li>
<li>scrArr: æºæ•°ç»„</li>
<li>initVal: è®¾ç½®ç¬¬ä¸€æ¬¡çš„ <strong>prev</strong></li>
</ul>
<p>ä¾‹å­ 1ï¼š</p>
<pre><code>let arr = [&#39;apple&#39;, &#39;pear&#39;, &#39;bananas&#39;];
arr.reduce((prev, next, cur, arr) =&gt; {
  console.warn(prev, next, cur, arr);
  return next;
}, &#39;fruit&#39;)
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-65c2bd1bf155dfaf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>ä¾‹å­ 2ï¼šç»Ÿè®¡ä¸€ä¸ªæ•°ç»„ä¸­å•è¯å‡ºç°çš„æ¬¡æ•°</p>
<pre><code>// ç»Ÿè®¡æ•°ç»„ä¸­å•è¯å‡ºç°çš„æ¬¡æ•°
let arr = [&quot;apple&quot;, &quot;orange&quot;, &quot;apple&quot;, &quot;orange&quot;, &quot;pear&quot;, &quot;orange&quot;, &quot;bananas&quot;, &quot;bananas&quot;];
function getCount(arr) {
  return arr.reduce((prev, next, cur) =&gt; {
    prev[next] = (prev[next] + 1) || 1
    return prev;
  }, {})
}
console.warn(getCount(arr));  // {apple: 2, orange: 3, pear: 1, bananas: 2}
</code></pre><ul>
<li>Object.seal()<br>é˜²æ­¢å¯¹è±¡çº‚æ”¹ï¼šä¸èƒ½æ·»åŠ ä¹Ÿä¸èƒ½åˆ é™¤å±æ€§</li>
</ul>
<pre><code>let obj = {
  name: &#39;Ersul&#39;
}
Object.seal(obj); // é˜²æ­¢å¯¹è±¡çº‚æ”¹ï¼šä¸èƒ½åˆ é™¤ä¹Ÿä¸èƒ½æ·»åŠ å±æ€§
delete obj.name;
console.warn(obj.name); // Ertsul
obj.age = 22;
console.warn(obj.age); // undefined
</code></pre><ul>
<li>Object.freeze()<br>å†»ç»“å¯¹è±¡ï¼Œä¸èƒ½ä¿®æ”¹å¯¹è±¡ä»»ä½•å±æ€§çš„å€¼ã€‚å¦‚è‹¥</li>
</ul>
<pre><code>let obj = {
  name: &#39;Ersul&#39;
}

Object.freeze(obj); // å†»ç»“å¯¹è±¡ï¼Œä¸èƒ½ä¿®æ”¹å±æ€§çš„å€¼
obj.name = &#39;Zero&#39;;
console.warn(obj.name); // Ertsul
</code></pre><ul>
<li>æ•°ç»„å­—ç¬¦ä¸²çš„ç›¸äº’è½¬åŒ–</li>
</ul>
<pre><code>// æ•°ç»„ --&gt; å­—ç¬¦ä¸² : join()
let arr3 = [1, 2, 3, 4, 5];
console.log(arr3.join(&#39;-&#39;));
// å­—ç¬¦ä¸² --&gt; æ•°ç»„ : split()
let str = &#39;apple,pear,bananas&#39;;
console.log(str.split(&#39;,&#39;));
</code></pre>]]></content>
      <categories>
        <category>frontEnd</category>
        <category>js</category>
        <category>es6</category>
      </categories>
      <tags>
        <tag>frontEnd</tag>
        <tag>js</tag>
        <tag>es6</tag>
      </tags>
  </entry>
  <entry>
    <title>webpackå­¦ä¹ ç¬”è®°</title>
    <url>/2019/02/16/webpack%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h2 id="é¡¹ç›®æ„å»º"><a href="#é¡¹ç›®æ„å»º" class="headerlink" title="é¡¹ç›®æ„å»º"></a>é¡¹ç›®æ„å»º</h2><ul>
<li>æ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹</li>
<li>npm init</li>
<li><p>è®¾ç½®é¡¹ç›®ç›®å½•ç»“æ„ï¼Œç»“æ„å¦‚ä¸‹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-bd9163add73e9ea0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
</li>
<li><p><strong>build</strong> ç›®å½•æ˜¯ webpack æ‰“åŒ…åçš„ç”Ÿæˆç›®å½•ï¼Œ<strong>index.html</strong> æ˜¯æ‰“åŒ…åçš„ html æ–‡ä»¶ï¼Œbundle.hash.js æ˜¯æ‰“åŒ…åçš„ js æ–‡ä»¶ã€‚</p>
</li>
<li><strong>src</strong> ç›®å½•æ˜¯é¡¹ç›®æºæ–‡ä»¶ï¼Œ<strong>template.html</strong> æ˜¯ html æ–‡ä»¶æ¨¡æ¿ã€‚</li>
<li><strong>webpack.config.js</strong> æ˜¯é…ç½® <strong>webpack</strong> çš„æ€»æ–‡ä»¶ã€‚</li>
</ul>
<pre><code>module.exports = { ... }
</code></pre><h2 id="æ¨¡å¼-mode"><a href="#æ¨¡å¼-mode" class="headerlink" title="æ¨¡å¼ mode"></a>æ¨¡å¼ mode</h2><pre><code>mode: &quot;development&quot;, // development or production
</code></pre><h2 id="å…¥å£-entry"><a href="#å…¥å£-entry" class="headerlink" title="å…¥å£ entry"></a>å…¥å£ entry</h2><p>è®¾ç½®æ‰“åŒ…çš„å…¥å£æ–‡ä»¶, entry: filepath</p>
<pre><code>entry: &quot;./src/index.js&quot;, // å…¥å£
</code></pre><h2 id="è¾“å‡º-output"><a href="#è¾“å‡º-output" class="headerlink" title="è¾“å‡º output"></a>è¾“å‡º output</h2><p>è®¾ç½®æ‰“åŒ…åçš„è¾“å‡ºæ–‡ä»¶ï¼Œoutput: { â€¦ }</p>
<pre><code>output: { // è¾“å‡º
  filename: &quot;bundle.[hash:8].js&quot;,
  path: path.resolve(__dirname + &#39;/build&#39;),
  // publicPath: &quot;http://&quot;, // å…¬å…±è·¯å¾„å‰ç¼€
},
</code></pre><p>æ³¨ï¼š</p>
<ul>
<li><strong>path</strong> åé¢åº”æ˜¯ç»å¯¹è·¯å¾„ã€‚</li>
<li><strong>bundle.[hash:8].js</strong> ä¸­çš„ <strong>[hash:8]</strong> å¯ä»¥åœ¨æ¯æ¬¡æ‰“åŒ…åéƒ½åœ¨æ–‡ä»¶åé¢è¿½åŠ  hash å€¼ã€‚</li>
</ul>
<p>é€šè¿‡ä¸Šé¢ä¸‰é¡¹ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„ <strong>webpack</strong> æ‰“åŒ…é…ç½®ã€‚åœ¨ <strong>package.json</strong> æ·»åŠ è„šæœ¬æˆ–ç›´æ¥æ‰§è¡Œ <strong>./node_modules/.bin/webpack</strong> å³å¯å®ç°æ‰“åŒ…ï¼š</p>
<pre><code>&quot;build&quot;: &quot;./node_modules/.bin/webpack&quot;,
</code></pre><h2 id="webpack-dev-server"><a href="#webpack-dev-server" class="headerlink" title="webpack-dev-server"></a>webpack-dev-server</h2><p>webpack å¼€å‘æœåŠ¡å™¨ï¼Œç”¨äºå¼€å‘æ—¶å€™çš„é…ç½®ï¼š</p>
<ul>
<li>yarn add taco â€“dev webpack-dev-server / npm install â€“save-dev webpack-dev-server</li>
<li>åŸºæœ¬é…ç½®å¦‚ä¸‹ï¼š</li>
</ul>
<pre><code>devServer: { // å¼€å‘æœåŠ¡å™¨
  port: 3001,
  contentBase: path.resolve(__dirname + &#39;/build&#39;), // æœ¬åœ°æœåŠ¡å™¨ç›®å½•
  progress: true, // è¿›åº¦æ¡
  open: true, // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
  compress: true, // å‹ç¼©
  // 1. ä»£ç†
  proxy: {
    &quot;/api&quot;: {
      target: &quot;&quot;,
      pathRewrite: {
        &quot;/api&quot;: &quot;&quot;
      }
    }
  },
  // 2. ç”¨ express å†…ç½®é’©å­æ¨¡æ‹Ÿæ•°æ®
  before(app) {
    app.get(&quot;/api&quot;, (req, res) =&gt; { ... })
  },
  // 3. åœ¨æœåŠ¡ç«¯ä¸­å¯åŠ¨ webpack æœåŠ¡ï¼Œä½¿ç”¨ webpack-dev-middleware ä¸­é—´ä»¶
},
},
</code></pre><ul>
<li>åœ¨ <strong>package.json</strong> æ·»åŠ è„šæœ¬å³å¯ï¼š</li>
</ul>
<pre><code>&quot;dev&quot;: &quot;webpack-dev-server&quot;
</code></pre><h2 id="source-map-amp-amp-eval-source-map-amp-amp-cheap-module-source-map-amp-amp-cheap-module-eval-source-map"><a href="#source-map-amp-amp-eval-source-map-amp-amp-cheap-module-source-map-amp-amp-cheap-module-eval-source-map" class="headerlink" title="source-map &amp;&amp; eval-source-map &amp;&amp; cheap-module-source-map &amp;&amp; cheap-module-eval-source-map"></a>source-map &amp;&amp; eval-source-map &amp;&amp; cheap-module-source-map &amp;&amp; cheap-module-eval-source-map</h2><p>ä½œç”¨ï¼šæºç æ˜ å°„ï¼ŒæŠ¥é”™æ—¶æ˜¾ç¤ºå‡ºé”™çš„ä½ç½®ã€‚</p>
<ul>
<li>source-mapï¼šä¼šå•ç‹¬ç”Ÿæˆä¸€ä¸ª <strong>sourcemap</strong> æ–‡ä»¶ï¼›ä¼šæ˜¾ç¤ºè¡Œåˆ—ã€‚</li>
<li>eval-source-mapï¼šä¸ä¼šå•ç‹¬ç”Ÿæˆä¸€ä¸ª <strong>sourcemap</strong> æ–‡ä»¶ï¼Œä¼šå°†ç”Ÿæˆçš„ <strong>sourcemap</strong> æ”¾åˆ°æ‰“åŒ…åçš„ <strong>html</strong> æ–‡ä»¶ï¼›ä¼šæ˜¾ç¤ºè¡Œå’Œåˆ—ã€‚</li>
<li>cheap-module-source-mapï¼šä¼šç”Ÿæˆ <strong>sourcemap</strong> æ–‡ä»¶ï¼Œä¸ä¼šæ˜¾ç¤ºåˆ—ã€‚</li>
<li>cheap-module-eval-source-mapï¼šä¸ä¼šç”Ÿæˆ <strong>sourcemap</strong> æ–‡ä»¶ï¼Œé›†æˆåœ¨ <strong>html</strong> æ–‡ä»¶ä¸­ï¼Œä¸ä¼šæ˜¾ç¤ºåˆ—ã€‚</li>
</ul>
<pre><code>devtool: &quot;source-map&quot;, // æºç æ˜ å°„
</code></pre><h2 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h2><p>ä½œç”¨ï¼šç›‘æ§ä»£ç å®æ—¶å˜åŒ–ï¼Œè¿›è¡Œç¼–è¯‘æ‰“åŒ…ã€‚</p>
<pre><code>watch: true, // ç›‘æ§ä»£ç å®æ—¶å˜åŒ–ï¼Œè¿›è¡Œç¼–è¯‘æ‰“åŒ…
watchOptions: {
  poll: 1000, // å¤šæ¯«ç§’ç›‘æ§ä¸€æ¬¡
  aggreatement: 500, // é˜²æŠ–
  ignored: &quot;node_modules&quot; // å¿½ç•¥æ–‡ä»¶å¤¹
},
</code></pre><h2 id="resolve"><a href="#resolve" class="headerlink" title="resolve"></a>resolve</h2><p>ä½œç”¨ï¼šè§£æç¬¬ä¸‰æ–¹åŒ…</p>
<pre><code>resolve: { // è§£æ ç¬¬ä¸‰æ–¹åŒ…
  modules: [
    path.resolve(&quot;node_modules&quot;), // åœ¨å½“å‰ç›®å½•ä¸‹æŸ¥æ‰¾æ¨¡å— 
    path.resolve(&quot;other_modules&quot;), // åœ¨å…¶ä»–ç›®å½•ä¸‹æŸ¥æ‰¾æ¨¡å— 
  ],
  // è‡ªåŠ¨æ·»åŠ æ‰©å±•åï¼Œä¸»è¦æ˜¯ import æ—¶å€™ä½¿ç”¨, ä¾æ¬¡è§£æ
  extensions: [&quot;.js&quot;, &quot;.css&quot;, &quot;.json&quot;, &quot;.vue&quot;],
  // æ¯”å¦‚å¼•ç”¨ bootstrap çš„ css æ ·å¼
  // æ–¹å¼ä¸€ï¼š bootstrap çš„ä¸»å…¥å£
  mainFields: [&quot;style&quot;, &quot;main&quot;],
  // æ–¹å¼äºŒï¼šåˆ«å  
  // alias: {
  //   bootstrap: &quot;bootstrap/dist/css/bootstrap.css&quot;
  // }
},
</code></pre><h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><p>webpack çš„æ’ä»¶é…ç½®æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢å­˜æ”¾ç€å„ç§å„æ ·çš„æ’ä»¶ã€‚</p>
<pre><code>plugins: [
 new pluginName(...)
]
</code></pre><h4 id="html-webpack-plugin"><a href="#html-webpack-plugin" class="headerlink" title="html-webpack-plugin"></a>html-webpack-plugin</h4><p>æ’ä»¶ä½œç”¨ï¼šæ‰“åŒ…æ—¶å€™è‡ªåŠ¨æ ¹æ® <strong>html</strong> æ¨¡æ¿ç”Ÿæˆç›®æ ‡ <strong>html</strong> æ–‡ä»¶ï¼Œè‡ªåŠ¨ç”Ÿæˆç›®æ ‡æ‰“åŒ…ç›®å½•ï¼›å¦å¤–ï¼Œå¯é…ç½® <strong>html</strong> çš„ç›¸å…³æ‰“åŒ…é…ç½®ï¼Œå¦‚ï¼šå‹ç¼©ï¼Œå»åŒå¼•å·ç­‰ã€‚</p>
<pre><code>new HtmlWebpackPlugin({
  filename: &quot;index.html&quot;, // ç›®æ ‡æ–‡ä»¶åç§°
  template: path.resolve(__dirname + &#39;/src/template.html&#39;), // æ¨¡æ¿æ–‡ä»¶
  minify: { // å‹ç¼©é…ç½®
    removeAttributeQuotes: true, // å»åŒå¼•å·
    collapseWhitespace: true, // ä¸æ¢è¡Œ
  },
  hash: true // ç”Ÿæˆ hash æˆ³
})
</code></pre><h4 id="mini-css-extract-plugin"><a href="#mini-css-extract-plugin" class="headerlink" title="mini-css-extract-plugin"></a>mini-css-extract-plugin</h4><p>ä½œç”¨ï¼šå°†ç”Ÿæˆçš„ <strong>cssæ ·å¼</strong> æŠ½ç¦»æˆä¸€ä¸ª <strong>cssæ–‡ä»¶</strong>ï¼Œå¹¶å°†è¯¥æ ·å¼æ–‡ä»¶å¼•è¿›ç›®æ ‡ <strong>html</strong> æ–‡ä»¶ä¸­ã€‚</p>
<pre><code>plugins: [ // æ’ä»¶
  new MiniCssExtractPlugin({
    filename: &quot;main.css&quot;,
  })
],
module: { // æ¨¡å—
  rules: [{
    test: /\.css$/,
    use: [
      // {
      //   loader: &quot;style-loader&quot;,
      //   options: {
      //     insertAt: &quot;top&quot; // æ’åˆ° head æ ‡ç­¾çš„é¡¶éƒ¨ï¼Œæ›´æ”¹ä¼˜å…ˆçº§
      //   }
      // },
      MiniCssExtractPlugin.loader, // æ³¨æ„ loader çš„ä½¿ç”¨é¡ºåº
      &quot;css-loader&quot;
    ]
  }]
}
</code></pre><p>æ³¨ï¼šè¿™é‡ŒæŠ½ç¦»å‡ºæ¥çš„ <strong>main.css</strong> æ–‡ä»¶å¹¶æ²¡æœ‰å‹ç¼©ï¼Œè¦é€šè¿‡æ‰‹åŠ¨æ·»åŠ ä»¥ä¸‹ä¸¤ä¸ªæ’ä»¶åˆ°ä¼˜åŒ–é¡¹ï¼š</p>
<ul>
<li>optimize-css-assets-webpack-plugin</li>
<li>uglifyjs-webpack-plugin</li>
</ul>
<pre><code>optimization: { // ä¼˜åŒ–é¡¹
  minimizer: [
    new OptimizeCssAssetsWebpackPlugin({}), // å‹ç¼©æŠ½ç¦»çš„ css æ–‡ä»¶
    new UglifyjsWebpackPlugin({
      cache: true,
      parallel: true,
    }) // ä½¿ç”¨äº† optimize-css-assets-webpack-plugin æ’ä»¶åï¼ŒåŸå…ˆçš„ js å‹ç¼©ä¸èµ·ä½œç”¨ï¼Œè¦æ‰‹åŠ¨é‡æ–°é…ç½®
  ]
},
</code></pre><h4 id="optimize-css-assets-webpack-plugin"><a href="#optimize-css-assets-webpack-plugin" class="headerlink" title="optimize-css-assets-webpack-plugin"></a>optimize-css-assets-webpack-plugin</h4><p>æ’ä»¶ä½œç”¨ï¼šå‹ç¼©æŠ½ç¦»å‡ºæ¥çš„ <strong>main.css</strong> æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨äº† <strong>optimize-css-assets-webpack-plugin</strong> æ’ä»¶åï¼ŒåŸå…ˆçš„ js å‹ç¼©ä¸èµ·ä½œç”¨ï¼Œè¦æ‰‹åŠ¨é‡æ–°é…ç½®ä¼˜åŒ–é¡¹ <strong>uglifyjs-webpack-plugin</strong> ã€‚</p>
<h4 id="uglifyjs-webpack-plugin"><a href="#uglifyjs-webpack-plugin" class="headerlink" title="uglifyjs-webpack-plugin"></a>uglifyjs-webpack-plugin</h4><p>æ’ä»¶ä½œç”¨ï¼šå‹ç¼©æ‰“åŒ…åçš„ <strong>js</strong> æ–‡ä»¶ã€‚</p>
<h4 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="headerlink" title="clean-webpack-plugin"></a>clean-webpack-plugin</h4><p>ä½œç”¨ï¼šæ¸…ç†æ–‡ä»¶</p>
<pre><code>plugins: [
 new CleanWebpackPlugin(&quot;./build&quot;)
]
</code></pre><h4 id="copy-webpack-plugin"><a href="#copy-webpack-plugin" class="headerlink" title="copy-webpack-plugin"></a>copy-webpack-plugin</h4><p>ä½œç”¨ï¼šå°†æŸäº›æ–‡ä»¶æ‹·è´åˆ°æ‰“åŒ…åçš„æ–‡ä»¶å¤¹ã€‚</p>
<pre><code>new CopyWebpackPlugin([
  {from: &quot;./copy&quot;, to: &quot;./&quot;}
])
</code></pre><h4 id="banner-plugin"><a href="#banner-plugin" class="headerlink" title="banner-plugin"></a>banner-plugin</h4><p>ä½œç”¨ï¼šç‰ˆæƒå£°æ˜ï¼Œæ˜¯ <strong>webpack</strong> çš„å†…ç½®æ¨¡å—ã€‚</p>
<pre><code>new webpack.BannerPlugin(&quot;@copyright by Ertsul&quot;)
</code></pre><h4 id="webpack-DefinePlugin-â€¦"><a href="#webpack-DefinePlugin-â€¦" class="headerlink" title="webpack.DefinePlugin({ â€¦ })"></a>webpack.DefinePlugin({ â€¦ })</h4><p>ä½œç”¨ï¼šå®šä¹‰ç¯å¢ƒå˜é‡ã€‚</p>
<pre><code>plugins: [
  new webpack.DefinePlugin({
    DEV: JSON.stringify(&quot;development&quot;),
    PRO: JSON.stringify(&quot;production&quot;)
  })
]
</code></pre><h4 id="webpacfk-IgnorePlugin"><a href="#webpacfk-IgnorePlugin" class="headerlink" title="webpacfk.IgnorePlugin()"></a>webpacfk.IgnorePlugin()</h4><p>ä½œç”¨ï¼šå¿½ç•¥æ¨¡å—çš„å¼•è¿›</p>
<pre><code>plugins: [
  new webpack.IgnorePlugin(/\./locale/, /moment/)
]
</code></pre><p>æ³¨ï¼šå¦‚æœç›´æ¥ä½¿ç”¨ <strong>DEV: â€˜developmentâ€™</strong> çš„è¯ï¼Œä¼šæŠŠ <strong>DEV</strong> ç›´æ¥æ›¿æ¢ä¸º <strong>å¼•å·å†…éƒ¨çš„å†…å®¹</strong>ã€‚å¦‚ï¼š<strong>console.log(DEV)</strong>ï¼Œä¼šå˜æˆ <strong>console.log(dev)</strong>ï¼Œæœ€åçš„ç»“æœæ˜¯ <strong>undefined</strong>ã€‚æ‰€ä»¥ï¼Œéœ€è¦é€šè¿‡ <strong>JSON.stringfy()</strong> è¿›è¡Œè½¬åŒ–ã€‚</p>
<h2 id="æ¨¡å—-module"><a href="#æ¨¡å—-module" class="headerlink" title="æ¨¡å— module"></a>æ¨¡å— module</h2><p>æ¨¡å—ä¸»è¦æ˜¯å„ç§ <strong>loader</strong>ï¼Œä½œç”¨ï¼šè§£æå„ç§ç±»å‹çš„æ–‡ä»¶ã€‚</p>
<pre><code>module: { 
 rules: [
   {
     test: regx,
     use: [loadName]
   }
 ]
}
</code></pre><h4 id="css-loader-style-loader"><a href="#css-loader-style-loader" class="headerlink" title="css-loader / style-loader"></a>css-loader / style-loader</h4><ul>
<li>css-loaderï¼šä¸»è¦æ˜¯ç”¨äºè§£æåœ¨ <strong>css</strong> æ–‡ä»¶ä¸­é€šè¿‡ <strong>@import</strong> æ–¹å¼å¼•è¿›å…¶ä»–çš„ <strong>css</strong> æ–‡ä»¶ã€‚</li>
<li>style-loader: ä¸»è¦æ˜¯ç”¨äºå°† <strong>js</strong> æ–‡ä»¶ä¸­é€šè¿‡ <strong>require</strong> æ–¹å¼å¼•è¿›çš„ <strong>css</strong> æ–‡ä»¶æ’å…¥åˆ°ç›®æ ‡ <strong>html</strong> æ–‡ä»¶çš„ <strong>head</strong> ä¸­ï¼ˆæ’åˆ°æœ€åï¼Œå±‚çº§æœ€é«˜ï¼‰ã€‚</li>
</ul>
<pre><code>// æ•°ç»„æ–¹å¼
module: { // æ¨¡å—
  rules: [{
    test: /\.css$/, // æ­£åˆ™
    use: [&quot;style-loader&quot;, &quot;css-loader&quot;] // loader æ•°ç»„
  }]
}
// å¯¹è±¡æ–¹å¼
module: { // æ¨¡å—
  rules: [{
    test: /\.css$/, // æ­£åˆ™
    use: [
      {
        loader: &quot;style-loader&quot;,
        options: {
          insertAt: &quot;top&quot; // æ’åˆ° head æ ‡ç­¾çš„é¡¶éƒ¨ï¼Œæ›´æ”¹ä¼˜å…ˆçº§
        }
      }, 
      &quot;css-loader&quot;
    ]
  }]
}
</code></pre><p>æ³¨ï¼š<strong>loader</strong> æ˜¯ä»å³å‘å·¦ã€ä»ä¸‹åˆ°ä¸Šçš„æ‰§è¡Œé¡ºåºï¼Œæ•…ï¼š<strong>use: [â€œstyle-loaderâ€, â€œcss-loaderâ€]</strong></p>
<h4 id="postcss-loader-autoprefixer"><a href="#postcss-loader-autoprefixer" class="headerlink" title="postcss-loader + autoprefixer"></a>postcss-loader + autoprefixer</h4><p>è¿™ä¸¤ä¸ªçš„é…åˆä½¿ç”¨å¯ä»¥è‡ªåŠ¨æ·»åŠ  <strong>css</strong> çš„æµè§ˆå™¨å‰ç¼€ã€‚</p>
<ul>
<li>autoprefixerï¼šè‡ªåŠ¨æ·»åŠ  <strong>css</strong> çš„æµè§ˆå™¨å‰ç¼€ã€‚</li>
<li>postcss-loaderï¼šloader å¤„ç† autoprefixerã€‚</li>
</ul>
<pre><code>// ä½¿ç”¨ postcss-loader 
module: { // æ¨¡å—
  rules: [{
    test: /\.css$/,
    use: [
      // {
      //   loader: &quot;style-loader&quot;,
      //   options: {
      //     insertAt: &quot;top&quot; // æ’åˆ° head æ ‡ç­¾çš„é¡¶éƒ¨ï¼Œæ›´æ”¹ä¼˜å…ˆçº§
      //   }
      // },
      MiniCssExtractPlugin.loader,
      &quot;css-loader&quot;,
      &quot;postcss-loader&quot; // æ³¨æ„é¡ºåº
    ]
  }]
}
</code></pre><ul>
<li>æ ¹ç›®å½•ä¸‹æ–°å»º postcss.config.js æ–‡ä»¶</li>
</ul>
<pre><code>module.exports = {
  plugins: [
    require(&quot;autoprefixer&quot;)
  ]
}
</code></pre><h4 id="babel-loader-babel-core-babel-preset-env"><a href="#babel-loader-babel-core-babel-preset-env" class="headerlink" title="babel-loader + @babel/core + @babel/preset-env"></a>babel-loader + @babel/core + @babel/preset-env</h4><p>ä½œç”¨ï¼šè½¬åŒ– es6 è¯­æ³•</p>
<pre><code>module: { // æ¨¡å—
  rules: [{
    test: /\.js$/,
    use: {
      loader: &quot;babel-loader&quot;,
      options: { // ç”¨ babel-loader éœ€è¦æŠŠ es6 è½¬åŒ–ä¸º es5
        presets: [
          &quot;@babel/preset-env&quot;, // è½¬åŒ– js è¯­æ³•ï¼Œä¸€ä¸ªå¤§çš„ babel åº“ï¼ŒåŒ…å«å°† es6 è½¬åŒ–ä¸º es5 çš„æ¨¡å—
        ],
        // plugins: [...] // å…¶ä»–çš„å°æ’ä»¶
      }
    }
  }]
}
</code></pre><h4 id="expose-loader"><a href="#expose-loader" class="headerlink" title="expose-loader"></a>expose-loader</h4><p>ä½œç”¨ï¼šæš´éœ²å…¨å±€çš„ <strong>loader</strong>ï¼Œæš´éœ²åˆ° <strong>window</strong> ä¸Šã€‚</p>
<pre><code>// ä¸€èˆ¬æƒ…å†µ
import $ from &#39;jquery&#39;;
console.log(window.$); // undefined
// å†…è” loader æ–¹å¼
import $ from &#39;expose-loader?$!jquery&#39;;
console.log(window.$);
// å…¶ä»–æ–¹å¼ï¼šåœ¨æ¯ä¸ªæ¨¡å—ä¸­æ³¨å…¥
new webpack.ProvidePlugin({
  $: &quot;jquery&quot;
})
console.log($);
console.log(window.$); // undefined
</code></pre><h4 id="file-loader-amp-amp-url-loader-amp-amp-html-withimg-loader"><a href="#file-loader-amp-amp-url-loader-amp-amp-html-withimg-loader" class="headerlink" title="file-loader &amp;&amp; url-loader &amp;&amp; html-withimg-loader"></a>file-loader &amp;&amp; url-loader &amp;&amp; html-withimg-loader</h4><p>åœ¨ <strong>webpack</strong> é¡¹ç›®ä¸­ä¸èƒ½ç›´æ¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„çš„æ–¹å¼è°ƒç”¨å›¾ç‰‡ï¼Œä¸ç„¶æ‰“åŒ…åçš„å›¾ç‰‡è·¯å¾„ä¼šæŠ¥é”™ã€‚</p>
<ul>
<li>file-loaderï¼š<strong>js</strong> æ–‡ä»¶ä¸­é€šè¿‡ <strong>import</strong> æ–¹å¼å¼•è¿›å›¾ç‰‡ã€‚</li>
<li>html-withimg-loaderï¼š<strong>html</strong> æ–‡ä»¶ä¸­é€šè¿‡ <strong>scr</strong> æ–¹å¼å¼•è¿›å›¾ç‰‡ã€‚</li>
<li>åœ¨ <strong>css</strong> ä¸­ä½¿ç”¨å›¾ç‰‡ï¼Œ<strong>style-loader</strong> å·²ç»åšäº†å¤„ç†ã€‚</li>
<li>url-loaderï¼šå°†å›¾ç‰‡è½¬åŒ–ä¸º <strong>base64</strong></li>
</ul>
<pre><code>module: {
  rules: [
    {
      test: /\.(png|jpg|gif)$/,
      use: {
        loader: &quot;url-loader&quot;,
        options: {
          limit: 200 * 1024, // å›¾ç‰‡å°äº 200kï¼Œå˜æˆ base64ï¼Œå¦åˆ™ç”¨ file-loader
          // publicPath: &quot;http://&quot;, // å…¬å…±è·¯å¾„å‰ç¼€
        }
      }
    },
    {
      test: /\.html$/,
      use: [&quot;html-withimg-loader&quot;]
    }
  ]
}
</code></pre><p>`</p>
<h2 id="æ¨¡å—-module-â€“-noParse"><a href="#æ¨¡å—-module-â€“-noParse" class="headerlink" title="æ¨¡å— module â€“ noParse"></a>æ¨¡å— module â€“ noParse</h2><p>ä½œç”¨ï¼šä¸è§£ææŒ‡å®šåŒ…çš„ä¾èµ–å…³ç³»ã€‚</p>
<pre><code>module: {
  noParse: /jquery/
}
</code></pre><h2 id="æ¨¡å—-module-â€“-exclude"><a href="#æ¨¡å—-module-â€“-exclude" class="headerlink" title="æ¨¡å— module â€“ exclude"></a>æ¨¡å— module â€“ exclude</h2><p>ä½œç”¨ï¼šæ’é™¤</p>
<pre><code>module: {
  exclude: /node_module/
}
</code></pre><h2 id="æ¨¡å—-module-â€“-include"><a href="#æ¨¡å—-module-â€“-include" class="headerlink" title="æ¨¡å— module â€“ include"></a>æ¨¡å— module â€“ include</h2><p>ä½œç”¨ï¼šåŒ…å«</p>
<pre><code>module: {
  include: /src/
}
</code></pre><h2 id="åŒºåˆ†ä¸åŒç¯å¢ƒï¼Œå®ç°å¼€å‘å’Œç”Ÿäº§é…ç½®çš„åˆ†ç¦»"><a href="#åŒºåˆ†ä¸åŒç¯å¢ƒï¼Œå®ç°å¼€å‘å’Œç”Ÿäº§é…ç½®çš„åˆ†ç¦»" class="headerlink" title="åŒºåˆ†ä¸åŒç¯å¢ƒï¼Œå®ç°å¼€å‘å’Œç”Ÿäº§é…ç½®çš„åˆ†ç¦»"></a>åŒºåˆ†ä¸åŒç¯å¢ƒï¼Œå®ç°å¼€å‘å’Œç”Ÿäº§é…ç½®çš„åˆ†ç¦»</h2><p>å°† <strong>webpack</strong> çš„é…ç½®æ–‡ä»¶åˆ’åˆ†ä¸ºä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<ul>
<li>webpack.base.jsï¼šåŸºæœ¬ã€å…±æœ‰çš„é…ç½®ã€‚</li>
<li>webpack.dev.jsï¼šå¼€å‘é…ç½®ã€‚</li>
<li>webpack.prod.jsï¼šç”Ÿäº§é…ç½®ã€‚</li>
</ul>
<p>ä½¿ç”¨ <strong>webpack-merger</strong> æ’ä»¶ï¼š</p>
<ul>
<li>å®‰è£… <strong>webpack-merge</strong> æ’ä»¶ï¼›</li>
<li>å¼•è¿›ç›®æ ‡æ¨¡å—</li>
</ul>
<pre><code>import { smart } from &quot;webpack-merge&quot;;
</code></pre><ul>
<li>ä½¿ç”¨</li>
</ul>
<pre><code>const base = require(&quot;webpack.base.js);

module.exports = smart(base, {
  ...
})
</code></pre><h2 id="webpack-è‡ªå¸¦ä¼˜åŒ–"><a href="#webpack-è‡ªå¸¦ä¼˜åŒ–" class="headerlink" title="webpack è‡ªå¸¦ä¼˜åŒ–"></a>webpack è‡ªå¸¦ä¼˜åŒ–</h2><ul>
<li><strong>import</strong> è¯­æ³•ï¼ˆç”Ÿæˆç¯å¢ƒï¼‰ï¼Œ<strong>tree-shaking</strong> è‡ªåŠ¨åˆ é™¤æ²¡æœ‰ç”¨åˆ°çš„ä»£ç ï¼›</li>
<li><strong>es6</strong> æ¨¡å—ä¼šæŠŠè¯­æ³•æ”¾åˆ° <strong>default</strong> ä¸Šï¼›</li>
<li>è‡ªåŠ¨çœç•¥å¯ä»¥ç®€åŒ–çš„ä»£ç ï¼›</li>
<li><strong>scope hosting</strong>ï¼Œä½œç”¨åŸŸæå‡ã€‚</li>
</ul>
<h2 id="webpack-æ‡’åŠ è½½"><a href="#webpack-æ‡’åŠ è½½" class="headerlink" title="webpack æ‡’åŠ è½½"></a>webpack æ‡’åŠ è½½</h2><ul>
<li>é€šè¿‡ <strong>import</strong> å®ç°ï¼ˆè¯¥è¯­æ³•å†…éƒ¨ç”± <strong>jsonp</strong> å®ç°ï¼‰ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ª <strong>promise</strong>ã€‚</li>
<li>è¦åœ¨ <strong>babel-loader</strong> ä¸­æ·»åŠ  <strong>@babel/plugin-syntax-dynamic-import</strong> æ’ä»¶ã€‚</li>
<li><strong>vue</strong> å’Œ <strong>react</strong> çš„læ‡’åŠ è½½éƒ½æ˜¯è¿™æ ·å®ç°çš„ã€‚</li>
</ul>
<pre><code>/*
* æ¨¡æ‹Ÿç‚¹å‡»åŠ è½½ source.js çš„å†…å®¹
*/
// 1
{
  loader: &#39;babel-loader&#39;,
  options: {
    presets: [
      &#39;@babel/preset-env&#39;
    ],
    plugins: [
      &#39;@babel/plugin-syntax-dynamic-import&#39;
    ]
  },
}
// 2
let btn = document.createElement(&#39;button&#39;);
btn.innerHTML = &#39;btn&#39;;
btn.addEventListener(&#39;click&#39;, function () {
  // å†…éƒ¨ç”± jsonp å®ç°åŠ¨æ€åŠ è½½æ–‡ä»¶
  import(&#39;./source.js&#39;)
    .then(data =&gt; {
      console.log(data);
    })
})
document.body.appendChild(btn);

</code></pre><p>ç‚¹å‡»æŒ‰é’®åç»“æœå¦‚ä¸‹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-fa79ce43578285a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="çƒ­æ›´æ–°-çƒ­æ›¿æ¢-Hot-Module-Replacement-HMR"><a href="#çƒ­æ›´æ–°-çƒ­æ›¿æ¢-Hot-Module-Replacement-HMR" class="headerlink" title="çƒ­æ›´æ–° / çƒ­æ›¿æ¢ / Hot Module Replacement / HMR"></a>çƒ­æ›´æ–° / çƒ­æ›¿æ¢ / Hot Module Replacement / HMR</h2><p>çƒ­æ›´æ–°ï¼šé¡µé¢åªæ›´æ–°æ”¹åŠ¨çš„æ¨¡å—ã€‚</p>
<ul>
<li><strong>devServer</strong> å¼€å§‹ <strong>hot</strong> çƒ­æ›´æ–°æ¨¡å—ã€‚</li>
<li>ä½¿ç”¨ <strong>webpack</strong> å†…ç½®çƒ­æ›´æ–°æ’ä»¶ã€‚<ul>
<li>NamedModulesPlugin</li>
<li>HotModuleReplacementPlugin</li>
</ul>
</li>
</ul>
<pre><code>// devServer é…ç½®
devServer: {
  port: 8089,
  contentBase: path.resolve(__dirname + &#39;/dist/&#39;),
  compress: true,
  progress: true,
  // open: true
  hot: true, // å¼€å¯çƒ­æ›´æ–°ï¼Œåªæ›´æ–°æ›´æ”¹çš„æ¨¡å—
},
// æ·»åŠ æ’ä»¶
plugins: [
  new webpack.NamedModulesPlugin(), // çƒ­æ›´æ–°æ‰“å°æ›´æ–°çš„æ¨¡å—è·¯å¾„
  new webpack.HotModuleReplacementPlugin(), // çƒ­æ›´æ–°
]
</code></pre><ul>
<li>ä½¿ç”¨çƒ­æ›´æ–°</li>
</ul>
<pre><code>import source from &#39;./source.js&#39;;

console.log(source);

// æ·»åŠ çƒ­æ›´æ–°æ“ä½œï¼Œä¸ç„¶ä¸ä¼šå®ç°çƒ­æ›´æ–°
if (module.hot) {
module.hot.accept(&#39;./source.js&#39;, () =&gt; {
  require(&#39;./source.js&#39;);
})
</code></pre><h2 id="å¤šçº¿ç¨‹æ‰“åŒ…"><a href="#å¤šçº¿ç¨‹æ‰“åŒ…" class="headerlink" title="å¤šçº¿ç¨‹æ‰“åŒ…"></a>å¤šçº¿ç¨‹æ‰“åŒ…</h2><p>ä½¿ç”¨ <strong>happypack</strong> å¯ä»¥å®ç°å¤šçº¿ç¨‹æ‰“åŒ…ã€‚</p>
<ul>
<li>å®‰è£…å¹¶å¼•è¿› <strong>happypack</strong>;</li>
<li>æ”¹å†™ <strong>module</strong>;</li>
<li><strong>plugin</strong> é…ç½®ã€‚</li>
</ul>
<pre><code>// æ”¹å†™ module
module: {
  rules: [
    {
      test: /\.js$/,
      // use: {
      //   loader: &#39;babel-loader&#39;,
      //   options: {
      //     presets: [
      //       &#39;@babel/preset-env&#39;
      //     ]
      //   }
      // }
      use: {
        loader: &#39;Happypack/loader?id=js&#39;,
      }
    },
  ]
}
// plugin é…ç½®
plugins: [
  new Happypack({
    id: &#39;js&#39;,
    use: [
      {
        loader: &#39;babel-loader&#39;,
        options: {
          presets: [
            &#39;@babel/preset-env&#39;
          ]
        }
      }
    ]
  }),
]
</code></pre><h2 id="å¤šé¡µé¢æ‰“åŒ…"><a href="#å¤šé¡µé¢æ‰“åŒ…" class="headerlink" title="å¤šé¡µé¢æ‰“åŒ…"></a>å¤šé¡µé¢æ‰“åŒ…</h2><pre><code>const path = require(&quot;path&quot;);
const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);

module.exports = {
  mode: &quot;production&quot;,
  entry: {
    home: &quot;./src/home.js&quot;,
    about: &quot;./src/about.js&quot;,
    other: &quot;./src/other.js&quot;
  },
  output: {
    path: path.resolve(__dirname + &quot;/build/&quot;),
    filename: &quot;[name].js&quot;,
  },
  plugins: [
    new HtmlWebpackPlugin({
      template: path.resolve(__dirname + &quot;/src/template.html&quot;),
      filename: &quot;home.html&quot;,
      chunks: [&quot;home&quot;]
    }),
    new HtmlWebpackPlugin({
      template: path.resolve(__dirname + &quot;/src/template.html&quot;),
      filename: &quot;other.html&quot;,
      chunks: [&quot;other&quot;]
    }),
    new HtmlWebpackPlugin({
      template: path.resolve(__dirname + &quot;/src/template.html&quot;),
      filename: &quot;about.html&quot;,
      chunks: [&quot;about&quot;]
    }),
  ]
}
</code></pre><h2 id="å¤šé¡µé¢æ‰“åŒ…æŠ½ç¦»å…¬å…±ä»£ç å—"><a href="#å¤šé¡µé¢æ‰“åŒ…æŠ½ç¦»å…¬å…±ä»£ç å—" class="headerlink" title="å¤šé¡µé¢æ‰“åŒ…æŠ½ç¦»å…¬å…±ä»£ç å—"></a>å¤šé¡µé¢æ‰“åŒ…æŠ½ç¦»å…¬å…±ä»£ç å—</h2><p>æ‰“åŒ… <strong>å¤šé¡µé¢</strong> éœ€è¦å°†å…¬å…±çš„ä»£ç å—æŠ½ç¦»å‡ºæ¥è¿›è¡Œä¼˜åŒ–ï¼š</p>
<pre><code>optimation: {
  splitChunks: {  // åˆ†å‰²ä»£ç å—
    cacheGroups: {  // ç¼“å­˜ç»„
      common: {  // å…¬å…±çš„æ¨¡å—
        chunks: &#39;initial&#39;,  // ä»å“ªé‡Œå¼€å§‹ï¼Œinitial å³ï¼šå…¥å£
        miniSize: 0,  // å¤§å°å¤§äºå¤šå°‘å­—èŠ‚çš„æ—¶å€™æŠ½ç¦»
        miniChunks: 2  // å¼•ç”¨å¤šå°‘æ¬¡çš„æ—¶å€™æŠ½ç¦»
      },
      vender: {  // ç¬¬ä¸‰æ–¹æ¨¡å—
        priority: 1,  // è®¾ç½®æƒé‡ï¼Œæ²¡æœ‰è®¾ç½®æƒé‡çš„è¯ï¼Œä»£ç é»˜è®¤ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œï¼Œä¸Šé¢çš„å…¬å…±ä»£ç ä¼šå…ˆå°†ç¬¬ä¸‰æ–¹æ¨¡å—æŠ½ç¦»å‡ºæ¥ï¼Œè¾¾ä¸åˆ°æŠ½ç¦»ç¬¬ä¸‰æ–¹æ¨¡å—çš„ä½œç”¨
        test: /node_modules/,  // æŠ½ç¦»å‡ºæ¥
        chunks: &#39;initial&#39;,  // ä»å“ªé‡Œå¼€å§‹ï¼Œinitial å³ï¼šå…¥å£
        miniSize: 0,  // å¤§å°å¤§äºå¤šå°‘å­—èŠ‚çš„æ—¶å€™æŠ½ç¦»
        miniChunks: 2  // å¼•ç”¨å¤šå°‘æ¬¡çš„æ—¶å€™æŠ½ç¦»
      }
    }
  }
}
</code></pre><h2 id="Tapable"><a href="#Tapable" class="headerlink" title="Tapable"></a>Tapable</h2><p><strong>webpack</strong> æœ¬è´¨æ˜¯äº‹ä»¶æµçš„æœºåˆ¶ï¼Œå·¥ä½œæµç¨‹å°±æ˜¯å°†å„ä¸ªæ’ä»¶ä¸²è”èµ·æ¥ï¼Œå®ç°æ ¸å¿ƒå°±æ˜¯ <strong>Tapable</strong>ï¼Œé€šè¿‡ <strong>Tapable</strong> å®ç°å„ç§é’©å­ï¼ˆå¦‚åŒæ­¥é’©å­å¼‚æ­¥é’©å­ï¼‰ã€‚è€Œ <strong>Tapable</strong> æ ¸å¿ƒæ˜¯ä¾èµ–äº <strong>å‘å¸ƒè®¢é˜…è€…æ¨¡å¼</strong>ã€‚</p>
<ul>
<li>åŒæ­¥é’©å­åŸºæœ¬æ€è·¯ï¼ˆå‘å¸ƒè®¢é˜…è€…æ¨¡å¼ï¼‰ï¼šå°†æ‰€æœ‰æ³¨å†Œçš„å‡½æ•°å­˜æ”¾åˆ°ä¸€ä¸ªä»»åŠ¡æ•°ç»„ï¼Œå‘å¸ƒçš„æ—¶å€™æ‰€æœ‰è®¢é˜…è€…éƒ½ä¼šæ‰§è¡Œã€‚ä½¿ç”¨ <strong>tap</strong> æ³¨å†Œã€‚</li>
</ul>
<p>ä½¿ç”¨ï¼š</p>
<pre><code>const { SyncHook } = require(&#39;tapable&#39;);

class Hook {
  constructor() {
    this.hooks = {
      arch: new SyncHook([&#39;name&#39;])
    }
  }
  tap() { // æ³¨å†Œç›‘å¬äº‹ä»¶
    this.hooks.arch.tap(&#39;vue&#39;, (name) =&gt; {
      console.log(&#39;vue&#39;, name);
    })
    this.hooks.arch.tap(&#39;react&#39;, (name) =&gt; {
      console.log(&#39;react&#39;, name);
    })
  }
  start() { // å¼€å§‹
    this.hooks.arch.call(&#39;Ertsul&#39;)
  }
}
let h = new Hook();
h.tap();
h.start();
</code></pre><ul>
<li>å¼‚æ­¥é’©å­åŸºæœ¬æ€è·¯ï¼ˆå‘å¸ƒè®¢é˜…è€…æ¨¡å¼ï¼‰ï¼šå°†æ‰€æœ‰æ³¨å†Œçš„å‡½æ•°å­˜æ”¾åˆ°ä¸€ä¸ªä»»åŠ¡æ•°ç»„ï¼Œå‘å¸ƒçš„æ—¶å€™æ‰€æœ‰è®¢é˜…è€…éƒ½ä¼šæ‰§è¡Œã€‚ä½¿ç”¨ <strong>tapAsync</strong> æ³¨å†Œã€‚</li>
</ul>
<p>setTimeout()æ–¹å¼ä½¿ç”¨ï¼š</p>
<pre><code>const { AsyncParallelHook } = require(&#39;tapable&#39;);

class AsyncHook {
  constructor() {
    this.hooks = {
      arch: new AsyncParallelHook([&#39;name&#39;])
    }
  }
  tap() {
    this.hooks.arch.tapAsync(&#39;vue&#39;, (name, cb) =&gt; {
      setTimeout(() =&gt; {
        console.log(&#39;vue&#39;, name);
        cb &amp;&amp; cb();
      }, 1000)
    })
    this.hooks.arch.tapAsync(&#39;react&#39;, (name, cb) =&gt; {
      setTimeout(() =&gt; {
        console.log(&#39;react&#39;, name);
        cb &amp;&amp; cb();
      }, 1000)
    })
  }
  start() {
    this.hooks.arch.callAsync(&#39;Ertsul&#39;, () =&gt; {
      console.log(&#39;All finished!&#39;);
    })
  }
}

const a = new AsyncHook();
a.tap();
a.start();
</code></pre><p>Promise()æ–¹å¼ä½¿ç”¨ï¼š</p>
<pre><code>const { AsyncParallelHook } = require(&#39;tapable&#39;);

class AsyncHook {
  constructor() {
    this.hooks = {
      arch: new AsyncParallelHook([&#39;name&#39;])
    }
  }
  tap() {
    this.hooks.arch.tapPromise(&#39;vue&#39;, (name) =&gt; {
      return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
          console.log(&#39;vue&#39;, name);
          resolve();
        }, 1000)
      })
    })
    this.hooks.arch.tapPromise(&#39;react&#39;, (name) =&gt; {
      return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
          console.log(&#39;react&#39;, name);
          resolve();
        }, 1000)
      })
    })
  }
  start() {
    this.hooks.arch.promise(&#39;Ertsul&#39;).then(() =&gt; {
      console.log(&#39;hook all finished!&#39;);
    })
  }
}

const a = new AsyncHook();
a.tap();
a.start();
</code></pre><h4 id="Synchook-åŒæ­¥é’©å­"><a href="#Synchook-åŒæ­¥é’©å­" class="headerlink" title="Synchook åŒæ­¥é’©å­"></a>Synchook åŒæ­¥é’©å­</h4><p>å®ç°ï¼š</p>
<pre><code>class Synchook {
  constructor(args) { // args =&gt; [&#39;Synchook&#39;]
    this.tasks = []; // æ³¨å†Œäº‹ä»¶æ•°ç»„
  }
  tap(name, task) { //  æ³¨å†Œäº‹ä»¶
    this.tasks.push(task);
  }
  call(...args) { // å‘å¸ƒäº‹ä»¶
    this.tasks.forEach(task =&gt; {
      task(...args);
    })
  }
}

let hook = new Synchook([&#39;Synchook&#39;]);
hook.tap(&#39;vue&#39;, (name) =&gt; {
  console.log(&#39;vue&#39;, name);
})
hook.tap(&#39;react&#39;, (name) =&gt; {
  console.log(&#39;react&#39;, name);
})
hook.call(&#39;Ertsul&#39;);
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-1d12026d2f938c58.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h4 id="SyncBailHook-åŒæ­¥ç†”æ–­é’©å­"><a href="#SyncBailHook-åŒæ­¥ç†”æ–­é’©å­" class="headerlink" title="SyncBailHook åŒæ­¥ç†”æ–­é’©å­"></a>SyncBailHook åŒæ­¥ç†”æ–­é’©å­</h4><p>Synchook åŒæ­¥é’©å­åœ¨æ‰§è¡Œæ¯ä¸ªå‡½æ•°çš„æ—¶å€™ä¼šæœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œundefinedï¼šæ‰§è¡ŒæˆåŠŸï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•°ï¼Œ!= undefinedï¼šç†”æ–­æ‰§è¡Œï¼Œä¸æ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•°ã€‚</p>
<p>å®ç°ï¼š</p>
<pre><code>// Syncbailhook åŒæ­¥ç†”æ–­æ‰§è¡Œï¼Œä¼šåˆ¤æ–­è¿”å›æ˜¯å¦ç­‰äº undefined æ¥æ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•°
class Syncbailhook {
  constructor(args) {
    this.tasks = [];
  }
  tap(name, task) {
    this.tasks.push(task);
  }
  call(...args) {
    let ret = &#39;&#39;; // å½“å‰å‡½æ•°çš„è¿”å›å€¼
    let index = 0; // å½“å‰ä»»åŠ¡æ•°ç»„çš„ç´¢å¼•
    do {
      ret = this.tasks[index++](...args);
    } while (ret === undefined &amp;&amp; index &lt; this.tasks.length)
  }
}

let hook = new Syncbailhook([&#39;Syncbailhook&#39;]);
hook.tap(&#39;vue&#39;, (name) =&gt; {
  console.log(&#39;vue&#39;, name);
})
hook.tap(&#39;react&#39;, (name) =&gt; {
  console.log(&#39;react&#39;, name);
})
hook.call(&#39;Ertsul&#39;);
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-3a46a477c8b08d40.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h4 id="SyncWaterfallHook-åŒæ­¥ç€‘å¸ƒé’©å­"><a href="#SyncWaterfallHook-åŒæ­¥ç€‘å¸ƒé’©å­" class="headerlink" title="SyncWaterfallHook åŒæ­¥ç€‘å¸ƒé’©å­"></a>SyncWaterfallHook åŒæ­¥ç€‘å¸ƒé’©å­</h4><p>Syncwaterfallhook åŒæ­¥ç€‘å¸ƒæ‰§è¡Œï¼Œå„ä¸ªå‡½æ•°ä¹‹é—´å­˜åœ¨å…³ç³»ï¼Œä¸Šä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œè¿”å›ç»“æœåœ¨å½“å‰å‡½æ•°çš„è¾“å…¥ã€‚</p>
<p>å®ç°ï¼š</p>
<pre><code>/**
 * Syncwaterfallhook åŒæ­¥ç€‘å¸ƒæ‰§è¡Œï¼Œå„ä¸ªå‡½æ•°ä¹‹é—´å­˜åœ¨å…³ç³»
 * ä¸Šä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œè¿”å›ç»“æœåœ¨å½“å‰å‡½æ•°çš„è¾“å…¥
 */
class Syncwaterfallhook {
  constructor(args) {
    this.tasks = [];
  }
  tap(name, task) {
    this.tasks.push(task);
  }
  call(...args) {
    let [first, ...others] = this.tasks;
    let ret = first(...args);
    others.reduce((prev, current) =&gt; {
      return current(prev);
    }, ret)
  }
}

let hook = new Syncwaterfallhook([&#39;Syncwaterfallhook&#39;]);
hook.tap(&#39;vue&#39;, (name) =&gt; {
  console.log(&#39;vue&#39;, name);
  return &#39;vue learnt&#39;;
})
hook.tap(&#39;react&#39;, (data) =&gt; {
  console.log(&#39;react&#39;, data);
})
hook.call(&#39;Ertsul&#39;);
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-5ccbc856cac523cf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h4 id="SyncLoopHook-åŒæ­¥å¾ªç¯é’©å­"><a href="#SyncLoopHook-åŒæ­¥å¾ªç¯é’©å­" class="headerlink" title="SyncLoopHook åŒæ­¥å¾ªç¯é’©å­"></a>SyncLoopHook åŒæ­¥å¾ªç¯é’©å­</h4><p>åŒæ­¥å¾ªç¯é’©å­å›è®©æŸä¸ªå‡½æ•°æ‰§è¡Œä¸€å®šçš„æ¬¡æ•°ã€‚</p>
<p>å®ç°ï¼š</p>
<pre><code>// Tapable Syncloophook åŒæ­¥å¾ªç¯é’©å­
class Syncloophook {
  constructor(args) { // args =&gt; [&#39;Synchook&#39;]
    this.tasks = []; // æ³¨å†Œäº‹ä»¶æ•°ç»„
  }
  tap(name, task) { //  æ³¨å†Œäº‹ä»¶
    this.tasks.push(task);
  }
  call(...args) { // å‘å¸ƒäº‹ä»¶
    this.tasks.forEach(task =&gt; {
      let ret = &#39;&#39;;
      do {
        ret = task(...args);
      } while (ret != undefined);
    })
  }
}

let hook = new Syncloophook([&#39;Syncloophook&#39;]);
const total = 3;
let index = 0;
hook.tap(&#39;vue&#39;, (name) =&gt; {
  console.log(&#39;vue&#39;, name);
  return ++index === total ? undefined : &#39;continue&#39;;
})
hook.tap(&#39;react&#39;, (name) =&gt; {
  console.log(&#39;react&#39;, name);
})
hook.call(&#39;Ertsul&#39;);
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-fd5d933715541d45.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h4 id="AsyncParallelHook-å¼‚æ­¥å¹¶å‘é’©å­-å›è°ƒå‡½æ•°æ–¹å¼"><a href="#AsyncParallelHook-å¼‚æ­¥å¹¶å‘é’©å­-å›è°ƒå‡½æ•°æ–¹å¼" class="headerlink" title="AsyncParallelHook å¼‚æ­¥å¹¶å‘é’©å­ å›è°ƒå‡½æ•°æ–¹å¼"></a>AsyncParallelHook å¼‚æ­¥å¹¶å‘é’©å­ å›è°ƒå‡½æ•°æ–¹å¼</h4><p>å®ç°ï¼š</p>
<pre><code>// Tapable Asynchook å¼‚æ­¥é’©å­
class asyncparallelhook {
  constructor(args) { // args =&gt; [&#39;Synchook&#39;]
    this.tasks = []; // æ³¨å†Œäº‹ä»¶æ•°ç»„
  }
  tapAsync(name, task) { //  æ³¨å†Œäº‹ä»¶
    this.tasks.push(task);
  }
  callAsync(...args) { // å‘å¸ƒäº‹ä»¶
    let finalCallback = args.pop();
    let index = 0;
    const done = () =&gt; {
      index++;
      if (index === this.tasks.length) {
        finalCallback();
      }
    }
    this.tasks.forEach(task =&gt; {
      task(...args, done);
    })
  }
}

let hook = new asyncparallelhook([&#39;asyncparallelhook&#39;]);
hook.tapAsync(&#39;vue&#39;, (name, cb) =&gt; {
  setTimeout(() =&gt; {
    console.log(&#39;vue&#39;, name);
    cb &amp;&amp; cb();
  }, 1000)
})
hook.tapAsync(&#39;react&#39;, (name, cb) =&gt; {
  setTimeout(() =&gt; {
    console.log(&#39;react&#39;, name);
    cb &amp;&amp; cb();
  }, 1000)
})
hook.callAsync(&#39;Ertsul&#39;, () =&gt; {
  console.log(&#39;All hook finished!&#39;);
});
</code></pre><h4 id="AsyncParallelHook-å¼‚æ­¥å¹¶å‘é’©å­-Promiseæ–¹å¼"><a href="#AsyncParallelHook-å¼‚æ­¥å¹¶å‘é’©å­-Promiseæ–¹å¼" class="headerlink" title="AsyncParallelHook å¼‚æ­¥å¹¶å‘é’©å­ Promiseæ–¹å¼"></a>AsyncParallelHook å¼‚æ­¥å¹¶å‘é’©å­ Promiseæ–¹å¼</h4><p>å®ç°ï¼š</p>
<pre><code>// Tapable Asynchook å¼‚æ­¥é’©å­
class asyncparallelhook {
  constructor(args) { // args =&gt; [&#39;Synchook&#39;]
    this.tasks = []; // æ³¨å†Œäº‹ä»¶æ•°ç»„
  }
  tapPromise(name, task) { //  æ³¨å†Œäº‹ä»¶
    this.tasks.push(task);
  }
  promise(...args) { // å‘å¸ƒäº‹ä»¶
    let tasks = this.tasks.map(task =&gt; task(...args));
    return Promise.all(tasks);
  }
}

let hook = new asyncparallelhook([&#39;asyncparallelhook&#39;]);
hook.tapPromise(&#39;vue&#39;, (name) =&gt; {
  return new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; {
      console.log(&#39;vue&#39;, name);
      resolve();
    }, 1000)
  })
})
hook.tapPromise(&#39;react&#39;, (name) =&gt; {
  return new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; {
      console.log(&#39;react&#39;, name);
      resolve();
    }, 1000)
  })
})
hook.promise(&#39;Ertsul&#39;).then(() =&gt; {
  console.log(&#39;All hooks finished!&#39;);
})
</code></pre><h4 id="AsyncSeriesHook-å¼‚æ­¥ä¸²è¡Œé’©å­"><a href="#AsyncSeriesHook-å¼‚æ­¥ä¸²è¡Œé’©å­" class="headerlink" title="AsyncSeriesHook å¼‚æ­¥ä¸²è¡Œé’©å­"></a>AsyncSeriesHook å¼‚æ­¥ä¸²è¡Œé’©å­</h4><h4 id="AsyncWaterfallHook-å¼‚æ­¥ç€‘å¸ƒæµé’©å­"><a href="#AsyncWaterfallHook-å¼‚æ­¥ç€‘å¸ƒæµé’©å­" class="headerlink" title="AsyncWaterfallHook å¼‚æ­¥ç€‘å¸ƒæµé’©å­"></a>AsyncWaterfallHook å¼‚æ­¥ç€‘å¸ƒæµé’©å­</h4>]]></content>
      <categories>
        <category>frontEnd</category>
        <category>webpack</category>
      </categories>
      <tags>
        <tag>frontEnd</tag>
        <tag>webpack</tag>
      </tags>
  </entry>
</search>
