<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="Ertsul&apos;s Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Ertsul">
<meta property="og:url" content="https://ertsul.github.io/index.html">
<meta property="og:site_name" content="Ertsul">
<meta property="og:description" content="Ertsul&apos;s Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ertsul">
<meta name="twitter:description" content="Ertsul&apos;s Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://ertsul.github.io/">





  <title>Ertsul</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband">
    </div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Ertsul</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            åˆ†ç±»
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ertsul.github.io/2019/11/05/å°ç¨‹åºå·¥ç¨‹åŒ–/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ertsul">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/17139306?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ertsul">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/05/å°ç¨‹åºå·¥ç¨‹åŒ–/" itemprop="url">å°ç¨‹åºå·¥ç¨‹åŒ–</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-11-05T22:36:57+08:00">
                2019-11-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/minapp/" itemprop="url" rel="index">
                    <span itemprop="name">minapp</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="gulp"><a href="#gulp" class="headerlink" title="gulp"></a><em>gulp</em></h2><p><a href="https://www.gulpjs.com.cn/" target="_blank" rel="noopener">ğŸ‘‰å®˜æ–¹æ–‡æ¡£ä¼ é€é—¨</a></p>
<h2 id="gulp-ç¼–è¯‘é¡¹ç›®"><a href="#gulp-ç¼–è¯‘é¡¹ç›®" class="headerlink" title="gulp ç¼–è¯‘é¡¹ç›®"></a><em>gulp</em> ç¼–è¯‘é¡¹ç›®</h2><p>æ—¥å¸¸è¿›è¡Œå°ç¨‹åºå¼€å‘ï¼Œé‡åˆ°çš„é—®é¢˜æœ‰ï¼š</p>
<ul>
<li>å¦‚æœåœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·è¿›è¡Œå¼€å‘çš„è¯ï¼Œæ•ˆç‡ä½ï¼›</li>
<li>ä¸æ”¯æŒ <em>less</em> cssé¢„ç¼–è¯‘å™¨ï¼›</li>
<li><em>autoprefixer</em>ï¼›</li>
<li>â€¦</li>
</ul>
<p>è€ƒè™‘åˆ°å°ç¨‹åºæ˜¯å¤šé¡µé¢åº”ç”¨ï¼Œæˆ‘ä»¬åªè¦åœ¨ <em>src</em> ç›®å½•æ·»åŠ å°ç¨‹åºåˆå§‹åŒ–æ—¶æ‰€éœ€è¦çš„ç›¸å…³é…ç½®æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ <em>gulp</em> å°† <em>src</em> ä¸‹çš„ä»£ç æ¬ç§»åˆ° <em>dist</em> æ‰“åŒ…ç›®å½•å³å¯ã€‚</p>
<h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><pre><code>â””â”€â”€â”€gulpTask ç›®å½•ï¼šä¸»è¦å­˜æ”¾ gulp ä»£ç é€»è¾‘
|     â””â”€â”€â”€baseConfig.js // gulp è·¯å¾„å’Œ blob é…ç½®ä¿¡æ¯
|     â””â”€â”€â”€clean.js // æ¸…ç† dist nodejs è„šæœ¬æ–‡ä»¶
|     â””â”€â”€â”€taskControler.js // gulp ä»»åŠ¡å®šä¹‰
|â”€â”€â”€src
|     â””â”€â”€â”€common // å…¬å…±ä»£ç 
|         â””â”€â”€â”€less
|             â””â”€â”€â”€...
|         â””â”€â”€â”€js
|             â””â”€â”€â”€...
|     â””â”€â”€â”€components // ç»„ä»¶
|             â””â”€â”€â”€...
|     â””â”€â”€â”€pages // é¡µé¢
|             â””â”€â”€â”€...
|    â””â”€â”€â”€app.js
|    â””â”€â”€â”€app.json
|    â””â”€â”€â”€project.config.json
|    â””â”€â”€â”€sitemap.json
â””â”€â”€â”€.eslintrc // eslint é…ç½®
â””â”€â”€â”€.gitignore // git é…ç½®
â””â”€â”€â”€gulpfile.js // gulp ä¸»å…¥å£
â””â”€â”€â”€package.json
â””â”€â”€â”€README.md
</code></pre><h3 id="gulp-é…ç½®æ–‡ä»¶-baseConfig-js"><a href="#gulp-é…ç½®æ–‡ä»¶-baseConfig-js" class="headerlink" title="gulp é…ç½®æ–‡ä»¶ baseConfig.js"></a><em>gulp</em> é…ç½®æ–‡ä»¶ <em>baseConfig.js</em></h3><p>å°† <em>gulp</em> ç›¸å…³è·¯å¾„å’Œ <em>blob</em> é…ç½®ä¿¡æ¯ç»Ÿä¸€åœ¨ <em>baseConfig.js</em> ä¸­è¿›è¡Œé…ç½®ã€‚</p>
<pre><code class="javascript">const path = require(&quot;path&quot;);

const srcPath = path.resolve(__dirname, &quot;../src&quot;);
const distPath = path.resolve(__dirname, &quot;../dist&quot;);
const isDev = process.argv.includes(&quot;--development&quot;);

module.exports = {
  isDev, // å½“å‰ç¯å¢ƒ
  srcPath, // src æºè·¯å¾„
  distPath, // dist ç¼–è¯‘ç›®æ ‡è·¯å¾„
  basePath: [
    srcPath
  ],
  otherPath: [
    srcPath,
    `!${srcPath}/**/**/*.less`,
    `!${srcPath}/**/**/*.wxml`,
    `!${srcPath}/**/**/*.json`,
    `!${srcPath}/**/**/*.js`,
    `!${srcPath}/static/icons/*.jpg`,
    `!${srcPath}/static/icons/*.png`,
    `!${srcPath}/static/images/*.jpg`,
    `!${srcPath}/static/images/*.png`,
  ],
  lessPath: [ // less blob
    `${srcPath}/**/**/*.less`,
  ],
  jsPath: [ // js blob
    `${srcPath}/**/**/*.js`,
  ],
  wxmlPath: [ // wxml blob
    `${srcPath}/**/**/*.wxml`,
  ],
  jsonPath: [ // json blob
    `${srcPath}/**/**/*.json`,
  ],
  lessImportPath: [
    `${srcPath}/common/less/*.less`
  ],
  iconPath: [
    `${srcPath}/static/icons/*.jpg`,
    `${srcPath}/static/icons/*.png`
  ],
  imagePath: [
    `${srcPath}/static/images/*.jpg`,
    `${srcPath}/static/images/*.gif`,
    `${srcPath}/static/images/*.png`
  ]
}
</code></pre>
<h3 id="gulp-å¼€å‘æµç¨‹"><a href="#gulp-å¼€å‘æµç¨‹" class="headerlink" title="gulp å¼€å‘æµç¨‹"></a><em>gulp</em> å¼€å‘æµç¨‹</h3><p>ä¸»è¦æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="http://i.loli.net/2019/11/05/yxatp6HzRUAm9G4.png" alt="image-20191105174239088.png"></p>
<h4 id="gulp-çš„å„ä¸ªä»»åŠ¡å¦‚ä¸‹ï¼šï¼ˆtaskControler-js-æ–‡ä»¶ï¼‰"><a href="#gulp-çš„å„ä¸ªä»»åŠ¡å¦‚ä¸‹ï¼šï¼ˆtaskControler-js-æ–‡ä»¶ï¼‰" class="headerlink" title="gulp çš„å„ä¸ªä»»åŠ¡å¦‚ä¸‹ï¼šï¼ˆtaskControler.js æ–‡ä»¶ï¼‰"></a><em>gulp</em> çš„å„ä¸ªä»»åŠ¡å¦‚ä¸‹ï¼šï¼ˆ<em>taskControler.js</em> æ–‡ä»¶ï¼‰</h4><ul>
<li><p>æ¯æ¬¡è¿›è¡Œ <em>gulp</em> ä»»åŠ¡å‰éƒ½è¦æ¸…ç©º <em>dist</em> æ‰“åŒ…åçš„ç›®å½•ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;clean:dist&quot;, done =&gt; {
    // console.log(&quot;:::: clean:dist&quot;);

    src(baseConfig.distPath, {
        read: true,
        allowEmpty: true,
    })
        .pipe(clean())

    done();
})
</code></pre>
<p>ä½†æ˜¯ï¼Œä¸Šé¢è¿™æ ·å¤„ç†ä¼šæœ‰é—®é¢˜ï¼šç¬¬äºŒæ¬¡è¿è¡Œ <em>gulp</em> å‘½åçš„æ—¶å€™ä¼šæœ‰æ–‡ä»¶æƒé™ç­‰é—®é¢˜ã€‚æ•…ï¼š<em>dist</em> æ–‡ä»¶çš„å¤„ç†é€šè¿‡ <em>nodejs</em> è¿›è¡Œå¤„ç†ã€‚</p>
<pre><code class="javascript">// gulp-clean æ¸…ç©º dist å‘½ä»¤ä¼šæœ‰æƒé™ç­‰ä¸€ç³»åˆ—é—®é¢˜ï¼Œæ•…ï¼šç›´æ¥ç”¨ node è¿›è¡Œåˆ é™¤ dist
const path = require(&quot;path&quot;);
const chalk = require(&quot;chalk&quot;);
const rimraf = require(&quot;rimraf&quot;);

const distPath = path.resolve(__dirname, &#39;../dist&#39;);
rimraf(distPath, err =&gt; {
  if (err) {
    console.log(chalk.red(err));
  }
})
</code></pre>
<p>ç„¶ååœ¨ <em>package.json</em> ä¸­é…ç½®è„šæœ¬å‘½ä»¤ï¼š</p>
<pre><code class="json">&quot;scripts&quot;: {
    &quot;build:dev&quot;: &quot;node gulpTask/clean.js &amp;&amp; gulp dev --development&quot;,
    &quot;build:prod&quot;: &quot;node gulpTask/clean.js &amp;&amp; gulp prod --production&quot;
},
</code></pre>
<p>è¿™æ ·æ¯æ¬¡æ‰§è¡Œ <em>gulp</em> å‘½ä»¤å‰éƒ½ä¼šåˆ é™¤ <em>dist</em> ç›®å½•ã€‚</p>
</li>
<li><p>å¤„ç† <em>less</em> æ–‡ä»¶ã€‚éœ€è¦è§£å†³çš„é—®é¢˜æœ‰ï¼š</p>
<ul>
<li>å¼€å‘ç¯å¢ƒä¸å‹ç¼©ä»£ç ï¼Œç”Ÿäº§ç¯å¢ƒå‹ç¼©ä»£ç ï¼›</li>
<li>è‡ªåŠ¨æ·»åŠ å±æ€§å‰ç¼€ï¼Œ<em>autoperfixer</em>ï¼›</li>
<li>å°† <em>less</em> æ–‡ä»¶çš„åç¼€æ›´æ”¹ä¸º <em>wxss</em>ï¼›</li>
<li>å°† <em>less</em> æ–‡ä»¶å†…éƒ¨çš„ <em>@import</em> å¼•ç”¨æ–‡ä»¶çš„åç¼€æ›´æ”¹ä¸º <em>wxss</em>ã€‚</li>
</ul>
<p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;compile:less&quot;, done =&gt; {
    // console.log(&quot;:::: compile:less&quot;);

    src(baseConfig.lessPath, {
        base: &quot;src&quot;
    })
        .pipe(changed(baseConfig.distPath))
        .pipe(gulpif(!this.isDev, cleanCss()))
        .pipe(autoprefixer())
    // .pipe(less({
    //   paths: baseConfig.lessImportPath,
    //   plugins: [autoprefix]
    // }))
        .pipe(rename(function (path) { // æ›´æ”¹ .less æ–‡ä»¶åç¼€ä¸º .wxss
        path.extname = &quot;.wxss&quot;;
    }))
        .pipe(replace(/\.less/g, &quot;.wxss&quot;)) // ä¿®æ”¹ less æ–‡ä»¶å†…éƒ¨çš„å¼•ç”¨ .less æ–‡ä»¶åç¼€ä¸º .wxss
        .pipe(dest(baseConfig.distPath));

    done();
})
</code></pre>
<p>è¿™é‡Œé‡åˆ°ä¸€ä¸ªå‘ï¼Œç”¨ l<em>ess-plugin-autoprefix @import</em> ä¼šæœ‰é—®é¢˜ï¼Œ<em>@import</em> è¯­å¥ä¼šè¢«åˆ é™¤ã€‚åé¢æ”¹ç”¨ <em>gulp-autoprefixer</em>ã€‚</p>
</li>
<li><p>å¤„ç† <em>js</em> æ–‡ä»¶ã€‚éœ€è¦è§£å†³çš„é—®é¢˜æœ‰ï¼š</p>
<ul>
<li><em>eslint</em> ä»£ç æ ¼å¼æ£€æŸ¥ï¼›</li>
<li>å¼€å‘ç¯å¢ƒä¸å‹ç¼©ä»£ç ï¼Œç”Ÿäº§ç¯å¢ƒå‹ç¼©ä»£ç ï¼›</li>
</ul>
<p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;compile:js&quot;, done =&gt; {
  // console.log(&quot;:::: compile:js&quot;);

  src(baseConfig.jsPath, {
      base: &quot;src&quot;
    })
    .pipe(changed(baseConfig.distPath))
    // .pipe(babel({ // å…ˆé€šè¿‡ babel è½¬åŒ–è¯­æ³•ç„¶åæ‰èƒ½è¿›è¡Œå‹ç¼© --&gt; å¾®ä¿¡å¼€å‘è€…å·¥å…·æœ‰ es6 è½¬ es5 åŠŸèƒ½
    //   presets: [&quot;@babel/env&quot;]
    // }))
    .pipe(eslint())
    // .pipe(eslint.format())
    .pipe(gulpif(!this.isDev, uglify()))
    .pipe(dest(baseConfig.distPath));

  done();
})
</code></pre>
<p>è¿™é‡ŒåŸæœ¬åŠ äº† <em>babel</em> è¿›è¡Œ <em>es6</em> åˆ° <em>es5</em> çš„è½¬åŒ–ï¼Œä½†æ˜¯å¾®ä¿¡å¼€å‘è€…å·¥å…·æœ¬èº«å°±æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œæ•…å»é™¤ã€‚å¦ä¸€ä¸ªå‘æ˜¯ï¼Œç”¨ <em>gulp-uglify</em> ä¸èƒ½è¿›è¡Œ <em>es6</em> ä»£ç çš„å‹ç¼©ï¼Œè¦ç”¨ <em>gulp-uglify-es</em> ã€‚</p>
</li>
<li><p>å¤„ç† <em>wxml</em> æ–‡ä»¶ã€‚éœ€è¦è§£å†³çš„é—®é¢˜æœ‰ï¼š</p>
<ul>
<li>å¼€å‘ç¯å¢ƒä¸å‹ç¼©ä»£ç ï¼Œç”Ÿäº§ç¯å¢ƒå‹ç¼©ä»£ç ï¼›</li>
</ul>
<p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;compile:wxml&quot;, done =&gt; {
  // console.log(&quot;:::: compile:wxml&quot;);

  src(baseConfig.wxmlPath, {
      base: &quot;src&quot;
    })
    .pipe(changed(baseConfig.distPath))
    .pipe(gulpif(!this.isDev, htmlmin({
      collapseWhitespace: true
    })))
    .pipe(dest(baseConfig.distPath));

  done();
})
</code></pre>
</li>
<li><p>å¤„ç† <em>json</em> æ–‡ä»¶ã€‚éœ€è¦è§£å†³çš„é—®é¢˜æœ‰ï¼š</p>
<ul>
<li>å¼€å‘ç¯å¢ƒä¸å‹ç¼©ä»£ç ï¼Œç”Ÿäº§ç¯å¢ƒå‹ç¼©ä»£ç ï¼›</li>
</ul>
<p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;compile:json&quot;, done =&gt; {
  // console.log(&quot;:::: compile:json&quot;);

  src(baseConfig.jsonPath, {
      base: &quot;src&quot;
    })
    .pipe(changed(baseConfig.distPath))
    .pipe(gulpif(!this.isDev, prettyData({
      type: &quot;minify&quot;,
      preserveComments: true,
      extensions: {
        &quot;json&quot;: &quot;json&quot;,
      }
    })))
    .pipe(dest(baseConfig.distPath));

  done();
})
</code></pre>
</li>
<li><p>å…¶ä»–æ‰€æœ‰æ–‡ä»¶ã€‚</p>
<p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;compile:other&quot;, done =&gt; {
      // console.log(&quot;:::: compile:other&quot;);

      src(baseConfig.otherPath, {
          base: &quot;src&quot;
        })
        .pipe(changed(baseConfig.distPath))
        .pipe(dest(baseConfig.distPath));

      done();
    })
</code></pre>
</li>
<li><p>å›¾ç‰‡å‹ç¼©ã€‚</p>
<p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;minify:image&quot;, async done =&gt; {
  // console.log(&quot;:::: minify:image&quot;);

  src(baseConfig.imagePath, {
      base: &quot;src&quot;
    })
    .pipe(imagemin([imagemin.optipng(), imagemin.gifsicle(), imagemin.jpegtran()]))
    .pipe(dest(baseConfig.distPath))

  done();
})
</code></pre>
</li>
<li><p>å¼€å‘ç¯å¢ƒå¼€å¯ç›‘æ§ <em>watch</em>ã€‚</p>
<p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;watch&quot;, done =&gt; {
  // console.log(&quot;:::: compile:other&quot;);

  watch(baseConfig.basePath, {
    base: &quot;src&quot;
  }, series(&quot;compile:less&quot;, &quot;compile:js&quot;, &quot;compile:wxml&quot;, &quot;compile:json&quot;, &quot;compile:other&quot;, &quot;minify:image&quot;))

  done();
})
</code></pre>
</li>
<li><p>æœ€åï¼Œå°†ä»»åŠ¡è¿›è¡Œ <em>id</em> ç»‘å®šå¤„ç†ï¼Œè¿˜æœ‰ä¸åŒç¯å¢ƒçš„åŒºåˆ†ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">task(&quot;default&quot;, parallel(&quot;compile:less&quot;, &quot;compile:js&quot;, &quot;compile:wxml&quot;, &quot;compile:json&quot;, &quot;compile:other&quot;, &quot;minify:image&quot;));
task(`dev-${id}`, series(&quot;default&quot;, &quot;watch&quot;));
task(`prod-${id}`, series(&quot;default&quot;));
</code></pre>
</li>
</ul>
<h4 id="gulpfile-js-gulp-å…¥å£æ–‡ä»¶å¤„ç†ï¼š"><a href="#gulpfile-js-gulp-å…¥å£æ–‡ä»¶å¤„ç†ï¼š" class="headerlink" title="gulpfile.js gulp å…¥å£æ–‡ä»¶å¤„ç†ï¼š"></a><em>gulpfile.js</em> <em>gulp</em> å…¥å£æ–‡ä»¶å¤„ç†ï¼š</h4><p>ä¸»è¦æ˜¯å¯¹ä¸åŒç¯å¢ƒçš„åŒºåˆ†ï¼Œè¿˜æœ‰ <em>taskControler.js</em> å®šä¹‰çš„å„ä¸ªä»»åŠ¡è¿›è¡Œå¼•ç”¨ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">const {
  task,
  series
} = require(&quot;gulp&quot;);
const TaskControler = require(&quot;./gulpTask/taskControler&quot;);
// é¡¹ç›® ID
const id = require(&quot;./package.json&quot;).name || &quot;min-program&quot;;

new TaskControler(id);

/*---------- ç›¸å…³çš„ gulp ä»»åŠ¡ ----------*/

// dev å¼€å‘ç¯å¢ƒä»»åŠ¡
task(&quot;dev&quot;, series(`dev-${id}`));

// prod ç”Ÿäº§ç¯å¢ƒä»»åŠ¡
task(&quot;prod&quot;, series(`prod-${id}`));
</code></pre>
<p>æ¥ç€ï¼Œåªéœ€è¦æ‰§è¡Œ <code>npm run build:dev</code>æˆ– <code>npm run build:prod</code>ï¼Œç„¶åå°†ç”Ÿæˆçš„ <em>dist</em> ç›®å½•ä¸¢åˆ°å¾®ä¿¡å¼€å‘è€…å·¥å…·å³å¯ã€‚</p>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>  

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ertsul.github.io/2019/10/12/Git-æ“ä½œï¼ˆè¡¥å……ï¼‰/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ertsul">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/17139306?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ertsul">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/12/Git-æ“ä½œï¼ˆè¡¥å……ï¼‰/" itemprop="url">Git æ“ä½œï¼ˆè¡¥å……ï¼‰</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-10-12T22:10:08+08:00">
                2019-10-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          Git
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2019/10/12/Git-æ“ä½œï¼ˆè¡¥å……ï¼‰/">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    <div>
      
    </div>  

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ertsul.github.io/2019/10/12/Git-æ“ä½œ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ertsul">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/17139306?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ertsul">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/12/Git-æ“ä½œ/" itemprop="url">Git æ“ä½œ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-10-12T21:55:55+08:00">
                2019-10-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          Git
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2019/10/12/Git-æ“ä½œ/">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    <div>
      
    </div>  

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ertsul.github.io/2019/02/18/é˜²æŠ–å’ŒèŠ‚æµ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ertsul">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/17139306?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ertsul">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/18/é˜²æŠ–å’ŒèŠ‚æµ/" itemprop="url">é˜²æŠ–å’ŒèŠ‚æµ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-02-18T21:34:34+08:00">
                2019-02-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/frontEnd/" itemprop="url" rel="index">
                    <span itemprop="name">frontEnd</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/frontEnd/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="é˜²æŠ–"><a href="#é˜²æŠ–" class="headerlink" title="é˜²æŠ–"></a>é˜²æŠ–</h2><ul>
<li>å¯¹äºä¸€äº›é«˜é¢‘è§¦å‘æ“ä½œçš„åœºæ™¯ï¼Œæˆ‘ä»¬éœ€è¦åŠ é˜²æŠ–æ“ä½œã€‚æ¯”å¦‚ï¼šç›‘å¬é¡µé¢æ»šåŠ¨ã€è¾“å…¥å®æ—¶æ˜¾ç¤ºæœç´¢ç»“æœç­‰ã€‚è¿™äº›éƒ½éœ€è¦åŠ é˜²æŠ–æ“ä½œï¼Œä¸ç„¶å¯¹é¡µé¢æ€§èƒ½æœ‰å¾ˆå¤§çš„å‰¯ä½œç”¨ã€‚</li>
<li>ç®€å•æ¦‚æ‹¬ï¼šé˜²æŠ–å°±æ˜¯å°†é«˜é¢‘æ“ä½œä¼˜åŒ–ä¸ºæœ€åä¸€æ¬¡æ‰§è¡Œã€‚</li>
</ul>
<p>å®ç°ï¼š</p>
<pre><code>// é˜²æŠ–
const debounce = (fn, wait, immediate = false) =&gt; {
  let timer = null;
  return function () {
    let context = this,
      args = arguments;
    if (immediate &amp;&amp; !timer) {
      fn.apply(context, args);
    }
    if (timer) {
      clearTimeout(timer);
    }
    timer = setTimeout(() =&gt; {
      fn.apply(context, args);
    }, wait)
  }
}
</code></pre><h2 id="èŠ‚æµ"><a href="#èŠ‚æµ" class="headerlink" title="èŠ‚æµ"></a>èŠ‚æµ</h2><p>æ¯æ®µæ—¶é—´åæ‰§è¡Œä¸€æ¬¡ï¼Œå°†é«˜é¢‘è½¬åŒ–ä¸ºä½é¢‘ã€‚</p>
<pre><code>// èŠ‚æµ
const throttle = (fn, wait, immediate = false) =&gt; {
  let timer = null;
  return function () {
    let context = this,
      args = arguments;
    if (immediate) {
      fn.apply(context, args);
    }
    if (!timer) {
      timer = setTimeout(() =&gt; {
        fn.apply(context, args);
        timer = null;
      }, wait)
    }
  }
}
</code></pre>
          
        
      
    </div>
    
    
    

    <div>
      
    </div>  

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ertsul.github.io/2019/02/17/vue-cli3-0é¡¹ç›®åˆ›å»º-é…ç½®-è‡ªåŠ¨éƒ¨ç½²/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ertsul">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/17139306?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ertsul">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/17/vue-cli3-0é¡¹ç›®åˆ›å»º-é…ç½®-è‡ªåŠ¨éƒ¨ç½²/" itemprop="url">vue-cli3.0é¡¹ç›®åˆ›å»º+é…ç½®+è‡ªåŠ¨éƒ¨ç½²</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-02-17T22:09:53+08:00">
                2019-02-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/frontEnd/" itemprop="url" rel="index">
                    <span itemprop="name">frontEnd</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/frontEnd/Vue/" itemprop="url" rel="index">
                    <span itemprop="name">Vue</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><ul>
<li><p>å®‰è£… <strong>vue3.0</strong> è„šæ‰‹æ¶</p>
<pre><code>npm install -g @vue/cli
</code></pre></li>
<li><p>åˆ›å»ºé¡¹ç›®</p>
<pre><code>vue create my_project
</code></pre><p>ä¸€ç³»åˆ—é€‰æ‹©ä¹‹åï¼Œå¯ä»¥ä¿å­˜ä½ å½“å‰çš„é€‰æ‹©é…ç½®ï¼Œä¹‹ååˆ›å»ºé¡¹ç›®çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥ç”¨äº†ã€‚</p>
</li>
<li><p>å®‰è£…ä¾èµ–</p>
<pre><code>cd my_project
</code></pre></li>
</ul>
<p>æœ€åçš„é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-5267ed577dcb2fc6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="è¿è¡Œé¡¹ç›®"><a href="#è¿è¡Œé¡¹ç›®" class="headerlink" title="è¿è¡Œé¡¹ç›®"></a>è¿è¡Œé¡¹ç›®</h2><p><strong>vue3.0</strong> è¿è¡Œé¡¹ç›®ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li><p>å‘½ä»¤è¡Œæ–¹å¼ï¼š</p>
<pre><code>npm run serve
</code></pre></li>
<li><p>UIè§†å›¾æ–¹å¼ï¼Œè¿™ä¹Ÿæ˜¯3.0ç‰ˆæœ¬çš„ä¸€å¤§äº®ç‚¹ã€‚é€šè¿‡UIè§†å›¾æ–¹å¼ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¾ˆå¤šäº‹ï¼Œå¦‚ï¼šè¿è¡Œé¡¹ç›®ã€å®‰è£…ä¾èµ–ã€å®‰è£…æ’ä»¶ç­‰ã€‚</p>
<pre><code>vue ui
</code></pre></li>
</ul>
<h2 id="webpack-é…ç½®"><a href="#webpack-é…ç½®" class="headerlink" title="webpack é…ç½®"></a>webpack é…ç½®</h2><p>vue å·²ç»å¸®æˆ‘ä»¬é…ç½®äº†å¾ˆå¤šï¼Œé¢å¤–è‡ªå·±åˆæ·»åŠ äº†ä¸€äº›é…ç½®ï¼›åœ¨æ ¹ç›®å½•æ·»åŠ  <strong>vue.config.js</strong> é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code>const path = require(&#39;path&#39;);
const px2rem = require(&#39;postcss-px2rem&#39;);
const VconsoleWebpackPlugin = require(&#39;vconsole-webpack-plugin&#39;);
const TerserWebpackPlugin = require(&#39;terser-webpack-plugin&#39;);
// åˆ¤æ–­æ˜¯å¦ä¸ºç”Ÿäº§ç¯å¢ƒ
const isProduction = process.env.NNODE_ENV === &#39;production&#39;;
// è·¯å¾„å¤„ç†å‡½æ•°
const resolve = name =&gt; path.resolve(__dirname, name);

module.exports = {
  publicPath: isProduction ? &#39;/production&#39; : &#39;/&#39;, // éƒ¨ç½²åº”ç”¨åŒ…æ—¶çš„åŸºæœ¬ URL
  productionSourceMap: !isProduction, // ç”Ÿäº§ç¯å¢ƒä¸å¼€å¯ source-map
  devServer: { // webpack-dev-server çš„é…ç½®
    port: 8089, // æœ¬åœ°ç«¯å£
    open: true, // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    // proxy: { // ä»£ç†
    //   &#39;/api&#39;: {
    //     target: &#39;&lt;url&gt;&#39;,
    //     ws: true,
    //     changeOrigin: true
    //   },
    // }
  },
  css: {
    extract: isProduction, // ç”Ÿäº§ç¯å¢ƒå°† css å•ç‹¬æŠ½ç¦»æˆä¸€ä¸ªæ–‡ä»¶
    sourceMap: !isProduction, // ç”Ÿæˆç¯å¢ƒä¸å¼€å¯ source-map
    loaderOptions: {
      postcss: {
        // ç§»åŠ¨ç«¯ä½¿ç”¨rem
        plugins: [
          px2rem({
            remUnit: 75
          })
        ]
      },
      // å…¨å±€å…±äº«variables.scss
      sass: {
        // @/ æ˜¯ src/ çš„åˆ«å
        // æ‰€ä»¥è¿™é‡Œå‡è®¾ä½ æœ‰ `src/variables.scss` è¿™ä¸ªæ–‡ä»¶
        data: `@import &quot;@/variables.scss&quot;;`
      }
    }
  },
  configureWebpack: config =&gt; {
    const devPlugins = [
      new VconsoleWebpackPlugin({ // å¾®ä¿¡ç§»åŠ¨ç«¯è°ƒè¯•æ§åˆ¶å°
        enable: !isProduction
      })
    ];
    const prodPlugins = [
      new TerserWebpackPlugin({
        terserOptions: { // æ‰“åŒ…æ—¶å€™çš„é…ç½®
          warnings: false,
          compress: true,
          drop_console: true,
          drop_debugger: true,
          pure_funcs: [&#39;console.log&#39;]
        }
      })
    ];
    if (isProduction) { // ç”Ÿäº§ç¯å¢ƒ
      config.optimization.minimizer = [
        ...config.optimization.minimizer,
        ...prodPlugins
      ]
    } else { // å¼€å‘ç¯å¢ƒ
      config.plugins = [...config.plugins, ...devPlugins]
    }
  },
  chainWebpack: config =&gt; {
    // è‡ªå®šä¹‰å…¨å±€å˜é‡
    // config
    //   .plugin(&#39;define&#39;)
    //   .tap((args) =&gt; {
    //     args[0].PRODUCTION = isProduction ? JSON.stringify(&#39;&#39;) :
    //       JSON.stringify(
    //         &#39;other/&#39;,
    //       );
    //     return args;
    //   });
    // åˆ«åè®¾ç½®
    config.resolve.alias
      .set(&#39;js&#39;, resolve(&#39;src/assets/js&#39;))
      .set(&#39;scss&#39;, resolve(&#39;src/assets/scss&#39;))
      .set(&#39;images&#39;, resolve(&#39;src/assets/images&#39;))
      .set(&#39;components&#39;, resolve(&#39;src/components&#39;));
  }
}
</code></pre><h2 id="è·¯ç”±é…ç½®"><a href="#è·¯ç”±é…ç½®" class="headerlink" title="è·¯ç”±é…ç½®"></a>è·¯ç”±é…ç½®</h2><p><strong>vue3.0</strong> çš„è·¯ç”±é…ç½®å·²ç»å¾ˆå®Œå–„äº†ï¼Œè¿™é‡Œæˆ‘ä»…ä»…å°æ”¹åŠ¨ï¼Œå°è£…äº†è·¯ç”±æ‡’åŠ è½½å‡½æ•°ï¼š</p>
<pre><code>import Vue from &#39;vue&#39;
import Router from &#39;vue-router&#39;
import Home from &#39;./views/Home.vue&#39;

Vue.use(Router)
// è·¯ç”±æ‡’åŠ è½½
// route level code-splitting
// this generates a separate chunk (about.[hash].js) for this route
// which is lazy-loaded when the route is visited.
const addRouterComponent = path =&gt; import(path);

export default new Router({
  mode: &#39;history&#39;,
  base: process.env.BASE_URL,
  routes: [{
      path: &#39;/&#39;,
      name: &#39;home&#39;,
      component: Home
    },
    {
      path: &#39;/about&#39;,
      name: &#39;about&#39;,
      component: addRouterComponent(&#39;./views/About.vue&#39;)
    }
  ]
})
</code></pre><h2 id="axios-çš„é…ç½®"><a href="#axios-çš„é…ç½®" class="headerlink" title="axios çš„é…ç½®"></a>axios çš„é…ç½®</h2><p>åœ¨ <strong>scr</strong> ç›®å½•ä¸‹æ·»åŠ  <strong>api</strong> ç›®å½•ï¼Œå¹¶æ–°å»ºä¸¤ä¸ªæ–‡ä»¶ï¼š<strong>config.js</strong> å’Œ <strong>api.js</strong>ã€‚é…ç½®å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>config.js</strong></li>
</ul>
<pre><code>import axios from &#39;axios&#39;;
import qs from &#39;qs&#39;;

axios.defaults.withCredentials = false;
// è¯·æ±‚æ‹¦æˆªå™¨
axios.interceptors.request.use(
  request =&gt; {
    request.data = request.data || {};
    const hasHttp = /^http(|s):\/\//.test(request.url);
    if (!hasHttp) { // æ—  http or https å¤´å¤„ç†
      request.url = `https://${request.url}`;
    }
    if (request.data) {
      request.data = {
        // commom: &#39;&#39;, è¿™é‡Œå¯ä»¥æ·»åŠ ä¸€äº›å…¬å…±çš„è¯·æ±‚å‚æ•°
        data: JSON.stringify(request.data)
      };
      request.data = qs.stringify(request.data);
    }
    return request;
  },
  error =&gt; Promise.reject(error)
);
// å“åº”æ‹¦æˆªå™¨
axios.interceptors.response.use(
  response =&gt; {
    const responseData = response.data;
    if (responseData.errcode !== 0) { // é”™è¯¯å¤„ç†
      return Promise.reject(responseData.msg || &#39;æœªçŸ¥é”™è¯¯&#39;);
    }
    responseData.result = responseData.result || {};
    return responseData;
  },
  error =&gt; Promise.reject(error)
);

export {
  axios
};
</code></pre><ul>
<li><strong>api.js</strong></li>
</ul>
<pre><code>import {
  axios
} from &#39;./config.js&#39;;

// ä¾‹å­ 1
export const aApi1Name = params =&gt; axios.post(url, params);
// ä¾‹å­ 2
export const aApi2Name = params =&gt; axios.get(url, params);
</code></pre><h2 id="æ‰“åŒ…åè‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨"><a href="#æ‰“åŒ…åè‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨" class="headerlink" title="æ‰“åŒ…åè‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨"></a>æ‰“åŒ…åè‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨</h2><p>ä½¿ç”¨çš„æ˜¯ <strong>scp2</strong>ï¼›é€šè¿‡å‘è„šæœ¬ä¼ é€’ä¸åŒå‚æ•°ï¼Œéƒ¨ç½²åˆ°ä¸åŒçš„æœåŠ¡å™¨è·¯å¾„ï¼›åœ¨æ ¹ç›®å½•æ·»åŠ  <strong>deploy.js</strong> è„šæœ¬ã€‚ç›¸å…³é…ç½®å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>package.json</strong></li>
</ul>
<pre><code>&quot;buildTest&quot;: &quot;vue-cli-service build &amp;&amp; node deploy.js development&quot;,
&quot;buildProd&quot;: &quot;vue-cli-service build &amp;&amp; node deploy.js production&quot;
</code></pre><ul>
<li><strong>deploy.js</strong></li>
</ul>
<pre><code>const qs = require(&#39;qs&#39;);

// åˆ¤æ–­æ˜¯å¦è¾“å‡ºå¸®åŠ©ä¿¡æ¯
const helpMessage = `usage: node deploy.js [deploy_target]`;
if (
  process.argv.length !== 3 ||
  process.argv[2] === &#39;-h&#39; ||
  process.argv[2] === &#39;--help&#39;
) {
  console.log(helpMessage);
  process.exit(0);
}

// åˆ¤æ–­æ˜¯å¦æ˜¯ç”Ÿäº§ç¯å¢ƒ
const isProduction = process.argv[2] === &#39;production&#39;;

// è®¾ç½®éƒ¨ç½²çš„æ–‡ä»¶è·¯å¾„ï¼Œæ­£æœ or æµ‹æœ
let deployPath = &#39;&#39;;
if (isProduction) {
  deployPath = &#39;/production&#39;
} else {
  deployPath = &#39;/test&#39;
}

// è®¾ç½®æœåŠ¡å™¨æœåŠ¡å™¨ä¿¡æ¯
const SERVER_INFO = {
  host: &#39;134.175.150.8&#39;,
  port: 22,
  username: &#39;&#39;,
  password: &#39;&#39;,
  path: deployPath
}

// éƒ¨ç½²åˆ°æœåŠ¡å™¨
client.scp(&#39;./dist/&#39;, SERVER_INFO, err =&gt; {
  if (err) {
    console.log(&#39;Deploy Failed!\n&#39;, err);
  }
})

console.log(`Deploy ${isProduction ? &#39;production&#39; : &#39;developemt&#39;} finished!`);
</code></pre><p>æ€»ç»“ï¼šé€šè¿‡ä¸Šé¢çš„é…ç½®ï¼ŒåŸºæœ¬å¯ä»¥å®ç° <strong>vue</strong> é¡¹ç›®ä»åˆ›å»ºåˆ°é…ç½®åˆ°æ‰“åŒ…è‡ªåŠ¨éƒ¨ç½²çš„è¿‡ç¨‹ã€‚</p>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>  

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ertsul.github.io/2019/02/17/websocket/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ertsul">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/17139306?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ertsul">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/17/websocket/" itemprop="url">websocket</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-02-17T21:57:39+08:00">
                2019-02-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/frontEnd/" itemprop="url" rel="index">
                    <span itemprop="name">frontEnd</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="HTTP-HTTPS-åè®®"><a href="#HTTP-HTTPS-åè®®" class="headerlink" title="HTTP/HTTPS åè®®"></a>HTTP/HTTPS åè®®</h2><ul>
<li>ä¸€ä¸ª <strong>request</strong> å¯¹åº”ä¸€ä¸ª <strong>response</strong>ã€‚ä¸€èˆ¬ä½¿ç”¨ <strong>è½®è¯¢</strong> æœºåˆ¶è·å–ä¿¡æ¯ã€‚</li>
<li>è™½ç„¶åæœŸæœ‰ <strong>keep-alive</strong>ï¼Œå¯ä»¥ä¸€æ¬¡è¿æ¥ä¸­å¤„ç†å¤šä¸ª <strong>request</strong> åˆå¹¶å‘é€ï¼Œæ¥æ”¶å¤šä¸ª <strong>response</strong>ï¼Œå¯¹æ¯ä¸ªè¯·æ±‚ä»ç„¶éœ€è¦å•ç‹¬å‘ <strong>header</strong>ã€‚</li>
<li><strong>HTTP</strong> çš„ <strong>response</strong> æ˜¯è¢«åŠ¨çš„ï¼Œé€šä¿¡åªèƒ½ç”±å®¢æˆ·ç«¯å‘èµ·ï¼Œåšä¸åˆ°æœåŠ¡ç«¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€ä¿¡æ¯ã€‚</li>
<li><strong>HTTP</strong> æ˜¯æ— çŠ¶æ€åè®®ã€‚</li>
<li>éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ã€‚</li>
<li>HTTPï¼šTCP + HTTP</li>
<li>HTTPSï¼šTCP + HTTP + TLS</li>
</ul>
<h4 id="ajax-è½®è¯¢"><a href="#ajax-è½®è¯¢" class="headerlink" title="ajax è½®è¯¢"></a>ajax è½®è¯¢</h4><p><strong>ajax è½®è¯¢</strong> æ˜¯æŒ‡å®¢æˆ·ç«¯ <strong>ä¸æ–­</strong> å‘æœåŠ¡å™¨å‘é€èµ„æºè¯·æ±‚ <strong>request</strong>ï¼ŒæœåŠ¡ç«¯ä¸ç®¡æœ‰æ— ç›®æ ‡èµ„æºï¼Œéƒ½ä¼šè¿”å› <strong>response</strong> ç»“æœã€‚è¿™æ ·å°±è¦æ±‚æœåŠ¡å™¨æ‹¥æœ‰æ›´å¥½çš„å¤„ç†é€Ÿåº¦ã€‚</p>
<h4 id="long-poll-é•¿è½®è¯¢"><a href="#long-poll-é•¿è½®è¯¢" class="headerlink" title="long poll / é•¿è½®è¯¢"></a>long poll / é•¿è½®è¯¢</h4><p><strong>long poll</strong> æ¯” <strong>ajax è½®è¯¢</strong> å¥½ç‚¹ï¼Œ<strong>ä¸ä¼šä¸æ–­</strong> å‘æœåŠ¡å™¨å‘é€èµ„æºè¯·æ±‚ <strong>request</strong>ï¼Œä¸€æ—¦æ¥å—å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæœ‰èµ„æºå°±è¿”å›ï¼›æ— èµ„æºå°±æŒ‚èµ·ï¼Œç›´åˆ°æœ‰èµ„æºæ‰è¿”å› <strong>response</strong> ç»“æœï¼ˆæœ‰ä¸”ä»…æœ‰è¿”å›ä¸€æ¬¡ï¼‰ã€‚é«˜å¹¶å‘ï¼Œéœ€è¦æœåŠ¡å™¨å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚çš„èƒ½åŠ›ã€‚</p>
<h2 id="websocket-åè®®"><a href="#websocket-åè®®" class="headerlink" title="websocket åè®®"></a>websocket åè®®</h2><ul>
<li><strong>websocket</strong> æ˜¯ <strong>html5</strong> å‡ºçš„åè®®ã€‚</li>
<li><strong>websocket</strong> æ˜¯ä¸€ä¸ªæŒä¹…åŒ–çš„åè®®ï¼Œ<strong>websocket</strong> åªéœ€è¦ä¸€æ¬¡è¯·æ±‚ï¼ˆä¸€æ¬¡ <strong>HTTP æ¡æ‰‹</strong> ï¼‰ï¼Œå°±å¯ä»¥å¾—åˆ°æ‰€éœ€çš„èµ„æºã€‚</li>
<li>æœåŠ¡ç«¯å¯ä»¥ <strong>ä¸»åŠ¨</strong> å‘å®¢æˆ·ç«¯æ¨é€ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ <strong>ä¸»åŠ¨</strong> å‘æœåŠ¡ç«¯æ¨é€æ¶ˆæ¯ï¼Œå®ç°â€œåŒå‘å¹³ç­‰â€ï¼Œæ˜¯å±äºæœåŠ¡å™¨æ¨é€æŠ€æœ¯çš„ä¸€ç§ã€‚</li>
<li>ä¸ <strong>HTTP</strong> æœ‰è¾ƒå¥½çš„å…¼å®¹æ€§ï¼Œåœ¨æ¡æ‰‹é˜¶æ®µé‡‡ç”¨ <strong>HTTP</strong> åè®®ã€‚</li>
<li>é»˜è®¤ç«¯å£ <strong>80</strong> and <strong>443</strong>ã€‚</li>
<li>æ•°æ®æ ¼å¼è½»é‡ï¼Œæ€§èƒ½å¼€é”€å°ï¼Œé€šä¿¡é«˜æ•ˆï¼Œå¯ä»¥å‘é€æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥äºŒè¿›åˆ¶æ•°æ®ã€‚</li>
<li>æ²¡æœ‰åŒæºç­–ç•¥ã€‚</li>
<li>WSï¼šTCP + WS</li>
<li>WSSï¼šTCP + WS + TLS</li>
</ul>
<h4 id="websocket-æ¡æ‰‹"><a href="#websocket-æ¡æ‰‹" class="headerlink" title="websocket æ¡æ‰‹"></a>websocket æ¡æ‰‹</h4><pre><code>GET /chat HTTP/1.1
Host: server.example.com
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==
Sec-WebSocket-Protocol: chat, superchat
Sec-WebSocket-Version: 13
</code></pre><ul>
<li>Upgrade/Connectionï¼šé€šçŸ¥æœåŠ¡å™¨å‘èµ·çš„æ˜¯ <strong>wesocket</strong> åè®®ã€‚</li>
<li>Sec-WebSocket-Keyï¼šæµè§ˆå™¨éšæœºç”Ÿæˆçš„ <strong>Base64 encode</strong> çš„å€¼ï¼Œç”¨äºéªŒè¯æœåŠ¡å™¨æ˜¯ä¸æ˜¯ <strong>websocket åè®®</strong>ã€‚</li>
<li>Sec-WebSocket-Protocolï¼šç”¨æˆ·å®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œç”¨æ¥åŒºåˆ† <strong>åŒ url</strong> ä¸‹ï¼Œä¸åŒçš„æœåŠ¡æ‰€éœ€è¦çš„åè®®ã€‚</li>
<li>Sec-WebSocket-Versionï¼šåè®®ç‰ˆæœ¬ã€‚</li>
</ul>
<h4 id="æœåŠ¡å™¨è¿”å›"><a href="#æœåŠ¡å™¨è¿”å›" class="headerlink" title="æœåŠ¡å™¨è¿”å›"></a>æœåŠ¡å™¨è¿”å›</h4><pre><code>HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk=
Sec-WebSocket-Protocol: chat
</code></pre><ul>
<li>Upgrade/Connectionï¼šé€šçŸ¥å®¢æˆ·ç«¯å‡çº§çš„æ˜¯ <strong>websocket</strong> åè®®ã€‚</li>
<li>Sec-WebSocket-Acceptï¼šç»æœåŠ¡å™¨ç¡®è®¤ï¼ŒåŠ å¯†åçš„ <strong>Sec-WebSocket-Key</strong>ã€‚</li>
<li>Sec-WebSocket-Protocolï¼šæœ€ç»ˆä½¿ç”¨çš„åè®®ã€‚</li>
</ul>
<h4 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h4><pre><code>ws.addEventListener(&#39;open&#39;, function () {
    console.log(&#39;Open the websocket...&#39;);
    ws.send(&#39;Hello websocket...&#39;);
});
ws.addEventListener(&#39;message&#39;, function (e) {
    console.log(&#39;Ready state: &#39; + ws.readyState, &#39;Receive the websocket message...&#39; + e.data);
    ws.close();
    setTimeout(() =&gt; {
        console.log(&#39;Ready state: &#39; + ws.readyState);
    }, 1000)
});
ws.addEventListener(&#39;close&#39;, function () {
    console.log(&#39;Ready state: &#39; + ws.readyState, &#39;Close the websocket...&#39;);
})
</code></pre><p>ç»“æœï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-021a1bb1915811bd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>å‚è€ƒï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-d06ed1bfe9c9fadb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<ul>
<li><a href="https://www.zhihu.com/search?type=content&amp;q=websocket" target="_blank" rel="noopener">https://www.zhihu.com/search?type=content&amp;q=websocket</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2017/05/websocket.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2017/05/websocket.html</a></li>
</ul>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>  

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ertsul.github.io/2019/02/17/ç”¨æˆ·è®¤è¯å°æ€»ç»“/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ertsul">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/17139306?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ertsul">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/17/ç”¨æˆ·è®¤è¯å°æ€»ç»“/" itemprop="url">ç”¨æˆ·è®¤è¯å°æ€»ç»“</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-02-17T21:52:43+08:00">
                2019-02-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/frontEnd/" itemprop="url" rel="index">
                    <span itemprop="name">frontEnd</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="ç”¨æˆ·è®¤è¯"><a href="#ç”¨æˆ·è®¤è¯" class="headerlink" title="ç”¨æˆ·è®¤è¯"></a>ç”¨æˆ·è®¤è¯</h2><p>ä¸€èˆ¬çš„ç”¨æˆ·è®¤è¯æµç¨‹å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-bdfa6d0008a02e53.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/800" alt="image.png"></p>
<p>ä½†æ˜¯ï¼Œè¿™ç§æ¨¡å¼çš„æ‰©å±•æ€§ä¸å¥½ã€‚å•ä¸ªæœåŠ¡å™¨æ²¡é—®é¢˜ï¼Œå¦‚æœå¤šä¸ªæœåŠ¡å™¨é›†ç¾¤ï¼Œè¦æ±‚å…±äº« <strong>session</strong> ï¼Œæ¯ä¸ªæœåŠ¡å™¨éƒ½èƒ½è®¿é—®åˆ° <strong>session</strong> ã€‚</p>
<ul>
<li>è§£å†³æ–¹æ¡ˆä¸€ï¼š<strong>session</strong> æ•°æ®æŒä¹…åŒ–ï¼Œå†™å…¥æ•°æ®åº“æˆ–è€…å…¶ä»–æŒä¹…å±‚ã€‚å„ä¸ªæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œå‘æŒä¹…å±‚å‘é€æ•°æ®è¯·æ±‚ã€‚<ul>
<li>ç¼ºç‚¹ï¼šå·¥ç¨‹é‡å¤§ã€‚</li>
</ul>
</li>
<li>è§£å†³æ–¹æ¡ˆäºŒï¼šæœåŠ¡å™¨ä¸ä¿å­˜ <strong>session</strong> æ•°æ®ï¼Œæ‰€æœ‰çš„æ•°æ®ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½å‘å›æœåŠ¡å™¨ã€‚å¦‚ï¼šJWT(Json Web Token)ã€‚</li>
</ul>
<h2 id="JWT"><a href="#JWT" class="headerlink" title="JWT"></a>JWT</h2><p><strong>JWT</strong> æœåŠ¡å™¨ä¸ä¿å­˜ <strong>session</strong> æ•°æ®ï¼Œåœ¨æœåŠ¡å™¨è®¤è¯ä¹‹åï¼Œè¿”å›ä¸€ä¸ª <strong>JSON</strong> å¯¹è±¡ã€‚æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code>{
    &quot;å§“å&quot;: &quot;zero&quot;,
    &quot;è§’è‰²&quot;: &quot;ç®¡ç†å‘˜&quot;,
    &quot;åˆ°æœŸæ—¶é—´&quot;: &quot;2018å¹´10æœˆ6æ—¥0ç‚¹0åˆ†&quot;
}
</code></pre><p>ä¹‹åï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„ç”¨æˆ·è®¤è¯éƒ½é è¿™ä¸ª <strong>JSON</strong> å¯¹è±¡ï¼Œå½“ç„¶ï¼Œè¿™ä¸ªå¯¹è±¡åé¢ä¼šåŠ ä¸Šç­¾åï¼Œä¿è¯æ•°æ®ä¸è¢«ç¯¡æ”¹ã€‚</p>
<h4 id="JWT-çš„æ•°æ®ç»“æ„"><a href="#JWT-çš„æ•°æ®ç»“æ„" class="headerlink" title="JWT çš„æ•°æ®ç»“æ„"></a>JWT çš„æ•°æ®ç»“æ„</h4><ul>
<li><strong>JWT</strong> æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œä¸­é—´ç”¨ <strong>.</strong> åˆ†éš”ï¼Œå†…éƒ¨æ²¡æœ‰æ¢è¡Œã€‚</li>
<li>ç»„æˆç”±ä¸‰ä¸ªéƒ¨åˆ†ï¼š<strong>Header.Payload.Signature</strong><ul>
<li>Headerï¼šå¤´éƒ¨ã€‚<strong>JSON</strong> å¯¹è±¡ï¼Œæè¿° <strong>JWT</strong> çš„å…ƒæ•°æ®ã€‚</li>
<li>Payloadï¼šè´Ÿè½½ã€‚<strong>JSON</strong> å¯¹è±¡ï¼Œå­˜æ”¾å®é™…éœ€è¦ä¼ é€’çš„æ•°æ®ï¼›ä¸åŠ å¯†ã€‚</li>
<li>Signatureï¼šç­¾åã€‚å¯¹ <strong>Header</strong> å’Œ <strong>Payload</strong> çš„ç­¾åï¼Œé˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹ã€‚</li>
</ul>
</li>
</ul>
<p>Header æ ¼å¼ï¼š</p>
<pre><code>{
  &quot;alg&quot;: &quot;HS256&quot;,   // ç­¾åçš„ç®—æ³•
  &quot;typ&quot;: &quot;JWT&quot;      // token ç±»å‹
}
</code></pre><p>Payload ä¸ƒä¸ªå­—æ®µï¼š</p>
<ul>
<li>iss (issuer)ï¼šç­¾å‘äºº</li>
<li>exp (expiration time)ï¼šè¿‡æœŸæ—¶é—´</li>
<li>sub (subject)ï¼šä¸»é¢˜</li>
<li>aud (audience)ï¼šå—ä¼—</li>
<li>nbf (Not Before)ï¼šç”Ÿæ•ˆæ—¶é—´</li>
<li>iat (Issued At)ï¼šç­¾å‘æ—¶é—´</li>
<li>jti (JWT ID)ï¼šç¼–å·</li>
</ul>
<h4 id="JWT-çš„ä½¿ç”¨æ–¹å¼"><a href="#JWT-çš„ä½¿ç”¨æ–¹å¼" class="headerlink" title="JWT çš„ä½¿ç”¨æ–¹å¼"></a>JWT çš„ä½¿ç”¨æ–¹å¼</h4><ul>
<li>å­˜å‚¨åœ¨ <strong>cookie</strong> ä¸­ã€‚</li>
<li>å­˜å‚¨åœ¨ <strong>localStorage</strong> ä¸­ã€‚</li>
<li>å®¢æˆ·ç«¯æ¯æ¬¡ä¸æœåŠ¡å™¨è¿›è¡Œé€šä¿¡çš„æ—¶å€™ï¼Œéƒ½ä¼šå¸¦ä¸Š <strong>JWT</strong>ã€‚</li>
</ul>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="http://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html</a></li>
</ul>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>  

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ertsul.github.io/2019/02/17/web-safe/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ertsul">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/17139306?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ertsul">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/17/web-safe/" itemprop="url">web safe</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-02-17T21:41:10+08:00">
                2019-02-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/frontEnd/" itemprop="url" rel="index">
                    <span itemprop="name">frontEnd</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/frontEnd/web-safe/" itemprop="url" rel="index">
                    <span itemprop="name">web-safe</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="CSRF-Cross-Site-Request-Forgery"><a href="#CSRF-Cross-Site-Request-Forgery" class="headerlink" title="CSRF : Cross Site Request Forgery"></a>CSRF : Cross Site Request Forgery</h2><p><strong>CSRF</strong> è·¨ç«™è¯·æ±‚ä¼ªé€ ã€‚<br>æ˜¯ä¸€ç§åŠ«æŒå—ä¿¡ä»»ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€éé¢„æœŸè¯·æ±‚çš„æ”»å‡»æ–¹å¼ã€‚ç®€è€Œè¨€ä¹‹ï¼šç”¨æˆ·åœ¨ç™»å½•çš„æƒ…å†µä¸‹è®¿é—®äº†é’“é±¼ç½‘ç«™ï¼Œé’“é±¼ç½‘ç«™é€šè¿‡ç”¨æˆ·å‘å…¶ä»–ç½‘ç«™å‘é€è¯·æ±‚ï¼Œè¿™æ ·å°±è¾¾åˆ°äº†æ¨¡æ‹Ÿç”¨æˆ·çš„ç›®çš„ã€‚å…·ä½“å®ç°å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/659084-9ce93c3bff5d427b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h4 id="é˜²å¾¡æ‰‹æ®µ"><a href="#é˜²å¾¡æ‰‹æ®µ" class="headerlink" title="é˜²å¾¡æ‰‹æ®µ"></a>é˜²å¾¡æ‰‹æ®µ</h4><ul>
<li>éªŒè¯ç å®ç°ç”¨æˆ·éªŒè¯ã€‚éªŒè¯ç å¼ºåˆ¶ç”¨æˆ·å¿…é¡»ä¸åº”ç”¨è¿›è¡Œäº¤äº’ï¼Œæ‰èƒ½å®Œæˆæœ€ç»ˆçš„è¯·æ±‚ã€‚</li>
<li>é€šè¿‡ referer å®ç°ç”¨æˆ·éªŒè¯ã€‚æ ¹æ® <strong>HTTP</strong> åè®®ï¼Œåœ¨ <strong>HTTP</strong> å¤´ä¸­æœ‰ä¸€ä¸ªå­—æ®µå« <strong>Referer</strong>ï¼Œå®ƒè®°å½•äº†è¯¥ <strong>HTTP</strong> è¯·æ±‚çš„ <strong>æ¥æºåœ°å€</strong>ã€‚é€šè¿‡ <strong>Referer Check</strong>ï¼Œå¯ä»¥æ£€æŸ¥è¯·æ±‚æ˜¯å¦æ¥è‡ªåˆæ³•çš„â€æºâ€ã€‚</li>
<li>é€šè¿‡ token å®ç°ç”¨æˆ·éªŒè¯ã€‚</li>
<li>å°½é‡ä¸è¦åœ¨é¡µé¢çš„é“¾æ¥ä¸­æš´éœ²ç”¨æˆ·éšç§ä¿¡æ¯ã€‚</li>
<li>å¯¹äºç”¨æˆ·ä¿®æ”¹åˆ é™¤ç­‰æ“ä½œæœ€å¥½éƒ½ä½¿ç”¨ post æ“ä½œã€‚</li>
<li>é¿å…å…¨ç«™é€šç”¨çš„ cookieï¼Œä¸¥æ ¼è®¾ç½® cookie çš„åŸŸã€‚</li>
</ul>
<h2 id="XSS-Cross-Site-Script"><a href="#XSS-Cross-Site-Script" class="headerlink" title="XSS : Cross Site Script"></a>XSS : Cross Site Script</h2><p><strong>XSS</strong> è·¨ç«™è„šæœ¬æ”»å‡»ã€‚<br>æ”»å‡»è€…å‘ç”¨æˆ·çš„ç½‘ç«™åµŒå…¥çš„ js è„šæœ¬ä»£ç ï¼Œå½“ç”¨æˆ·è®¿é—®è¯¥ç½‘ç«™çš„æ—¶å€™ï¼Œè¯¥ js è„šæœ¬ä»£ç å°±ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ”»å‡»ç”¨æˆ·çš„ç›®çš„ã€‚</p>
<h4 id="åå°„å‹-XSS-æ”»å‡»"><a href="#åå°„å‹-XSS-æ”»å‡»" class="headerlink" title="åå°„å‹ XSS æ”»å‡»"></a>åå°„å‹ XSS æ”»å‡»</h4><p>åˆç§°éæŒä¹…æ€§è·¨ç«™è„šæœ¬æ”»å‡»ã€‚å‘å‡ºè¯·æ±‚æ—¶ï¼ŒXSS ä»£ç å‡ºç°åœ¨ <strong>URL</strong> ä¸­ï¼Œä½œä¸ºè¾“å…¥æäº¤åˆ°æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨ç«¯è§£æåå“åº”ï¼ŒXSS éšå“åº”å†…å®¹ä¸€èµ·è¿”å›ç»™æµè§ˆå™¨ï¼Œæœ€åæµè§ˆå™¨è§£ææ‰§è¡Œ XSS ä»£ç ã€‚æ¼æ´äº§ç”Ÿçš„åŸå› æ˜¯æ”»å‡»è€…æ³¨å…¥çš„æ•°æ®åæ˜ åœ¨å“åº”ä¸­ã€‚ä¸€ä¸ªå…¸å‹çš„éæŒä¹…æ€§ XSS åŒ…å«ä¸€ä¸ªå¸¦ XSS æ”»å‡»å‘é‡çš„é“¾æ¥(å³æ¯æ¬¡æ”»å‡»éœ€è¦ç”¨æˆ·çš„ç‚¹å‡»)ã€‚<br>æ¯”å¦‚ï¼š</p>
<pre><code>http://www.test.com/message.php?send=&lt;script&gt;alert(â€˜foolish!â€™)&lt;/script&gt;ï¼
</code></pre><h4 id="å­˜å‚¨å‹-XSS-æ”»å‡»"><a href="#å­˜å‚¨å‹-XSS-æ”»å‡»" class="headerlink" title="å­˜å‚¨å‹ XSS æ”»å‡»"></a>å­˜å‚¨å‹ XSS æ”»å‡»</h4><p>XSS æäº¤çš„ä»£ç ä¼šå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼ˆæ•°æ®åº“ï¼Œå†…å­˜ï¼Œæ–‡ä»¶ç³»ç»Ÿç­‰ï¼‰ï¼Œä¸‹æ¬¡è¯·æ±‚ç›®æ ‡é¡µé¢æ—¶ä¸ç”¨å†æäº¤ XSS ä»£ç ã€‚è¿™ç§æ”»å‡»æ–¹å¼çš„ç¨³å®šæ€§å¾ˆå¥½ã€‚<br>æ¯”å¦‚ï¼š</p>
<blockquote>
<p>æ”»å‡»è€…åœ¨ value å¡«å†™<code>&lt;script&gt;alert(â€˜foolish!â€™)&lt;/script&gt;</code>ã€æˆ–è€… html å…¶ä»–æ ‡ç­¾ï¼ˆç ´åæ ·å¼ã€‚ã€‚ã€‚ï¼‰ã€ä¸€æ®µæ”»å‡»å‹ä»£ç ã€‘ï¼›å°†æ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼›å…¶ä»–ç”¨æˆ·å–å‡ºæ•°æ®æ˜¾ç¤ºçš„æ—¶å€™ï¼Œå°†ä¼šæ‰§è¡Œè¿™äº›æ”»å‡»æ€§ä»£ç ã€‚</p>
</blockquote>
<h4 id="å…·ä½“æ–¹å¼"><a href="#å…·ä½“æ–¹å¼" class="headerlink" title="å…·ä½“æ–¹å¼"></a>å…·ä½“æ–¹å¼</h4><ul>
<li>æ”»å‡»è€…å‘æœåŠ¡å™¨æ³¨å…¥ js ä»£ç ã€‚</li>
<li>è¯±å¯¼ç”¨æˆ·è®¿é—®å—åˆ°æ”»å‡»çš„ç½‘ç«™ã€‚</li>
<li>ç”¨æˆ·è®¿é—®å—åˆ°æ”»å‡»çš„ç½‘ç«™ï¼Œæ‰§è¡Œæ³¨å…¥çš„ js ä»£ç ã€‚</li>
</ul>
<h4 id="XSS-é˜²å¾¡æ–¹å¼"><a href="#XSS-é˜²å¾¡æ–¹å¼" class="headerlink" title="XSS é˜²å¾¡æ–¹å¼"></a>XSS é˜²å¾¡æ–¹å¼</h4><ul>
<li>HttpOnly</li>
<li>è¾“å…¥æ£€æŸ¥</li>
<li>è¾“å‡ºæ£€æŸ¥</li>
</ul>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<ul>
<li><a href="https://www.cnblogs.com/shytong/p/5308667.html" target="_blank" rel="noopener">https://www.cnblogs.com/shytong/p/5308667.html</a></li>
<li><a href="https://github.com/dwqs/blog/issues/68" target="_blank" rel="noopener">https://github.com/dwqs/blog/issues/68</a></li>
<li><a href="https://www.cnblogs.com/phpstudy2015-6/p/6767032.html#_label3" target="_blank" rel="noopener">https://www.cnblogs.com/phpstudy2015-6/p/6767032.html#_label3</a></li>
</ul>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>  

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ertsul.github.io/2019/02/17/Ajaxå’Œè·¨åŸŸæ€»ç»“/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ertsul">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/17139306?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ertsul">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/17/Ajaxå’Œè·¨åŸŸæ€»ç»“/" itemprop="url">Ajaxå’Œè·¨åŸŸæ€»ç»“</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-02-17T00:00:28+08:00">
                2019-02-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/frontEnd/" itemprop="url" rel="index">
                    <span itemprop="name">frontEnd</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/frontEnd/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Ajaxï¼ˆJavaScriptå®ç°ï¼‰"><a href="#Ajaxï¼ˆJavaScriptå®ç°ï¼‰" class="headerlink" title="Ajaxï¼ˆJavaScriptå®ç°ï¼‰"></a>Ajaxï¼ˆJavaScriptå®ç°ï¼‰</h2><h4 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h4><p>Ajaxï¼ˆAsync Javascript And Xmlï¼‰ï¼šå¼‚æ­¥Jså’ŒXmlï¼Œæ„æ€å°±æ˜¯ç”¨Jsæ‰§è¡Œå¼‚æ­¥ç½‘ç»œè¯·æ±‚ã€‚ä½œç”¨ä¸»è¦æ˜¯åœ¨ä¸é‡æ–°åŠ è½½<strong>å…¨éƒ¨ç½‘é¡µ</strong>çš„æƒ…å†µä¸‹ï¼Œå¯¹<strong>éƒ¨åˆ†é¡µé¢</strong>è¿›è¡Œæ›´æ–°ã€‚</p>
<h4 id="åˆ›å»ºXMLHttpRequestå¯¹è±¡"><a href="#åˆ›å»ºXMLHttpRequestå¯¹è±¡" class="headerlink" title="åˆ›å»ºXMLHttpRequestå¯¹è±¡"></a>åˆ›å»ºXMLHttpRequestå¯¹è±¡</h4><p>é™¤äº†IE5å’ŒIE6ä¸æ”¯æŒä¹‹å¤–ï¼ˆæ”¯æŒActiveXObjectå¯¹è±¡ï¼‰ï¼Œå‡ ä¹ç°åœ¨æ‰€æœ‰çš„æœ‰å†…å»ºçš„XMLHttpRequestå¯¹è±¡ã€‚æ‰€ä»¥åœ¨åˆ›å»ºè¯·æ±‚å¯¹è±¡ä¹‹å‰åˆ¤æ–­ä¸‹å°±å¥½äº†ï¼š</p>
<pre><code>let xhr = null;
xhr = window.XMLHttpRequest ? new xmlHttpRequest() : new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;)
// æˆ–è€…
if(window.XMLHttpRequest){
    xhr = new XMLHttpRequest()
}else{
    xhr = new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;)
}
</code></pre><h4 id="é€šè¿‡open-å’Œsend-å‘æœåŠ¡å™¨å‘é€è¯·æ±‚"><a href="#é€šè¿‡open-å’Œsend-å‘æœåŠ¡å™¨å‘é€è¯·æ±‚" class="headerlink" title="é€šè¿‡open()å’Œsend()å‘æœåŠ¡å™¨å‘é€è¯·æ±‚"></a>é€šè¿‡open()å’Œsend()å‘æœåŠ¡å™¨å‘é€è¯·æ±‚</h4><ul>
<li>xhr.open(method, url, async)<br>è¿™ä¸ªæ–¹æ³•çš„å‚æ•°åˆ†åˆ«æ˜¯ï¼šmethodè¯·æ±‚çš„ç±»å‹GETæˆ–è€…POSTï¼›URLè¯·æ±‚çš„æ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šçš„åœ°å€ï¼›asyncæ˜¯å¦å¼‚æ­¥è¯·æ±‚trueæˆ–è€…falseï¼ˆä¸€èˆ¬ä¸è®¾ç½®ä¸ºfalseï¼‰ã€‚</li>
<li>xhr.send()ï¼šå‘é€è¯·æ±‚ã€‚</li>
<li>xhr.setRequestHeader(header, value)ï¼šå¦‚æœæ˜¯POSTçš„è¯ï¼Œè¦è®¾ç½®å‘é€çš„HTTPå¤´ï¼Œç„¶åé€šè¿‡sendæ–¹æ³•å‘é€å†…å®¹ã€‚å‚æ•°åˆ†åˆ«æ˜¯ï¼šå‘é€çš„å¤´éƒ¨åç§°ï¼Œå¤´éƒ¨çš„å€¼ã€‚ä¸€èˆ¬éƒ½æ˜¯å›ºå®šçš„ã€‚</li>
</ul>
<pre><code>// å‘æµè§ˆå™¨å‘é€è¯·æ±‚
xhr.open(&#39;GET&#39;, &#39;./server.php&#39;, true)
// æ·»åŠ HTTPå¤´ï¼ˆPOSTæ–¹æ³•ï¼‰
xhr.setRequestHeader(&#39;Content-Text&#39;, &#39;application/x-www-form-urlencoded&#39;)   
xhr.send()
</code></pre><p>GETæ–¹æ³•ä¸éœ€è¦å‚æ•°ï¼ŒPOSTæ–¹æ³•åˆ™éœ€è¦æŠŠbodyå‚æ•°ï¼›å¦‚æœè¦æƒ³å‘æœåŠ¡å™¨å‘é€ç›¸å…³çš„å‚æ•°ï¼Œåˆ™é€šè¿‡opené‡Œé¢çš„ç¬¬äºŒä¸ªå‚æ•°urlè¿›è¡Œå‘é€ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code>url = &quot;./filePath?paramName=&quot; + paramValue + ...;
</code></pre><h4 id="åˆ¤æ–­å‡†å¤‡çŠ¶æ€"><a href="#åˆ¤æ–­å‡†å¤‡çŠ¶æ€" class="headerlink" title="åˆ¤æ–­å‡†å¤‡çŠ¶æ€"></a>åˆ¤æ–­å‡†å¤‡çŠ¶æ€</h4><pre><code>xhr.onreadystatechange = function () {
    if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) {
        ...
    }
}
</code></pre><ul>
<li>xhr.onreadystatechangeæ–¹æ³•ä¸­ï¼Œæ¯å½“readyStateæ”¹å˜æ—¶ï¼Œå°±ä¼šè§¦å‘xhr.onreadystatechangeäº‹ä»¶ã€‚</li>
<li>readyStateå±æ€§ï¼šå­˜æœ‰XMLHttpRequestçš„çŠ¶æ€ä¿¡æ¯ã€‚0ï¼šè¯·æ±‚æœªåˆå§‹åŒ–ï¼›1ï¼šæœåŠ¡å™¨é“¾æ¥å·²ç»å»ºç«‹ï¼›2ï¼šè¯·æ±‚å·²ç»æ¥å—ï¼›3ï¼šè¯·æ±‚å¤„ç†ä¸­ï¼›4ï¼šè¯·æ±‚å·²å®Œæˆï¼Œä¸”å“åº”å·²å°±ç»ªã€‚ä¸€å…±æœ‰5ä¸ªçŠ¶æ€ï¼Œæ‰€ä»¥onreadystatechangeäº‹ä»¶ä¼šè¢«è§¦å‘5æ¬¡ã€‚</li>
<li>å®é™…ä¸Šonreadystateschangeæ˜¯é€šè¿‡å›è°ƒå‡½æ•°å®ç°çš„ï¼Œå³ï¼šæ¯å½“readyStateçš„çŠ¶æ€æ”¹å˜æ—¶ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°å°±ä¼šè¢«æ‰§è¡Œã€‚</li>
<li>statuså±æ€§ï¼šè¡¨ç¤ºå“åº”çš„ç»“æœã€‚</li>
</ul>
<p>æ€»çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>document.getElementById(&#39;btn&#39;).onclick = function () {
// åˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼ˆå…ˆåˆ¤æ–­æµè§ˆå™¨ç±»å‹ï¼‰
// var xhr = null;
// if (window.XMLHttpRequest) {
//     xhr = new XMLHttpRequest()
// } else {
//     xhr = new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;)
// }
xhr = (window.XMLHttpRequest) ? (new XMLHttpRequest()) : (new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;))
// åˆ¤æ–­å“åº”çŠ¶æ€å¹¶æ‰§è¡Œç›¸å…³çš„æ“ä½œ
xhr.onreadystatechange = function () {
    if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) {
        let data = xhr.responseText
        console.log(data);
        document.getElementById(&#39;myDiv&#39;).innerText = data
    }
}
// å‘æµè§ˆå™¨å‘é€è¯·æ±‚
let url = &quot;./server.txt&quot;
xhr.open(&#39;GET&#39;, url, true)
// æ·»åŠ HTTPå¤´ï¼ˆPOSTæ–¹æ³•ï¼‰
// xhr.setRequestHeader(&#39;Content-Text&#39;, &#39;application/x-www-form-urlencoded&#39;)
xhr.send(null);
}
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/659084-b5b344a3944ba224.gif?imageMogr2/auto-orient/strip" alt="å¼‚æ­¥1.gif"></p>
<p>ä½†æ˜¯ï¼Œç”±äºåœ¨<strong>åŒæºç­–ç•¥</strong>çš„ä½œç”¨ä¸‹ï¼Œæµè§ˆå™¨åªèƒ½åŒæºçš„å…¶ä»–åŸŸçš„èµ„æºï¼Œå…ˆçœ‹çœ‹ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥ï½</p>
<h2 id="åŒæºç­–ç•¥-SOPï¼ˆSame-origin-policyï¼‰"><a href="#åŒæºç­–ç•¥-SOPï¼ˆSame-origin-policyï¼‰" class="headerlink" title="åŒæºç­–ç•¥/SOPï¼ˆSame origin policyï¼‰"></a>åŒæºç­–ç•¥/SOPï¼ˆSame origin policyï¼‰</h2><p>æ¥è‡ªç™¾åº¦çš„è§£é‡Šï¼š</p>
<blockquote>
<p>åŒæºç­–ç•¥ï¼ˆSame origin policyï¼‰æ˜¯ä¸€ç§çº¦å®šï¼Œå®ƒæ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ï¼ˆé˜²æ­¢CSRF/XSRFæ”»å‡»ï¼šè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰ã€‚ç°åœ¨æ‰€æœ‰æ”¯æŒJavaScript çš„æµè§ˆå™¨éƒ½ä¼šä½¿ç”¨è¿™ä¸ªç­–ç•¥ã€‚æ‰€è°“åŒæºæ˜¯æŒ‡ï¼ŒåŸŸåï¼Œåè®®ï¼Œç«¯å£ç›¸åŒã€‚</p>
</blockquote>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æµè§ˆå™¨åªèƒ½è¯·æ±‚åŒæºçš„å…¶ä»–åŸŸçš„èµ„æºï¼Œå³åŒæºçš„ç½‘é¡µæ‰èƒ½ç›¸äº’è·å–èµ„æºï¼Œè€Œä¸èƒ½è®¿é—®å…¶ä»–åŸŸçš„èµ„æºï¼›ä½†æ˜¯æœ‰ä¸€ä¸ªä¾‹å¤–ï¼ŒåŒæºç­–ç•¥ä¸ä¼šé˜»æ­¢åŠ¨æ€è„šæœ¬æ’å…¥åˆ°æ–‡æ¡£ä¸­ï¼›å…¶ä¸­ï¼Œ<strong><script>\</script></strong>æ˜¯å¼€æ”¾ç­–ç•¥ï¼›å½“webç½‘é¡µæ‰§è¡Œä¸€ä¸ªè„šæœ¬ä¹‹å‰ï¼Œä¼šæ£€æŸ¥æ˜¯å¦åŒæºï¼Œåªæœ‰åŒæºæ‰ä¼šè¢«æ‰§è¡Œï¼ŒéåŒæºåˆ™ä¼šè¢«æ‹’ç»è®¿é—®ã€‚<br>æˆªå–ç½‘ä¸Šçš„å›¾ç‰‡è¯´æ˜åŒæºï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-80411ea5e317ed19.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png"></p>
<h2 id="è·¨åŸŸ"><a href="#è·¨åŸŸ" class="headerlink" title="è·¨åŸŸ"></a>è·¨åŸŸ</h2><p>è·¨åŸŸå°±æ˜¯çªç ´åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œè·å–å…¶ä»–æºçš„èµ„æºã€‚<br>éåŒæºä¸»è¦æœ‰ä¸‰ç§è¡Œä¸ºä¼šå—åˆ°é™åˆ¶ï¼š</p>
<ul>
<li>Cookie,LocalStorageå’ŒIndexDBæ— æ³•è¯»å–ã€‚</li>
<li>DOMæ— æ³•è·å–ã€‚</li>
<li>Ajaxæ— æ³•è·å–ã€‚</li>
</ul>
<h4 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h4><p>JSONPæ˜¯å®ç°è·¨åŸŸçš„å¸¸ç”¨æ–¹æ³•ï¼Œä½†æ˜¯JSONPåªèƒ½å®ç°GETæ–¹æ³•ã€‚å®é™…ä¸Šæ˜¯æ˜¯åˆ©ç”¨äº†æµè§ˆå™¨å…è®¸è·¨åŸŸå¼•ç”¨JavaScriptèµ„æºï¼ˆscriptæ ‡ç­¾æ˜¯å¼€æ”¾ç­–ç•¥ï¼‰ã€‚</p>
<p>ä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­ï¼šæˆ‘ä»¬ä»360æµè§ˆå™¨é¦–é¡µçš„å¤©æ°”æŸ¥è¯¢è·å–å¤©æ°”æŸ¥è¯¢çš„å¼‚æ­¥è¯·æ±‚åœ°å€ï¼›è¿™é‡Œæˆ‘ä»¬å®ç°é€šè¿‡æœ¬åœ°localhostæœåŠ¡å™¨è·¨åŸŸè¯·æ±‚360çš„å¤©æ°”æŸ¥è¯¢ï¼Œæ¥è¯´æ˜JSONPæ€ä¹ˆå®ç°è·¨åŸŸã€‚<br>æˆ‘ä»¬è¯·æ±‚èµ„æºçš„åœ°å€ä¸ºï¼š<br><a href="https://cdn.weather.hao.360.cn/sed_api_weather_info.php?code=101280501&amp;v=2&amp;param=weather&amp;app=hao360&amp;_jsonp=__jsonp21__&amp;t=2521600" target="_blank" rel="noopener">https://cdn.weather.hao.360.cn/sed_api_weather_info.php?code=101280501&amp;v=2&amp;param=weather&amp;app=hao360&amp;_jsonp=__jsonp21__&amp;t=2521600</a><br>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€è¿™ä¸ªåœ°å€ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°è¿™æ ·çš„æ•°æ®ï¼š__jsonp21__({â€¦})ã€‚<br>è§£é‡Šï¼šJSONPè¿”å›çš„é€šå¸¸æ˜¯ä»¥å‡½æ•°çš„å½¢å¼è¿”å›ï¼Œå‰é¢è¿™ä¸ª__jsonp21__æ˜¯å‡½æ•°åï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­äº‹å…ˆå‡†å¤‡å¥½åç§°ä¸º__jsonp21__çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯¹è·¨åŸŸè¯·æ±‚åˆ°çš„æ•°æ®å°±æ˜¯æ”¾åœ¨è¿™ä¸ªå‡½æ•°ä¸­çš„ï¼Œç„¶ååŠ¨æ€åŠ è½½ä¸€ä¸ª<strong>script</strong>èŠ‚ç‚¹ï¼Œç›¸å½“äºåŠ¨æ€è¯»å–å¤–åŸŸçš„JavaScriptèµ„æºï¼Œæœ€åå°±ç­‰ç€æ¥æ”¶å›è°ƒäº†ã€‚</p>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code> // è¯·æ±‚çš„åœ°å€ä¸ºï¼šhttps://cdn.weather.hao.360.cn/sed_api_weather_info.php?code=101280501&amp;v=2&amp;param=weather&amp;app=hao360&amp;_jsonp=__jsonp21__&amp;t=2521600

function __jsonp21__(data) {   // å°†è¦å¤„ç†äº†çš„æ•°æ®æ”¾åœ¨è¿™ä¸ªå‡½æ•°ä¸­
    console.log(data);  // å¾—åˆ°çš„æ˜¯è·¨åŸŸè¯·æ±‚çš„æ•°æ®
    let myDiv = document.getElementById(&#39;myDiv&#39;)  
    myDiv.innerHTML = data.area
}
window.onload = function () { 
    let btn = document.getElementById(&#39;btn&#39;)
    btn.addEventListener(&#39;click&#39;, function () {  
        let url = &#39;https://cdn.weather.hao.360.cn/sed_api_weather_info.php?code=101280501&amp;v=2&amp;param=weather&amp;app=hao360&amp;_jsonp=__jsonp21__&amp;t=2521600&#39;
        let scriptTag = document.createElement(&#39;script&#39;)    // åŠ¨æ€åˆ›å»ºscriptæ ‡ç­¾ 
        scriptTag.setAttribute(&#39;src&#39;, url)      // å°†å…¶ä»–æºçš„åœ°å€è®¾ç½®ä¸ºåŠ¨æ€scriptçš„srcå±æ€§
        // console.log(scriptTag);  // å¾—åˆ°çš„æ˜¯scriptæ ‡ç­¾
        document.getElementsByTagName(&#39;body&#39;)[0].appendChild(scriptTag)  // å°†åŠ¨æ€åˆ›å»ºçš„scriptæ ‡ç­¾æ·»åŠ åˆ°htmlé¡µé¢ä¸­
    })
}
</code></pre><p>æ³¨æ„ï¼šæ•°æ®å¤„ç†çš„å‡½æ•°åè¦è·Ÿè·¨åŸŸè¿”å›çš„å‡½æ•°åä¸€æ ·ï¼Œè¿™æ ·æˆ‘ä»¬é€šè¿‡JSONPè¯·æ±‚æ•°æ®çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨æ‰èƒ½è¿”å›æ•°æ®ã€‚<br>æœ€ç»ˆç»“æœå¦‚ä¸‹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-df752a8458c616ff.gif?imageMogr2/auto-orient/strip" alt="è·¨åŸŸ1.gif"></p>
<p>å†å¥ä¸€ä¸ªä¾‹å­ï¼š<br>è¯·æ±‚åœ°å€æ˜¯<a href="http://api.money.126.net/data/feed/0000001,1399001?callback=refreshPrice" target="_blank" rel="noopener">http://api.money.126.net/data/feed/0000001,1399001?callback=refreshPrice</a></p>
<pre><code>function refreshPrice(data) { 
console.log(data);
}
window.onload = function () {  
    let scriptTag = document.createElement(&#39;script&#39;)
    let url = &#39;http://api.money.126.net/data/feed/0000001,1399001?callback=refreshPrice&#39;
    scriptTag.setAttribute(&#39;src&#39;, url)
    document.getElementsByTagName(&#39;body&#39;)[0].appendChild(scriptTag)
}
</code></pre><h2 id="Ajaxï¼ˆJQueryå®ç°ï¼‰"><a href="#Ajaxï¼ˆJQueryå®ç°ï¼‰" class="headerlink" title="Ajaxï¼ˆJQueryå®ç°ï¼‰"></a>Ajaxï¼ˆJQueryå®ç°ï¼‰</h2><p>åœ¨JQueryä¸­ï¼Œå®ç°Ajaxä¸»è¦æ˜¯ç”±<strong>$.ajax({â€¦})</strong>æ–¹æ³•å®ç°ã€‚æ–¹æ³•çš„å¸¸ç”¨å‚æ•°æœ‰ï¼š</p>
<ul>
<li>asyncï¼šæ˜¯å¦å®ç°å¼‚æ­¥åŠ è½½ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæ˜¯trueã€‚</li>
<li>typeï¼šGETæˆ–è€…POSTã€‚</li>
<li>urlï¼šå‘é€è¯·æ±‚çš„åœ°å€ã€‚</li>
<li>timeoutï¼šè®¾ç½®è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ã€‚</li>
<li>successï¼šè¯·æ±‚æˆåŠŸåçš„å›è°ƒå‡½æ•°ã€‚</li>
<li>errorï¼šè¯·æ±‚å¤±è´¥åçš„å›è°ƒå‡½æ•°ã€‚</li>
<li>jsonpï¼šåœ¨ä¸€ä¸ªJSONPè¯·æ±‚ä¸­é‡å†™å›è°ƒå‡½æ•°çš„åå­—ï¼Œé»˜è®¤ä¸ºcallbackï¼Œç”¨æ¥é‡æ–°å‘½åå›è°ƒæˆ‘ä»¬è·¨åŸŸè¯·æ±‚æ—¶å€™çš„å‡½æ•°åå­—ã€‚è¿™ä¸ªå€¼ç”¨æ¥æ›¿ä»£åœ¨ â€œcallback=?â€ è¿™ç§ GET æˆ– POST è¯·æ±‚ä¸­ URL å‚æ•°é‡Œçš„ â€œcallbackâ€ éƒ¨åˆ†ï¼Œæ¯”å¦‚ {jsonp:â€™onJsonPLoadâ€™} ä¼šå¯¼è‡´å°† â€œonJsonPLoad=?â€ ä¼ ç»™æœåŠ¡å™¨ã€‚</li>
<li>jsonpCallbackï¼šä¸ºJSONPè¯·æ±‚æŒ‡å®šä¸€ä¸ªå›è°ƒå‡½æ•°åã€‚ </li>
<li>dataTypeï¼šé¢„æœŸæœåŠ¡å™¨è¿”å›çš„æ•°æ®ç±»å‹ã€‚ä¸æŒ‡å®šçš„è¯ï¼ŒJQueryhiè‡ªåŠ¨åˆ¤æ–­ã€‚â€xmlâ€: è¿”å› XML æ–‡æ¡£ï¼Œå¯ç”¨jQueryå¤„ç†ã€‚</li>
</ul>
<blockquote>
<p>â€œhtmlâ€: è¿”å›çº¯æ–‡æœ¬ HTML ä¿¡æ¯ï¼›åŒ…å«çš„ script æ ‡ç­¾ä¼šåœ¨æ’å…¥ dom æ—¶æ‰§è¡Œï¼›â€scriptâ€: è¿”å›çº¯æ–‡æœ¬JavaScriptä»£ç ã€‚ä¸ä¼šè‡ªåŠ¨ç¼“å­˜ç»“æœã€‚é™¤éè®¾ç½®äº†â€cacheâ€å‚æ•°ã€‚æ³¨æ„ï¼šåœ¨è¿œç¨‹è¯·æ±‚æ—¶(ä¸åœ¨åŒä¸€ä¸ªåŸŸä¸‹)ï¼Œæ‰€æœ‰POSTè¯·æ±‚éƒ½å°†è½¬ä¸ºGETè¯·æ±‚ã€‚ï¼ˆå› ä¸ºå°†ä½¿ç”¨DOMçš„ scriptæ ‡ç­¾æ¥åŠ è½½ï¼‰ï¼›â€jsonâ€: è¿”å›JSONæ•°æ®ï¼›â€jsonpâ€: JSONPæ ¼å¼ã€‚ä½¿ç”¨ JSONP å½¢å¼è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¦‚ â€œmyurl?callback=?â€ jQuery å°†è‡ªåŠ¨æ›¿æ¢ ? ä¸ºæ­£ç¡®çš„å‡½æ•°åï¼Œä»¥æ‰§è¡Œå›è°ƒå‡½æ•°ï¼›â€textâ€: è¿”å›çº¯æ–‡æœ¬å­—ç¬¦ä¸²ã€‚</p>
</blockquote>
<p>ç”¨JQueryå®ç°åŒæºçš„Ajaxè¯·æ±‚ï¼š</p>
<pre><code>$(function () {  
    $(&#39;button&#39;).on(&#39;click&#39;, function () {  
        $.ajax({
            url: &#39;./server.txt&#39;,    // è¯·æ±‚åœ°å€
            type: &#39;GET&#39;,    // è¯·æ±‚æ–¹å¼
            async: true,    // æ˜¯å¦å¼‚æ­¥
            success: function (data) {  
                console.log(data);
            }   // è¯·æ±‚æˆåŠŸåæ‰§è¡Œçš„å‡½æ•°
        })
    })
})
</code></pre><p>å®ç°ç»“æœå¦‚ä¸‹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-b1fcb9ed574a8a24.gif?imageMogr2/auto-orient/strip" alt="å¼‚æ­¥2.gif"></p>
<p>ç”¨JQueryå®ç°éåŒæºçš„JSONPè·¨åŸŸè¯·æ±‚ï¼š</p>
<pre><code>$(function () {  
$(&#39;button&#39;).on(&#39;click&#39;, function () {  
    $.ajax({
        url: &#39;https://cdn.weather.hao.360.cn/sed_api_weather_info.php?code=101280501&amp;v=2&amp;param=weather&amp;app=hao360&amp;_jsonp=__jsonp21__&amp;t=2521600&#39;,
        type: &#39;GET&#39;,
        async: true,
        dataType: &#39;jsonp&#39;,
        jsonp: &#39;_jsonp&#39;,
        jsonpCallback: &#39;__jsonp21__&#39;,
        success: function (data) {  
            console.log(data);
            $(&#39;#myDiv&#39;).html(data.area)
        },
        error: function (err) {  
            console.log(err);
        }
    })
})
})
</code></pre><p>å®ç°ç»“æœå¦‚ä¸‹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/659084-14e8fc745c21ab00.gif?imageMogr2/auto-orient/strip" alt="è·¨åŸŸ2.gif"></p>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>  

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://avatars0.githubusercontent.com/u/17139306?s=460&v=4" alt="Ertsul">
            
              <p class="site-author-name" itemprop="name">Ertsul</p>
              <p class="site-description motion-element" itemprop="description">Ertsul's Blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Ertsul" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="179445828@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-globe"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ertsul</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
