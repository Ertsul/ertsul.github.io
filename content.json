{"meta":{"title":"Ertsul","subtitle":"","description":"Ertsul's Blog","author":"Ertsul","url":"https://ertsul.github.io"},"pages":[{"title":"about","date":"2019-02-16T14:42:19.000Z","updated":"2019-02-16T15:13:21.129Z","comments":true,"path":"about/index.html","permalink":"https://ertsul.github.io/about/index.html","excerpt":"","text":"Stay Hungry, stay foolish."},{"title":"åˆ†ç±»","date":"2014-12-22T04:39:04.000Z","updated":"2019-11-11T15:17:06.936Z","comments":true,"path":"categories/index.html","permalink":"https://ertsul.github.io/categories/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2019-11-11T15:20:47.000Z","updated":"2019-11-11T15:32:45.298Z","comments":true,"path":"tags/index.html","permalink":"https://ertsul.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"svg sprite","slug":"svg-sprite","date":"2020-08-09T06:33:26.000Z","updated":"2020-08-09T06:35:05.240Z","comments":true,"path":"2020/08/09/svg-sprite/","link":"","permalink":"https://ertsul.github.io/2020/08/09/svg-sprite/","excerpt":"","text":"svg spriteä»‹ç»svg sprite ä¸è·Ÿä¼ ç»Ÿå›¾ç‰‡é›ªç¢§å›¾ä¸€æ ·æ˜¯è®¸å¤šå°å›¾çš„é›†åˆã€‚å®ƒæ˜¯åŸºäº svgï¼Œæ˜¯å¾ˆå¤š svg çš„é›†åˆï¼Œæ¯ä¸ª svg å…ƒç´ éƒ½åŒ…å«åœ¨æ ‡ç­¾&lt;symbol id=&quot;xxxx&quot;&gt;&lt;/symbol&gt;ï¼Œè¿™æ ·å°±ä¸ç”¨åƒå›¾ç‰‡é›ªç¢§å›¾ä¸€æ ·å»è¯·æ±‚ä¸€å¼ å¤§å›¾ã€‚å¦‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ª sprite.svg æ–‡ä»¶ï¼š &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot;&gt; &lt;defs&gt; &lt;symbol t=&quot;1595505780153&quot; class=&quot;icon&quot; viewBox=&quot;0 0 1024 1024&quot; version=&quot;1.1&quot; id=&quot;icon-logo&quot;&gt; &lt;path d=&quot;M680.97024 343.06048A238.26432 238.26432 0 0 0 512 273.05984c-131.93216 0-238.92992 106.97728-238.92992 238.92992S380.06784 750.94016 512 750.94016c120.29952 0 219.5968-89.05728 236.19584-204.81024H512v-68.27008h307.2v34.12992a313.1392 313.1392 0 0 1-1.9968 34.14016C800.2048 699.74016 670.12608 819.21024 512 819.21024c-169.66656 0-307.2-137.53344-307.2-307.22048 0-169.64608 137.53344-307.2 307.2-307.2 84.82816 0 161.62816 34.39616 217.23136 89.99936l-48.26112 48.27136z&quot; p-id=&quot;3177&quot;&gt;&lt;/path&gt; &lt;/symbol&gt; &lt;/defs&gt; &lt;/svg&gt; å½“éœ€è¦æ–°å¢ svg icon çš„æ—¶å€™ï¼Œåªéœ€è¦æ·»åŠ æ–°çš„ svg åœ¨ symbol ä¸Šå°±è¡Œï¼Œæ¯ä¸ª symbol éƒ½æœ‰ä¸€ä¸ª idï¼Œç”¨äºä½¿ç”¨çš„æ—¶å€™è°ƒç”¨ã€‚ ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦ &lt;use xlink:href=&quot;#xxxx&quot;&gt;&lt;/use&gt; æ ‡ç­¾è¿›è¡Œè°ƒç”¨ã€‚å½“ sprite.svg ç‹¬ç«‹æŠ½ç¦»æˆä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œuse æ ‡ç­¾çš„æ ¼å¼ä¸ºï¼š&lt;use xlink:href=&quot;/path/sprite.svg#xxxx&quot;&gt;&lt;/use&gt;ã€‚å¦‚ï¼šä½¿ç”¨ä¸Šé¢çš„ logo iconï¼Œæ ¼å¼ä¸ºï¼š &lt;svg width=&quot;40&quot; height=&quot;40&quot;&gt; &lt;use xlink:href=&quot;/svg/sprite.svg#icon-logo&quot; x=&quot;0&quot; y=&quot;0&quot; /&gt; &lt;/svg&gt; svg sprite æ›´åŠ æ–¹ä¾¿çš„æ˜¯ï¼Œå¯ä»¥é€šè¿‡ css å±æ€§fill:color;ç›´æ¥æ›´æ”¹é¢œè‰²ï¼š ç»“åˆ vue + webpack ä½¿ç”¨ä¸»è¦æ˜¯ä½¿ç”¨ä¸¤ä¸ª loader ï¼š svg-sprite-loader svgo-loader åœ¨ vue.config.jsä¸­æ·»åŠ é…ç½®é…ç½®ï¼š ä¸æŠ½ç¦» sprite.svg æ–‡ä»¶ä¸ºç‹¬ç«‹çš„æ–‡ä»¶ï¼ˆé›†æˆåœ¨ html æ–‡ä»¶ä¸­ï¼‰ï¼Œä¸€èˆ¬ç”¨äºå¼€å‘ç¯å¢ƒã€‚ vue.config.js é…ç½®ï¼š chainWebpack(config) { config.module.rules.delete(&quot;svg&quot;); config.module .rule(&quot;svg&quot;) .test(/\\.svg$/) .use(&quot;svg-sprite&quot;) .loader(&quot;svg-sprite-loader&quot;) .options({ extract: false, // é»˜è®¤ä¸æŠ½ç¦» sprite.svg ä¸ºç‹¬ç«‹çš„æ–‡ä»¶ // spriteFilename: (svgPath) =&gt; `sprite${svgPath.substr(-4)}`, esModule: false, }) .end() } å°è£… svgIcon ç»„ä»¶ï¼š &lt;template&gt; &lt;div class=&quot;svg-icon&quot;&gt; &lt;svg :style=&quot;styleObj&quot; :viewBox=&quot;svgCtx.viewBox&quot;&gt; &lt;use :id=&quot;svgCtx.id&quot; :xlink:href=&quot;&#39;#&#39; + svgCtx.id&quot;/&gt; &lt;/svg&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { props: { width: { type: String, default: &quot;40px&quot; }, height: { type: String, default: &quot;40px&quot; }, color: { type: String, default: &quot;&quot; }, svg: { type: Object, default: () =&gt; {}, required: true } }, computed: { styleObject() { // æ ·å¼å¯¹è±¡ let styleObj = {}; this.width &amp;&amp; (styleObj.width = this.width); this.height &amp;&amp; (styleObj.height = this.height); this.color &amp;&amp; (styleObj.fill = this.color); return styleObj; }ï¼Œ svgCtx() { // å…¼å®¹ import å’Œ require ä¸¤ç§æ¨¡å¼ï¼ˆrequire æ¨¡å¼ä¸‹é»˜è®¤çš„ svg å¯¹è±¡åœ¨ default ä¸­ï¼‰ // return this.svg.hasOwnProperty(&quot;default&quot;) ? this.svg.default : this.svg; return this.svg.default || this.svg; } } }; &lt;/script&gt; ç»„ä»¶ä½¿ç”¨ï¼š &lt;template&gt; &lt;div class=&quot;svg-container&quot;&gt; &lt;svgIcon :svg=&quot;logoSvg&quot;&gt;&lt;/svgIcon&gt; &lt;svgIcon :svg=&quot;playSvg&quot;&gt;&lt;/svgIcon&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import svgIcon from &quot;../../src/components/svgIcon&quot; import logoSvg from &quot;../../src/assets/logo.svg&quot; import playSvg from &quot;../../src/assets/play.svg&quot; export default { components: {svgIcon}, data() { return { logoSvg: logoSvg, playSvg: playSvg }; }, }; &lt;/script&gt; æ•ˆæœï¼š æŠ½ç¦» sprite.svg æ–‡ä»¶ä¸ºç‹¬ç«‹çš„æ–‡ä»¶ï¼Œä¸€èˆ¬ç”¨æˆ·ç”Ÿäº§ç¯å¢ƒï¼š ä¿®æ”¹ vue.config.js é…ç½®ï¼š config.module.rules.delete(&quot;svg&quot;); config.module .rule(&quot;svg&quot;) .test(/\\.svg$/) .use(&quot;svg-sprite&quot;) .loader(&quot;svg-sprite-loader&quot;) .options({ extract: true, // spriteFilename: (svgPath) =&gt; `sprite${svgPath.substr(-4)}`, esModule: false, }) .end() config.plugin(&quot;svg-sprite&quot;).use(require(&quot;svg-sprite-loader/plugin&quot;)); // æŠ½ç¦» sprite.svg å¿…éœ€ ä¿®æ”¹ svg ç»„ä»¶ï¼š &lt;template&gt; &lt;div class=&quot;svg-icon&quot;&gt; &lt;svg :style=&quot;styleObject&quot; :viewBox=&quot;svgCtx.viewBox&quot;&gt; &lt;!-- æŒ‡å‘æ‰“åŒ…åæŠ½ç¦»çš„ sprite.svg æ–‡ä»¶ --&gt; &lt;use :id=&quot;svgCtx.id&quot; :xlink:href=&quot;&#39;../dist/sprite.svg#&#39; + svgCtx.id&quot;/&gt; &lt;/svg&gt; &lt;/div&gt; &lt;/template&gt; å…¶ä»–ä¸å˜ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š æ€è€ƒï¼šæ€ä¹ˆé€šè¿‡ç¯å¢ƒå˜é‡å°†ç”Ÿäº§æ¨¡å¼å’Œå¼€å‘ç¯å¢ƒç»“åˆèµ·æ¥ï¼Ÿ ç»“åˆå¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼ä¸»è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š vue.config.js ä¸­çš„ extract é…ç½®ï¼šfalse å’Œ trueï¼› svgIcon ä¸­ xlink:href æŒ‡å‘é—®é¢˜ã€‚ é€šè¿‡ç¯å¢ƒå˜é‡å³å¯ã€‚ ä¿®æ”¹ vue.config.jsï¼š const ifProd = process.env.NODE_ENV === &#39;production&#39;; // ... extract: ifProd, // ... ä¿®æ”¹ svgIcon ç»„ä»¶ï¼š &lt;template&gt; &lt;div class=&quot;svg-icon&quot;&gt; &lt;svg :style=&quot;styleObject&quot; :viewBox=&quot;svgCtx.viewBox&quot;&gt; &lt;use :id=&quot;svgCtx.id&quot; :xlink:href=&quot;xlinkHref&quot;/&gt; &lt;/svg&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; // ... xlinkHref() { const ifProd = process.env.NODE_ENV === &#39;production&#39;; const svgCtxId = this.svgCtx.id; // ç”Ÿäº§ç¯å¢ƒæŒ‡å‘æ‰“åŒ…åæŠ½ç¦»çš„ sprite.svg æ–‡ä»¶ // å¼€å‘ç¯å¢ƒä¸æŠ½ç¦»ç‹¬ç«‹çš„ sprite.svg æ–‡ä»¶ return ifProd ? `../dist/sprite.svg#${svgCtxId}` : `#${svgCtxId}`; } //... &lt;/script&gt; é—®é¢˜ç”¨äº† svg-sprite-loader ä¹‹åï¼Œä¸èƒ½é€šè¿‡ CSS å±æ€§ fill:color;æ›´æ”¹é¢œè‰²ã€‚æ˜¯å› ä¸ºè¿™ä¸ª loader é»˜è®¤ç»™ svg æ·»åŠ äº† fill:none; å±æ€§ï¼Œå¯¼è‡´æ›´æ”¹ä¸äº†ã€‚ è§£å†³åŠæ³•ï¼šé€šè¿‡svgo-loader è§£å†³ã€‚é€šè¿‡è¿™ä¸ª loader æˆ‘ä»¬å¯ä»¥æ·»åŠ å¾ˆå¤šæ’ä»¶ï¼Œè¿™äº›æ’ä»¶æ˜¯åŸºäº svgoï¼Œsvgo åœ¨å®‰è£… svgo-loader çš„æ—¶å€™è‡ªåŠ¨å®‰è£…äº†ã€‚ä¸‹é¢æ˜¯ svgo çš„æˆªå›¾ï¼š å›å½’æ­£é¢˜ï¼Œä¿®æ”¹ vue.config.js é…ç½®ï¼Œå»é™¤é»˜è®¤åŠ ä¸Šçš„ fill:none; å±æ€§ï¼š // ... .use(&quot;svgo-loader&quot;) .loader(&quot;svgo-loader&quot;) .options({ plugins: [ { removeAttrs: { attrs: &quot;(fill|stroke)&quot;, } }, ], }) .end(); // ... å°±è¿™æ ·ï¼Œé—®é¢˜è§£å†³äº†~","categories":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/categories/frontEnd/"},{"name":"Vue","slug":"frontEnd/Vue","permalink":"https://ertsul.github.io/categories/frontEnd/Vue/"}],"tags":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/tags/frontEnd/"},{"name":"Vue","slug":"Vue","permalink":"https://ertsul.github.io/tags/Vue/"}]},{"title":"å®ç°ä¸€ä¸ªç®€æ˜“çš„webpack","slug":"å®ç°ä¸€ä¸ªç®€æ˜“çš„webpack","date":"2020-03-08T06:03:54.000Z","updated":"2020-03-08T08:11:02.441Z","comments":true,"path":"2020/03/08/å®ç°ä¸€ä¸ªç®€æ˜“çš„webpack/","link":"","permalink":"https://ertsul.github.io/2020/03/08/å®ç°ä¸€ä¸ªç®€æ˜“çš„webpack/","excerpt":"","text":"åˆ†æwebpack çš„å®˜æ–¹è§£é‡Šå¦‚ä¸‹ï¼š æœ¬è´¨ä¸Šï¼Œwebpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å·¥å…·ã€‚å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨æ„å»ºä¸€ä¸ª ä¾èµ–å›¾(dependency graph)ï¼Œæ­¤ä¾èµ–å›¾ä¼šæ˜ å°„é¡¹ç›®æ‰€éœ€çš„æ¯ä¸ªæ¨¡å—ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚ ç®€å•ç†è§£ï¼Œwebpack å°±æ˜¯ä»å…¥å£å¼€å§‹ï¼Œåˆ†æå„ä¸ªæ¨¡å—ä¹‹é—´çš„ç›¸äº’ä¾èµ–å…³ç³»ï¼Œæœ€åå°†è¿™äº›ä¾èµ–æ¨¡å—ç”Ÿæˆ bundleã€‚æ‰€ä»¥è¦æ‰‹åŠ¨å®ç°ä¸€ä¸ª webpackï¼Œéœ€è¦è§£å†³ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š è·å–å…¥å£æ–‡ä»¶å’Œå‡ºå£æ–‡ä»¶çš„è·¯å¾„ï¼› åˆ†æå…¥å£æ–‡ä»¶çš„ç›¸å…³æ¨¡å—ä¾èµ–ï¼› é€’å½’åˆ†æå…¶ä»–æ¨¡å—çš„ç›¸å…³æ¨¡å—ä¾èµ–ï¼› ç”Ÿæˆæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼› è§£å†³æµè§ˆå™¨ä¸èƒ½è¯†åˆ« require çš„é—®é¢˜ï¼Œç”Ÿæˆ bundleã€‚ å®ç°æ–‡ä»¶ç›®å½•ç»“æ„â””â”€â”€â”€lib ç›®å½• | â””â”€â”€â”€compiler.js // ä¸»è¦ webpack ç±»ï¼Œå­˜æ”¾ä¸»è¦é€»è¾‘ï¼Œå¦‚ï¼šè°ƒç”¨ parser.js ç›¸å…³æ–¹æ³•ï¼Œç”Ÿæˆä¾èµ–å…³ç³»å›¾è°±å’Œ bundleã€‚ | â””â”€â”€â”€parser.js // è·å– ASTã€ä¾èµ–æ¨¡å—å’Œæœ€åç”Ÿæˆçš„ code |â”€â”€â”€src | â””â”€â”€â”€index.js // å…¥å£æ–‡ä»¶ | â””â”€â”€â”€module1.js // æ¨¡å— 1ï¼Œè¢« index.js å¼•ç”¨ | â””â”€â”€â”€module1-1.js // æ¨¡å— 1-1ï¼Œè¢« module1.js å¼•ç”¨ â””â”€â”€â”€webpack.js // node æ‰§è¡Œæ–‡ä»¶ â””â”€â”€â”€webpack.config.js // webpack é…ç½®ä¿¡æ¯ â””â”€â”€â”€node_modules â””â”€â”€â”€package.json webpack.config.js const path = require(&#39;path&#39;); module.exports = { entry: &#39;./src/index.js&#39;, output: { filename: &#39;bundle.js&#39;, path: path.resolve(__dirname, &#39;./dist&#39;) } } webpack.js è¯¥æ–‡ä»¶ä½œç”¨æ˜¯æœ€åé€šè¿‡ node webpack.js å³å¯æ‰§è¡Œ webpack ä»£ç é€»è¾‘ï¼Œæ•…ï¼šéœ€è¦å°† lib/compiler.js å¼•è¿›å¹¶ä¸”æ‰§è¡Œï¼Œä¼ å…¥ webpack çš„é…ç½®å³å¯ã€‚ const Compiler = require(&quot;./lib/compiler&quot;); const options = require(&quot;./webpack.config.js&quot;); new Compiler(options).run(); åˆå§‹åŒ– Compiler ç±»module.exports = class Compiler { constructor(options) { this.entry = options.entry; this.output = options.output; this.modules = []; // å­˜æ”¾æ‰€æœ‰ä¾èµ–æ¨¡å— } /** * ä¸»è¦æ‰§è¡Œå‡½æ•° */ run() { // ... } /** * è·å–å•ä¸ªæ–‡ä»¶çš„ä¾èµ–å…³ç³»ã€æ–‡ä»¶åå’Œæ‰§è¡Œä»£ç  */ build(entryFile) { // ... } /** * è·å– bundle */ generateBundle() { // ... } } å®ç° parser.jsè¯¥æ–‡ä»¶ä¸»è¦å®ç°ç”±ä¸‰ç‚¹ï¼š è·å– ASTï¼› è·å–æ–‡ä»¶çš„æ‰€æœ‰ä¾èµ–ï¼› ç”Ÿæˆæ‰§è¡Œä»£ç ã€‚ åœ¨ index.js ä¸­å¼•è¿›ä½¿ç”¨äº† module1.js æ¨¡å—ï¼Œé‚£ä¹ˆ index.js çš„ä¾èµ–æ¨¡å—å°±æ˜¯ module1.jsï¼›åœ¨ module1.js ä¸­å¼•è¿›ä½¿ç”¨äº† module1-1.js æ¨¡å—ï¼Œé‚£ä¹ˆ module1.js çš„ä¾èµ–æ¨¡å—å°±æ˜¯ module1-1.jsã€‚æƒ³è¦è·å¾—æ¨¡å—çš„ç›¸å…³ä¾èµ–æ¨¡å—ï¼Œéœ€è¦å€ŸåŠ© ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ï¼Œä» AST ä¸­æˆ‘ä»¬å¯ä»¥è·å¾—æ¨¡å—çš„ä¾èµ–ã€‚å®ç°é€»è¾‘å¦‚ä¸‹ï¼š è·å–æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œé€šè¿‡ @babel/parser å°†ç›®æ ‡æ–‡ä»¶ä¸­çš„ä»£ç è½¬åŒ–ä¸º ASTï¼› é€šè¿‡ @babel/traverse åˆ†æ AST ä¸­çš„ ImportDeclaration æ–¹æ³•ï¼Œå¯ä»¥å¾—åˆ°è¯¥æ¨¡å—çš„æ‰€æœ‰ä¾èµ–æ¨¡å—ï¼› é€šè¿‡ @babel/core ä¸­çš„ transformFromAst å¯ä»¥å°† AST è½¬åŒ–ä¸º js ä»£ç ã€‚ æœ€åæ‰€æœ‰çš„ä»£ç å¦‚ä¸‹ï¼š const fs = require(&quot;fs&quot;); const path = require(&quot;path&quot;); const parser = require(&quot;@babel/parser&quot;); const traverse = require(&quot;@babel/traverse&quot;).default; const { transformFromAst } = require(&quot;@babel/core&quot;); module.exports = { // åˆ†ææ¨¡å—ï¼Œè·å– ast getAst: fileName =&gt; { const content = fs.readFileSync(fileName, &quot;utf-8&quot;); const ast = parser.parse(content, { sourceType: &quot;module&quot; // module æ¨¡å—æ¨¡å¼ }); return ast; }, // è·å–ä¾èµ– getDependencies: (ast, fileName) =&gt; { const dependencies = {}; // key: ç›¸å¯¹è·¯å¾„ value: æ ¹è·¯å¾„ traverse(ast, { ImportDeclaration({ node }) { // dependencies.push(node.source.value); // æå– import ä¾èµ–çš„ç›¸å¯¹è·¯å¾„ const dirname = path.dirname(fileName); let newPath = path.join(dirname, node.source.value); // æ‹¼æ¥è·¯å¾„ if (!/\\.js$/.test(newPath)) { // å…¼å®¹è§£å†³ window æ–‡ä»¶è·¯å¾„ä¸å¸¦åç¼€é—®é¢˜ newPath += &quot;.js&quot;; } dependencies[node.source.value] = newPath; } }); return dependencies; }, // è½¬æ¢ä»£ç  getCode: ast =&gt; { const { code } = transformFromAst(ast, null, { presets: [&quot;@babel/preset-env&quot;] }); return code; } }; å®Œæˆ compiler.js build()ã€‚è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ä½œç”¨ï¼šè·å–å•ä¸ªæ–‡ä»¶çš„ ASTã€æ‰€æœ‰ä¾èµ–æ¨¡å—çš„è·¯å¾„å’Œæ‰§è¡Œä»£ç ã€‚ build(entryFile) { const ast = getAst(entryFile); const dependencies = getDependencies(ast, entryFile); const code = getCode(ast); return { fileName: entryFile, dependencies, code }; } run()ã€‚è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ä½œç”¨ï¼š ä»å…¥å£æ–‡ä»¶å¼€å§‹è°ƒç”¨ build æ–¹æ³•ï¼ˆè·å–å•ä¸ªæ–‡ä»¶çš„ ASTã€æ‰€æœ‰ä¾èµ–æ¨¡å—çš„è·¯å¾„å’Œæ‰§è¡Œä»£ç ï¼‰ï¼› å°† build æ–¹æ³•è¿”å›çš„è·å–å•ä¸ªæ–‡ä»¶çš„ ASTã€æ‰€æœ‰ä¾èµ–æ¨¡å—çš„è·¯å¾„å’Œæ‰§è¡Œä»£ç å­˜è¿› modules æ•°ç»„ï¼› å¾ªç¯éå† modules æ•°ç»„ï¼Œåˆ¤æ–­æ¯ä¸ªæ•°ç»„å•å…ƒæ˜¯å¦æœ‰è‡ªå·±çš„ä¾èµ–ï¼ˆdependenciesæ˜¯å¦ä¸ºç©º ï¼‰ï¼Œæœ‰åˆ™ç»§ç»­è°ƒç”¨ build æ–¹æ³•ï¼› æ•°ç»„ç»“æ„è½¬åŒ–ä¸º key - value æ ¼å¼ï¼Œkey æ˜¯æ¯ä¸ªæ¨¡å—çš„ç›¸å¯¹è·¯å¾„ï¼Œvalue æ˜¯ build è¿”å›çš„ç»“æœã€‚ run() { const info = this.build(this.entry); this.modules.push(info); for (let i = 0; i &lt; this.modules.length; i++) { const item = this.modules[i]; const { dependencies } = item; if (dependencies) { for (let j in dependencies) { this.modules.push(this.build(dependencies[j])); } } } // è½¬æ¢æ•°æ®ç»“æ„ï¼šæ•°ç»„ =&gt; å¯¹è±¡ const obj = {}; this.modules.forEach(item =&gt; { obj[item.fileName] = { dependencies: item.dependencies, code: item.code }; }); // ç”Ÿæˆä»£ç æ–‡ä»¶ this.generateBundle(obj); } generateBundle()ã€‚é‡å†™ require æ–¹æ³•ï¼Œç”Ÿæˆ bundleã€‚ é€šè¿‡å°† run æœ€åç”Ÿæˆçš„ key - value å¯¹è±¡è¿›è¡Œè§£æï¼Œé€šè¿‡ eval æ‰§è¡Œä»£ç ï¼Œé‡åˆ° require() æ–¹æ³•ï¼Œè°ƒç”¨æœ¬åœ°çš„ localRequire() æ–¹æ³•ã€‚ generateBundle(code) { // è·å–è¾“å‡ºä¿¡æ¯ const filePath = path.join(this.output.path, this.output.filename); // dist è·¯å¾„ const newCode = JSON.stringify(code); const bundle = `(function(graph){ function require(module) { function localRequire(relativePath) { return require(graph[module].dependencies[relativePath]); } var exports = {}; (function(require, exports, code) { eval(code) })(localRequire, exports, graph[module].code) return exports; } require(&#39;${this.entry}&#39;); })(${newCode})`; fs.writeFileSync(filePath, bundle, &quot;utf-8&quot;); } æµ‹è¯•æ‰§è¡Œ node webpack.jsï¼Œè·å–ç”Ÿæˆçš„ bundle.jsã€‚ (function(graph){ function require(module) { function localRequire(relativePath) { return require(graph[module].dependencies[relativePath]); } var exports = {}; (function(require, exports, code) { eval(code) })(localRequire, exports, graph[module].code) return exports; } require(&#39;./src/index.js&#39;); })({&quot;./src/index.js&quot;:{&quot;dependencies&quot;:{&quot;./module1.js&quot;:&quot;src\\\\module1.js&quot;},&quot;code&quot;:&quot;\\&quot;use strict\\&quot;;\\n\\nvar _module = require(\\&quot;./module1.js\\&quot;);\\n\\ndocument.write((0, _module.module1)());&quot;},&quot;src\\\\module1.js&quot;:{&quot;dependencies&quot;:{&quot;./module1-1.js&quot;:&quot;src\\\\module1-1.js&quot;},&quot;code&quot;:&quot;\\&quot;use strict\\&quot;;\\n\\nObject.defineProperty(exports, \\&quot;__esModule\\&quot;, {\\n value: true\\n});\\nexports.module1 = module1;\\n\\nvar _module = require(\\&quot;./module1-1.js\\&quot;);\\n\\nfunction module1() {\\n return &#39;module1&#39; + (0, _module.module2)();\\n}&quot;},&quot;src\\\\module1-1.js&quot;:{&quot;dependencies&quot;:{},&quot;code&quot;:&quot;\\&quot;use strict\\&quot;;\\n\\nObject.defineProperty(exports, \\&quot;__esModule\\&quot;, {\\n value: true\\n});\\nexports.module2 = module2;\\n\\nfunction module2() {\\n return &#39;module2&#39;;\\n}&quot;}}) æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š","categories":[],"tags":[{"name":"webpack","slug":"webpack","permalink":"https://ertsul.github.io/tags/webpack/"}]},{"title":"å°ç¨‹åºæ–‡ä»¶ç”Ÿæˆè„šæœ¬","slug":"å°ç¨‹åºæ–‡ä»¶ç”Ÿæˆè„šæœ¬","date":"2020-02-06T05:59:43.000Z","updated":"2020-02-06T06:03:41.392Z","comments":true,"path":"2020/02/06/å°ç¨‹åºæ–‡ä»¶ç”Ÿæˆè„šæœ¬/","link":"","permalink":"https://ertsul.github.io/2020/02/06/å°ç¨‹åºæ–‡ä»¶ç”Ÿæˆè„šæœ¬/","excerpt":"","text":"ç—›ç‚¹å¼€å‘å¾®ä¿¡å°ç¨‹åºï¼Œå½“éœ€è¦æ–°å¢é¡µé¢æˆ–è€…ç»„ä»¶çš„æ—¶å€™ï¼Œéœ€è¦æ‰‹åŠ¨å¢åŠ ä¸€ä¸ªç›®å½•å’Œå››ä¸ªæ–‡ä»¶ã€‚å¦‚æœæ˜¯é¡µé¢çš„è¯ï¼Œè¿˜éœ€è¦å°†é¡µé¢è·¯ç”±æ·»åŠ åˆ° app.json æ–‡ä»¶ä¸­ã€‚è¿™æ ·ä¸€æ—¦å¢åŠ é¡µé¢æˆ–è€…ç»„ä»¶å¤šäº†ï¼Œæ˜¯ååˆ†ç¹ççš„ã€‚é‡å¤å·¥ä½œç”¨è„šæœ¬æ›¿ä»£ã€‚ æŠ€æœ¯node.js æµç¨‹ è¯»å–å‘½ä»¤è¡Œå‚æ•°ï¼Œè·å–ç›®å½•ç±»å‹å’Œç›®å½•åç§°ã€‚ ç”Ÿæˆç›®å½•å’Œå››ä¸ªæ–‡ä»¶ã€‚ å¦‚æœæ˜¯é¡µé¢ç±»å‹ï¼Œåˆ™å°†é¡µé¢è·¯ç”±æ·»åŠ åˆ° app.json æ–‡ä»¶ä¸­ã€‚ ä½¿ç”¨ å®‰è£…ä¾èµ–ï¼šnpm installã€‚ é“¾æ¥ç”Ÿæˆæœ¬åœ°å‘½ä»¤ï¼šnpm linkã€‚ å‘½ä»¤ make-mp-file -t page -n name make-mp-file -t component -n name å‚æ•° -t æˆ– â€“typeï¼špage æˆ–è€… component -n æˆ– â€“nameï¼šç»„ä»¶æˆ–è€…é¡µé¢åç§°ã€‚ github åœ°å€é“¾æ¥åœ°å€","categories":[{"name":"minapp","slug":"minapp","permalink":"https://ertsul.github.io/categories/minapp/"}],"tags":[{"name":"minapp","slug":"minapp","permalink":"https://ertsul.github.io/tags/minapp/"}]},{"title":"å¹¿åº¦ä¼˜å…ˆæœç´¢ BFS å’Œæ·±åº¦ä¼˜å…ˆæœç´¢ DFS","slug":"å¹¿åº¦ä¼˜å…ˆæœç´¢-BFS-å’Œæ·±åº¦ä¼˜å…ˆæœç´¢-DFS","date":"2019-12-14T13:29:53.000Z","updated":"2020-02-06T06:00:08.268Z","comments":true,"path":"2019/12/14/å¹¿åº¦ä¼˜å…ˆæœç´¢-BFS-å’Œæ·±åº¦ä¼˜å…ˆæœç´¢-DFS/","link":"","permalink":"https://ertsul.github.io/2019/12/14/å¹¿åº¦ä¼˜å…ˆæœç´¢-BFS-å’Œæ·±åº¦ä¼˜å…ˆæœç´¢-DFS/","excerpt":"","text":"æœ€è¿‘åœ¨å†™ virtual dom æ–¹é¢çš„é€»è¾‘ï¼Œç”¨åˆ° BFS å’Œ DFSã€‚æ€»ç»“ä¸€æ³¢~ğŸ˜€ Virtual Dom çš„ç¤ºä¾‹ json å¦‚ä¸‹ï¼š const vNode = { node: &quot;root&quot;, child: [ { node: &quot;element1&quot;, child: [ { node: &quot;element3&quot; }, { node: &quot;element4&quot; } ] }, { node: &quot;element2&quot; } ] }; Virtual Dom çš„æ ‘å¦‚ä¸‹ï¼š å¹¿åº¦ä¼˜å…ˆæœç´¢ BFSBFS ï¼šé€å±‚è®¿é—®èŠ‚ç‚¹ï¼Œä»å·¦åˆ°å³è®¿é—®å®Œæˆä¸€å±‚è®¿é—®åï¼Œè®¿é—®ä¸‹ä¸€å±‚ï¼Œä¸”æ¯ä¸ªèŠ‚ç‚¹åªè®¿é—®ä¸€æ¬¡ã€‚ ä¸Šé¢çš„æ ‘ç”¨ BFS é¡ºåºå°±æ˜¯ï¼šroot -&gt; element1 -&gt; element2 -&gt; element3 -&gt; element4ã€‚ å®ç°æ€è·¯ï¼š è®¾ç½®é˜Ÿåˆ— queueï¼Œå°±å°†æ ¹èŠ‚ç‚¹æ·»åŠ åˆ°é˜Ÿåˆ— queueï¼› åˆ¤æ–­å½“é˜Ÿåˆ— queue æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºåˆ™å¼¹å‡ºé˜Ÿå¤´èŠ‚ç‚¹ currentNodeï¼› å°†é˜Ÿå¤´èŠ‚ç‚¹ currentNode æ·»åŠ åˆ°ç»“æœé˜Ÿåˆ— listsï¼› åˆ¤æ–­é˜Ÿå¤´èŠ‚ç‚¹ currentNode æ˜¯å¦æœ‰å­èŠ‚ç‚¹ï¼Œæœ‰åˆ™å°†å­èŠ‚ç‚¹ä»å·¦åˆ°å³ä¾æ¬¡æ·»åŠ åˆ°é˜Ÿåˆ— queueï¼› é‡å¤æ­¥éª¤2~4ã€‚ ç®€å•ç†è§£å°±æ˜¯ï¼š æ ¹èŠ‚ç‚¹è¿›é˜Ÿåˆ—ï¼› åˆ¤æ–­é˜Ÿå¤´èŠ‚ç‚¹æ˜¯å¦å­èŠ‚ç‚¹ï¼Œæœ‰åˆ™å°†å­èŠ‚ç‚¹ä»å·¦åˆ°å³ä¾æ¬¡è¿›é˜Ÿåˆ—ï¼Œé˜Ÿå¤´èŠ‚ç‚¹å‡ºé˜Ÿåˆ—ã€‚ é‡å¤2ã€‚ ç”¨ js ä»£ç å®ç°å¦‚ä¸‹ï¼šï¼ˆæ³¨æ„ï¼šåˆ¤æ–­æ¡ä»¶ä¸ºé˜Ÿåˆ—é•¿åº¦ï¼‰ /** * BFS éé€’å½’å†™æ³• * @param {*} root æ ¹èŠ‚ç‚¹ */ const BFS = root =&gt; { if (Object.prototype.toString.call(root) != &#39;[object Object]&#39;) { throw(new Error(&#39;root ç±»å‹é”™è¯¯ï¼&#39;)); return; } let resLists = []; // å­˜æ”¾ BFS èŠ‚ç‚¹é˜Ÿåˆ— if (!Object.keys(root).length) { return lists; } let queue = []; // ä¸´æ—¶é˜Ÿåˆ—ï¼Œæ¯é‡åˆ°ä¸€ä¸ªèŠ‚ç‚¹å°±å­˜æ”¾è¿›é˜Ÿåˆ— queue.unshift(root); while (queue.length) { // queue é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œéå†ä¸´æ—¶é˜Ÿåˆ— let currentNode = queue.pop(); // å¼¹å‡ºä¸´æ—¶é˜Ÿåˆ—çš„ä¸€ä¸ªèŠ‚ç‚¹ const hasChild = currentNode.hasOwnProperty(&quot;child&quot;) &amp;&amp; currentNode.child.length; // åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹ if (hasChild) { const childrenNodes = currentNode.child; // å­èŠ‚ç‚¹æ•°ç»„ for (let i = 0, len = childrenNodes.length; i &lt; len; i++) { const currentChildNode = childrenNodes[i]; // å½“å‰å­èŠ‚ç‚¹ queue.unshift(currentChildNode); // æ·»åŠ åˆ°é˜Ÿåˆ— } } resLists.push(currentNode); // å½“å‰èŠ‚ç‚¹å­˜æ”¾åˆ° BFS èŠ‚ç‚¹é˜Ÿåˆ— } return resLists; }; ç»“æœå¦‚ä¸‹ï¼š æ·±åº¦ä¼˜å…ˆæœç´¢ DFS DFSï¼šå¯¹æ¯ä¸€ä¸ªå¯èƒ½çš„åˆ†æ”¯è·¯å¾„æ·±å…¥åˆ°ä¸èƒ½å†æ·±å…¥ä¸ºæ­¢ï¼Œä¸”æ¯ä¸ªèŠ‚ç‚¹åªè®¿é—®ä¸€æ¬¡ã€‚ ä¸Šé¢çš„æ ‘ç”¨ BFS é¡ºåºå°±æ˜¯ï¼šroot -&gt; element1 -&gt; element3 -&gt; element4 -&gt; element2ã€‚ å®ç°æ€è·¯1ï¼ˆéé€’å½’ï¼‰: æ ¹èŠ‚ç‚¹è¿›æ ˆ stackï¼› åˆ¤æ–­æ ˆ stack æ˜¯å¦ä¸ºç©ºï¼Œåˆ¤æ–­æ ˆé¡¶å…ƒç´ æ˜¯å¦æœ‰æœ‰å­èŠ‚ç‚¹ï¼Œæœ‰åˆ™å°†æ ˆé¡¶å…ƒç´ çš„å­èŠ‚ç‚¹ä»å³åˆ°å·¦ä¾æ¬¡è¿›æ ˆï¼› å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå­˜è¿› lists; é‡å¤2~3ï¼› ç®€å•ç†è§£å°±æ˜¯ï¼š æ ¹èŠ‚ç‚¹è¿›æ ˆï¼› å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œåˆ¤æ–­æ ˆé¡¶å…ƒç´ æ˜¯å¦å­èŠ‚ç‚¹ï¼Œæœ‰åˆ™å°†å­èŠ‚ç‚¹ä»å³åˆ°å·¦ä¾æ¬¡è¿›æ ˆï¼› é‡å¤2ã€‚ ä»£ç å¦‚ä¸‹ï¼šï¼ˆæ³¨æ„ï¼šåˆ¤æ–­æ¡ä»¶ä¸ºæ ˆé•¿åº¦ï¼‰ const DFS = root =&gt; { if (Object.prototype.toString.call(root) != &quot;[object Object]&quot;) { throw new Error(&quot;root ç±»å‹é”™è¯¯ï¼&quot;); } let resLists = []; // å­˜æ”¾ BFS èŠ‚ç‚¹é˜Ÿåˆ— if (!Object.keys(root).length) { return lists; } let stack = []; // æ ˆï¼Œæ¯é‡åˆ°ä¸€ä¸ªèŠ‚ç‚¹å°±å­˜æ”¾è¿›æ ˆ stack.push(root); while (stack.length) { let currentNode = stack.pop(); // å¼¹å‡ºæ ˆé¡¶å…ƒç´  const hasChild = currentNode.hasOwnProperty(&quot;child&quot;) &amp;&amp; currentNode.child.length; // åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹ if (hasChild) { const childrenNodes = currentNode.child; // å­èŠ‚ç‚¹æ•°ç»„ for (let i = childrenNodes.length - 1; i &gt;= 0; i--) { const currentChildNode = childrenNodes[i]; // å½“å‰å­èŠ‚ç‚¹ stack.push(currentChildNode); // æ·»åŠ åˆ°é˜Ÿåˆ— } } resLists.push(currentNode); // å½“å‰èŠ‚ç‚¹å­˜æ”¾åˆ° DFS ç»“æœåˆ—è¡¨ } return resLists; }; å®ç°æ€è·¯2ï¼ˆé€’å½’ï¼‰ï¼š å½“å‰èŠ‚ç‚¹å…¥æ ˆ stackï¼› åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹ï¼› æœ‰å­èŠ‚ç‚¹ï¼š å°†å­èŠ‚ç‚¹ä»å³åˆ°å·¦ä¾æ¬¡è¿›è¡Œé€’å½’ï¼›ï¼ˆæ ˆæ˜¯å…ˆè¿›åå‡º ï¼‰ æ‰€æœ‰å­èŠ‚ç‚¹é€’å½’ç»“æŸï¼Œå½“å‰èŠ‚ç‚¹å‡ºæ ˆï¼› æ— ï¼š å½“å‰èŠ‚ç‚¹å‡ºæ ˆã€‚ ä»£ç å®ç°å¦‚ä¸‹ï¼šï¼ˆæ³¨æ„ï¼šåˆ¤æ–­å…³é”®ä¸ºèŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹ï¼‰ var stack = []; // æ ˆ var lists = []; // å­˜æ”¾ DFS èŠ‚ç‚¹ /** * å…¨å±€å˜é‡å®ç° * @param {*} currentNode : å½“å‰èŠ‚ç‚¹ */ const DFS = currentNode =&gt; { let hasChild = currentNode.hasOwnProperty(&quot;child&quot;) &amp;&amp; currentNode.child.length; // åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹ stack.push(currentNode); // æ¨å…¥æ ˆ if (hasChild) { let len = currentNode.child.length; for (let i = len - 1; i &gt;= 0; i--) { const currentChildNode = currentNode.child[i]; // å½“å‰å­èŠ‚ç‚¹ DFS(currentChildNode); // é€’å½’ } lists.unshift(stack.pop()); // å‡ºæ ˆ } else { lists.unshift(stack.pop()); // å‡ºæ ˆ } }; /** * éå…¨å±€å˜é‡æ–¹å¼å®ç° * @param {*} currentNode : å½“å‰èŠ‚ç‚¹ * @param {*} cache : ç¼“å­˜æ ˆå’ŒèŠ‚ç‚¹ */ const DFS = (currentNode = {}, cache = { lists: [], stack: [] }) =&gt; { if (Object.prototype.toString.call(currentNode) != &quot;[object Object]&quot;) { throw new Error(&quot;root ç±»å‹é”™è¯¯ï¼&quot;); } let hasChild = currentNode.hasOwnProperty(&quot;child&quot;) &amp;&amp; currentNode.child.length; // åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹ let { lists, stack } = cache; stack.push(currentNode); // æ¨å…¥æ ˆ if (hasChild) { let len = currentNode.child.length; for (let i = len - 1; i &gt;= 0; i--) { // æ³¨æ„è¿™é‡Œè¦ä»å³å‘å·¦å¾ªç¯ï¼Œå› ä¸º stack æ˜¯å…ˆè¿›åå‡º const currentChildNode = currentNode.child[i]; // å½“å‰å­èŠ‚ç‚¹ const { lists: newLists, stack: newStack } = DFS(currentChildNode, { lists, stack }); // é€’å½’ lists = newLists; // æ›´æ–° lists stack = newStack; // æ›´æ–°æ ˆ } lists.unshift(stack.pop()); // å‡ºæ ˆ } else { lists.unshift(stack.pop()); // å‡ºæ ˆ } // å‡½æ•°è¿”å›ç»“æœï¼Œå¦‚æœæ ˆä¸­è¿˜æœ‰èŠ‚ç‚¹ï¼Œè¯æ˜è¿˜æ²¡å›æº¯å®Œæˆï¼Œåˆ™è¿”å›ç¼“å­˜ï¼›å¦åˆ™å‡½æ•°æ‰§è¡Œç»“æŸ const res = stack.length ? { lists: lists, stack: stack } : lists; return res; }; ç»“æœå¦‚ä¸‹ï¼š","categories":[],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://ertsul.github.io/tags/ç®—æ³•/"}]},{"title":"å°ç¨‹åºå·¥ç¨‹åŒ–","slug":"å°ç¨‹åºå·¥ç¨‹åŒ–","date":"2019-11-05T14:36:57.000Z","updated":"2019-11-12T15:49:42.830Z","comments":true,"path":"2019/11/05/å°ç¨‹åºå·¥ç¨‹åŒ–/","link":"","permalink":"https://ertsul.github.io/2019/11/05/å°ç¨‹åºå·¥ç¨‹åŒ–/","excerpt":"","text":"gulpğŸ‘‰å®˜æ–¹æ–‡æ¡£ä¼ é€é—¨ gulp ç¼–è¯‘é¡¹ç›®æ—¥å¸¸è¿›è¡Œå°ç¨‹åºå¼€å‘ï¼Œé‡åˆ°çš„é—®é¢˜æœ‰ï¼š å¦‚æœåœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·è¿›è¡Œå¼€å‘çš„è¯ï¼Œæ•ˆç‡ä½ï¼› ä¸æ”¯æŒ less cssé¢„ç¼–è¯‘å™¨ ï¼› autoprefixer ï¼› â€¦ è€ƒè™‘åˆ°å°ç¨‹åºæ˜¯å¤šé¡µé¢åº”ç”¨ï¼Œæˆ‘ä»¬åªè¦åœ¨ src ç›®å½•æ·»åŠ å°ç¨‹åºåˆå§‹åŒ–æ—¶æ‰€éœ€è¦çš„ç›¸å…³é…ç½®æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ gulp å°† src ä¸‹çš„ä»£ç æ¬ç§»åˆ° dist æ‰“åŒ…ç›®å½•å³å¯ã€‚ é¡¹ç›®ç»“æ„â””â”€â”€â”€gulpTask ç›®å½•ï¼šä¸»è¦å­˜æ”¾ gulp ä»£ç é€»è¾‘ | â””â”€â”€â”€baseConfig.js // gulp è·¯å¾„å’Œ blob é…ç½®ä¿¡æ¯ | â””â”€â”€â”€clean.js // æ¸…ç† dist nodejs è„šæœ¬æ–‡ä»¶ | â””â”€â”€â”€taskControler.js // gulp ä»»åŠ¡å®šä¹‰ |â”€â”€â”€src | â””â”€â”€â”€common // å…¬å…±ä»£ç  | â””â”€â”€â”€less | â””â”€â”€â”€... | â””â”€â”€â”€js | â””â”€â”€â”€... | â””â”€â”€â”€components // ç»„ä»¶ | â””â”€â”€â”€... | â””â”€â”€â”€pages // é¡µé¢ | â””â”€â”€â”€... | â””â”€â”€â”€router // è·¯ç”± | â””â”€â”€â”€router.js // è·¯ç”±å¤„ç†é€»è¾‘ | â””â”€â”€â”€routerPath.js // è·¯ç”±è¡¨ | â””â”€â”€â”€api // è¯·æ±‚æ•°æ®æ¥å£ç»Ÿä¸€å¤„ç† | â””â”€â”€â”€api.js | â””â”€â”€â”€http // http ç½‘ç»œè¯·æ±‚ | â””â”€â”€â”€baseConfig.js // åŸºæœ¬é…ç½® | â””â”€â”€â”€devConfig.js // å¼€å‘åŸºæœ¬é…ç½® | â””â”€â”€â”€prodConfig.js // ç”Ÿäº§åŸºæœ¬é…ç½® | â””â”€â”€â”€request.js // è¯·æ±‚å¤„ç†é€»è¾‘ | â””â”€â”€â”€app.js | â””â”€â”€â”€app.json | â””â”€â”€â”€project.config.json | â””â”€â”€â”€sitemap.json â””â”€â”€â”€.eslintrc // eslint é…ç½® â””â”€â”€â”€.gitignore // git é…ç½® â””â”€â”€â”€gulpfile.js // gulp ä¸»å…¥å£ â””â”€â”€â”€package.json â””â”€â”€â”€README.md gulp é…ç½®æ–‡ä»¶ baseConfig.jså°† gulp ç›¸å…³è·¯å¾„å’Œ blob é…ç½®ä¿¡æ¯ç»Ÿä¸€åœ¨ baseConfig.js ä¸­è¿›è¡Œé…ç½®ã€‚ const path = require(&quot;path&quot;); const srcPath = path.resolve(__dirname, &quot;../src&quot;); const distPath = path.resolve(__dirname, &quot;../dist&quot;); const isDev = process.argv.includes(&quot;--development&quot;); module.exports = { isDev, // å½“å‰ç¯å¢ƒ srcPath, // src æºè·¯å¾„ distPath, // dist ç¼–è¯‘ç›®æ ‡è·¯å¾„ basePath: [ srcPath ], otherPath: [ srcPath, `!${srcPath}/**/**/*.less`, `!${srcPath}/**/**/*.wxml`, `!${srcPath}/**/**/*.json`, `!${srcPath}/**/**/*.js`, `!${srcPath}/static/icons/*.jpg`, `!${srcPath}/static/icons/*.png`, `!${srcPath}/static/images/*.jpg`, `!${srcPath}/static/images/*.png`, ], lessPath: [ // less blob `${srcPath}/**/**/*.less`, ], jsPath: [ // js blob `${srcPath}/**/**/*.js`, ], wxmlPath: [ // wxml blob `${srcPath}/**/**/*.wxml`, ], jsonPath: [ // json blob `${srcPath}/**/**/*.json`, ], lessImportPath: [ `${srcPath}/common/less/*.less` ], iconPath: [ `${srcPath}/static/icons/*.jpg`, `${srcPath}/static/icons/*.png` ], imagePath: [ `${srcPath}/static/images/*.jpg`, `${srcPath}/static/images/*.gif`, `${srcPath}/static/images/*.png` ] } gulp å¼€å‘æµç¨‹ä¸»è¦æµç¨‹å¦‚ä¸‹ï¼š gulp çš„å„ä¸ªä»»åŠ¡ï¼šï¼ˆtaskControler.js æ–‡ä»¶ï¼‰ æ¯æ¬¡è¿›è¡Œ gulp ä»»åŠ¡å‰éƒ½è¦æ¸…ç©º dist æ‰“åŒ…åçš„ç›®å½•ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š task(&quot;clean:dist&quot;, done =&gt; { // console.log(&quot;:::: clean:dist&quot;); src(baseConfig.distPath, { read: true, allowEmpty: true, }) .pipe(clean()) done(); }) ä½†æ˜¯ï¼Œä¸Šé¢è¿™æ ·å¤„ç†ä¼šæœ‰é—®é¢˜ï¼šç¬¬äºŒæ¬¡è¿è¡Œ gulp å‘½åçš„æ—¶å€™ä¼šæœ‰æ–‡ä»¶æƒé™ç­‰é—®é¢˜ã€‚æ•…ï¼šdist æ–‡ä»¶çš„å¤„ç†é€šè¿‡ nodejs è¿›è¡Œå¤„ç†ã€‚ // gulp-clean æ¸…ç©º dist å‘½ä»¤ä¼šæœ‰æƒé™ç­‰ä¸€ç³»åˆ—é—®é¢˜ï¼Œæ•…ï¼šç›´æ¥ç”¨ node è¿›è¡Œåˆ é™¤ dist const path = require(&quot;path&quot;); const chalk = require(&quot;chalk&quot;); const rimraf = require(&quot;rimraf&quot;); const distPath = path.resolve(__dirname, &#39;../dist&#39;); rimraf(distPath, err =&gt; { if (err) { console.log(chalk.red(err)); } }) ç„¶ååœ¨ package.json ä¸­é…ç½®è„šæœ¬å‘½ä»¤ï¼š &quot;scripts&quot;: { &quot;build:dev&quot;: &quot;node gulpTask/clean.js &amp;&amp; gulp dev --development&quot;, &quot;build:prod&quot;: &quot;node gulpTask/clean.js &amp;&amp; gulp prod --production&quot; }, è¿™æ ·æ¯æ¬¡æ‰§è¡Œ gulp å‘½ä»¤å‰éƒ½ä¼šåˆ é™¤ dist ç›®å½•ã€‚ å¤„ç† less æ–‡ä»¶ã€‚éœ€è¦è§£å†³çš„é—®é¢˜æœ‰ï¼š å¼€å‘ç¯å¢ƒä¸å‹ç¼©ä»£ç ï¼Œç”Ÿäº§ç¯å¢ƒå‹ç¼©ä»£ç ï¼› è‡ªåŠ¨æ·»åŠ å±æ€§å‰ç¼€ï¼Œautoperfixerï¼› å°† less æ–‡ä»¶çš„åç¼€æ›´æ”¹ä¸º wxssï¼› å°† less æ–‡ä»¶å†…éƒ¨çš„ @import å¼•ç”¨æ–‡ä»¶çš„åç¼€æ›´æ”¹ä¸º wxssã€‚ ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š task(&quot;compile:less&quot;, done =&gt; { // console.log(&quot;:::: compile:less&quot;); src(baseConfig.lessPath, { base: &quot;src&quot; }) .pipe(changed(baseConfig.distPath)) .pipe(gulpif(!this.isDev, cleanCss())) .pipe(autoprefixer()) // .pipe(less({ // paths: baseConfig.lessImportPath, // plugins: [autoprefix] // })) .pipe(rename(function (path) { // æ›´æ”¹ .less æ–‡ä»¶åç¼€ä¸º .wxss path.extname = &quot;.wxss&quot;; })) .pipe(replace(/\\.less/g, &quot;.wxss&quot;)) // ä¿®æ”¹ less æ–‡ä»¶å†…éƒ¨çš„å¼•ç”¨ .less æ–‡ä»¶åç¼€ä¸º .wxss .pipe(dest(baseConfig.distPath)); done(); }) è¿™é‡Œé‡åˆ°ä¸€ä¸ªå‘ï¼Œç”¨ less-plugin-autoprefix @import ä¼šæœ‰é—®é¢˜ï¼Œ@import è¯­å¥ä¼šè¢«åˆ é™¤ã€‚åé¢æ”¹ç”¨ gulp-autoprefixerã€‚ å¤„ç† js æ–‡ä»¶ã€‚éœ€è¦è§£å†³çš„é—®é¢˜æœ‰ï¼š eslint ä»£ç æ ¼å¼æ£€æŸ¥ï¼› å¼€å‘ç¯å¢ƒä¸å‹ç¼©ä»£ç ï¼Œç”Ÿäº§ç¯å¢ƒå‹ç¼©ä»£ç ï¼› ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š task(&quot;compile:js&quot;, done =&gt; { // console.log(&quot;:::: compile:js&quot;); src(baseConfig.jsPath, { base: &quot;src&quot; }) .pipe(changed(baseConfig.distPath)) // .pipe(babel({ // å…ˆé€šè¿‡ babel è½¬åŒ–è¯­æ³•ç„¶åæ‰èƒ½è¿›è¡Œå‹ç¼© --&gt; å¾®ä¿¡å¼€å‘è€…å·¥å…·æœ‰ es6 è½¬ es5 åŠŸèƒ½ // presets: [&quot;@babel/env&quot;] // })) .pipe(eslint()) // .pipe(eslint.format()) .pipe(gulpif(!this.isDev, uglify())) .pipe(dest(baseConfig.distPath)); done(); }) è¿™é‡ŒåŸæœ¬åŠ äº† babel è¿›è¡Œ es6 åˆ° es5 çš„è½¬åŒ–ï¼Œä½†æ˜¯å¾®ä¿¡å¼€å‘è€…å·¥å…·æœ¬èº«å°±æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œæ•…å»é™¤ã€‚å¦ä¸€ä¸ªå‘æ˜¯ï¼Œç”¨ gulp-uglify ä¸èƒ½è¿›è¡Œ es6 ä»£ç çš„å‹ç¼©ï¼Œè¦ç”¨ gulp-uglify-es ã€‚ å¤„ç† wxml æ–‡ä»¶ã€‚éœ€è¦è§£å†³çš„é—®é¢˜æœ‰ï¼š å¼€å‘ç¯å¢ƒä¸å‹ç¼©ä»£ç ï¼Œç”Ÿäº§ç¯å¢ƒå‹ç¼©ä»£ç ï¼› ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š task(&quot;compile:wxml&quot;, done =&gt; { // console.log(&quot;:::: compile:wxml&quot;); src(baseConfig.wxmlPath, { base: &quot;src&quot; }) .pipe(changed(baseConfig.distPath)) .pipe(gulpif(!this.isDev, htmlmin({ collapseWhitespace: true }))) .pipe(dest(baseConfig.distPath)); done(); }) å¤„ç† json æ–‡ä»¶ã€‚éœ€è¦è§£å†³çš„é—®é¢˜æœ‰ï¼š å¼€å‘ç¯å¢ƒä¸å‹ç¼©ä»£ç ï¼Œç”Ÿäº§ç¯å¢ƒå‹ç¼©ä»£ç ï¼› ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š task(&quot;compile:json&quot;, done =&gt; { // console.log(&quot;:::: compile:json&quot;); src(baseConfig.jsonPath, { base: &quot;src&quot; }) .pipe(changed(baseConfig.distPath)) .pipe(gulpif(!this.isDev, prettyData({ type: &quot;minify&quot;, preserveComments: true, extensions: { &quot;json&quot;: &quot;json&quot;, } }))) .pipe(dest(baseConfig.distPath)); done(); }) å…¶ä»–æ‰€æœ‰æ–‡ä»¶ã€‚ ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š task(&quot;compile:other&quot;, done =&gt; { // console.log(&quot;:::: compile:other&quot;); src(baseConfig.otherPath, { base: &quot;src&quot; }) .pipe(changed(baseConfig.distPath)) .pipe(dest(baseConfig.distPath)); done(); }) å›¾ç‰‡å‹ç¼©ã€‚ ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š task(&quot;minify:image&quot;, async done =&gt; { // console.log(&quot;:::: minify:image&quot;); src(baseConfig.imagePath, { base: &quot;src&quot; }) .pipe(imagemin([imagemin.optipng(), imagemin.gifsicle(), imagemin.jpegtran()])) .pipe(dest(baseConfig.distPath)) done(); }) å¼€å‘ç¯å¢ƒå¼€å¯ç›‘æ§ watchã€‚ ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š task(&quot;watch&quot;, done =&gt; { // console.log(&quot;:::: compile:other&quot;); watch(baseConfig.basePath, { base: &quot;src&quot; }, series(&quot;compile:less&quot;, &quot;compile:js&quot;, &quot;compile:wxml&quot;, &quot;compile:json&quot;, &quot;compile:other&quot;, &quot;minify:image&quot;)) done(); }) æœ€åï¼Œå°†ä»»åŠ¡è¿›è¡Œ id ç»‘å®šå¤„ç†ï¼Œè¿˜æœ‰ä¸åŒç¯å¢ƒçš„åŒºåˆ†ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š task(&quot;default&quot;, parallel(&quot;compile:less&quot;, &quot;compile:js&quot;, &quot;compile:wxml&quot;, &quot;compile:json&quot;, &quot;compile:other&quot;, &quot;minify:image&quot;)); task(`dev-${id}`, series(&quot;default&quot;, &quot;watch&quot;)); task(`prod-${id}`, series(&quot;default&quot;)); gulp å…¥å£æ–‡ä»¶å¤„ç†ï¼šï¼ˆgulpfile.js æ–‡ä»¶ï¼‰ä¸»è¦æ˜¯å¯¹ä¸åŒç¯å¢ƒçš„åŒºåˆ†ï¼Œè¿˜æœ‰ taskControler.js å®šä¹‰çš„å„ä¸ªä»»åŠ¡è¿›è¡Œå¼•ç”¨ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š const { task, series } = require(&quot;gulp&quot;); const TaskControler = require(&quot;./gulpTask/taskControler&quot;); // é¡¹ç›® ID const id = require(&quot;./package.json&quot;).name || &quot;min-program&quot;; new TaskControler(id); /*---------- ç›¸å…³çš„ gulp ä»»åŠ¡ ----------*/ // dev å¼€å‘ç¯å¢ƒä»»åŠ¡ task(&quot;dev&quot;, series(`dev-${id}`)); // prod ç”Ÿäº§ç¯å¢ƒä»»åŠ¡ task(&quot;prod&quot;, series(`prod-${id}`)); æ¥ç€ï¼Œåªéœ€è¦æ‰§è¡Œ npm run build:devæˆ– npm run build:prodï¼Œç„¶åå°†ç”Ÿæˆçš„ dist ç›®å½•ä¸¢åˆ°å¾®ä¿¡å¼€å‘è€…å·¥å…·å³å¯ã€‚ è·¯ç”±å°è£… è·¯ç”±è¡¨æ–‡ä»¶ /** * è·¯ç”±è·¯å¾„ */ const routerPath = { index: &quot;/pages/index/index&quot;, detail: &quot;/pages/detail/detail&quot;, } module.exports = routerPath; è·¯ç”±é€»è¾‘å¤„ç† æœ€åä½¿ç”¨è·¯ç”±çš„æ–¹å¼ä¸ºï¼š app.Router.push({ path: &#39;detail&#39;, query: { name: &#39;Ertsul&#39;, age: 23 } }) éœ€è¦å¤„ç†çš„é—®é¢˜æœ‰ï¼šè·¯ç”±å‚æ•°è½¬åŒ–ä¸ºå°ç¨‹åºçš„æ ¼å¼ã€æœ‰å‚æ— å‚è·¯ç”±ã€‚ è·¯ç”±å‚æ•°è½¬åŒ–ä¸ºå°ç¨‹åºçš„æ ¼å¼ã€‚ /** * å¤„ç†è·¯ç”±å‚æ•°ï¼Œæ‹¼æ¥æˆå­—ç¬¦ä¸²å½¢å¼ * @param {*} queryObj ï¼š è·¯ç”±å‚æ•° */ function dealQuery(queryObj) { let tempArr = []; for (let key in queryObj) { if (queryObj.hasOwnProperty(key)) { const value = queryObj[key]; const item = `${key}=${value}`; tempArr.push(item); } } return &quot;?&quot; + tempArr.join(&quot;&amp;&quot;); } å°è£…ä¸€ä¸ªå¯¹è±¡ï¼Œæ·»åŠ  push å¯¹å¤–æš´éœ²çš„æ–¹æ³•ï¼Œæ·»åŠ å†…éƒ¨è·³è½¬çš„æ–¹æ³•ã€‚ let Router = { /** * * @param {String} param0 : è·¯å¾„ * @param {Object} param1 : å‚æ•° * @param {String} param2 : ç±»å‹ï¼ŒredirectTo/reLaunch/back/navigateTo */ push({ path = &quot;&quot;, query = {}, type = &quot;navigateTo&quot; }) { if (!path) { return; } // è·å–å¯¹åº”çš„å°ç¨‹åºè·¯å¾„ let url = routerPath[path] || routerPath[&#39;index&#39;]; let params = &quot;&quot;; // å¤„ç† query if (Object.keys(query) &amp;&amp; Object.prototype.toString.call(query) == &#39;[object Object]&#39;) { params = dealQuery(query); } else { console.error(&quot;è·¯ç”±å‚æ•°ç±»å‹é”™è¯¯ï¼&quot;); return; } url += params; this.to(url, type); // æ‰§è¡Œè·³è½¬ }, /** * * @param {*} url : è·¯å¾„ + å‚æ•° * @param {*} type : ç±»å‹ï¼ŒredirectTo/reLaunch/back/navigateTo */ to(url, type = &quot;&quot;) { switch (type) { case &quot;redirectTo&quot;: wx.redirectTo({ url }); break; case &quot;reLaunch&quot;: wx.reLaunch({ url }); break; case &quot;back&quot;: wx.navigateBack({ delta: 1 }); break; case &quot;navigateTo&quot;: wx.navigateTo({ url }); break; } } } æœ€åå°† Router å¯¹è±¡æŒ‚è½½åˆ° app å¯¹è±¡ã€‚ const Router = require(&quot;./router/router&quot;); //app.js App({ Router, ... }) http å°è£…åŠå…¶æ¥å£ç»Ÿä¸€ç®¡ç†http å°è£…ï¼Œå¯ä»¥æ·»åŠ ä¸€äº›è¯·æ±‚å…¬å…±å‚æ•°ç­‰ã€‚æ ¸å¿ƒä»£ç ä¸ºï¼š function request({ url = &#39;&#39;, data = {}, method = &#39;POST&#39;, header = { &#39;content-type&#39;: &#39;application/json&#39; // é»˜è®¤å€¼ } }) { return new Promise(async (resolve, reject) =&gt; { wx.request({ url, data, method, header, success(res) { resolve(res); }, fail(err) { reject(err); } }) }) } æ¥å£ç»Ÿä¸€ç®¡ç†ã€‚æ¥å£ç»Ÿä¸€ç®¡ç†æœ‰åˆ©äºåæœŸç»´æŠ¤ã€‚ const request = require(&#39;../http/request&#39;); const baseConfig = require(&#39;../http/baseConfig&#39;); // get ä¾‹å­ const getList = request({ method: &#39;GET&#39;, url: baseConfig.baseUrl + &#39;/list?page=1&amp;size=10&#39;, }) // post ä¾‹å­ const updateInfo = request({ method: &#39;POST&#39;, url: baseConfig.baseUrl + &#39;/updateInfo&#39;, data: { name: &#39;Ertsul&#39;, age: 23 } }) module.exports = { getList, updateInfo }","categories":[{"name":"minapp","slug":"minapp","permalink":"https://ertsul.github.io/categories/minapp/"}],"tags":[{"name":"minapp","slug":"minapp","permalink":"https://ertsul.github.io/tags/minapp/"}]},{"title":"Git æ“ä½œï¼ˆè¡¥å……ï¼‰","slug":"Git-æ“ä½œï¼ˆè¡¥å……ï¼‰","date":"2019-10-12T14:10:08.000Z","updated":"2019-11-11T15:36:41.273Z","comments":true,"path":"2019/10/12/Git-æ“ä½œï¼ˆè¡¥å……ï¼‰/","link":"","permalink":"https://ertsul.github.io/2019/10/12/Git-æ“ä½œï¼ˆè¡¥å……ï¼‰/","excerpt":"","text":"cherry-pickcherry-pick å¯ä»¥å°†åˆ†æ”¯ B çš„ä»»ä½•ä¸€ä¸ª commit åˆå¹¶åˆ°åˆ†æ”¯ Aã€‚ æƒ…æ™¯ï¼šdev åˆ†æ”¯æœ‰ä¸¤ä¸ª commitï¼Œåˆ†åˆ«æ˜¯ï¼šåˆ›å»º b.txt æ–‡ä»¶ commitBã€åˆ›å»º c.txt æ–‡ä»¶ commitCã€‚ç°åœ¨æˆ‘ä»¬åªæƒ³è¦åˆå¹¶ commitAB åˆ° master åˆ†æ”¯ã€‚ä¸‹é¢æ˜¯ master å’Œ dev* ä¸¤ä¸ªåˆ†æ”¯çš„æƒ…å†µï¼š å¦‚æœç›´æ¥ç”¨ git merge ä¼šå°† commitC ä¹Ÿåˆå¹¶åˆ° masterï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚è¿™æ—¶å€™ï¼Œcherry-pick å°±æ´¾ä¸Šç”¨åœºäº†ã€‚ç”¨æ³•å¦‚ä¸‹ï¼š åˆ‡æ¢åˆ°ç›®æ ‡åˆ†æ”¯ã€‚ cherry-pick å¾…åˆå¹¶çš„ commitIDã€‚ ä¸Šé¢çš„æƒ…æ™¯ï¼Œåªéœ€è¦ï¼š git checkout master git cherry-pick 8f2aa26 ç»“æœå¦‚ä¸‹ï¼š ä¸è¿‡ï¼Œcherry-pick åªèƒ½åˆå¹¶å•ä¸ªæŒ‡å®šçš„ commitã€‚â˜ cherry-pick æ›´å¤šæ“ä½œ rebaserebaseå˜åŸº æ˜¯ Git ä¸­æ•´åˆæ¥è‡ªä¸åŒåˆ†æ”¯ä¿®æ”¹çš„ä¸€ç§æ“ä½œã€‚ï¼ˆå¦ä¸€ç§æ˜¯ mergeï¼‰ æƒ…æ™¯1ï¼šdev åˆ†æ”¯æœ‰ä¸¤ä¸ª commit ï¼Œåˆ†åˆ«æ˜¯ï¼šåˆ›å»º d.txt æ–‡ä»¶ commitDã€åˆ›å»º e.txt æ–‡ä»¶ commitEã€‚ç°åœ¨æˆ‘ä»¬æƒ³è¦å°† dev åˆ†æ”¯çš„æ‰€æœ‰ commit åˆå¹¶åˆ° masterã€‚ä¸‹é¢æ˜¯ dev åˆ†æ”¯çš„æƒ…å†µï¼š æƒ³è¦é€šè¿‡ rebase å˜åŸºå°† commit åˆå¹¶åˆ° masterï¼Œåªéœ€è¦ï¼š å°† dev åˆ†æ”¯å˜åŸºåˆ° master åˆ†æ”¯ã€‚ åˆ‡æ¢åˆ° master åˆ†æ”¯ã€‚ æ‰§è¡Œ merge æ“ä½œã€‚ git rebase master git checkout master git merge --no-ff dev æœ€åç»“æœå¦‚ä¸‹ï¼š é€šè¿‡ rebase åˆå¹¶åˆ†æ”¯è·Ÿ merge åˆå¹¶æ˜¯ä¸ä¸€æ ·çš„ã€‚â˜ ç‚¹å‡»æŸ¥çœ‹åŒºåˆ«) æƒ…æ™¯2ï¼šdev åˆ†æ”¯ä¸Šæœ‰å››ä¸ª commitï¼Œé¡ºåºåˆ†åˆ«æ˜¯ï¼šåˆ›å»º f.txt æ–‡ä»¶ commitFã€å¢åŠ  f.txt æ–‡ä»¶å†…å®¹ commitF1ã€åˆ›å»º g.txt æ–‡ä»¶ commitGã€å¢åŠ  g.txt æ–‡ä»¶å†…å®¹ commitG1ã€‚ç°åœ¨åªæƒ³è¦å°† dev åˆ†æ”¯ä¸Šå…³äºæ–‡ä»¶ f.txt çš„æ‰€æœ‰æ“ä½œåˆå¹¶åˆ° master åˆ†æ”¯ã€‚ä¸‹é¢æ˜¯ dev åˆ†æ”¯çš„æƒ…å†µï¼š ç°åœ¨åªæƒ³è¦å°† dev åˆ†æ”¯ä¸Šå…³äºæ–‡ä»¶ f.txt çš„æ‰€æœ‰æ“ä½œåˆå¹¶åˆ° master åˆ†æ”¯ï¼Œéœ€è¦ï¼š ä»¥ f.txt çš„æœ€åä¸€ä¸ªä¿®æ”¹çš„ commitID æ–°å»ºä¸€ä¸ªåˆ†æ”¯ dev-tempã€‚ å°†ä»¥ dev-temp åˆ†æ”¯ä¸Šå…³äº f.txt çš„ç¬¬ä¸€ä¸ªä¿®æ”¹çš„ commitID rabase å˜åŸºåˆ° master åˆ†æ”¯ã€‚ åˆ‡æ¢åˆ° master åˆ†æ”¯ã€‚ merge dev-temp åˆ†æ”¯åˆ° master åˆ†æ”¯ã€‚ git checkout -b dev-temp 884c858 git rebase --onto master 3b0bfd7^ git checkout master git merge --no-ff dev-temp æƒ…æ™¯3ï¼šdev åˆ†æ”¯ä¸Šæœ‰å››ä¸ª commitï¼Œé¡ºåºåˆ†åˆ«æ˜¯ï¼šåˆ›å»º i.txt æ–‡ä»¶ commitIã€å¢åŠ  i.txt æ–‡ä»¶å†…å®¹ commitI1ã€åˆ›å»º j.txt æ–‡ä»¶ commitJã€å¢åŠ  j.txt æ–‡ä»¶å†…å®¹ commitJ1ã€‚ç°åœ¨åªæƒ³è¦å°† dev åˆ†æ”¯ä¸Šå…³äºæ–‡ä»¶ j.txt çš„æ‰€æœ‰æ“ä½œåˆå¹¶åˆ° master åˆ†æ”¯ã€‚ä¸‹é¢æ˜¯ dev åˆ†æ”¯çš„æƒ…å†µï¼šï¼ˆå…¶å®è·Ÿä¸Šé¢çš„æƒ…å†µå’Œæ“ä½œä¸€æ ·ï¼‰ ç°åœ¨åªæƒ³è¦å°† dev åˆ†æ”¯ä¸Šå…³äºæ–‡ä»¶ j.txt çš„æ‰€æœ‰æ“ä½œåˆå¹¶åˆ° master åˆ†æ”¯ï¼Œéœ€è¦ï¼š ä»¥ j.txt çš„æœ€åä¸€ä¸ªä¿®æ”¹çš„ commitID æ–°å»ºä¸€ä¸ªåˆ†æ”¯ dev-temp1ã€‚ å°†ä»¥ dev-temp1 åˆ†æ”¯ä¸Šå…³äº j.txt çš„ç¬¬ä¸€ä¸ªä¿®æ”¹çš„ commitID rabase å˜åŸºåˆ° master åˆ†æ”¯ã€‚ åˆ‡æ¢åˆ° master åˆ†æ”¯ã€‚ merge dev-temp1 åˆ†æ”¯åˆ° master åˆ†æ”¯ã€‚ git checkout -b dev-temp1 54ea4bd git rebase --onto master e31249b^ git checkout master git merge --no-ff dev-temp1 rebaseæ›´å¤šæ“ä½œ) åˆå¹¶å¤šä¸ª commit ä¸ºä¸€ä¸ª commitåˆå¹¶å¤šä¸ª commit ä¸ºä¸€ä¸ª commit åŒæ ·éœ€è¦ rebaseã€‚ å¦‚ä¸‹å›¾ï¼šè¦å°†æœ€æ–°çš„ä¸¤ä¸ª commit åˆå¹¶ä¸ºä¸€ä¸ª commitã€‚å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š æ‰¾åˆ°è¿™ä¸‰ä¸ª commit çš„å‰ä¸€ä¸ª commit çš„ commitIDï¼Œæ‰§è¡Œ git rebase -i commitID è¿™æ—¶å€™ä¼šè¿›å…¥ vi ç¼–è¾‘ã€‚ pick çš„æ„æ€æ˜¯è¦ä¼šæ‰§è¡Œè¿™ä¸ª commit squash çš„æ„æ€æ˜¯è¿™ä¸ª commit ä¼šè¢«åˆå¹¶åˆ°å‰ä¸€ä¸ª commit ä¹‹åä¼šè¿›å…¥ vi ç¼–è¾‘ commit ä¿¡æ¯ã€‚åªéœ€è¦å°†åŸå…ˆçš„ commit ä¿¡æ¯æ³¨é‡Šï¼Œåœ¨é¡¶éƒ¨æ·»åŠ æ–°çš„ commit ä¿¡æ¯ã€‚ å®Œæˆã€‚ åˆ é™¤åˆ†æ”¯åˆ é™¤åˆ†æ”¯åŒ…æ‹¬åˆ é™¤æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯ï¼š åˆ é™¤æœ¬åœ°åˆ†æ”¯ å¦‚æœ¬åœ°åˆ†æ”¯ä¸æ˜¯æ‰“å¼€çŠ¶æ€ï¼Œåˆ™ï¼šgit branch -d branchName å¦‚æœ¬åœ°åˆ†æ”¯æ˜¯æ‰“å¼€çŠ¶æ€ï¼Œåˆ™ï¼šgit branch -D branchName åˆ é™¤è¿œç¨‹åˆ†æ”¯ git push origin --delete branchName æ¢å¤åˆ†æ”¯æ¢å¤åˆ†æ”¯ï¼Œæˆ‘ä»¬åªéœ€è¦ä»¥ä¹‹å‰åˆ†æ”¯çš„ commitID æ–°å¼€ä¸€ä¸ªåˆ†æ”¯å³å¯ã€‚ å¦‚æœä¸è®°å¾— commitIDï¼Œå¯ä»¥é€šè¿‡ git reflog è¿›è¡ŒæŸ¥çœ‹ã€‚ æ’¤é”€æœ¬åœ°ä¿®æ”¹ æ’¤é”€æŒ‡å®šæœ¬åœ°æ–‡ä»¶çš„ä¿®æ”¹ï¼ˆæœªæäº¤çŠ¶æ€ï¼‰ï¼šgit checkout -- fileName æ’¤é”€æœ¬åœ°çš„æ‰€æœ‰ä¿®æ”¹ï¼ˆæœªæäº¤çŠ¶æ€ï¼‰ï¼šgit reset --hard å…¶ä»–åŸºæœ¬æ“ä½œ ç”Ÿæˆæœ¬åœ°çš„ keyï¼Œå¹¶æ·»åŠ åˆ°è¿œç¨‹ä»“åº“ ssh-keygen -t rsa åˆå§‹åŒ–æœ¬åœ°ç›®å½• git init æ·»åŠ åˆ°æœ¬åœ°ä»“åº“ git add filename æäº¤åˆ°ä»“åº“ï¼ˆgit æäº¤çš„æ˜¯ä¿®æ”¹ï¼‰ git commit -m &quot;description&quot; æŸ¥çœ‹ä»“åº“çŠ¶æ€ git status æŸ¥çœ‹ä¸åŒç‚¹ git diff filename ç‰ˆæœ¬å›é€€ git reset --hard ç¬¬ä¸€åˆ†æ”¯ master åˆ›å»ºåˆ†æ”¯ v1 ï¼ˆHEAD æŒ‡å‘å½“å‰åˆ†æ”¯ï¼‰ // åˆ›å»ºå¹¶æŒ‡å‘æ–°åˆ†æ”¯ git checkout -b v1 // åˆ†æ­¥æ‰§è¡Œ git branch v1 git checkouut v1 åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ git merge v1 åˆ é™¤æŒ‡å®šåˆ†æ”¯ git branch -d v1 æŒ‡å®šåˆ†æ”¯å°†è¿œç¨‹ä»“åº“çš„ä»£ç æ‹‰åˆ°æœ¬åœ° git clone gitAddress -b branchName å°†æœ¬åœ°çš„ä»£ç æäº¤åˆ°è¿œç¨‹ä»“åº“ git pull //è·å–æœ€æ–°çš„æ›´æ”¹ git add modefied_filename git commit -m &quot;description&quot; git push // æ¨é€ å†²çªè§£å†³å¯ä»¥ç”¨ä¸Šé¢çš„æ–¹æ³•è§£å†³å°±è§£å†³ï¼Œä¸è¡Œçš„è¯å°±ç”¨ä¸‹é¢çš„æ–¹æ³•ï¼š ç”¨è¿œç¨‹ä»“åº“çš„ä»£ç å®Œå…¨è¦†ç›–æœ¬åœ°ä»£ç ã€‚ git reset --hard // ç‰ˆæœ¬å›é€€ git pull ä¿®æ”¹ commit æäº¤çš„å†…å®¹ git commit --amend æ‰“å° log æ•°é‡ git log -p -3 æ–‡ä»¶è¢«æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œæ’¤é”€è¯¥æ–‡ä»¶åˆ°å·¥ä½œç›®å½• git reset HEAD fliename å·¥ä½œç›®çš„åˆ é™¤æ–‡ä»¶åï¼Œè¿˜æœ‰åœ¨æš‚å­˜åŒºä¸­åˆ é™¤è¯¥æ–‡ä»¶ rm filename git rm filename æ’¤é”€å¯¹å½“å‰æ–‡ä»¶çš„ä¿®æ”¹ï¼Œæ¢å¤åˆ°ä¸Šä¸€æ¬¡å¿«ç…§çš„çŠ¶æ€ git checkout -- filename HEAD æŒ‡é’ˆæŒ‡å‘å½“å‰çš„åˆ†æ”¯ï¼Œæäº¤åéƒ½ä¼šå¿«è¿›ï¼ˆfast-forward ï¼šæŒ‡é’ˆå³ç§»ï¼‰ã€‚ rebase åˆå¹¶åˆ†æ”¯å˜åŸºæ˜¯å°†ä¸€ç³»åˆ—æäº¤æŒ‰ç…§åŸæœ‰æ¬¡åºä¾æ¬¡åº”ç”¨åˆ°å¦ä¸€åˆ†æ”¯ä¸Šï¼Œè€Œåˆå¹¶æ˜¯æŠŠæœ€ç»ˆç»“æœåˆåœ¨ä¸€èµ·ã€‚ä½¿å¾—æäº¤å†å²æ›´åŠ æ•´æ´ã€‚ ä½ åœ¨æŸ¥çœ‹ä¸€ä¸ªç»è¿‡å˜åŸºçš„åˆ†æ”¯çš„å†å²è®°å½•æ—¶ä¼šå‘ç°ï¼Œå°½ç®¡å®é™…çš„å¼€å‘å·¥ä½œæ˜¯å¹¶è¡Œçš„ï¼Œä½†å®ƒä»¬çœ‹ä¸Šå»å°±åƒæ˜¯ä¸²è¡Œçš„ä¸€æ ·ï¼Œæäº¤å†å²æ˜¯ä¸€æ¡ç›´çº¿æ²¡æœ‰åˆ†å‰ã€‚ git checkout dev ......ä¿®æ”¹...... git add filename git commit -m &quot;......&quot; git rebase master git checkout master git merge dev","categories":[{"name":"Git","slug":"Git","permalink":"https://ertsul.github.io/categories/Git/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://ertsul.github.io/tags/Git/"}]},{"title":"Git æ“ä½œ","slug":"Git-æ“ä½œ","date":"2019-10-12T13:55:55.000Z","updated":"2019-11-11T15:36:37.695Z","comments":true,"path":"2019/10/12/Git-æ“ä½œ/","link":"","permalink":"https://ertsul.github.io/2019/10/12/Git-æ“ä½œ/","excerpt":"","text":"æƒ³å¿…æ¯ä¸ªå¼€å‘è€…å¯¹Gitå¹¶ä¸é™Œç”Ÿï¼Œå…ˆæ¥çœ‹çœ‹å®˜æ–¹å¯¹äºGitçš„å®šä¹‰ï¼š Gitæ˜¯ä¸€ä¸ªå…è´¹å’Œå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ—¨åœ¨å¿«é€Ÿå’Œæœ‰æ•ˆç‡åœ°å¤„ç†ä»å¤§åˆ°å°çš„é¡¹ç›®ã€‚ å®‰è£… Git å’ŒæŸ¥çœ‹ Git ç‰ˆæœ¬ å®‰è£…ï¼ˆä»…è¯´æ˜åœ¨ Linux ç³»ç»Ÿä¸‹çš„å®‰è£…ï¼Œè‹¥æ‚¨æ˜¯windowsç³»ç»Ÿï¼Œç›´æ¥å®˜ç½‘ä¸‹è½½å®‰è£…å°±è¡Œ~ï¼‰ sudo apt install git ç”±äºæˆ‘ä¹‹å‰å·²ç»å®‰è£…è¿‡äº†ï¼Œæ‰€ä»¥è¿™é‡Œå‡çº§ç­‰éƒ½æ˜¯ 0ã€‚ æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ git è¾“å…¥gitå‘½ä»¤åï¼Œå‡ºç°ä¸€ç³»åˆ—å…³äºGitçš„å‚æ•°å’Œå‘½ä»¤ç­‰ï¼Œè¯´æ˜å®‰è£…æˆåŠŸäº†ã€‚ æŸ¥çœ‹ Git ç‰ˆæœ¬ git --version åˆ›å»º Git ä»“åº“æ‰€è°“ Git ä»“åº“ï¼ˆrepositoryï¼‰ï¼Œä¹Ÿå«ç‰ˆæœ¬åº“ã€‚ç®€å•ç†è§£ï¼Œå°±æ˜¯å¯ä»¥è¢« Git ç®¡ç†ï¼ˆä¿®æ”¹ï¼Œåˆ é™¤ç­‰ï¼‰çš„ç›®å½•ã€‚ æ–°å»ºæœ¬åœ°ç›®å½•ï¼Œå¹¶åˆ‡æ¢åˆ°æ–°ç›®å½• mkdir gitFile cd gitFile å°†æœ¬åœ°ç›®å½•åˆå§‹åŒ–ä¸º Git ä»“åº“ git init æŸ¥çœ‹ Git ä»“åº“çš„ç›®å½• ls -al æ‚¨ä¼šå‘ç°ï¼Œè¿™é‡Œå¤šäº†ä¸€ä¸ª .git çš„ç›®å½•ï¼Œä½œç”¨æ˜¯ Git æ¥è·Ÿè¸ªç®¡ç† Git ä»“åº“çš„ï¼›æ³¨æ„ï¼Œå¦‚æœè¾“å…¥çš„å‘½ä»¤æ˜¯ ls æ˜¯ä¸ä¼šçœ‹åˆ° .gitï¼Œå› ä¸ºè¿™ä¸ªç›®å½•é»˜è®¤æ˜¯éšè—çš„ã€‚ å°†æ–‡ä»¶æ”¾åˆ°Gitä»“åº“ï¼ˆä¸€å®šè¦åœ¨ git init çš„ç›®å½•ï¼å­ç›®å½•ä¸‹ï¼‰ æ–°å»º test.txt æ–‡ä»¶å¹¶è¾“å…¥å†…å®¹ cat &gt; test.txt å°† test.txt æ–‡ä»¶ä¸Šä¼ åˆ°Gitä»“åº“ git add test.txt å‘ŠçŸ¥ Git ä»“åº“æäº¤äº†æ–°æ–‡ä»¶ï¼Œå¹¶æ·»åŠ æ ‡æ³¨ä¿¡æ¯ git commit -m &quot;My first git.&quot; -m åé¢æ˜¯ commit ä¿¡æ¯ã€‚å¾ˆç®€å•å§ï½åªéœ€è¦ä¸¤æ­¥ï¼Œå°±å¯ä»¥å°†æ–‡ä»¶ä¸Šä¼ åˆ°Gitä»“åº“ã€‚ æŸ¥çœ‹ Git ä»“åº“çš„å½“å‰çŠ¶æ€ git status å€˜è‹¥ä¿®æ”¹äº†æ–‡ä»¶ï¼Œä½†æ²¡æœ‰æäº¤ï¼Œç»“æœæ˜¯è¿™æ ·çš„ï¼š æäº¤åçš„ç»“æœæ˜¯è¿™æ ·çš„ï¼š æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚æœä¿®æ”¹äº†æ–‡ä»¶ï¼Œä½†è¿˜æ²¡æäº¤ï¼Œå¯ä»¥å¯¹æ¯”æ–‡ä»¶å‰åçš„ä¿®æ”¹å†…å®¹ã€‚ git diff test.txt å¯çŸ¥ï¼Œæ–‡ä»¶ test.txt æ·»åŠ äº†æ–°çš„ä¸€è¡Œ This is the third line. åˆ›å»ºGitHubè´¦å·å¦‚æœæ²¡æœ‰ GitHub è´¦å·ï¼Œå¾—å…ˆåˆ°GitHubå®˜ç½‘æ³¨å†Œè´¦å·ã€‚æ³¨å†Œç™»å½•ä¸ºå¸¸è§„æ“ä½œï¼Œä¸å¤šè¯´ã€‚ SSHè®¾ç½®ç”±äºGitå’ŒGitHubä¹‹é—´æ˜¯é€šè¿‡SSHåŠ å¯†ä¼ è¾“çš„ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡ŒSSHè®¾ç½®ã€‚ åˆ›å»ºSSH Keyï¼ˆç”¨æˆ·ä¸»ç›®å½•ï¼‰ ssh-keygen -t rsa -C &quot;ä½ çš„é‚®ç®±&quot; æ¥ä¸‹æ¥å›è½¦é»˜è®¤å°±å¥½äº†ã€‚ åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹æ‰¾åˆ° .ssh ç›®å½• ls -al | find -name &quot;*.ssh&quot; å‘ç°å­˜åœ¨ .ssh ç›®å½•ï¼Œåˆ‡æ¢åˆ° .ssh ç›®å½•ï¼Œå‘ç°æ–‡ä»¶ä¸­ç§˜é’¥æœ‰ id_rsaï¼ˆç§é’¥ï¼‰å’Œ id_rsa.pubï¼ˆå…¬é’¥ï¼‰ï¼Œå…¶ä¸­æ˜¯ id_rsa.pub æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ æ‰“å¼€ ip_rsa.pub ï¼Œå¹¶å¤åˆ¶ cat ip_rsa.pub åœ¨ GitHub ä¸­æ·»åŠ  SSH Key Settings-&gt;SSH and GRG keys-&gt;new SSH key åˆ›å»ºæˆåŠŸåï¼Œè·³è½¬é¡µé¢ä¸­ä½ ä¼šçœ‹åˆ°ä½ æ–°å»ºçš„ssh key åˆ›å»º GitHub ä»“åº“ ç™»å½•GitHubè´¦å·åï¼Œåˆ›å»ºæ–°çš„ä»“åº“ï¼Œä»“åº“åç§°çœ‹è‡ªå·±éœ€è¦å‘½åï¼Œå…¶ä»–é»˜è®¤å°±å¥½äº†ã€‚æˆ‘è¿™é‡Œä¸ºäº†æµ‹è¯•ï¼Œå°±å–ä¸ºtest GitHubä»“åº“åˆ›å»ºæˆåŠŸåï¼Œä¼šæœ‰SSHå’ŒHTTPSåœ°å€ Git è¿æ¥ GitHubï¼Œå¹¶æ¨é€æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹ä»“åº“ åœ¨æœ¬åœ°ä»“åº“çš„ç›®å½• gitFile ä¸‹è¿è¡Œå‘½ä»¤ git remote add origin ä»“åº“çš„SSHåœ°å€ æ³¨æ„ï¼Œè¿™é‡Œçš„ origin æ˜¯è¿œç¨‹ä»“åº“çš„åå­—ï¼ˆGitçš„é»˜è®¤å«æ³•ï¼‰ å°†æœ¬åœ°ä»“åº“ Git çš„æ–‡ä»¶æ¨é€åˆ°è¿œç¨‹ä»“åº“ GitHub git push -u origin master ä¸å‡ºæ„å¤–ï¼Œåœ¨GitHubçš„ test ä»“åº“ä¸­ä¼šçœ‹åˆ°æˆ‘ä»¬ä¼ é€çš„æ–‡ä»¶ ä» GitHub ä¸­å…‹éš†æ–‡ä»¶åˆ°æœ¬åœ° åœ¨ GitHub ä¸­åˆ›å»ºæ–‡ä»¶ï¼Œå¹¶ä¸”å¤åˆ¶SSH åœ°å€ è¾“å…¥ä»¥ä¸‹å…‹éš†å‘½ä»¤ git clone SSHåœ°å€ ä½ ä¼šå‘ç°ï¼ŒGitHub ä¸­çš„ç›®å½•åŒ…æ‹¬ä½ åˆšæ‰æ–°å»ºçš„æ–‡ä»¶éƒ½å­˜åœ¨æœ¬åœ°ç›®å½•ä¸­äº†ã€‚","categories":[{"name":"Git","slug":"Git","permalink":"https://ertsul.github.io/categories/Git/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://ertsul.github.io/tags/Git/"}]},{"title":"é˜²æŠ–å’ŒèŠ‚æµ","slug":"é˜²æŠ–å’ŒèŠ‚æµ","date":"2019-02-18T13:34:34.000Z","updated":"2020-01-01T16:09:41.798Z","comments":true,"path":"2019/02/18/é˜²æŠ–å’ŒèŠ‚æµ/","link":"","permalink":"https://ertsul.github.io/2019/02/18/é˜²æŠ–å’ŒèŠ‚æµ/","excerpt":"","text":"é˜²æŠ– å¯¹äºä¸€äº›é«˜é¢‘è§¦å‘æ“ä½œçš„åœºæ™¯ï¼Œæˆ‘ä»¬éœ€è¦åŠ é˜²æŠ–æ“ä½œã€‚æ¯”å¦‚ï¼šç›‘å¬é¡µé¢æ»šåŠ¨ã€è¾“å…¥å®æ—¶æ˜¾ç¤ºæœç´¢ç»“æœç­‰ã€‚è¿™äº›éƒ½éœ€è¦åŠ é˜²æŠ–æ“ä½œï¼Œä¸ç„¶å¯¹é¡µé¢æ€§èƒ½æœ‰å¾ˆå¤§çš„å‰¯ä½œç”¨ã€‚ ç®€å•æ¦‚æ‹¬ï¼šé˜²æŠ–å°±æ˜¯å°†é«˜é¢‘æ“ä½œä¼˜åŒ–ä¸ºæœ€åä¸€æ¬¡æ‰§è¡Œã€‚ å®ç°ï¼š function debounce(fn, wait, immediate = false) { var timeout, result; timeout &amp;&amp; clearTimeout(timeout); var debounced = function () { var context = this; var args = arguments; if (immediate) { // äº‹ä»¶åœæ­¢è§¦å‘å n ç§’ï¼Œè§¦å‘äº‹ä»¶ç«‹åˆ»æ‰§è¡Œå›è°ƒ var callNow = !timeout; timeout = setTimeout(function () { timeout = null; }, wait) if (callNow) { result = fn.apply(context, args); } } else { // äº‹ä»¶åœæ­¢è§¦å‘åï¼Œæ‰§è¡Œå›è°ƒå‡½æ•° timeout = setTimeout(function () { fn.apply(context, args); }, wait); } } debounced.cancel = function () { clearTimeout(timeout); timeout = null; } return debounced; } èŠ‚æµæ¯æ®µæ—¶é—´åæ‰§è¡Œä¸€æ¬¡ï¼Œå°†é«˜é¢‘è½¬åŒ–ä¸ºä½é¢‘ã€‚ æ—¶é—´æˆ³ function throttle(fn, wait) { var previous = 0; return function () { var args = arguments; var context = this; var now = +new Date(); if (now - previous &gt; wait) { fn.apply(context, args); previous = now; } } } å®šæ—¶å™¨ function throttle(fn, wait) { var timeout; return function() { var args = arguments; var context = this; if (!timeout) { timeout = setTimeout(function() { timeout = null; fn.apply(context, args); }, wait) } } }","categories":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/categories/frontEnd/"},{"name":"js","slug":"frontEnd/js","permalink":"https://ertsul.github.io/categories/frontEnd/js/"}],"tags":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/tags/frontEnd/"},{"name":"js","slug":"js","permalink":"https://ertsul.github.io/tags/js/"}]},{"title":"vue-cli3.0é¡¹ç›®åˆ›å»º+é…ç½®+è‡ªåŠ¨éƒ¨ç½²","slug":"vue-cli3-0é¡¹ç›®åˆ›å»º-é…ç½®-è‡ªåŠ¨éƒ¨ç½²","date":"2019-02-17T14:09:53.000Z","updated":"2019-11-11T15:36:52.886Z","comments":true,"path":"2019/02/17/vue-cli3-0é¡¹ç›®åˆ›å»º-é…ç½®-è‡ªåŠ¨éƒ¨ç½²/","link":"","permalink":"https://ertsul.github.io/2019/02/17/vue-cli3-0é¡¹ç›®åˆ›å»º-é…ç½®-è‡ªåŠ¨éƒ¨ç½²/","excerpt":"","text":"åˆ›å»ºé¡¹ç›® å®‰è£… vue3.0 è„šæ‰‹æ¶ npm install -g @vue/cli åˆ›å»ºé¡¹ç›® vue create my_project ä¸€ç³»åˆ—é€‰æ‹©ä¹‹åï¼Œå¯ä»¥ä¿å­˜ä½ å½“å‰çš„é€‰æ‹©é…ç½®ï¼Œä¹‹ååˆ›å»ºé¡¹ç›®çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥ç”¨äº†ã€‚ å®‰è£…ä¾èµ– cd my_project æœ€åçš„é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š è¿è¡Œé¡¹ç›®vue3.0 è¿è¡Œé¡¹ç›®ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š å‘½ä»¤è¡Œæ–¹å¼ï¼š npm run serve UIè§†å›¾æ–¹å¼ï¼Œè¿™ä¹Ÿæ˜¯3.0ç‰ˆæœ¬çš„ä¸€å¤§äº®ç‚¹ã€‚é€šè¿‡UIè§†å›¾æ–¹å¼ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¾ˆå¤šäº‹ï¼Œå¦‚ï¼šè¿è¡Œé¡¹ç›®ã€å®‰è£…ä¾èµ–ã€å®‰è£…æ’ä»¶ç­‰ã€‚ vue ui webpack é…ç½®vue å·²ç»å¸®æˆ‘ä»¬é…ç½®äº†å¾ˆå¤šï¼Œé¢å¤–è‡ªå·±åˆæ·»åŠ äº†ä¸€äº›é…ç½®ï¼›åœ¨æ ¹ç›®å½•æ·»åŠ  vue.config.js é…ç½®æ–‡ä»¶ï¼š const path = require(&#39;path&#39;); const px2rem = require(&#39;postcss-px2rem&#39;); const VconsoleWebpackPlugin = require(&#39;vconsole-webpack-plugin&#39;); const TerserWebpackPlugin = require(&#39;terser-webpack-plugin&#39;); // åˆ¤æ–­æ˜¯å¦ä¸ºç”Ÿäº§ç¯å¢ƒ const isProduction = process.env.NNODE_ENV === &#39;production&#39;; // è·¯å¾„å¤„ç†å‡½æ•° const resolve = name =&gt; path.resolve(__dirname, name); module.exports = { publicPath: isProduction ? &#39;/production&#39; : &#39;/&#39;, // éƒ¨ç½²åº”ç”¨åŒ…æ—¶çš„åŸºæœ¬ URL productionSourceMap: !isProduction, // ç”Ÿäº§ç¯å¢ƒä¸å¼€å¯ source-map devServer: { // webpack-dev-server çš„é…ç½® port: 8089, // æœ¬åœ°ç«¯å£ open: true, // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ // proxy: { // ä»£ç† // &#39;/api&#39;: { // target: &#39;&lt;url&gt;&#39;, // ws: true, // changeOrigin: true // }, // } }, css: { extract: isProduction, // ç”Ÿäº§ç¯å¢ƒå°† css å•ç‹¬æŠ½ç¦»æˆä¸€ä¸ªæ–‡ä»¶ sourceMap: !isProduction, // ç”Ÿæˆç¯å¢ƒä¸å¼€å¯ source-map loaderOptions: { postcss: { // ç§»åŠ¨ç«¯ä½¿ç”¨rem plugins: [ px2rem({ remUnit: 75 }) ] }, // å…¨å±€å…±äº«variables.scss sass: { // @/ æ˜¯ src/ çš„åˆ«å // æ‰€ä»¥è¿™é‡Œå‡è®¾ä½ æœ‰ `src/variables.scss` è¿™ä¸ªæ–‡ä»¶ data: `@import &quot;@/variables.scss&quot;;` } } }, configureWebpack: config =&gt; { const devPlugins = [ new VconsoleWebpackPlugin({ // å¾®ä¿¡ç§»åŠ¨ç«¯è°ƒè¯•æ§åˆ¶å° enable: !isProduction }) ]; const prodPlugins = [ new TerserWebpackPlugin({ terserOptions: { // æ‰“åŒ…æ—¶å€™çš„é…ç½® warnings: false, compress: true, drop_console: true, drop_debugger: true, pure_funcs: [&#39;console.log&#39;] } }) ]; if (isProduction) { // ç”Ÿäº§ç¯å¢ƒ config.optimization.minimizer = [ ...config.optimization.minimizer, ...prodPlugins ] } else { // å¼€å‘ç¯å¢ƒ config.plugins = [...config.plugins, ...devPlugins] } }, chainWebpack: config =&gt; { // è‡ªå®šä¹‰å…¨å±€å˜é‡ // config // .plugin(&#39;define&#39;) // .tap((args) =&gt; { // args[0].PRODUCTION = isProduction ? JSON.stringify(&#39;&#39;) : // JSON.stringify( // &#39;other/&#39;, // ); // return args; // }); // åˆ«åè®¾ç½® config.resolve.alias .set(&#39;js&#39;, resolve(&#39;src/assets/js&#39;)) .set(&#39;scss&#39;, resolve(&#39;src/assets/scss&#39;)) .set(&#39;images&#39;, resolve(&#39;src/assets/images&#39;)) .set(&#39;components&#39;, resolve(&#39;src/components&#39;)); } } è·¯ç”±é…ç½®vue3.0 çš„è·¯ç”±é…ç½®å·²ç»å¾ˆå®Œå–„äº†ï¼Œè¿™é‡Œæˆ‘ä»…ä»…å°æ”¹åŠ¨ï¼Œå°è£…äº†è·¯ç”±æ‡’åŠ è½½å‡½æ•°ï¼š import Vue from &#39;vue&#39; import Router from &#39;vue-router&#39; import Home from &#39;./views/Home.vue&#39; Vue.use(Router) // è·¯ç”±æ‡’åŠ è½½ // route level code-splitting // this generates a separate chunk (about.[hash].js) for this route // which is lazy-loaded when the route is visited. const addRouterComponent = path =&gt; import(path); export default new Router({ mode: &#39;history&#39;, base: process.env.BASE_URL, routes: [{ path: &#39;/&#39;, name: &#39;home&#39;, component: Home }, { path: &#39;/about&#39;, name: &#39;about&#39;, component: addRouterComponent(&#39;./views/About.vue&#39;) } ] }) axios çš„é…ç½®åœ¨ scr ç›®å½•ä¸‹æ·»åŠ  api ç›®å½•ï¼Œå¹¶æ–°å»ºä¸¤ä¸ªæ–‡ä»¶ï¼šconfig.js å’Œ api.jsã€‚é…ç½®å¦‚ä¸‹ï¼š config.js import axios from &#39;axios&#39;; import qs from &#39;qs&#39;; axios.defaults.withCredentials = false; // è¯·æ±‚æ‹¦æˆªå™¨ axios.interceptors.request.use( request =&gt; { request.data = request.data || {}; const hasHttp = /^http(|s):\\/\\//.test(request.url); if (!hasHttp) { // æ—  http or https å¤´å¤„ç† request.url = `https://${request.url}`; } if (request.data) { request.data = { // commom: &#39;&#39;, è¿™é‡Œå¯ä»¥æ·»åŠ ä¸€äº›å…¬å…±çš„è¯·æ±‚å‚æ•° data: JSON.stringify(request.data) }; request.data = qs.stringify(request.data); } return request; }, error =&gt; Promise.reject(error) ); // å“åº”æ‹¦æˆªå™¨ axios.interceptors.response.use( response =&gt; { const responseData = response.data; if (responseData.errcode !== 0) { // é”™è¯¯å¤„ç† return Promise.reject(responseData.msg || &#39;æœªçŸ¥é”™è¯¯&#39;); } responseData.result = responseData.result || {}; return responseData; }, error =&gt; Promise.reject(error) ); export { axios }; api.js import { axios } from &#39;./config.js&#39;; // ä¾‹å­ 1 export const aApi1Name = params =&gt; axios.post(url, params); // ä¾‹å­ 2 export const aApi2Name = params =&gt; axios.get(url, params); æ‰“åŒ…åè‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯ scp2ï¼›é€šè¿‡å‘è„šæœ¬ä¼ é€’ä¸åŒå‚æ•°ï¼Œéƒ¨ç½²åˆ°ä¸åŒçš„æœåŠ¡å™¨è·¯å¾„ï¼›åœ¨æ ¹ç›®å½•æ·»åŠ  deploy.js è„šæœ¬ã€‚ç›¸å…³é…ç½®å¦‚ä¸‹ï¼š package.json &quot;buildTest&quot;: &quot;vue-cli-service build &amp;&amp; node deploy.js development&quot;, &quot;buildProd&quot;: &quot;vue-cli-service build &amp;&amp; node deploy.js production&quot; deploy.js const qs = require(&#39;qs&#39;); // åˆ¤æ–­æ˜¯å¦è¾“å‡ºå¸®åŠ©ä¿¡æ¯ const helpMessage = `usage: node deploy.js [deploy_target]`; if ( process.argv.length !== 3 || process.argv[2] === &#39;-h&#39; || process.argv[2] === &#39;--help&#39; ) { console.log(helpMessage); process.exit(0); } // åˆ¤æ–­æ˜¯å¦æ˜¯ç”Ÿäº§ç¯å¢ƒ const isProduction = process.argv[2] === &#39;production&#39;; // è®¾ç½®éƒ¨ç½²çš„æ–‡ä»¶è·¯å¾„ï¼Œæ­£æœ or æµ‹æœ let deployPath = &#39;&#39;; if (isProduction) { deployPath = &#39;/production&#39; } else { deployPath = &#39;/test&#39; } // è®¾ç½®æœåŠ¡å™¨æœåŠ¡å™¨ä¿¡æ¯ const SERVER_INFO = { host: &#39;134.175.150.8&#39;, port: 22, username: &#39;&#39;, password: &#39;&#39;, path: deployPath } // éƒ¨ç½²åˆ°æœåŠ¡å™¨ client.scp(&#39;./dist/&#39;, SERVER_INFO, err =&gt; { if (err) { console.log(&#39;Deploy Failed!\\n&#39;, err); } }) console.log(`Deploy ${isProduction ? &#39;production&#39; : &#39;developemt&#39;} finished!`); æ€»ç»“ï¼šé€šè¿‡ä¸Šé¢çš„é…ç½®ï¼ŒåŸºæœ¬å¯ä»¥å®ç° vue é¡¹ç›®ä»åˆ›å»ºåˆ°é…ç½®åˆ°æ‰“åŒ…è‡ªåŠ¨éƒ¨ç½²çš„è¿‡ç¨‹ã€‚","categories":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/categories/frontEnd/"},{"name":"Vue","slug":"frontEnd/Vue","permalink":"https://ertsul.github.io/categories/frontEnd/Vue/"}],"tags":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/tags/frontEnd/"},{"name":"Vue","slug":"Vue","permalink":"https://ertsul.github.io/tags/Vue/"}]},{"title":"websocket","slug":"websocket","date":"2019-02-17T13:57:39.000Z","updated":"2019-11-11T15:36:59.393Z","comments":true,"path":"2019/02/17/websocket/","link":"","permalink":"https://ertsul.github.io/2019/02/17/websocket/","excerpt":"","text":"HTTP/HTTPS åè®® ä¸€ä¸ª request å¯¹åº”ä¸€ä¸ª responseã€‚ä¸€èˆ¬ä½¿ç”¨ è½®è¯¢ æœºåˆ¶è·å–ä¿¡æ¯ã€‚ è™½ç„¶åæœŸæœ‰ keep-aliveï¼Œå¯ä»¥ä¸€æ¬¡è¿æ¥ä¸­å¤„ç†å¤šä¸ª request åˆå¹¶å‘é€ï¼Œæ¥æ”¶å¤šä¸ª responseï¼Œå¯¹æ¯ä¸ªè¯·æ±‚ä»ç„¶éœ€è¦å•ç‹¬å‘ headerã€‚ HTTP çš„ response æ˜¯è¢«åŠ¨çš„ï¼Œé€šä¿¡åªèƒ½ç”±å®¢æˆ·ç«¯å‘èµ·ï¼Œåšä¸åˆ°æœåŠ¡ç«¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€ä¿¡æ¯ã€‚ HTTP æ˜¯æ— çŠ¶æ€åè®®ã€‚ éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ã€‚ HTTPï¼šTCP + HTTP HTTPSï¼šTCP + HTTP + TLS ajax è½®è¯¢ajax è½®è¯¢ æ˜¯æŒ‡å®¢æˆ·ç«¯ ä¸æ–­ å‘æœåŠ¡å™¨å‘é€èµ„æºè¯·æ±‚ requestï¼ŒæœåŠ¡ç«¯ä¸ç®¡æœ‰æ— ç›®æ ‡èµ„æºï¼Œéƒ½ä¼šè¿”å› response ç»“æœã€‚è¿™æ ·å°±è¦æ±‚æœåŠ¡å™¨æ‹¥æœ‰æ›´å¥½çš„å¤„ç†é€Ÿåº¦ã€‚ long poll / é•¿è½®è¯¢long poll æ¯” ajax è½®è¯¢ å¥½ç‚¹ï¼Œä¸ä¼šä¸æ–­ å‘æœåŠ¡å™¨å‘é€èµ„æºè¯·æ±‚ requestï¼Œä¸€æ—¦æ¥å—å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæœ‰èµ„æºå°±è¿”å›ï¼›æ— èµ„æºå°±æŒ‚èµ·ï¼Œç›´åˆ°æœ‰èµ„æºæ‰è¿”å› response ç»“æœï¼ˆæœ‰ä¸”ä»…æœ‰è¿”å›ä¸€æ¬¡ï¼‰ã€‚é«˜å¹¶å‘ï¼Œéœ€è¦æœåŠ¡å™¨å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚çš„èƒ½åŠ›ã€‚ websocket åè®® websocket æ˜¯ html5 å‡ºçš„åè®®ã€‚ websocket æ˜¯ä¸€ä¸ªæŒä¹…åŒ–çš„åè®®ï¼Œwebsocket åªéœ€è¦ä¸€æ¬¡è¯·æ±‚ï¼ˆä¸€æ¬¡ HTTP æ¡æ‰‹ ï¼‰ï¼Œå°±å¯ä»¥å¾—åˆ°æ‰€éœ€çš„èµ„æºã€‚ æœåŠ¡ç«¯å¯ä»¥ ä¸»åŠ¨ å‘å®¢æˆ·ç«¯æ¨é€ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ ä¸»åŠ¨ å‘æœåŠ¡ç«¯æ¨é€æ¶ˆæ¯ï¼Œå®ç°â€œåŒå‘å¹³ç­‰â€ï¼Œæ˜¯å±äºæœåŠ¡å™¨æ¨é€æŠ€æœ¯çš„ä¸€ç§ã€‚ ä¸ HTTP æœ‰è¾ƒå¥½çš„å…¼å®¹æ€§ï¼Œåœ¨æ¡æ‰‹é˜¶æ®µé‡‡ç”¨ HTTP åè®®ã€‚ é»˜è®¤ç«¯å£ 80 and 443ã€‚ æ•°æ®æ ¼å¼è½»é‡ï¼Œæ€§èƒ½å¼€é”€å°ï¼Œé€šä¿¡é«˜æ•ˆï¼Œå¯ä»¥å‘é€æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥äºŒè¿›åˆ¶æ•°æ®ã€‚ æ²¡æœ‰åŒæºç­–ç•¥ã€‚ WSï¼šTCP + WS WSSï¼šTCP + WS + TLS websocket æ¡æ‰‹GET /chat HTTP/1.1 Host: server.example.com Upgrade: websocket Connection: Upgrade Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw== Sec-WebSocket-Protocol: chat, superchat Sec-WebSocket-Version: 13 Upgrade/Connectionï¼šé€šçŸ¥æœåŠ¡å™¨å‘èµ·çš„æ˜¯ wesocket åè®®ã€‚ Sec-WebSocket-Keyï¼šæµè§ˆå™¨éšæœºç”Ÿæˆçš„ Base64 encode çš„å€¼ï¼Œç”¨äºéªŒè¯æœåŠ¡å™¨æ˜¯ä¸æ˜¯ websocket åè®®ã€‚ Sec-WebSocket-Protocolï¼šç”¨æˆ·å®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œç”¨æ¥åŒºåˆ† åŒ url ä¸‹ï¼Œä¸åŒçš„æœåŠ¡æ‰€éœ€è¦çš„åè®®ã€‚ Sec-WebSocket-Versionï¼šåè®®ç‰ˆæœ¬ã€‚ æœåŠ¡å™¨è¿”å›HTTP/1.1 101 Switching Protocols Upgrade: websocket Connection: Upgrade Sec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk= Sec-WebSocket-Protocol: chat Upgrade/Connectionï¼šé€šçŸ¥å®¢æˆ·ç«¯å‡çº§çš„æ˜¯ websocket åè®®ã€‚ Sec-WebSocket-Acceptï¼šç»æœåŠ¡å™¨ç¡®è®¤ï¼ŒåŠ å¯†åçš„ Sec-WebSocket-Keyã€‚ Sec-WebSocket-Protocolï¼šæœ€ç»ˆä½¿ç”¨çš„åè®®ã€‚ ä»£ç å®ç°ws.addEventListener(&#39;open&#39;, function () { console.log(&#39;Open the websocket...&#39;); ws.send(&#39;Hello websocket...&#39;); }); ws.addEventListener(&#39;message&#39;, function (e) { console.log(&#39;Ready state: &#39; + ws.readyState, &#39;Receive the websocket message...&#39; + e.data); ws.close(); setTimeout(() =&gt; { console.log(&#39;Ready state: &#39; + ws.readyState); }, 1000) }); ws.addEventListener(&#39;close&#39;, function () { console.log(&#39;Ready state: &#39; + ws.readyState, &#39;Close the websocket...&#39;); }) ç»“æœï¼š å‚è€ƒï¼š https://www.zhihu.com/search?type=content&amp;q=websocket http://www.ruanyifeng.com/blog/2017/05/websocket.html","categories":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/categories/frontEnd/"}],"tags":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/tags/frontEnd/"}]},{"title":"ç”¨æˆ·è®¤è¯å°æ€»ç»“","slug":"ç”¨æˆ·è®¤è¯å°æ€»ç»“","date":"2019-02-17T13:52:43.000Z","updated":"2019-11-11T15:36:28.594Z","comments":true,"path":"2019/02/17/ç”¨æˆ·è®¤è¯å°æ€»ç»“/","link":"","permalink":"https://ertsul.github.io/2019/02/17/ç”¨æˆ·è®¤è¯å°æ€»ç»“/","excerpt":"","text":"ç”¨æˆ·è®¤è¯ä¸€èˆ¬çš„ç”¨æˆ·è®¤è¯æµç¨‹å¦‚ä¸‹å›¾ï¼š ä½†æ˜¯ï¼Œè¿™ç§æ¨¡å¼çš„æ‰©å±•æ€§ä¸å¥½ã€‚å•ä¸ªæœåŠ¡å™¨æ²¡é—®é¢˜ï¼Œå¦‚æœå¤šä¸ªæœåŠ¡å™¨é›†ç¾¤ï¼Œè¦æ±‚å…±äº« session ï¼Œæ¯ä¸ªæœåŠ¡å™¨éƒ½èƒ½è®¿é—®åˆ° session ã€‚ è§£å†³æ–¹æ¡ˆä¸€ï¼šsession æ•°æ®æŒä¹…åŒ–ï¼Œå†™å…¥æ•°æ®åº“æˆ–è€…å…¶ä»–æŒä¹…å±‚ã€‚å„ä¸ªæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œå‘æŒä¹…å±‚å‘é€æ•°æ®è¯·æ±‚ã€‚ ç¼ºç‚¹ï¼šå·¥ç¨‹é‡å¤§ã€‚ è§£å†³æ–¹æ¡ˆäºŒï¼šæœåŠ¡å™¨ä¸ä¿å­˜ session æ•°æ®ï¼Œæ‰€æœ‰çš„æ•°æ®ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½å‘å›æœåŠ¡å™¨ã€‚å¦‚ï¼šJWT(Json Web Token)ã€‚ JWTJWT æœåŠ¡å™¨ä¸ä¿å­˜ session æ•°æ®ï¼Œåœ¨æœåŠ¡å™¨è®¤è¯ä¹‹åï¼Œè¿”å›ä¸€ä¸ª JSON å¯¹è±¡ã€‚æ ¼å¼å¦‚ä¸‹ï¼š { &quot;å§“å&quot;: &quot;zero&quot;, &quot;è§’è‰²&quot;: &quot;ç®¡ç†å‘˜&quot;, &quot;åˆ°æœŸæ—¶é—´&quot;: &quot;2018å¹´10æœˆ6æ—¥0ç‚¹0åˆ†&quot; } ä¹‹åï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„ç”¨æˆ·è®¤è¯éƒ½é è¿™ä¸ª JSON å¯¹è±¡ï¼Œå½“ç„¶ï¼Œè¿™ä¸ªå¯¹è±¡åé¢ä¼šåŠ ä¸Šç­¾åï¼Œä¿è¯æ•°æ®ä¸è¢«ç¯¡æ”¹ã€‚ JWT çš„æ•°æ®ç»“æ„ JWT æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œä¸­é—´ç”¨ . åˆ†éš”ï¼Œå†…éƒ¨æ²¡æœ‰æ¢è¡Œã€‚ ç»„æˆç”±ä¸‰ä¸ªéƒ¨åˆ†ï¼šHeader.Payload.Signature Headerï¼šå¤´éƒ¨ã€‚JSON å¯¹è±¡ï¼Œæè¿° JWT çš„å…ƒæ•°æ®ã€‚ Payloadï¼šè´Ÿè½½ã€‚JSON å¯¹è±¡ï¼Œå­˜æ”¾å®é™…éœ€è¦ä¼ é€’çš„æ•°æ®ï¼›ä¸åŠ å¯†ã€‚ Signatureï¼šç­¾åã€‚å¯¹ Header å’Œ Payload çš„ç­¾åï¼Œé˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹ã€‚ Header æ ¼å¼ï¼š { &quot;alg&quot;: &quot;HS256&quot;, // ç­¾åçš„ç®—æ³• &quot;typ&quot;: &quot;JWT&quot; // token ç±»å‹ } Payload ä¸ƒä¸ªå­—æ®µï¼š iss (issuer)ï¼šç­¾å‘äºº exp (expiration time)ï¼šè¿‡æœŸæ—¶é—´ sub (subject)ï¼šä¸»é¢˜ aud (audience)ï¼šå—ä¼— nbf (Not Before)ï¼šç”Ÿæ•ˆæ—¶é—´ iat (Issued At)ï¼šç­¾å‘æ—¶é—´ jti (JWT ID)ï¼šç¼–å· JWT çš„ä½¿ç”¨æ–¹å¼ å­˜å‚¨åœ¨ cookie ä¸­ã€‚ å­˜å‚¨åœ¨ localStorage ä¸­ã€‚ å®¢æˆ·ç«¯æ¯æ¬¡ä¸æœåŠ¡å™¨è¿›è¡Œé€šä¿¡çš„æ—¶å€™ï¼Œéƒ½ä¼šå¸¦ä¸Š JWTã€‚ å‚è€ƒï¼š http://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html","categories":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/categories/frontEnd/"}],"tags":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/tags/frontEnd/"}]},{"title":"web safe","slug":"web-safe","date":"2019-02-17T13:41:10.000Z","updated":"2019-11-11T15:36:55.140Z","comments":true,"path":"2019/02/17/web-safe/","link":"","permalink":"https://ertsul.github.io/2019/02/17/web-safe/","excerpt":"","text":"CSRF : Cross Site Request ForgeryCSRF è·¨ç«™è¯·æ±‚ä¼ªé€ ã€‚æ˜¯ä¸€ç§åŠ«æŒå—ä¿¡ä»»ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€éé¢„æœŸè¯·æ±‚çš„æ”»å‡»æ–¹å¼ã€‚ç®€è€Œè¨€ä¹‹ï¼šç”¨æˆ·åœ¨ç™»å½•çš„æƒ…å†µä¸‹è®¿é—®äº†é’“é±¼ç½‘ç«™ï¼Œé’“é±¼ç½‘ç«™é€šè¿‡ç”¨æˆ·å‘å…¶ä»–ç½‘ç«™å‘é€è¯·æ±‚ï¼Œè¿™æ ·å°±è¾¾åˆ°äº†æ¨¡æ‹Ÿç”¨æˆ·çš„ç›®çš„ã€‚å…·ä½“å®ç°å¦‚ä¸‹å›¾ï¼š é˜²å¾¡æ‰‹æ®µ éªŒè¯ç å®ç°ç”¨æˆ·éªŒè¯ã€‚éªŒè¯ç å¼ºåˆ¶ç”¨æˆ·å¿…é¡»ä¸åº”ç”¨è¿›è¡Œäº¤äº’ï¼Œæ‰èƒ½å®Œæˆæœ€ç»ˆçš„è¯·æ±‚ã€‚ é€šè¿‡ referer å®ç°ç”¨æˆ·éªŒè¯ã€‚æ ¹æ® HTTP åè®®ï¼Œåœ¨ HTTP å¤´ä¸­æœ‰ä¸€ä¸ªå­—æ®µå« Refererï¼Œå®ƒè®°å½•äº†è¯¥ HTTP è¯·æ±‚çš„ æ¥æºåœ°å€ã€‚é€šè¿‡ Referer Checkï¼Œå¯ä»¥æ£€æŸ¥è¯·æ±‚æ˜¯å¦æ¥è‡ªåˆæ³•çš„â€æºâ€ã€‚ é€šè¿‡ token å®ç°ç”¨æˆ·éªŒè¯ã€‚ å°½é‡ä¸è¦åœ¨é¡µé¢çš„é“¾æ¥ä¸­æš´éœ²ç”¨æˆ·éšç§ä¿¡æ¯ã€‚ å¯¹äºç”¨æˆ·ä¿®æ”¹åˆ é™¤ç­‰æ“ä½œæœ€å¥½éƒ½ä½¿ç”¨ post æ“ä½œã€‚ é¿å…å…¨ç«™é€šç”¨çš„ cookieï¼Œä¸¥æ ¼è®¾ç½® cookie çš„åŸŸã€‚ XSS : Cross Site ScriptXSS è·¨ç«™è„šæœ¬æ”»å‡»ã€‚æ”»å‡»è€…å‘ç”¨æˆ·çš„ç½‘ç«™åµŒå…¥çš„ js è„šæœ¬ä»£ç ï¼Œå½“ç”¨æˆ·è®¿é—®è¯¥ç½‘ç«™çš„æ—¶å€™ï¼Œè¯¥ js è„šæœ¬ä»£ç å°±ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ”»å‡»ç”¨æˆ·çš„ç›®çš„ã€‚ åå°„å‹ XSS æ”»å‡»åˆç§°éæŒä¹…æ€§è·¨ç«™è„šæœ¬æ”»å‡»ã€‚å‘å‡ºè¯·æ±‚æ—¶ï¼ŒXSS ä»£ç å‡ºç°åœ¨ URL ä¸­ï¼Œä½œä¸ºè¾“å…¥æäº¤åˆ°æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨ç«¯è§£æåå“åº”ï¼ŒXSS éšå“åº”å†…å®¹ä¸€èµ·è¿”å›ç»™æµè§ˆå™¨ï¼Œæœ€åæµè§ˆå™¨è§£ææ‰§è¡Œ XSS ä»£ç ã€‚æ¼æ´äº§ç”Ÿçš„åŸå› æ˜¯æ”»å‡»è€…æ³¨å…¥çš„æ•°æ®åæ˜ åœ¨å“åº”ä¸­ã€‚ä¸€ä¸ªå…¸å‹çš„éæŒä¹…æ€§ XSS åŒ…å«ä¸€ä¸ªå¸¦ XSS æ”»å‡»å‘é‡çš„é“¾æ¥(å³æ¯æ¬¡æ”»å‡»éœ€è¦ç”¨æˆ·çš„ç‚¹å‡»)ã€‚æ¯”å¦‚ï¼š http://www.test.com/message.php?send=&lt;script&gt;alert(â€˜foolish!â€™)&lt;/script&gt;ï¼ å­˜å‚¨å‹ XSS æ”»å‡»XSS æäº¤çš„ä»£ç ä¼šå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼ˆæ•°æ®åº“ï¼Œå†…å­˜ï¼Œæ–‡ä»¶ç³»ç»Ÿç­‰ï¼‰ï¼Œä¸‹æ¬¡è¯·æ±‚ç›®æ ‡é¡µé¢æ—¶ä¸ç”¨å†æäº¤ XSS ä»£ç ã€‚è¿™ç§æ”»å‡»æ–¹å¼çš„ç¨³å®šæ€§å¾ˆå¥½ã€‚æ¯”å¦‚ï¼š æ”»å‡»è€…åœ¨ value å¡«å†™&lt;script&gt;alert(â€˜foolish!â€™)&lt;/script&gt;ã€æˆ–è€… html å…¶ä»–æ ‡ç­¾ï¼ˆç ´åæ ·å¼ã€‚ã€‚ã€‚ï¼‰ã€ä¸€æ®µæ”»å‡»å‹ä»£ç ã€‘ï¼›å°†æ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼›å…¶ä»–ç”¨æˆ·å–å‡ºæ•°æ®æ˜¾ç¤ºçš„æ—¶å€™ï¼Œå°†ä¼šæ‰§è¡Œè¿™äº›æ”»å‡»æ€§ä»£ç ã€‚ å…·ä½“æ–¹å¼ æ”»å‡»è€…å‘æœåŠ¡å™¨æ³¨å…¥ js ä»£ç ã€‚ è¯±å¯¼ç”¨æˆ·è®¿é—®å—åˆ°æ”»å‡»çš„ç½‘ç«™ã€‚ ç”¨æˆ·è®¿é—®å—åˆ°æ”»å‡»çš„ç½‘ç«™ï¼Œæ‰§è¡Œæ³¨å…¥çš„ js ä»£ç ã€‚ XSS é˜²å¾¡æ–¹å¼ HttpOnly è¾“å…¥æ£€æŸ¥ è¾“å‡ºæ£€æŸ¥ å‚è€ƒé“¾æ¥ï¼š https://www.cnblogs.com/shytong/p/5308667.html https://github.com/dwqs/blog/issues/68 https://www.cnblogs.com/phpstudy2015-6/p/6767032.html#_label3","categories":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/categories/frontEnd/"},{"name":"web-safe","slug":"frontEnd/web-safe","permalink":"https://ertsul.github.io/categories/frontEnd/web-safe/"}],"tags":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/tags/frontEnd/"},{"name":"web-safe","slug":"web-safe","permalink":"https://ertsul.github.io/tags/web-safe/"}]},{"title":"Ajaxå’Œè·¨åŸŸæ€»ç»“","slug":"Ajaxå’Œè·¨åŸŸæ€»ç»“","date":"2019-02-16T16:00:28.000Z","updated":"2019-11-11T15:36:30.832Z","comments":true,"path":"2019/02/17/Ajaxå’Œè·¨åŸŸæ€»ç»“/","link":"","permalink":"https://ertsul.github.io/2019/02/17/Ajaxå’Œè·¨åŸŸæ€»ç»“/","excerpt":"","text":"Ajaxï¼ˆJavaScriptå®ç°ï¼‰ç®€ä»‹Ajaxï¼ˆAsync Javascript And Xmlï¼‰ï¼šå¼‚æ­¥Jså’ŒXmlï¼Œæ„æ€å°±æ˜¯ç”¨Jsæ‰§è¡Œå¼‚æ­¥ç½‘ç»œè¯·æ±‚ã€‚ä½œç”¨ä¸»è¦æ˜¯åœ¨ä¸é‡æ–°åŠ è½½å…¨éƒ¨ç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯¹éƒ¨åˆ†é¡µé¢è¿›è¡Œæ›´æ–°ã€‚ åˆ›å»ºXMLHttpRequestå¯¹è±¡é™¤äº†IE5å’ŒIE6ä¸æ”¯æŒä¹‹å¤–ï¼ˆæ”¯æŒActiveXObjectå¯¹è±¡ï¼‰ï¼Œå‡ ä¹ç°åœ¨æ‰€æœ‰çš„æœ‰å†…å»ºçš„XMLHttpRequestå¯¹è±¡ã€‚æ‰€ä»¥åœ¨åˆ›å»ºè¯·æ±‚å¯¹è±¡ä¹‹å‰åˆ¤æ–­ä¸‹å°±å¥½äº†ï¼š let xhr = null; xhr = window.XMLHttpRequest ? new xmlHttpRequest() : new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;) // æˆ–è€… if(window.XMLHttpRequest){ xhr = new XMLHttpRequest() }else{ xhr = new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;) } é€šè¿‡open()å’Œsend()å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ xhr.open(method, url, async)è¿™ä¸ªæ–¹æ³•çš„å‚æ•°åˆ†åˆ«æ˜¯ï¼šmethodè¯·æ±‚çš„ç±»å‹GETæˆ–è€…POSTï¼›URLè¯·æ±‚çš„æ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šçš„åœ°å€ï¼›asyncæ˜¯å¦å¼‚æ­¥è¯·æ±‚trueæˆ–è€…falseï¼ˆä¸€èˆ¬ä¸è®¾ç½®ä¸ºfalseï¼‰ã€‚ xhr.send()ï¼šå‘é€è¯·æ±‚ã€‚ xhr.setRequestHeader(header, value)ï¼šå¦‚æœæ˜¯POSTçš„è¯ï¼Œè¦è®¾ç½®å‘é€çš„HTTPå¤´ï¼Œç„¶åé€šè¿‡sendæ–¹æ³•å‘é€å†…å®¹ã€‚å‚æ•°åˆ†åˆ«æ˜¯ï¼šå‘é€çš„å¤´éƒ¨åç§°ï¼Œå¤´éƒ¨çš„å€¼ã€‚ä¸€èˆ¬éƒ½æ˜¯å›ºå®šçš„ã€‚ // å‘æµè§ˆå™¨å‘é€è¯·æ±‚ xhr.open(&#39;GET&#39;, &#39;./server.php&#39;, true) // æ·»åŠ HTTPå¤´ï¼ˆPOSTæ–¹æ³•ï¼‰ xhr.setRequestHeader(&#39;Content-Text&#39;, &#39;application/x-www-form-urlencoded&#39;) xhr.send() GETæ–¹æ³•ä¸éœ€è¦å‚æ•°ï¼ŒPOSTæ–¹æ³•åˆ™éœ€è¦æŠŠbodyå‚æ•°ï¼›å¦‚æœè¦æƒ³å‘æœåŠ¡å™¨å‘é€ç›¸å…³çš„å‚æ•°ï¼Œåˆ™é€šè¿‡opené‡Œé¢çš„ç¬¬äºŒä¸ªå‚æ•°urlè¿›è¡Œå‘é€ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ä»£ç ï¼š url = &quot;./filePath?paramName=&quot; + paramValue + ...; åˆ¤æ–­å‡†å¤‡çŠ¶æ€xhr.onreadystatechange = function () { if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) { ... } } xhr.onreadystatechangeæ–¹æ³•ä¸­ï¼Œæ¯å½“readyStateæ”¹å˜æ—¶ï¼Œå°±ä¼šè§¦å‘xhr.onreadystatechangeäº‹ä»¶ã€‚ readyStateå±æ€§ï¼šå­˜æœ‰XMLHttpRequestçš„çŠ¶æ€ä¿¡æ¯ã€‚0ï¼šè¯·æ±‚æœªåˆå§‹åŒ–ï¼›1ï¼šæœåŠ¡å™¨é“¾æ¥å·²ç»å»ºç«‹ï¼›2ï¼šè¯·æ±‚å·²ç»æ¥å—ï¼›3ï¼šè¯·æ±‚å¤„ç†ä¸­ï¼›4ï¼šè¯·æ±‚å·²å®Œæˆï¼Œä¸”å“åº”å·²å°±ç»ªã€‚ä¸€å…±æœ‰5ä¸ªçŠ¶æ€ï¼Œæ‰€ä»¥onreadystatechangeäº‹ä»¶ä¼šè¢«è§¦å‘5æ¬¡ã€‚ å®é™…ä¸Šonreadystateschangeæ˜¯é€šè¿‡å›è°ƒå‡½æ•°å®ç°çš„ï¼Œå³ï¼šæ¯å½“readyStateçš„çŠ¶æ€æ”¹å˜æ—¶ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°å°±ä¼šè¢«æ‰§è¡Œã€‚ statuså±æ€§ï¼šè¡¨ç¤ºå“åº”çš„ç»“æœã€‚ æ€»çš„ä»£ç å¦‚ä¸‹ï¼š document.getElementById(&#39;btn&#39;).onclick = function () { // åˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼ˆå…ˆåˆ¤æ–­æµè§ˆå™¨ç±»å‹ï¼‰ // var xhr = null; // if (window.XMLHttpRequest) { // xhr = new XMLHttpRequest() // } else { // xhr = new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;) // } xhr = (window.XMLHttpRequest) ? (new XMLHttpRequest()) : (new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;)) // åˆ¤æ–­å“åº”çŠ¶æ€å¹¶æ‰§è¡Œç›¸å…³çš„æ“ä½œ xhr.onreadystatechange = function () { if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) { let data = xhr.responseText console.log(data); document.getElementById(&#39;myDiv&#39;).innerText = data } } // å‘æµè§ˆå™¨å‘é€è¯·æ±‚ let url = &quot;./server.txt&quot; xhr.open(&#39;GET&#39;, url, true) // æ·»åŠ HTTPå¤´ï¼ˆPOSTæ–¹æ³•ï¼‰ // xhr.setRequestHeader(&#39;Content-Text&#39;, &#39;application/x-www-form-urlencoded&#39;) xhr.send(null); } ä½†æ˜¯ï¼Œç”±äºåœ¨åŒæºç­–ç•¥çš„ä½œç”¨ä¸‹ï¼Œæµè§ˆå™¨åªèƒ½åŒæºçš„å…¶ä»–åŸŸçš„èµ„æºï¼Œå…ˆçœ‹çœ‹ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥ï½ åŒæºç­–ç•¥/SOPï¼ˆSame origin policyï¼‰æ¥è‡ªç™¾åº¦çš„è§£é‡Šï¼š åŒæºç­–ç•¥ï¼ˆSame origin policyï¼‰æ˜¯ä¸€ç§çº¦å®šï¼Œå®ƒæ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ï¼ˆé˜²æ­¢CSRF/XSRFæ”»å‡»ï¼šè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰ã€‚ç°åœ¨æ‰€æœ‰æ”¯æŒJavaScript çš„æµè§ˆå™¨éƒ½ä¼šä½¿ç”¨è¿™ä¸ªç­–ç•¥ã€‚æ‰€è°“åŒæºæ˜¯æŒ‡ï¼ŒåŸŸåï¼Œåè®®ï¼Œç«¯å£ç›¸åŒã€‚ ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æµè§ˆå™¨åªèƒ½è¯·æ±‚åŒæºçš„å…¶ä»–åŸŸçš„èµ„æºï¼Œå³åŒæºçš„ç½‘é¡µæ‰èƒ½ç›¸äº’è·å–èµ„æºï¼Œè€Œä¸èƒ½è®¿é—®å…¶ä»–åŸŸçš„èµ„æºï¼›ä½†æ˜¯æœ‰ä¸€ä¸ªä¾‹å¤–ï¼ŒåŒæºç­–ç•¥ä¸ä¼šé˜»æ­¢åŠ¨æ€è„šæœ¬æ’å…¥åˆ°æ–‡æ¡£ä¸­ï¼›å…¶ä¸­ï¼Œ\\æ˜¯å¼€æ”¾ç­–ç•¥ï¼›å½“webç½‘é¡µæ‰§è¡Œä¸€ä¸ªè„šæœ¬ä¹‹å‰ï¼Œä¼šæ£€æŸ¥æ˜¯å¦åŒæºï¼Œåªæœ‰åŒæºæ‰ä¼šè¢«æ‰§è¡Œï¼ŒéåŒæºåˆ™ä¼šè¢«æ‹’ç»è®¿é—®ã€‚æˆªå–ç½‘ä¸Šçš„å›¾ç‰‡è¯´æ˜åŒæºï¼š è·¨åŸŸè·¨åŸŸå°±æ˜¯çªç ´åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œè·å–å…¶ä»–æºçš„èµ„æºã€‚éåŒæºä¸»è¦æœ‰ä¸‰ç§è¡Œä¸ºä¼šå—åˆ°é™åˆ¶ï¼š Cookie,LocalStorageå’ŒIndexDBæ— æ³•è¯»å–ã€‚ DOMæ— æ³•è·å–ã€‚ Ajaxæ— æ³•è·å–ã€‚ JSONPJSONPæ˜¯å®ç°è·¨åŸŸçš„å¸¸ç”¨æ–¹æ³•ï¼Œä½†æ˜¯JSONPåªèƒ½å®ç°GETæ–¹æ³•ã€‚å®é™…ä¸Šæ˜¯æ˜¯åˆ©ç”¨äº†æµè§ˆå™¨å…è®¸è·¨åŸŸå¼•ç”¨JavaScriptèµ„æºï¼ˆscriptæ ‡ç­¾æ˜¯å¼€æ”¾ç­–ç•¥ï¼‰ã€‚ ä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­ï¼šæˆ‘ä»¬ä»360æµè§ˆå™¨é¦–é¡µçš„å¤©æ°”æŸ¥è¯¢è·å–å¤©æ°”æŸ¥è¯¢çš„å¼‚æ­¥è¯·æ±‚åœ°å€ï¼›è¿™é‡Œæˆ‘ä»¬å®ç°é€šè¿‡æœ¬åœ°localhostæœåŠ¡å™¨è·¨åŸŸè¯·æ±‚360çš„å¤©æ°”æŸ¥è¯¢ï¼Œæ¥è¯´æ˜JSONPæ€ä¹ˆå®ç°è·¨åŸŸã€‚æˆ‘ä»¬è¯·æ±‚èµ„æºçš„åœ°å€ä¸ºï¼šhttps://cdn.weather.hao.360.cn/sed_api_weather_info.php?code=101280501&amp;v=2&amp;param=weather&amp;app=hao360&amp;_jsonp=__jsonp21__&amp;t=2521600åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€è¿™ä¸ªåœ°å€ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°è¿™æ ·çš„æ•°æ®ï¼š__jsonp21__({â€¦})ã€‚è§£é‡Šï¼šJSONPè¿”å›çš„é€šå¸¸æ˜¯ä»¥å‡½æ•°çš„å½¢å¼è¿”å›ï¼Œå‰é¢è¿™ä¸ª__jsonp21__æ˜¯å‡½æ•°åï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­äº‹å…ˆå‡†å¤‡å¥½åç§°ä¸º__jsonp21__çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯¹è·¨åŸŸè¯·æ±‚åˆ°çš„æ•°æ®å°±æ˜¯æ”¾åœ¨è¿™ä¸ªå‡½æ•°ä¸­çš„ï¼Œç„¶ååŠ¨æ€åŠ è½½ä¸€ä¸ªscriptèŠ‚ç‚¹ï¼Œç›¸å½“äºåŠ¨æ€è¯»å–å¤–åŸŸçš„JavaScriptèµ„æºï¼Œæœ€åå°±ç­‰ç€æ¥æ”¶å›è°ƒäº†ã€‚ å…·ä½“ä»£ç å¦‚ä¸‹ï¼š // è¯·æ±‚çš„åœ°å€ä¸ºï¼šhttps://cdn.weather.hao.360.cn/sed_api_weather_info.php?code=101280501&amp;v=2&amp;param=weather&amp;app=hao360&amp;_jsonp=__jsonp21__&amp;t=2521600 function __jsonp21__(data) { // å°†è¦å¤„ç†äº†çš„æ•°æ®æ”¾åœ¨è¿™ä¸ªå‡½æ•°ä¸­ console.log(data); // å¾—åˆ°çš„æ˜¯è·¨åŸŸè¯·æ±‚çš„æ•°æ® let myDiv = document.getElementById(&#39;myDiv&#39;) myDiv.innerHTML = data.area } window.onload = function () { let btn = document.getElementById(&#39;btn&#39;) btn.addEventListener(&#39;click&#39;, function () { let url = &#39;https://cdn.weather.hao.360.cn/sed_api_weather_info.php?code=101280501&amp;v=2&amp;param=weather&amp;app=hao360&amp;_jsonp=__jsonp21__&amp;t=2521600&#39; let scriptTag = document.createElement(&#39;script&#39;) // åŠ¨æ€åˆ›å»ºscriptæ ‡ç­¾ scriptTag.setAttribute(&#39;src&#39;, url) // å°†å…¶ä»–æºçš„åœ°å€è®¾ç½®ä¸ºåŠ¨æ€scriptçš„srcå±æ€§ // console.log(scriptTag); // å¾—åˆ°çš„æ˜¯scriptæ ‡ç­¾ document.getElementsByTagName(&#39;body&#39;)[0].appendChild(scriptTag) // å°†åŠ¨æ€åˆ›å»ºçš„scriptæ ‡ç­¾æ·»åŠ åˆ°htmlé¡µé¢ä¸­ }) } æ³¨æ„ï¼šæ•°æ®å¤„ç†çš„å‡½æ•°åè¦è·Ÿè·¨åŸŸè¿”å›çš„å‡½æ•°åä¸€æ ·ï¼Œè¿™æ ·æˆ‘ä»¬é€šè¿‡JSONPè¯·æ±‚æ•°æ®çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨æ‰èƒ½è¿”å›æ•°æ®ã€‚æœ€ç»ˆç»“æœå¦‚ä¸‹ï¼š å†å¥ä¸€ä¸ªä¾‹å­ï¼šè¯·æ±‚åœ°å€æ˜¯http://api.money.126.net/data/feed/0000001,1399001?callback=refreshPrice function refreshPrice(data) { console.log(data); } window.onload = function () { let scriptTag = document.createElement(&#39;script&#39;) let url = &#39;http://api.money.126.net/data/feed/0000001,1399001?callback=refreshPrice&#39; scriptTag.setAttribute(&#39;src&#39;, url) document.getElementsByTagName(&#39;body&#39;)[0].appendChild(scriptTag) } Ajaxï¼ˆJQueryå®ç°ï¼‰åœ¨JQueryä¸­ï¼Œå®ç°Ajaxä¸»è¦æ˜¯ç”±$.ajax({â€¦})æ–¹æ³•å®ç°ã€‚æ–¹æ³•çš„å¸¸ç”¨å‚æ•°æœ‰ï¼š asyncï¼šæ˜¯å¦å®ç°å¼‚æ­¥åŠ è½½ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæ˜¯trueã€‚ typeï¼šGETæˆ–è€…POSTã€‚ urlï¼šå‘é€è¯·æ±‚çš„åœ°å€ã€‚ timeoutï¼šè®¾ç½®è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ã€‚ successï¼šè¯·æ±‚æˆåŠŸåçš„å›è°ƒå‡½æ•°ã€‚ errorï¼šè¯·æ±‚å¤±è´¥åçš„å›è°ƒå‡½æ•°ã€‚ jsonpï¼šåœ¨ä¸€ä¸ªJSONPè¯·æ±‚ä¸­é‡å†™å›è°ƒå‡½æ•°çš„åå­—ï¼Œé»˜è®¤ä¸ºcallbackï¼Œç”¨æ¥é‡æ–°å‘½åå›è°ƒæˆ‘ä»¬è·¨åŸŸè¯·æ±‚æ—¶å€™çš„å‡½æ•°åå­—ã€‚è¿™ä¸ªå€¼ç”¨æ¥æ›¿ä»£åœ¨ â€œcallback=?â€ è¿™ç§ GET æˆ– POST è¯·æ±‚ä¸­ URL å‚æ•°é‡Œçš„ â€œcallbackâ€ éƒ¨åˆ†ï¼Œæ¯”å¦‚ {jsonp:â€™onJsonPLoadâ€™} ä¼šå¯¼è‡´å°† â€œonJsonPLoad=?â€ ä¼ ç»™æœåŠ¡å™¨ã€‚ jsonpCallbackï¼šä¸ºJSONPè¯·æ±‚æŒ‡å®šä¸€ä¸ªå›è°ƒå‡½æ•°åã€‚ dataTypeï¼šé¢„æœŸæœåŠ¡å™¨è¿”å›çš„æ•°æ®ç±»å‹ã€‚ä¸æŒ‡å®šçš„è¯ï¼ŒJQueryhiè‡ªåŠ¨åˆ¤æ–­ã€‚â€xmlâ€: è¿”å› XML æ–‡æ¡£ï¼Œå¯ç”¨jQueryå¤„ç†ã€‚ â€œhtmlâ€: è¿”å›çº¯æ–‡æœ¬ HTML ä¿¡æ¯ï¼›åŒ…å«çš„ script æ ‡ç­¾ä¼šåœ¨æ’å…¥ dom æ—¶æ‰§è¡Œï¼›â€scriptâ€: è¿”å›çº¯æ–‡æœ¬JavaScriptä»£ç ã€‚ä¸ä¼šè‡ªåŠ¨ç¼“å­˜ç»“æœã€‚é™¤éè®¾ç½®äº†â€cacheâ€å‚æ•°ã€‚æ³¨æ„ï¼šåœ¨è¿œç¨‹è¯·æ±‚æ—¶(ä¸åœ¨åŒä¸€ä¸ªåŸŸä¸‹)ï¼Œæ‰€æœ‰POSTè¯·æ±‚éƒ½å°†è½¬ä¸ºGETè¯·æ±‚ã€‚ï¼ˆå› ä¸ºå°†ä½¿ç”¨DOMçš„ scriptæ ‡ç­¾æ¥åŠ è½½ï¼‰ï¼›â€jsonâ€: è¿”å›JSONæ•°æ®ï¼›â€jsonpâ€: JSONPæ ¼å¼ã€‚ä½¿ç”¨ JSONP å½¢å¼è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¦‚ â€œmyurl?callback=?â€ jQuery å°†è‡ªåŠ¨æ›¿æ¢ ? ä¸ºæ­£ç¡®çš„å‡½æ•°åï¼Œä»¥æ‰§è¡Œå›è°ƒå‡½æ•°ï¼›â€textâ€: è¿”å›çº¯æ–‡æœ¬å­—ç¬¦ä¸²ã€‚ ç”¨JQueryå®ç°åŒæºçš„Ajaxè¯·æ±‚ï¼š $(function () { $(&#39;button&#39;).on(&#39;click&#39;, function () { $.ajax({ url: &#39;./server.txt&#39;, // è¯·æ±‚åœ°å€ type: &#39;GET&#39;, // è¯·æ±‚æ–¹å¼ async: true, // æ˜¯å¦å¼‚æ­¥ success: function (data) { console.log(data); } // è¯·æ±‚æˆåŠŸåæ‰§è¡Œçš„å‡½æ•° }) }) }) å®ç°ç»“æœå¦‚ä¸‹ï¼š ç”¨JQueryå®ç°éåŒæºçš„JSONPè·¨åŸŸè¯·æ±‚ï¼š $(function () { $(&#39;button&#39;).on(&#39;click&#39;, function () { $.ajax({ url: &#39;https://cdn.weather.hao.360.cn/sed_api_weather_info.php?code=101280501&amp;v=2&amp;param=weather&amp;app=hao360&amp;_jsonp=__jsonp21__&amp;t=2521600&#39;, type: &#39;GET&#39;, async: true, dataType: &#39;jsonp&#39;, jsonp: &#39;_jsonp&#39;, jsonpCallback: &#39;__jsonp21__&#39;, success: function (data) { console.log(data); $(&#39;#myDiv&#39;).html(data.area) }, error: function (err) { console.log(err); } }) }) }) å®ç°ç»“æœå¦‚ä¸‹ï¼š","categories":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/categories/frontEnd/"},{"name":"js","slug":"frontEnd/js","permalink":"https://ertsul.github.io/categories/frontEnd/js/"}],"tags":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/tags/frontEnd/"},{"name":"js","slug":"js","permalink":"https://ertsul.github.io/tags/js/"}]},{"title":"3Dç«‹ä½“éª°å­","slug":"3Dç«‹ä½“éª°å­","date":"2019-02-16T15:58:03.000Z","updated":"2019-11-11T15:50:43.596Z","comments":true,"path":"2019/02/16/3Dç«‹ä½“éª°å­/","link":"","permalink":"https://ertsul.github.io/2019/02/16/3Dç«‹ä½“éª°å­/","excerpt":"","text":"CSS3ç¡®å®å¾ˆå¼ºå¤§ï¼Œå¾ˆå¤šé«˜å¤§ä¸Šçš„åŠ¨ç”»éƒ½å¯ä»¥å®ç°ï¼Œè¿™é‡Œæ¥å®ç°ä¸‹3Dç«‹æ–¹ä½“ï¼Œæ•ˆæœå›¾å¦‚ä¸‹ï¼š htmlå…¶å®ï¼Œå®ç°3Dç«‹æ–¹ä½“éœ€è¦çš„htmlååˆ†ç®€å•ï¼Œåªéœ€è¦ä¸€ä¸ªulæ ‡ç­¾é‡Œé¢åŒ…è£¹6ä¸ªliæ ‡ç­¾ï¼Œåˆ†åˆ«ç”¨æ¥è¡¨ç¤º3Dç«‹æ–¹ä½“çš„6ä¸ªé¢[ å‰ï¼Œä¸‹ï¼Œåï¼Œä¸Šï¼Œå·¦ï¼Œå³ ]ã€‚å…·ä½“ä»£ç å¦‚ä¸‹: &lt;ul&gt; &lt;li&gt;1&lt;/li&gt; &lt;li&gt;2&lt;/li&gt; &lt;li&gt;3&lt;/li&gt; &lt;li&gt;4&lt;/li&gt; &lt;li&gt;5&lt;/li&gt; &lt;li&gt;6&lt;/li&gt; &lt;/ul&gt; CSS3ulåŸºæœ¬çš„å®½é«˜è¿™äº›å°±ä¸è¯´äº†ï¼›ä½œä¸ºæ•´ä¸ª3Dç«‹æ–¹ä½“çš„çˆ¶çº§å…ƒç´ ï¼Œéœ€è¦è®¾ç½®positiionå±æ€§ä¸ºrelativeï¼Œè¿˜è¦æœ€é‡è¦çš„æ˜¯è®¾ç½®å®ƒçš„åŠ¨ç”»ç±»å‹tranform-styleä¸ºpreserve-3dï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å®ƒçš„æ‰€æœ‰å­å…ƒç´ éƒ½è¿›è¡Œ3dåŠ¨ç”»ã€‚ liå®½é«˜è®¾ç½®ä¸º100%ï¼Œpositionå±æ€§è®¾ç½®ä¸ºabsoluteã€‚ å‰è®¾ç½®èƒŒæ™¯ï¼Œå¹¶ä¸”æ²¿ç€Zè½´ç§»åŠ¨50pxï¼Œå³å®½é«˜çš„ä¸€åŠ(ä¸ºä»€ä¹ˆå¾—æ·»åŠ è¿™ä¸ª, åé¢ç”¨åŠ¨ç”»è¿›è¡Œè§£é‡Šè¯´æ˜)ã€‚ ä¸‹è®¾ç½®èƒŒæ™¯ï¼Œæ²¿ç€Xè½´æ—‹è½¬-90degï¼Œä½œä¸ºåº•é¢ï¼ŒåŒæ ·ï¼Œå¹¶ä¸”æ²¿ç€Zè½´ç§»åŠ¨50pxã€‚ åè®¾ç½®èƒŒæ™¯ï¼Œæ²¿ç€Xè½´æ—‹è½¬-180degï¼Œä½œä¸ºåé¢ï¼ŒåŒæ ·ï¼Œå¹¶ä¸”æ²¿ç€Zè½´ç§»åŠ¨50pxã€‚ ä¸Šè®¾ç½®èƒŒæ™¯ï¼Œæ²¿ç€Xè½´æ—‹è½¬90degï¼Œä½œä¸ºä¸Šé¢ï¼ŒåŒæ ·ï¼Œå¹¶ä¸”æ²¿ç€Zè½´ç§»åŠ¨50pxã€‚ å·¦è®¾ç½®èƒŒæ™¯ï¼Œæ²¿ç€Yè½´æ—‹è½¬-90degï¼Œä½œä¸ºå·¦é¢ï¼ŒåŒæ ·ï¼Œå¹¶ä¸”æ²¿ç€Zè½´ç§»åŠ¨50pxã€‚ å³è®¾ç½®èƒŒæ™¯ï¼Œæ²¿ç€Yè½´æ—‹è½¬90degï¼Œä½œä¸ºå³é¢ï¼ŒåŒæ ·ï¼Œå¹¶ä¸”æ²¿ç€Zè½´ç§»åŠ¨50pxã€‚ ç»“å°¾è¯´æ˜è¿™é‡Œè¯´æ˜ä¸Šé¢é‚£ä¸ªtranslateï¼Œå…ˆæ¥çœ‹çœ‹å¦‚æœä¸æ·»åŠ è¿™ä¸ªå±æ€§æ˜¯æ€æ ·çš„æ•ˆæœï¼šå¯è§ï¼Œæ‰€æœ‰çš„é¢éƒ½äº¤é›†äºç«‹æ–¹ä½“çš„ä¸­å¿ƒç‚¹ã€‚ç”±äºæœªå¯¹6ä¸ªé¢ä½œä»»ä½•åŠ¨ç”»å¤„ç†çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„é¢éƒ½é›†åˆåœ¨ä¸€èµ·ã€‚æ‰€ä»¥åœ¨é¢ä½œæ—‹è½¬çš„åŒæ—¶éœ€è¦å¯¹å…¶è¿›è¡ŒZè½´çš„ä½ç§»å¤„ç†ã€‚ ä»£ç &lt;style&gt; * { margin: 0; padding: 0; } body { background-color: black; } ul { list-style: none; width: 100px; height: 100px; position: relative; cursor: pointer; margin: 150px auto; transition: 1s; /* è®¾ç½®è¿‡æ¸¡æ—¶é—´ */ transform-style: preserve-3d; /* è®¾ç½®æ‰€æœ‰çš„å­å…ƒç´ å®ç°3DåŠ¨ç”» */ } /* è®¾ç½®é¼ æ ‡æ‚¬åœçš„åŠ¨ç”» */ ul:hover { transform: rotateX(120deg) rotateY(120deg); } ul li { width: 100%; height: 100%; text-align: center; line-height: 100px; font-size: 40px; font-weight: 700; position: absolute; top: 0px; } /* å‰ */ ul li:nth-child(1) { background-color: rgba(225, 0, 0, .4); transform: rotateX(0deg) translateZ(50px); } /* ä¸‹ */ ul li:nth-child(2) { background-color: rgba(0, 255, 0, .4); transform: rotateX(-90deg) translateZ(50px); } /* å */ ul li:nth-child(3) { background-color: rgba(0, 0, 255, .4); transform: rotateX(-180deg) translateZ(50px); } /* ä¸Š */ ul li:nth-child(4) { background-color: rgba(125, 125, 0, .4); transform: rotateX(90deg) translateZ(50px); } /* å·¦ */ ul li:nth-child(5) { background-color: rgba(0, 125, 125, .4); transform: rotateY(-90deg) translateZ(50px); } /* å³ */ ul li:nth-child(6) { background-color: rgba(10, 45, 36, .4); transform: rotateY(90deg) translateZ(50px); } &lt;/style&gt;","categories":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/categories/frontEnd/"},{"name":"css","slug":"frontEnd/css","permalink":"https://ertsul.github.io/categories/frontEnd/css/"}],"tags":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/tags/frontEnd/"},{"name":"css","slug":"css","permalink":"https://ertsul.github.io/tags/css/"}]},{"title":"DOMäº‹ä»¶","slug":"DOMäº‹ä»¶","date":"2019-02-16T15:56:55.000Z","updated":"2019-11-11T15:36:34.048Z","comments":true,"path":"2019/02/16/DOMäº‹ä»¶/","link":"","permalink":"https://ertsul.github.io/2019/02/16/DOMäº‹ä»¶/","excerpt":"","text":"äº‹ä»¶äº‹ä»¶å°±æ˜¯ç”¨æˆ·æˆ–è€…æµè§ˆå™¨è¿›è¡Œçš„ç‰¹å®šè¡Œä¸ºï¼Œæ¯”å¦‚ï¼šé¼ æ ‡ç‚¹å‡»äº‹ä»¶ã€‚ äº‹ä»¶åç§°æ¯”å¦‚ï¼šclickå°±æ˜¯ä¸€ä¸ªäº‹ä»¶åã€‚ äº‹ä»¶æµçš„æ‰§è¡Œè¿‡ç¨‹äº‹ä»¶æµï¼šæŒ‡çš„æ˜¯ DOM äº‹ä»¶æµï¼ˆå¤šä¸ªäº‹ä»¶æŒ‰ç…§ä¸€å®šé¡ºåºæ‰§è¡Œï¼‰ï¼ŒDOM(æ–‡æ¡£å¯¹è±¡æ¨¡å‹)ç»“æ„æ˜¯ä¸€ä¸ªæ ‘å‹ç»“æ„ï¼Œå½“ä¸€ä¸ªHTMLå…ƒç´ äº§ç”Ÿä¸€ä¸ªäº‹ä»¶æ—¶ï¼Œè¯¥äº‹ä»¶ä¼šåœ¨å…ƒç´ èŠ‚ç‚¹ä¸æ ¹ç»“ç‚¹ä¹‹é—´çš„è·¯å¾„ä¼ æ’­ï¼Œè·¯å¾„æ‰€ç»è¿‡çš„ç»“ç‚¹éƒ½ä¼šæ”¶åˆ°è¯¥äº‹ä»¶ï¼Œè¿™ä¸ªä¼ æ’­è¿‡ç¨‹å¯ç§°ä¸ºDOMäº‹ä»¶æµã€‚äº‹ä»¶æµçš„æ‰§è¡Œè¿‡ç¨‹ï¼šä»windowå¼€å§‹ï¼Œæœ€åå›åˆ°windowã€‚äº‹ä»¶æµè¢«åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šäº‹ä»¶æ•è·ï¼ˆ1-5ï¼‰ï¼Œäº‹ä»¶è§¦å‘ï¼ˆ5-6ï¼‰ï¼Œäº‹ä»¶å†’æ³¡ï¼ˆ6-10ï¼‰ã€‚ æ¥è‡ªç½‘ä¸Šçš„å›¾ç‰‡ï¼š äº‹ä»¶å†’æ³¡æ¥è‡ªç™¾åº¦çš„è§£é‡Šï¼š å½“äº‹ä»¶å‘ç”Ÿåï¼Œè¿™ä¸ªäº‹ä»¶å°±è¦å¼€å§‹ä¼ æ’­(ä»é‡Œåˆ°å¤–æˆ–è€…ä»å¤–å‘é‡Œ)ã€‚ä¸ºä»€ä¹ˆè¦ä¼ æ’­å‘¢ï¼Ÿå› ä¸ºäº‹ä»¶æºæœ¬èº«ï¼ˆå¯èƒ½ï¼‰å¹¶æ²¡æœ‰å¤„ç†äº‹ä»¶çš„èƒ½åŠ›ï¼Œå³å¤„ç†äº‹ä»¶çš„å‡½æ•°ï¼ˆæ–¹æ³•ï¼‰å¹¶æœªç»‘å®šåœ¨è¯¥äº‹ä»¶æºä¸Šã€‚ å°±æ¯”å¦‚ï¼šæˆ‘ä»¬ç”¨buttonäº§ç”Ÿä¸€ä¸ªclickäº‹ä»¶ï¼Œä½†æ˜¯ç”±äºbuttonæŒ‰é’®æœ¬èº«å¯èƒ½ä¸èƒ½å¤„ç†è¿™ä¸ªäº‹ä»¶ï¼Œå°±è¦å¼€å§‹ä¼ æ’­å‡ºå»è¿™ä¸ªäº‹ä»¶ã€‚å®ç°äº‹ä»¶å†’æ³¡çš„æ¡ä»¶æ˜¯ï¼šå…ƒç´ ä¹‹é—´æœ‰åµŒå¥—ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰ç›¸åŒçš„äº‹ä»¶ï¼Œè¿™æ ·å½“æœ€é‡Œå±‚çš„äº‹ä»¶è§¦å‘æ—¶ï¼Œè¿™ä¸ªäº‹ä»¶å°±ä¼šä¸€çº§ä¸€çº§å‘ä¸Šä¼ æ’­ï¼Œä¹Ÿå°±æ˜¯â€å†’æ³¡â€œã€‚ ä¸¾ä¸ªä¾‹å­ï¼šåœ¨ä¸€ä¸ªdivé‡Œé¢åµŒå¥—å¦ä¸€ä¸ªdivï¼Œä¸¤ä¸ªdivéƒ½ç»‘å®šäº†ç›¸åŒçš„äº‹ä»¶ç›‘å¬å‡½æ•°clickã€‚è¿™æ ·ï¼Œå½“é‡Œå±‚ç‚¹å‡»äº‹ä»¶è§¦å‘æ—¶ï¼Œå¤–å±‚çš„ç‚¹å‡»äº‹ä»¶ä¹Ÿä¼šè¢«è§¦å‘ã€‚ &lt;div id=&quot;outer&quot;&gt; &lt;div id=&quot;inner&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;script&gt; window.onload = function () { let inner = document.getElementById(&#39;inner&#39;) let outer = document.getElementById(&#39;outer&#39;) inner.addEventListener(&#39;click&#39;, function (e) { console.log(&#39;inner&#39;); }) outer.addEventListener(&#39;click&#39;, function () { console.log(&#39;outer&#39;); }) } &lt;/script&gt; ç»“æœä¸ºï¼š é˜»æ­¢äº‹ä»¶å†’æ³¡ ä¸€èˆ¬æµè§ˆå™¨ï¼ševent.stopPropagation() IEæµè§ˆå™¨ï¼ševent.cancelBubble = true é˜»æ­¢é»˜è®¤äº‹ä»¶ ä¸€èˆ¬æµè§ˆå™¨ï¼ševent.preventDefault() IEæµè§ˆå™¨ï¼ševent.returnValue = false addEventListenerçš„ç¬¬ä¸‰ä¸ªå‚æ•°addEventListeneræ–¹æ³•ç”¨äºå°†äº‹ä»¶å’Œå‡½æ•°è¿›è¡Œç»‘å®šï¼Œå‡½æ•°ä¸ºï¼šaddEventListener(event, fn, useCapture)ï¼Œè¿™äº›å‚æ•°åˆ†åˆ«æ˜¯ï¼šäº‹ä»¶åï¼Œäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•° useCapture æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨æ¥è®¾ç½®è¯¥äº‹ä»¶çš„æ‰§è¡Œæ˜¯åœ¨å“ªä¸ªé˜¶æ®µå‘ç”Ÿçš„ï¼ˆé»˜è®¤æ˜¯åœ¨å†’æ³¡é˜¶æ®µï¼‰ã€‚ trueï¼šè¡¨ç¤ºè¯¥äº‹ä»¶æ˜¯åœ¨â€œäº‹ä»¶æ•è·é˜¶æ®µâ€è§¦å‘çš„ã€‚ï¼ˆç”±å¤–å‘å†…ï¼‰ falseï¼šè¡¨ç¤ºè¯¥äº‹ä»¶æ˜¯åœ¨â€œäº‹ä»¶å†’æ³¡é˜¶æ®µâ€è§¦å‘çš„ã€‚ï¼ˆç”±å†…å‘å¤–ï¼‰ ä¸¾ä¸ªä¾‹å­ï¼šåœ¨ä¸€ä¸ªdivé‡Œé¢åµŒå¥—å¦ä¸€ä¸ªdivï¼Œä¸¤ä¸ªdivéƒ½ç»‘å®šäº†ç›¸åŒçš„äº‹ä»¶ç›‘å¬å‡½æ•°clickã€‚ å°†ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®ä¸ºtrueï¼Œäº‹ä»¶åœ¨ æ•è·é˜¶æ®µ æ‰§è¡Œï¼š &lt;div id=&quot;outer&quot;&gt; &lt;div id=&quot;inner&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;script&gt; window.onload = function () { let inner = document.getElementById(&#39;inner&#39;) let outer = document.getElementById(&#39;outer&#39;) inner.addEventListener(&#39;click&#39;, function (e) { console.log(&#39;inner&#39;); }, true) outer.addEventListener(&#39;click&#39;, function () { console.log(&#39;outer&#39;); }, true) } &lt;/script&gt; ç”±äºæ˜¯ æ•è·é˜¶æ®µ æ‰§è¡Œï¼Œå³ï¼šç”±å¤–å‘å†…æ‰§è¡Œï¼Œæ‰€ä»¥ç»“æœä¸ºï¼š outer innerã€‚ ç»“æœä¸ºï¼š å°†ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®ä¸ºfalseï¼Œäº‹ä»¶åœ¨ å†’æ³¡é˜¶æ®µ æ‰§è¡Œï¼Œè¾“å‡ºç»“æœä¸ºï¼š inner outerã€‚ äº‹ä»¶å¤„ç†å‡½æ•°/äº‹ä»¶ç›‘å¬å‡½æ•°äº‹ä»¶è§¦å‘åçš„å¤„ç†å‡½æ•°ã€‚å¦‚ï¼šbtn.onclick = fnï¼Œfnå°±æ˜¯äº‹ä»¶å¤„ç†å‡½æ•°/äº‹ä»¶ç›‘å¬å‡½æ•°ã€‚ HTMLäº‹ä»¶å¤„ç†ç¨‹åºä¾‹å¦‚ï¼š &lt;button onclick = &quot;fn()&quot;&gt;click&lt;/button&gt; è¿™ç§æ–¹å¼çš„ç¼ºç‚¹æ˜¯ï¼šç»“æ„å’Œè¡Œä¸ºè€¦åˆåœ¨ä¸€èµ·ã€‚ DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åºå½¢å¼ä¸ºï¼šele.on + â€˜äº‹ä»¶åç§°â€™ = äº‹ä»¶å¤„ç†å‡½æ•°ä¾‹å¦‚ï¼š ele.onclick = function() {â€¦}ï¼ŒthisæŒ‡å‘å½“å‰å…ƒç´ ã€‚ DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åºè¿™ç§æ–¹å¼ä¸»è¦æ˜¯é€šè¿‡è¿™ä¸¤ä¸ªæ–¹æ³•ï¼šaddEventListener()ï¼ŒremoveEventListener()è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹å°±æ˜¯ï¼šå¯ä»¥åŒä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºç»‘å®šå¤šä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ã€‚ äº‹ä»¶å§”æ‰˜äº‹ä»¶å§”æ‰˜è¦å¤„ç†çš„é—®é¢˜æ˜¯ï¼šè§£å†³äº‹ä»¶å¤„ç†ç¨‹åºè¿‡å¤šçš„é—®é¢˜ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å°†å¾ˆå¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºå§”æ‰˜ç»™ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œé€šè¿‡è¿™ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºæ¥ç®¡ç†è¿™ä¹ˆå¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºã€‚å¥½å¤„ï¼šå‡å°‘å¯¹DOMçš„è®¿é—®ï¼Œæé«˜æ€§èƒ½ï¼›å¯ä»¥å¯¹åæ¥æ·»åŠ è¿›æ¥çš„å…ƒç´ ä¹Ÿèƒ½ç»‘å®šå§”æ‰˜äº‹ä»¶ã€‚ ä¾‹å¦‚ï¼šåœ¨ä¸€ä¸ª ul æ ‡ç­¾ä¸­æœ‰å¾ˆå¤šä¸ª li æ ‡ç­¾ï¼Œæˆ‘ä»¬çš„éœ€æ±‚è€Œæ˜¯ç‚¹å‡»æ¯ä¸€ä¸ª li æ ‡ç­¾æ˜¾ç¤ºæ¯ä¸€ä¸ª li æ ‡ç­¾çš„å†…å®¹ã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œæˆ‘ä»¬éœ€è¦ç»™æ¯ä¸€ä¸ª li æ ‡ç­¾éƒ½æ·»åŠ äº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œå¾ˆæ˜æ˜¾ï¼Œè¿™æ ·çš„æ•ˆç‡å¹¶ä¸é«˜ï¼Œè€Œä¸”å¯¹æ•´ä¸ªç½‘é¡µçš„æ€§èƒ½ä¹Ÿä¼šå½±å“ï¼›å¦‚æœæˆ‘ä»¬ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œå°†è¿™äº› li çš„äº‹ä»¶å§”æ‰˜ç»™ ul æ ‡ç­¾ï¼Œè¿™æ ·å°±å¯ä»¥åªç”¨ä¸€ä¸ªäº‹ä»¶ç›‘å¬å‡½æ•°å®ç°ã€‚ ä»£ç å¦‚ä¸‹ï¼š &lt;ul id=&quot;list&quot;&gt; &lt;li&gt;111111&lt;/li&gt; &lt;li&gt;222222&lt;/li&gt; &lt;li&gt;333333&lt;/li&gt; &lt;li&gt;444444&lt;/li&gt; &lt;/ul&gt; &lt;script&gt; window.onload = function () { // ä¼ ç»Ÿçš„æ–¹æ³• // let lis = document.getElementsByTagName(&#39;li&#39;) // console.log(lis); // for(let i = 0; i &lt; lis.length; i++){ // lis[i].addEventListener(&#39;click&#39;, function () { // console.log(this.innerHTML); // }) // } // ä½¿ç”¨äº‹ä»¶å§”æ‰˜ let list = document.getElementById(&#39;list&#39;) list.addEventListener(&#39;click&#39;, function (e) { let target = e.target console.log(target.innerHTML); }, false) } &lt;/script&gt; äº‹ä»¶å§”æ‰˜ä¸€èˆ¬ä½¿ç”¨çš„æ˜¯ äº‹ä»¶å†’æ³¡é˜¶æ®µ è¿›è¡Œï¼ˆè™½ç„¶äº‹ä»¶æ•è·é˜¶æ®µä¹Ÿå¯ä»¥ï¼‰ï¼Œå› ä¸ºäº‹ä»¶å†’æ³¡çš„äº‹ä»¶æµæ¨¡å‹è¢«æ‰€æœ‰çš„ä¸»æµæµè§ˆå™¨å…¼å®¹ï¼Œäº‹ä»¶å†’æ³¡çš„å…¼å®¹æ€§æ›´å¥½ã€‚","categories":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/categories/frontEnd/"},{"name":"js","slug":"frontEnd/js","permalink":"https://ertsul.github.io/categories/frontEnd/js/"}],"tags":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/tags/frontEnd/"},{"name":"js","slug":"js","permalink":"https://ertsul.github.io/tags/js/"}]},{"title":"px/em/remæ€»ç»“","slug":"px-em-remæ€»ç»“","date":"2019-02-16T15:55:21.000Z","updated":"2019-11-11T15:36:50.594Z","comments":true,"path":"2019/02/16/px-em-remæ€»ç»“/","link":"","permalink":"https://ertsul.github.io/2019/02/16/px-em-remæ€»ç»“/","excerpt":"","text":"pxå¯¹äºpxï¼Œå¤§å®¶éƒ½ä¸é™Œç”Ÿã€‚å®ƒæ˜¯ä¸€ä¸ªç›¸å¯¹äºå±å¹•çš„ç›¸å¯¹é•¿åº¦å•ä½ã€‚ ememä¹Ÿæ˜¯ä¸€ä¸ªç›¸å¯¹é•¿åº¦å•ä½ï¼Œä½†å®ƒç›¸å¯¹çš„æ˜¯çˆ¶çº§å…ƒç´ çš„å­—ä½“å¤§å°ã€‚å¯¹äºemæœ‰ä¸€ä¸ªæ¨ç®—è¿‡ç¨‹ï¼šå¦‚æœæ²¡æœ‰å®šä¹‰è‡ªå·±çš„font-sizeï¼Œåˆ™ï¼šæµè§ˆå™¨é»˜è®¤ï¼š1em = 16pxæ‰€ä»¥ï¼š12px = 0.75em10px = 0.625emä½†æ˜¯å¦‚æœæ¯æ¬¡éƒ½è¿™æ ·è¿›è¡Œè®¡ç®—å¾ˆéº»çƒ¦ï¼Œè€Œä¸”å¼€å‘æ•ˆç‡ä¹Ÿå¾ˆä½ï¼Œå› æ­¤ä¸ºäº†ç®€åŒ–è®¡ç®—ï¼Œæˆ‘ä»¬å°†æµè§ˆå™¨çš„font-sizeè®¾ç½®ä¸º62.5%ï¼Œè¿™æ ·ï¼š1em = ï¼ˆ16px * 62.5%ï¼‰ = 10pxï¼› 1.2em = 12pxä¾æ¬¡ç±»æ¨ï¼Œè¦ä½¿ç”¨emè¿™ä¸ªç›¸å¯¹é•¿åº¦å•ä½ï¼Œåªè¦æˆ‘ä»¬åœ¨bodyæ ‡ç­¾é‡Œé¢è®¾ç½®äº†font-sizeä¸º62.5%ï¼Œè¿™æ ·åªè¦å°±å¯ä»¥å¾—åˆ°è®¡ç®—å…¬å¼ï¼š(n)px = (n \\ 10)em ä½†æ˜¯ï¼Œemå•ä½æ˜¯ç›¸å¯¹çš„ï¼Œä¸æ˜¯å›ºå®šçš„ï¼Œæ˜¯é€çº§ç»§æ‰¿çš„ï¼ˆä¸€å±‚ä¸€å±‚å‘ä¸Šè®¡ç®—ï¼‰ï¼Œä¸¾ä¸ªä¾‹å­ï¼šæ¯”å¦‚ï¼Œä¸€ä¸ªdivé‡Œé¢åµŒå¥—äº†ä¸€ä¸ªdivï¼Œè¿™ä¸¤ä¸ªdivéƒ½è®¾ç½®äº†font-sizeä¸º1.2emï¼Œæµè§ˆå™¨çš„font-sizeè®¾ç½®ä¸º62.5%ï¼Œæ­¤æ—¶ï¼Œæœ€é‡Œå±‚çš„divçš„font-sizeå¤§å°æ˜¯ï¼šï¼ˆ1.2 * 1.2ï¼‰ = 1.44emã€‚ remremä¹Ÿæ˜¯ç›¸å¯¹é•¿åº¦å•ä½ï¼Œä»å®ƒçš„å•ä½ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå®ƒè·Ÿemæ¯”è¾ƒï¼Œå¤šäº†ä¸ª r å­—æ¯ï¼Œå®ƒçš„æ„æ€å°±æ˜¯rootï¼ˆæ ¹ï¼‰çš„æ„æ€ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å®ƒæ˜¯ç›¸å¯¹äºæ ¹èŠ‚ç‚¹ï¼ˆhtmlæ ‡ç­¾ï¼‰çš„font-sizeè€Œè¨€çš„ã€‚è¿™æ ·å­ï¼Œå°±æ¶ˆé™¤äº†emå•ä½é€çº§ç»§æ‰¿çš„ç¼ºç‚¹ã€‚ä¸¾ä¸ªä¾‹å­ï¼šå…ˆå°†htmlæ ‡ç­¾è®¾ç½®ä¸º62.5%ï¼Œè¿™æ ·ï¼Œhtmlé‡Œé¢çš„ä»»ä½•å­æ ‡ç­¾éƒ½æ˜¯ç»§æ‰¿äºè¿™ä¸ªæ ‡ç­¾ï¼Œä¹Ÿå°±æ˜¯è¯´ç›¸å¯¹äºè¿™ä¸ªæ ‡ç­¾ã€‚æ‰€ä»¥ï¼Œä¸è®ºæ ‡ç­¾ä¸­æœ‰å¤šå°‘çº§çš„åµŒå¥—ï¼Œæœ€é‡Œå±‚æ ‡ç­¾çš„font-sizeçš„è®¡ç®—å…¬å¼æ°¸è¿œæ˜¯ï¼š(n)px = (n \\ 10)rem","categories":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/categories/frontEnd/"},{"name":"css","slug":"frontEnd/css","permalink":"https://ertsul.github.io/categories/frontEnd/css/"}],"tags":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/tags/frontEnd/"},{"name":"css","slug":"css","permalink":"https://ertsul.github.io/tags/css/"}]},{"title":"jsçš„åŸå‹å’Œç»§æ‰¿","slug":"jsçš„åŸå‹å’Œç»§æ‰¿","date":"2019-02-16T15:54:24.000Z","updated":"2019-11-11T15:36:48.400Z","comments":true,"path":"2019/02/16/jsçš„åŸå‹å’Œç»§æ‰¿/","link":"","permalink":"https://ertsul.github.io/2019/02/16/jsçš„åŸå‹å’Œç»§æ‰¿/","excerpt":"","text":"åŸå‹æ¨¡å¼åŸå‹æ¨¡å¼åœ¨ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ä¸­çš„å®šä¹‰ï¼š æˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeï¼ˆåŸå‹ï¼‰å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œè¿™ä¸ªå¯¹è±¡çš„ç”¨é€”æ˜¯åŒ…å«å¯ä»¥ç”±ç‰¹å®šç±»å‹çš„æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ã€‚å¦‚æœæŒ‰ç…§å­—é¢æ„æ€æ¥ç†è§£ï¼Œé‚£ä¹ˆprototypeå°±æ˜¯é€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°è€Œåˆ›å»ºçš„é‚£ä¸ªå¯¹è±¡å®ä¾‹çš„åŸå‹å¯¹è±¡ã€‚ä½¿ç”¨è¿™ä¸ªå¯¹è±¡çš„å¥½å¤„å°±æ˜¯å¯ä»¥è®©æ‰€æœ‰å¯¹è±¡å®ä¾‹å…±äº«å®ƒåŒ…å«çš„å±æ€§å’Œæ–¹æ³•ã€‚ è¿™é‡Œè¿˜æœ‰ä¸€ä¸ª__proto__å±æ€§ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ‹¥æœ‰è¿™ä¸ªå±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘å¯¹åº”çš„æ„é€ å‡½æ•°çš„prototypeå±æ€§ã€‚ é€šè¿‡åŸå‹å¯¹è±¡ï¼Œæˆ‘ä»¬å°±ä¸ç”¨å°†ä¿¡æ¯æ·»åŠ åˆ°æ„é€ å‡½æ•°ä¸­äº†ã€‚ å®ä¾‹å¯¹è±¡å…±äº«åŸå‹å¯¹è±¡çš„å±æ€§function Person(){} Person.prototype.name = &#39;A&#39; Person.prototype.age = 1 // å®ä¾‹å¯¹è±¡å…±äº«åŸå‹å¯¹è±¡çš„å±æ€§ let p1 = new Person() console.log(p1.name, p1.age); // A 1 let p2 = new Person() console.log(p2.name, p2.age); // A 1 constructorï¼ˆæ„é€ å‡½æ•°ï¼‰å±æ€§æ¯ä¸ªåŸå‹å¯¹è±¡åœ¨é»˜è®¤æƒ…å†µä¸‹éƒ½ä¼šè‡ªåŠ¨è·å–ä¸€ä¸ªconstructorï¼ˆæ„é€ å‡½æ•°ï¼‰å±æ€§ï¼Œè¿™ä¸ªå±æ€§åŒ…å«ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘è¿™ä¸ªåŸå‹æ‰€åœ¨çš„å‡½æ•°ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œåˆ›å»ºPersonå‡½æ•°åï¼Œå®ƒçš„prototypeæŒ‡å‘å®ƒçš„åŸå‹å¯¹è±¡ï¼Œè¿™ä¸ªåŸå‹å¯¹è±¡å°±ä¼šè·å–è·å–constructorå±æ€§ï¼ŒæŒ‡å‘Personå‡½æ•°ã€‚ åˆ¤æ–­å®ä¾‹å¯¹è±¡ä¸åŸå‹å¯¹è±¡ä¹‹é—´çš„å…³ç³» Obj.prototype.isPrototypeOf(obj) console.log(Person.prototype.isPrototypeOf(p1)) // true Object.getPrototypeOf(obj)ï¼šè¿”å›å¯¹è±¡å®ä¾‹çš„åŸå‹[es5] console.log(Object.getPrototypeOf(p1) == Person.prototype); // true console.log(Object.getPrototypeOf(p1).name); // A obj.hasOwnPrototype(attr)ï¼šæ£€æµ‹ä¸€ä¸ªå±æ€§æ˜¯å¦å­˜åœ¨äºå®ä¾‹ä¸­ã€‚åªæœ‰å½“å®ä¾‹å¯¹è±¡é‡å†™åŸå‹å¯¹è±¡çš„å±æ€§åï¼ˆéåŸå‹å±æ€§ï¼‰æ‰ä¼šè¿”å›trueã€‚ console.log(p1.hasOwnProperty(&#39;name&#39;)); // false p1.name = &#39;Ertsul&#39; console.log(p1.hasOwnProperty(&#39;name&#39;)); //true inæ“ä½œç¬¦ï¼šé€šè¿‡inæ“ä½œç¬¦å’ŒhasOwnProperty()å¯ä»¥åˆ¤æ–­æŸå±æ€§å­˜åœ¨äºå®ä¾‹è¿˜æ˜¯åŸå‹å¯¹è±¡ä¸­ã€inåˆ¤æ–­æ˜¯å¦å­˜åœ¨å±æ€§ï¼ŒhasOwnProperty()åˆ¤æ–­å­˜åœ¨äºå“ªé‡Œã€‚ã€‘å¯ä»¥å•ç‹¬ä½¿ç”¨å’Œfor-inå¾ªç¯ä½¿ç”¨ï¼šæ— è®ºå±æ€§å±äºå®ä¾‹è¿˜æ˜¯åŸå‹ä¸­ï¼Œéƒ½ä¼šè¿”å›trueã€‚(â€˜nameâ€™ in person1) è·å–æ‰€æœ‰å®ä¾‹çš„å±æ€§åå­—ï¼Œæ— è®ºæ˜¯å¦å¯ä»¥æšä¸¾ã€‚ console.log(Object.getOwnPropertyNames(p1)); // [&quot;name&quot;] instanceof console.log(p1 instanceof Person); // true æ›´ç®€å•çš„è¯­æ³•function Person() { } Person.prototype = { name: &#39;001&#39; } let p1 = new Person() console.log(p1.name); è¿™é‡Œçš„ä¾‹å¤–æ˜¯ï¼šconstructorå±æ€§ä¸å†æŒ‡å‘Personï¼›æœ¬è´¨ä¸Šç›¸å½“äºå®Œå…¨é‡å†™äº†Personå¯¹è±¡äº†ã€‚æ³¨ï¼šé‡å†™åŸå‹å¯¹è±¡åˆ‡æ–­äº†ç°æœ‰åŸå‹ä¸ä»»ä½•ä¹‹å‰å·²ç»å­˜åœ¨çš„å¯¹è±¡å®ä¾‹ä¹‹é—´çš„è”ç³»ï¼Œå®ƒä»¬å¼•ç”¨çš„ä»ç„¶æ˜¯æœ€åˆçš„åŸå‹ã€‚[è¯¦è§ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹P156-P157ï¼ŒåŸå‹çš„åŠ¨æ€æ€§] ####æœç´¢æœºåˆ¶ è§£é‡Šå™¨ä¼šç°åœ¨ç›®æ ‡å¯¹è±¡ä¸­æœç´¢ç›®æ ‡å±æ€§ï¼Œå¦‚æœå½“å‰å¯¹è±¡æ²¡æœ‰ç›®æ ‡å±æ€§ï¼Œè§£é‡Šå™¨ç»§ç»­åœ¨ç›®æ ‡å¯¹è±¡çš„åŸå‹å¯¹è±¡ä¸­æœç´¢ã€‚ é€šè¿‡deleteåªèƒ½åˆ é™¤å¯¹è±¡çš„å±æ€§ï¼Œè€Œä¸èƒ½åˆ é™¤åŸå‹å¯¹è±¡ä¸­çš„å±æ€§ã€‚ ç»„åˆæ¨¡å¼ï¼ˆé»˜è®¤ç±»å‹ï¼‰ï¼šæ„é€ å‡½æ•°æ¨¡å¼ + åŸå‹æ¨¡å¼æ„é€ å‡½æ•°æ¨¡å¼ç”¨äºå®šä¹‰å®ä¾‹å±æ€§ï¼Œè€ŒåŸå‹æ¨¡å¼ç”¨äºå®šä¹‰æ–¹æ³•å’Œå…±äº«çš„å±æ€§ã€‚ ç»§æ‰¿åŸå‹é“¾// çˆ¶äº² function Father() { this.fatherProperty = true } Father.prototype.getFatherValue = function () { return this.fatherProperty } // å„¿å­ function Son() { this.sonProperty = false } // ç»§æ‰¿çˆ¶äº²ï¼šé€šè¿‡å®ä¾‹åŒ–çˆ¶äº²ï¼Œå°†å®ä¾‹åŒ–å¯¹è±¡ä½œä¸ºå„¿å­çš„åŸå‹ï¼Œè¿™æ ·å„¿å­å°±ç»§æ‰¿äº†çˆ¶äº²çš„å±æ€§ Son.prototype = new Father() Son.prototype.getSonValue = function () { return this.sonProperty } let instance = new Son() console.log(instance.fatherProperty); // true ä¸Šé¢ä¾‹å­ä¸­ï¼Œé€šè¿‡å®ä¾‹åŒ–çˆ¶äº²ï¼Œå°†å®ä¾‹åŒ–å¯¹è±¡ä½œä¸ºå„¿å­çš„åŸå‹ï¼Œè¿™æ ·å„¿å­å°±ç»§æ‰¿äº†çˆ¶äº²çš„å±æ€§ã€‚ï¼ˆé‡å†™å„¿å­çš„åŸå‹ï¼‰ã€‚è¿™é‡Œï¼Œå„¿å­åŸå‹å¯¹è±¡çš„[[prototype]]ï¼ˆæ³¨ï¼šä¸æ˜¯prototypeï¼Œ[[prototype]]å­˜åœ¨äºåŸå‹ä¸­ï¼‰æŒ‡å‘çš„æ˜¯çˆ¶äº²çš„åŸå‹å¯¹è±¡ï¼Œè€Œçˆ¶äº²çš„åŸå‹å¯¹è±¡çš„[[prototype]]æŒ‡å‘çš„æ˜¯Object Prototypeã€‚ï¼ˆç”±äºæ‰€æœ‰å‡½æ•°çš„é»˜è®¤åŸå‹éƒ½æ˜¯Objectçš„å®ä¾‹ï¼Œæ‰€ä»¥é»˜è®¤åŸå‹éƒ½ä¼šåŒ…å«ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆï¼ŒæŒ‡å‘Object.prototypeï¼‰ å€Ÿç”¨æ„é€ å‡½æ•° ä¸»è¦æ˜¯ä¸ºäº†è§£å†³å› ä¸ºå¼•ç”¨ç±»å‹å€¼çš„åŸå‹å±æ€§ä¼šè¢«æ‰€æœ‰å®ä¾‹å…±äº«çš„é—®é¢˜ã€‚ å€Ÿç”¨æ„é€ å‡½æ•°/ä¼ªé€ å¯¹è±¡/ç»å…¸ç»§æ‰¿ï¼šåœ¨å­ç±»å‹æ„é€ å‡½æ•°çš„å†…éƒ¨è°ƒç”¨è¶…ç±»å‹æ„é€ å‡½æ•°ã€‚ // çˆ¶äº² function Father() { this.info = [&#39;Zero&#39;] } // å„¿å­ function Son() { // ç»§æ‰¿çˆ¶äº²ï¼šåœ¨å­ç±»å‹æ„é€ å‡½æ•°çš„å†…éƒ¨è°ƒç”¨è¶…ç±»å‹æ„é€ å‡½æ•° // ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ï¼šå‡½æ•°åªä¸è¿‡æ˜¯åœ¨ç‰¹å®šç¯å¢ƒä¸­æ‰§è¡Œä»£ç çš„å¯¹è±¡ï¼Œå› æ­¤é€šè¿‡ä½¿ç”¨ apply()å’Œ call() å¯ä»¥åœ¨æ–°åˆ›å»ºçš„å¯¹è±¡ä¸Šæ‰§è¡Œæ„é€ å‡½æ•°ã€‚ Father.call(this) // å€Ÿç”¨è¶…ç±»çš„æ„é€ å‡½æ•° } let f = new Father() f.info.push(&#39;100&#39;) console.log(f.info); // [&quot;Zero&quot;, &quot;100&quot;] let s = new Son() console.log(s.info); // [&quot;Zero&quot;] å¦‚æœåœ¨ç»§æ‰¿çš„æ—¶å€™è¦ä¼ é€’å‚æ•°ï¼Œåˆ™åœ¨åé¢æ·»åŠ å‚æ•°å³å¯ã€‚å¦‚ï¼šFather.call(thisï¼Œ param1, param2) __proto__é€šè¿‡__proto__ä¹Ÿå¯ä»¥å®ç°å­ç±»å‹å¯¹è¶…ç±»å‹çš„ç»§æ‰¿ã€‚ const obj = { num : 123 } const obj1 = { __proto__ : obj } console.log(obj1.num); // 123 Object.create(source)const obj = { num : 123 } const obj2 = Object.create(obj) console.log(obj2.num); // 123 Object.assign(Object.create(obj), {â€¦})const obj = { num : 123 } const obj3 = Object.assign( Object.create(obj), { num2 : 234 } ) console.log(obj3.num, obj3.num2); // 123 234 è¡¥å……ç»§æ‰¿æœºåˆ¶å¦‚ä¸‹å›¾ï¼š æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š// çˆ¶ç±» function SuperType(){ } // å­ç±» function SubType(){ } // å­ç±»ç»§æ‰¿çˆ¶ç±» SubType.prototype = new SuperType(); // å®ä¾‹åŒ–çˆ¶ç±»å’Œå­ç±» let superIns = new SuperType(); let subIns = new SubType(); // å­ç±» console.log(SubType.prototype); // SuperType {} console.log(subIns.__proto__); // SuperType {} // çˆ¶ç±» console.log(SuperType.prototype); // {constructor: Æ’} console.log(superIns.__proto__); // {constructor: Æ’} console.log(SuperType.prototype.__proto__); // {constructor: Æ’, __defineGetter__: Æ’, __defineSetter__: Æ’, hasOwnProperty: Æ’, __lookupGetter__: Æ’, â€¦} // å³ï¼š Object prototype console.log(SuperType.prototype.__proto__.constructor); // Æ’ Object() { [native code] } å³ï¼šObject","categories":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/categories/frontEnd/"},{"name":"js","slug":"frontEnd/js","permalink":"https://ertsul.github.io/categories/frontEnd/js/"}],"tags":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/tags/frontEnd/"},{"name":"js","slug":"js","permalink":"https://ertsul.github.io/tags/js/"}]},{"title":"jsçš„å­˜å‚¨å’Œæ‹·è´","slug":"jsçš„å­˜å‚¨å’Œæ‹·è´","date":"2019-02-16T15:52:58.000Z","updated":"2019-11-11T15:36:45.807Z","comments":true,"path":"2019/02/16/jsçš„å­˜å‚¨å’Œæ‹·è´/","link":"","permalink":"https://ertsul.github.io/2019/02/16/jsçš„å­˜å‚¨å’Œæ‹·è´/","excerpt":"","text":"æ•°æ®ç±»å‹åŸºæœ¬æ•°æ®ç±»å‹ Number String Boolean Undefined Nullå¼•ç”¨ç±»å‹å¤šä¸ªåŸºæœ¬æ•°æ®ç±»å‹å¤åˆå½¢æˆã€‚ Object å­˜å‚¨æ–¹å¼åŸºæœ¬æ•°æ®ç±»å‹çš„å­˜å‚¨æ–¹å¼ æ¯å½“å®šä¹‰ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡ï¼Œä¼šåœ¨ æ ˆåŒº å¼€è¾Ÿä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œç”¨äºå­˜æ”¾è¯¥å˜é‡ã€‚æ ˆåŒºçš„ç‰¹ç‚¹æ˜¯ï¼šé™æ€åˆ†é…ï¼Œå¤§å°å›ºå®šã€‚ å½“ä¸€ä¸ªå˜é‡é€šè¿‡ç›´æ¥å¤åˆ¶çš„æ–¹å¼å¤åˆ¶ç»™å¦ä¸€ä¸ªå˜é‡ï¼Œç³»ç»Ÿä¼šåœ¨ æ ˆåŒº é‡æ–°å¼€è¾Ÿä¸€ä¸ªå†…å­˜ç©ºé—´ï¼›ä¸¤ä¸ªå˜é‡äº’ä¸å½±å“ã€‚ let num1 = 10; let num2 = num1; num2 = 20; console.log(num1); // 10 å¼•ç”¨ç±»å‹çš„å­˜å‚¨æ–¹å¼ æ¯å½“å®šä¹‰ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œå¦‚ï¼šå¯¹è±¡ï¼Œä¼šåœ¨ å †åŒº å¼€è¾Ÿä¸€ä¸ªå†…å­˜ç©ºé—´ï¼›ç„¶åå¦‚æœåˆ›å»ºä¸€ä¸ªè¯¥å¯¹è±¡çš„å®ä¾‹ï¼Œä¼šåœ¨ æ ˆåŒº å¼€è¾Ÿä¸€ä¸ªå†…å­˜å­˜æ”¾è¯¥å®ä¾‹ï¼Œè¯¥å®ä¾‹å®é™…ä¸Šæ˜¯ä¸€ä¸ªæŒ‡å‘ å †å†…å­˜ å¯¹è±¡çš„æŒ‡é’ˆã€‚å †åŒºçš„ç‰¹ç‚¹æ˜¯ï¼šåŠ¨æ€åˆ†é…ï¼Œå¤§å°ä¸å›ºå®šã€‚ å½“ä¸€ä¸ªå®ä¾‹ç›´æ¥å¤åˆ¶ç»™å¦ä¸€ä¸ªå®ä¾‹ï¼Œç³»ç»Ÿä¼šåœ¨ æ ˆåŒº é‡æ–°å¼€è¾Ÿä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œä½†æ˜¯æ–°å®ä¾‹åŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ªæŒ‡å‘ å †å†…å­˜ å¯¹è±¡çš„æŒ‡é’ˆï¼Œæ‰€ä»¥ï¼Œè¿™æ ·çš„æ“ä½œï¼Œè¿™æ ·çš„ä¿®æ”¹éƒ½ä¼šå¯¹æ–°æ—§å®ä¾‹äº§ç”Ÿå½±å“ã€‚ let obj1 = { name: &#39;zero&#39;, age: 22, num: [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;] } //ç›´æ¥å¤åˆ¶ let obj2 = obj1; obj2.name = &#39;Ertsul&#39;; obj2.num[0] = &#39;ä¸€&#39;; console.log(obj1, obj2); // name:&quot;Ertsul&quot; // age:22 // num:[&quot;ä¸€&quot;, &quot;2&quot;, &quot;3&quot;] æµ…æ‹·è´å’Œæ·±æ‹·è´åŒºåˆ«ä¸¤è€…çš„åŒºåˆ«ä¸»è¦åœ¨äº å¤åˆ¶å±‚æ¬¡ çš„ä¸åŒï¼š æµ…æ‹·è´ä¸»è¦å¤åˆ¶åˆ°å¯¹è±¡å±æ€§è¿™ä¸€å±‚æ¬¡ï¼Œå¦‚æœå¯¹è±¡é‡Œé¢æœ‰å­å¯¹è±¡ï¼Œåˆ™æ— æ³•å¯¹å­å¯¹è±¡å®Œæˆå¤åˆ¶ï¼›ä¹‹åå¯¹äºå­å¯¹è±¡çš„ä¿®æ”¹ ä¼š å½±å“åˆ°åŸå¤åˆ¶å¯¹è±¡ã€‚ æ·±æ‹·è´åˆ™æ˜¯æµ…æ‹·è´çš„ åŠ å¼ºç‰ˆ ï¼Œå¯ä»¥å®ç°å¯¹äºå­å¯¹è±¡çš„æ‹·è´ï¼›ä¹‹åå¯¹äºå­å¯¹è±¡çš„ä¿®æ”¹ ä¸ä¼š å½±å“åˆ°åŸå¤åˆ¶å¯¹è±¡ã€‚ä¸»è¦å®ç°æ–¹æ³•æœ‰ï¼š é€’å½’ JSONè§£ææµ…æ‹·è´ // æµ…æ‹·è´ function shallowCopy(source) { let result = {}; for(let key in source){ result[key] = source[key] } return result; } let obj1 = { name: &#39;zero&#39;, age: 22, num: [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;] } let obj2 = {}; obj2 = shallowCopy(obj1); obj2.name = &#39;Ertsul&#39;; // ä¸ä¼šäº§ç”Ÿå½±å“ obj2.num[0] = &#39;ä¸€&#39;; // äº§ç”Ÿå½±å“ console.log(&quot;obj1&quot;, obj1); console.log(&quot;obj2&quot;, obj2); ç»“æœå¦‚å›¾ï¼š æ·±æ‹·è´é€’å½’// é€’å½’å®ç°æ·±æ‹·è´ function deepCopy(source, res){ var res = res || {}; for(let i in source){ if(typeof source[i] === &#39;object&#39;){ if(source[i].constructor === Array){ res[i] = [] }else { res[i] = {} } deepCopy(source[i], res[i]); // é€’å½’å­å¯¹è±¡å±æ€§ }else{ res[i] = source[i] } } return res; } let obj1 = { name: &#39;zero&#39;, age: 22, num: [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;] } let result = {} result = deepCopy(obj1, result); result.name = &#39;Ertsul&#39;; result.num[1] = &#39;äºŒ&#39;; console.log(&quot;result&quot;, result); console.log(&quot;obj1&quot;, obj1); ç»“æœå¦‚å›¾ï¼š JSONè§£æ// JSONå®ç°æ·±æ‹·è´ let obj1 = { name: &#39;zero&#39;, age: 22, num: [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;] } let result1 = JSON.parse(JSON.stringify(obj1)); result1.num[2] = &#39;ä¸‰&#39;; console.log(&#39;result1&#39;, result1); console.log(&#39;obj1&#39;, obj1); ç»“æœå¦‚å›¾ï¼š","categories":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/categories/frontEnd/"},{"name":"js","slug":"frontEnd/js","permalink":"https://ertsul.github.io/categories/frontEnd/js/"}],"tags":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/tags/frontEnd/"},{"name":"js","slug":"js","permalink":"https://ertsul.github.io/tags/js/"}]},{"title":"js/es6å°çŸ¥è¯†å¤§æ‚çƒ©","slug":"js-es6å°çŸ¥è¯†å¤§æ‚çƒ©","date":"2019-02-16T15:46:09.000Z","updated":"2019-11-11T15:36:43.675Z","comments":true,"path":"2019/02/16/js-es6å°çŸ¥è¯†å¤§æ‚çƒ©/","link":"","permalink":"https://ertsul.github.io/2019/02/16/js-es6å°çŸ¥è¯†å¤§æ‚çƒ©/","excerpt":"","text":"åˆå¹¶ä¸¤ä¸ªæ•°ç»„ æ•°ç»„çš„è§£æ„ [â€¦arr1, â€¦arr2] Array.prototype.push.apply(arr1, arr2)ï¼Œæœ€ååˆå¹¶åˆ°arr1ã€‚ arr3 = Array.prototype.slice.call(arr1, arr2)ï¼Œæœ€ååˆå¹¶åˆ°arr3ã€‚ let arr1 = [1, 2, 3]; let arr2 = [4, 5, 6]; let arr3 = [...arr1, ...arr2]; console.log(arr3); Array.prototype.push.apply(arr1, arr2); console.log(arr1); arguments/ä¼ªæ•°ç»„ è½¬åŒ–ä¸ºæ•°ç»„ [â€¦arguments] Array.prototype.slice.call(arguments) (function Fn() { let arr = [...arguments, &#39;Ertsul&#39;]; console.log(arr); })(&#39;zero&#39;); (function Fn1() { let arr = Array.prototype.slice.call(arguments); console.log(arr); })(&#39;zero&#39;); åˆ¤æ–­å­—ç¬¦ç±»å‹ Object.prototype.toString.call() typeof instanceof åˆ›å»ºå®ä¾‹çš„æ–¹æ³• å­—é¢é‡ let obj = {â€¦} new Object()æ„é€ å‡½æ•° æ„é€ å‡½æ•° Object.create() å·¥å‚æ¨¡å¼ // å­—é¢é‡ let obj1 = { name: &#39;zero&#39;, age: 22 }; // Object æ„é€ å‡½æ•° let obj2 = new Object(); obj2.name = &#39;zero&#39;; console.log(obj2.name); // å·¥å‚æ¨¡å¼ function Person(name) { let obj = new Object(); obj.name = name; return obj; } let p1 = Person(&#39;zero&#39;); console.log(p1.name); // æ„é€ å‡½æ•° function Animal(name) { this.name = name; } let a2 = new Animal(&#39;dog&#39;); console.log(a2.name); æ•°ç»„çš„æ‹†è§£ flatlet arr2 = [1, [2, 3, [100, 8989]], [4, 5, 6, 7, 8]]; const flat = arr =&gt; arr.toString().split(&#39;,).map(item =&gt; +item); console.log(flat(arr2)); // [1, 2, 3, 100, 8989, 4, 5, 6, 7, 8] ç»§æ‰¿çš„æ–¹æ³• â€“ 8ç§ é€šè¿‡åŸå‹ç»§æ‰¿ ç¼ºç‚¹ï¼šå¼•ç”¨ç±»å‹å­˜åœ¨å…±äº«é—®é¢˜ã€‚ function Fn1() { ... } function Fn2() { ... } Fn2.prototype = new Fn1(); æ„é€ å‡½æ•°ï¼šé€šè¿‡ call æ›´æ”¹ this æŒ‡å‘ï¼›å®é™…ä¸Šæ˜¯è°ƒç”¨äº†çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚ ç¼ºç‚¹ï¼šçˆ¶ç±»ä¸­çš„æ–¹æ³•ï¼ˆæ„é€ å‡½æ•°ä¸­ï¼‰å­ç±»ä¸å¯è§ã€‚ function Fn1() { ... } function Fn2() { Fn1.call(this); // å°† this ç»‘å®šåˆ° Fn1 } function SuperType(){ } SuperType.prototype.sayHi = function(){ console.log(&#39;Hi&#39;); } function subType(){ SuperType.call(this); } let superIns = new SuperType(); superIns.sayHi(); // Hi let subIns = new subType(); subIns.sayHi(); // Uncaught TypeError ç»„åˆç»§æ‰¿ï¼ˆåŸå‹ + æ„é€ ï¼‰å±æ€§é€šè¿‡æ„é€ å‡½æ•°ç»§æ‰¿ï¼›æ–¹æ³•é€šè¿‡åŸå‹ç»§æ‰¿ã€‚è®°å¾—è¦æ›´æ”¹ Fn2.prototype.constructor çš„æŒ‡å‘ï¼ŒæŒ‡å‘å­ç±»ã€‚ // ç»„åˆç»§æ‰¿ function Fn1() { this.name = &#39;zero&#39; } Fn1.prototype.sayName = function () { console.log(this.name); }; function Fn2() { // ç»§æ‰¿å±æ€§ Fn1.call(this); this.age = 22; } // ç»§æ‰¿æ–¹æ³• Fn2.prototype = new Fn1(); Fn2.prototype.constructor = Fn2; // éœ€è¦ä¿®å¤æ„é€ å‡½æ•°æŒ‡å‘ Fn2.prototype.sayAge = function () { console.log(this.age); }; let f = new Fn2(); f.sayName(); f.sayAge(); å®ä¾‹ç»§æ‰¿åœ¨ä¸€ä¸ªå‡½æ•°å†…å®ä¾‹åŒ–ï¼Œç„¶åæ·»åŠ æ–°å±æ€§ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡ã€‚ function Fn() { ... } function Fn2(name) { let obj = new Fn(); obj.name = name; return obj; } åŸå‹å¼ç»§æ‰¿å°†çˆ¶ç±»ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œåˆ›å»ºä¸€ä¸ªä¸´æ—¶å‡½æ•°ï¼Œç»§æ‰¿äºçˆ¶ç±»ï¼Œè¿”å›çˆ¶ç±»ã€‚ function SuperType(name) { this.name = name } function Object(o){ function F(){} F.prototype = o; return new F(); } let subType = Object(new SuperType(&#39;zero&#39;)); console.log(subType.__proto__); // SuperType å› ä¸ºæ˜¯å®ä¾‹ï¼Œæ‰€ä»¥åªèƒ½æ˜¯ __proto__ æ‹·è´ç»§æ‰¿å°†åŸå‹/çˆ¶ç±»ä¸Šçš„å±æ€§å…¨éƒ¨æ‹·è´åˆ°å­ç±»ä¸Šã€‚ // æ‹·è´ç»§æ‰¿ function Fn1() { this.name = &#39;zero&#39;; this.age = 22 } function Fn2() { let f1 = new Fn1(); // æ³¨æ„è¿™é‡Œè¦ç”¨ in æ“ä½œç¬¦ for (let item in f1) { Fn2.prototype[item] = f1[item]; } Fn2.prototype.ownFun = function () { console.log(&#39;my own function.&#39;); } } let f = new Fn2(); console.log(f.name + &quot;, &quot; + f.age); f.ownFun(); å¯„ç”Ÿç»„åˆå¼æ¨¡å‹ é€šè¿‡ä¸€ä¸ªå‡½æ•°ï¼ˆåˆ›å»ºå¯¹è±¡ï¼Œå¢å¼ºå¯¹è±¡æ²¡ï¼ŒæŒ‡å®šå¯¹è±¡ï¼‰ï¼šå®ç°çˆ¶ç±»å­ç±»çš„æ–¹æ³•ç»§æ‰¿ã€‚ é€šè¿‡æ„é€ å‡½æ•°å®ç°å±æ€§çš„ç»§æ‰¿ã€‚ // å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ function inheritPrototype(subType, superType) { // åˆ›å»ºå¯¹è±¡ï¼šæ–°å»ºçš„å¯¹è±¡æŒ‡å‘çˆ¶ç±»çš„åŸå‹ let prototype = Object(superType.prototype); // å¢å¼ºå¯¹è±¡ï¼šæ–°å»ºå¯¹è±¡çš„ constructor æŒ‡å‘å­ç±» prototype.constructor = subType; // æŒ‡å®šå¯¹è±¡ï¼šå­ç±»çš„åŸå‹æŒ‡å‘æ–°å»ºå¯¹è±¡ subType.prototype = prototype; } function Fn1() { this.name = &#39;Ertsul&#39;; } Fn1.prototype.sayName = function () { console.log(this.name); }; function Fn2() { Fn1.call(this); this.age = 22; } inheritPrototype(Fn2, Fn1); Fn2.prototype.sayAge = function () { console.log(this.age); }; let f = new Fn2(); f.sayName();f.sayAge(); es6 çš„ extends // class class F1 { constructor(name) { this.name = name; } } class F2 extends F1 { constructor(name, age){ super(name); // è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•° this.age = age; } showMsg(){ console.log(this.name + &#39;, &#39; + this.age); } } let p = new F2(&#39;zero&#39;, 22); p.showMsg(); // zero, 22 æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ éå†å¯¹è±¡å¯¹è±¡è¿›è¡Œåˆ¤æ–­ã€‚ å°†å¯¹è±¡è½¬åŒ–ä¸ºå­—ç¬¦ä¸²è¿›è¡Œåˆ¤æ–­ã€‚ let obj1 = { name: &#39;a&#39;, age: 1 } let obj2 = obj1; let obj3 = { name: &#39;a&#39;, age: 2 } console.log(JSON.stringify(obj1)); console.log(JSON.parse(JSON.stringify(obj1))); console.log(JSON.stringify(obj1) == JSON.stringify(obj2)); // true console.log(JSON.stringify(obj1) == JSON.stringify(obj3)); // false å°è£…ä¸€ä¸ªæ—¶é—´å‡½æ•°ï¼Œæ—¶é—´é€šè¿‡ time ä¼ é€’ï¼Œå›è°ƒå‡½æ•°é€šè¿‡ then å‡½æ•°æ‰§è¡Œfunction time(time){ return new Promise((resolve, reject) =&gt; { setTimeout(resolve, time); }) } let t = new time(5000); t.then((a, b) =&gt; { console.log(&#39;time&#39;); }) åŸå‹ç›¸å…³çš„API Person.prototype.isPrototypeOf(p1)ï¼šåˆ¤æ–­æ˜¯å¦å±äºæŸä¸ªå®ä¾‹ Object.getPrototypeOf(p1)ï¼šè·å–åŸå‹ p1.hasOwnProperty(â€˜nameâ€™)ï¼šåˆ¤æ–­æŸä¸ªå±æ€§æ˜¯å¦å±äºæŸä¸ªå®ä¾‹ï¼ˆåªèƒ½è·å–å±æ€§å®ä¾‹ï¼‰ inæ“ä½œç¬¦ï¼šåˆ¤æ–­æŸä¸ªå±æ€§æ˜¯å¦å±äºæŸä¸ªå®ä¾‹ï¼ˆä¸ç®¡æ˜¯å®ä¾‹ä¸­è¿˜æ˜¯åŸå‹ä¸­ï¼‰ function Person(name, age) { this.name = name; this.age = age; } let p1 = new Person(&#39;Ertsul&#39;, 22); console.log(Person.prototype); // constructor f console.log(Person.prototype.constructor); // Person console.log(Person.prototype.__proto__); // constructor çš„åŸå‹ console.log(p1.__proto__); // // constructor f console.log(Person.prototype.isPrototypeOf(p1)); // true console.log(Person.isPrototypeOf(p1)); // false console.log(Object.getPrototypeOf(p1)); // constructor f console.log(p1.hasOwnProperty(&#39;name&#39;)); // true å­˜åœ¨å®ä¾‹ä¸­ Person.prototype.num = 100 console.log(p1.hasOwnProperty(&#39;num&#39;)); // fasle å­˜åœ¨åŸå‹ä¸­ console.log(&#39;num&#39; in p1); // true ä¸ç®¡æ˜¯å®ä¾‹è¿˜æ˜¯åŸå‹ä¸­ js åˆ¤æ–­æ•°ç»„ç±»å‹ arr instanceof Array arr.constructor === Array let arr = [1, 2, 3]; let obj = {} function judgeFn(arr){ // return arr.constructor === Array ? true : false return arr instanceof Array ? true : false } console.log(judgeFn(arr)); // true console.log(judgeFn(obj )); // false æ—¥æœŸæ ¼å¼åŒ–/* æ—¥æœŸæ ¼å¼åŒ– */ function formatNumber(num) { const n = `${num}`; // è½¬åŒ–ä¸ºå­—ç¬¦ä¸² return n[1] ? n : `0${n}`; } function formatTime(date){ // å¹´ æœˆ æ—¥ const year = date.getFullYear(); const month = date.getMonth() + 1; const day = date.getDate(); // æ—¶ åˆ† ç§’ const hour = date.getHours(); const minute = date.getMinutes(); const second = date.getSeconds(); return `${[year, month, day].map(formatNumber).join(&#39;-&#39;)} ${[hour, minute, second].map(formatNumber).join(&#39;:&#39;)}` } let time = new Date(); console.log(time); // Tue Aug 14 2018 16:52:06 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) let t1 = formatTime(time); console.log(t1); // 2018-08-14 16:52:06 å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ ‡å‡†æ—¥æœŸæ ¼å¼/* å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ ‡å‡†æ—¥æœŸæ ¼å¼ */ function time2string(str) { const chunks = str.split(&#39; &#39;); const date = chunks[0].split(&#39;-&#39;); const time = chunks[1].split(&#39;:&#39;); return new Date(date[0], date[1] - 1, date[2], time[0], time[1], time[2]); } let str = &quot;2018-08-14 23:59:59&quot;; let t2 = time2string(str); console.log(t2); // Tue Aug 14 2018 23:59:59 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) é˜²æŠ–èŠ‚æµ/* é˜²æŠ–èŠ‚æµ debounce throttle */ // é˜²æŠ– - è¿ç»­å¿«é€Ÿè§¦å‘çš„è§£å†³æ–¹æ¡ˆ function debounce(fn, wait) { let timeout = null; // åˆå§‹åŒ– timer å®šæ—¶å™¨ return function (){ timeout &amp;&amp; clearTimeout(timeout); // æ¸…ç©ºå®šæ—¶å™¨ timeout = setTimeout(fn, wait); // è®¾ç½®å®šæ—¶å™¨ } } // èŠ‚æµ - ä¸€å®šæ—¶é—´å†…è¯·æ±‚ä¸€æ¬¡ -- å®šæ—¶å™¨æ³• function throttle1(fn, wait) { let timer = null; // åˆå§‹åŒ– timer å®šæ—¶å™¨ return function () { let context = this; // ä¿å­˜ä¸Šä¸‹æ–‡ this let args = arguments; // è®°å½•å‚æ•° if(!timer) { // å®šæ—¶å™¨ä¸ºç©º timer = setTimeout(() =&gt; { fn.apply(context, args); timer = null; // æ¸…ç©ºå®šæ—¶å™¨ }, wait); } } } // èŠ‚æµ - ä¸€å®šæ—¶é—´å†…è¯·æ±‚ä¸€æ¬¡ -- æ—¶é—´æˆ³æ³• function throttle2(fn, wait) { let prev = Date.now(); // è®°å½•å‰ä¸€ä¸ªæ—¶é—´ return function () { let context = this; // ä¿å­˜ä¸Šä¸‹æ–‡ this let args = arguments; // è®°å½•å‚æ•° let now = Date.now(); // è®°å½•å½“å‰æ—¶é—´ if(now - prev &gt;= wait){ // æ—¶é—´æˆ³å¤§äºè®¾ç½®çš„æ—¶é—´ fn.apply(context, args); prev = Date.now(); // è®°å½•å‰ä¸€ä¸ªæ—¶é—´ } } } // window.addEventListener(&#39;scroll&#39;, debounce(() =&gt; { // console.log(Math.random()); // }, 500)); // window.addEventListener(&#39;scroll&#39;, throttle1(() =&gt; { // console.log(Math.random()); // }, 1000)); window.addEventListener(&#39;scroll&#39;, throttle2(() =&gt; { console.log(Math.random()); }, 1000)) JSON.stringfy(obj, [replace, space]) å·§ç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯ä»¥å®ç°jsonå¯¹è±¡çš„è¿‡æ»¤æ›¿æ¢ã€‚ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæ˜¯ç¼©è¿›çš„ç©ºæ ¼æ•°ã€‚ å¦‚æœè¢«åºåˆ—åŒ–å¯¹è±¡å†…éƒ¨å«æœ‰toJSONæ–¹æ³•ï¼Œåˆ™è¯¥å¯¹è±¡ä¸ä¼šè¢«åºåˆ—åŒ–ï¼Œè€Œæ˜¯åºåˆ—åŒ–toJSONæ–¹æ³•çš„è¿”å›å€¼ã€‚ let obj1 = { name: &#39;zero&#39;, age: 22, hobby: &#39;ball&#39; }; let str1 = JSON.stringify(obj1); console.log(str1, typeof str1, str1.constructor === String); // {&quot;name&quot;:&quot;zero&quot;,&quot;age&quot;:22,&quot;hobby&quot;:&quot;ball&quot;} string true let str2 = JSON.stringify(obj1, (key, value) =&gt; { if(value === &#39;zero&#39;) { return &#39;Ertsul.&#39; }else { return value; } }); console.log(str2); // {&quot;name&quot;:&quot;Ertsul.&quot;,&quot;age&quot;:22,&quot;hobby&quot;:&quot;ball&quot;} let obj2 = { num: 100, toJSON(){ return &#39;apple&#39; } }; let str3 = JSON.stringify(obj2); console.log(str3); // apple æ•°ç»„çš„ sort()sort()é»˜è®¤ä¼šå°†æ¯ä¸ªå…ƒç´ è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åæŒ‰ç…§å­—ç¬¦ä¸²è¿›è¡Œæ’åºï¼Œæ˜¯ä¸ç¨³å®šçš„æ’åºã€‚å¦‚æœè¦å¯¹æ•°ç»„çš„æ•°å­—è¿›è¡Œæ’åºï¼Œåˆ™éœ€è¦ï¼š array.sort((val1, val2) =&gt; {return val - val2}); é€šè¿‡è¿™æ ·å®ç°ï¼Œå› ä¸ºä¼ é€’çš„å‚æ•°æ˜¯æ•°å­—ï¼Œæ‰€ä»¥é€šè¿‡å‡æ³•æ“ä½œï¼ˆå­—ç¬¦è¿›è¡Œå‡æ³•æ“ä½œè¿”å›çš„æ˜¯NaNï¼‰ï¼Œå¯ä»¥å¾—åˆ°é¢„æœŸç»“æœã€‚ let arr10 = [1, 2, 19, 12, 22]; console.log(arr10.sort()); // [1, 12, 19, 2, 22] console.log(arr10.sort((val1, val2) =&gt; { // [1, 2, 12, 19, 22] return val1 - val2; })); reduceå‡½æ•° reduce() æ–¹æ³•å¯¹ç´¯åŠ å™¨å’Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼ˆä»å·¦åˆ°å³ï¼‰åº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå°†å…¶ç®€åŒ–ä¸ºå•ä¸ªå€¼ã€‚ å…¶å®Œæ•´çš„å‡½æ•°ä¸ºï¼š arr.reduce((prev, next, cur, srcArr) =&gt; { ...... }, initVal) prev: ä¸Šæ¬¡è¿”å›çš„å€¼ next: ä¸‹ä¸€ä¸ªæ•°ç»„å…ƒç´ çš„å€¼ cur: å½“å‰æ•°ç»„å…ƒç´ çš„ç´¢å¼•å€¼ scrArr: æºæ•°ç»„ initVal: è®¾ç½®ç¬¬ä¸€æ¬¡çš„ prev ä¾‹å­ 1ï¼š let arr = [&#39;apple&#39;, &#39;pear&#39;, &#39;bananas&#39;]; arr.reduce((prev, next, cur, arr) =&gt; { console.warn(prev, next, cur, arr); return next; }, &#39;fruit&#39;) ä¾‹å­ 2ï¼šç»Ÿè®¡ä¸€ä¸ªæ•°ç»„ä¸­å•è¯å‡ºç°çš„æ¬¡æ•° // ç»Ÿè®¡æ•°ç»„ä¸­å•è¯å‡ºç°çš„æ¬¡æ•° let arr = [&quot;apple&quot;, &quot;orange&quot;, &quot;apple&quot;, &quot;orange&quot;, &quot;pear&quot;, &quot;orange&quot;, &quot;bananas&quot;, &quot;bananas&quot;]; function getCount(arr) { return arr.reduce((prev, next, cur) =&gt; { prev[next] = (prev[next] + 1) || 1 return prev; }, {}) } console.warn(getCount(arr)); // {apple: 2, orange: 3, pear: 1, bananas: 2} Object.seal()é˜²æ­¢å¯¹è±¡çº‚æ”¹ï¼šä¸èƒ½æ·»åŠ ä¹Ÿä¸èƒ½åˆ é™¤å±æ€§ let obj = { name: &#39;Ersul&#39; } Object.seal(obj); // é˜²æ­¢å¯¹è±¡çº‚æ”¹ï¼šä¸èƒ½åˆ é™¤ä¹Ÿä¸èƒ½æ·»åŠ å±æ€§ delete obj.name; console.warn(obj.name); // Ertsul obj.age = 22; console.warn(obj.age); // undefined Object.freeze()å†»ç»“å¯¹è±¡ï¼Œä¸èƒ½ä¿®æ”¹å¯¹è±¡ä»»ä½•å±æ€§çš„å€¼ã€‚å¦‚è‹¥ let obj = { name: &#39;Ersul&#39; } Object.freeze(obj); // å†»ç»“å¯¹è±¡ï¼Œä¸èƒ½ä¿®æ”¹å±æ€§çš„å€¼ obj.name = &#39;Zero&#39;; console.warn(obj.name); // Ertsul æ•°ç»„å­—ç¬¦ä¸²çš„ç›¸äº’è½¬åŒ– // æ•°ç»„ --&gt; å­—ç¬¦ä¸² : join() let arr3 = [1, 2, 3, 4, 5]; console.log(arr3.join(&#39;-&#39;)); // å­—ç¬¦ä¸² --&gt; æ•°ç»„ : split() let str = &#39;apple,pear,bananas&#39;; console.log(str.split(&#39;,&#39;));","categories":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/categories/frontEnd/"},{"name":"js","slug":"frontEnd/js","permalink":"https://ertsul.github.io/categories/frontEnd/js/"},{"name":"es6","slug":"frontEnd/js/es6","permalink":"https://ertsul.github.io/categories/frontEnd/js/es6/"}],"tags":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/tags/frontEnd/"},{"name":"js","slug":"js","permalink":"https://ertsul.github.io/tags/js/"},{"name":"es6","slug":"es6","permalink":"https://ertsul.github.io/tags/es6/"}]},{"title":"webpackå­¦ä¹ ç¬”è®°","slug":"webpackå­¦ä¹ ç¬”è®°","date":"2019-02-16T15:20:58.000Z","updated":"2019-11-11T15:36:57.639Z","comments":true,"path":"2019/02/16/webpackå­¦ä¹ ç¬”è®°/","link":"","permalink":"https://ertsul.github.io/2019/02/16/webpackå­¦ä¹ ç¬”è®°/","excerpt":"","text":"é¡¹ç›®æ„å»º æ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹ npm init è®¾ç½®é¡¹ç›®ç›®å½•ç»“æ„ï¼Œç»“æ„å¦‚ä¸‹ï¼š build ç›®å½•æ˜¯ webpack æ‰“åŒ…åçš„ç”Ÿæˆç›®å½•ï¼Œindex.html æ˜¯æ‰“åŒ…åçš„ html æ–‡ä»¶ï¼Œbundle.hash.js æ˜¯æ‰“åŒ…åçš„ js æ–‡ä»¶ã€‚ src ç›®å½•æ˜¯é¡¹ç›®æºæ–‡ä»¶ï¼Œtemplate.html æ˜¯ html æ–‡ä»¶æ¨¡æ¿ã€‚ webpack.config.js æ˜¯é…ç½® webpack çš„æ€»æ–‡ä»¶ã€‚ module.exports = { ... } æ¨¡å¼ modemode: &quot;development&quot;, // development or production å…¥å£ entryè®¾ç½®æ‰“åŒ…çš„å…¥å£æ–‡ä»¶, entry: filepath entry: &quot;./src/index.js&quot;, // å…¥å£ è¾“å‡º outputè®¾ç½®æ‰“åŒ…åçš„è¾“å‡ºæ–‡ä»¶ï¼Œoutput: { â€¦ } output: { // è¾“å‡º filename: &quot;bundle.[hash:8].js&quot;, path: path.resolve(__dirname + &#39;/build&#39;), // publicPath: &quot;http://&quot;, // å…¬å…±è·¯å¾„å‰ç¼€ }, æ³¨ï¼š path åé¢åº”æ˜¯ç»å¯¹è·¯å¾„ã€‚ bundle.[hash:8].js ä¸­çš„ [hash:8] å¯ä»¥åœ¨æ¯æ¬¡æ‰“åŒ…åéƒ½åœ¨æ–‡ä»¶åé¢è¿½åŠ  hash å€¼ã€‚ é€šè¿‡ä¸Šé¢ä¸‰é¡¹ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„ webpack æ‰“åŒ…é…ç½®ã€‚åœ¨ package.json æ·»åŠ è„šæœ¬æˆ–ç›´æ¥æ‰§è¡Œ ./node_modules/.bin/webpack å³å¯å®ç°æ‰“åŒ…ï¼š &quot;build&quot;: &quot;./node_modules/.bin/webpack&quot;, webpack-dev-serverwebpack å¼€å‘æœåŠ¡å™¨ï¼Œç”¨äºå¼€å‘æ—¶å€™çš„é…ç½®ï¼š yarn add taco â€“dev webpack-dev-server / npm install â€“save-dev webpack-dev-server åŸºæœ¬é…ç½®å¦‚ä¸‹ï¼š devServer: { // å¼€å‘æœåŠ¡å™¨ port: 3001, contentBase: path.resolve(__dirname + &#39;/build&#39;), // æœ¬åœ°æœåŠ¡å™¨ç›®å½• progress: true, // è¿›åº¦æ¡ open: true, // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ compress: true, // å‹ç¼© // 1. ä»£ç† proxy: { &quot;/api&quot;: { target: &quot;&quot;, pathRewrite: { &quot;/api&quot;: &quot;&quot; } } }, // 2. ç”¨ express å†…ç½®é’©å­æ¨¡æ‹Ÿæ•°æ® before(app) { app.get(&quot;/api&quot;, (req, res) =&gt; { ... }) }, // 3. åœ¨æœåŠ¡ç«¯ä¸­å¯åŠ¨ webpack æœåŠ¡ï¼Œä½¿ç”¨ webpack-dev-middleware ä¸­é—´ä»¶ }, }, åœ¨ package.json æ·»åŠ è„šæœ¬å³å¯ï¼š &quot;dev&quot;: &quot;webpack-dev-server&quot; source-map &amp;&amp; eval-source-map &amp;&amp; cheap-module-source-map &amp;&amp; cheap-module-eval-source-mapä½œç”¨ï¼šæºç æ˜ å°„ï¼ŒæŠ¥é”™æ—¶æ˜¾ç¤ºå‡ºé”™çš„ä½ç½®ã€‚ source-mapï¼šä¼šå•ç‹¬ç”Ÿæˆä¸€ä¸ª sourcemap æ–‡ä»¶ï¼›ä¼šæ˜¾ç¤ºè¡Œåˆ—ã€‚ eval-source-mapï¼šä¸ä¼šå•ç‹¬ç”Ÿæˆä¸€ä¸ª sourcemap æ–‡ä»¶ï¼Œä¼šå°†ç”Ÿæˆçš„ sourcemap æ”¾åˆ°æ‰“åŒ…åçš„ html æ–‡ä»¶ï¼›ä¼šæ˜¾ç¤ºè¡Œå’Œåˆ—ã€‚ cheap-module-source-mapï¼šä¼šç”Ÿæˆ sourcemap æ–‡ä»¶ï¼Œä¸ä¼šæ˜¾ç¤ºåˆ—ã€‚ cheap-module-eval-source-mapï¼šä¸ä¼šç”Ÿæˆ sourcemap æ–‡ä»¶ï¼Œé›†æˆåœ¨ html æ–‡ä»¶ä¸­ï¼Œä¸ä¼šæ˜¾ç¤ºåˆ—ã€‚ devtool: &quot;source-map&quot;, // æºç æ˜ å°„ watchä½œç”¨ï¼šç›‘æ§ä»£ç å®æ—¶å˜åŒ–ï¼Œè¿›è¡Œç¼–è¯‘æ‰“åŒ…ã€‚ watch: true, // ç›‘æ§ä»£ç å®æ—¶å˜åŒ–ï¼Œè¿›è¡Œç¼–è¯‘æ‰“åŒ… watchOptions: { poll: 1000, // å¤šæ¯«ç§’ç›‘æ§ä¸€æ¬¡ aggreatement: 500, // é˜²æŠ– ignored: &quot;node_modules&quot; // å¿½ç•¥æ–‡ä»¶å¤¹ }, resolveä½œç”¨ï¼šè§£æç¬¬ä¸‰æ–¹åŒ… resolve: { // è§£æ ç¬¬ä¸‰æ–¹åŒ… modules: [ path.resolve(&quot;node_modules&quot;), // åœ¨å½“å‰ç›®å½•ä¸‹æŸ¥æ‰¾æ¨¡å— path.resolve(&quot;other_modules&quot;), // åœ¨å…¶ä»–ç›®å½•ä¸‹æŸ¥æ‰¾æ¨¡å— ], // è‡ªåŠ¨æ·»åŠ æ‰©å±•åï¼Œä¸»è¦æ˜¯ import æ—¶å€™ä½¿ç”¨, ä¾æ¬¡è§£æ extensions: [&quot;.js&quot;, &quot;.css&quot;, &quot;.json&quot;, &quot;.vue&quot;], // æ¯”å¦‚å¼•ç”¨ bootstrap çš„ css æ ·å¼ // æ–¹å¼ä¸€ï¼š bootstrap çš„ä¸»å…¥å£ mainFields: [&quot;style&quot;, &quot;main&quot;], // æ–¹å¼äºŒï¼šåˆ«å // alias: { // bootstrap: &quot;bootstrap/dist/css/bootstrap.css&quot; // } }, æ’ä»¶webpack çš„æ’ä»¶é…ç½®æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢å­˜æ”¾ç€å„ç§å„æ ·çš„æ’ä»¶ã€‚ plugins: [ new pluginName(...) ] html-webpack-pluginæ’ä»¶ä½œç”¨ï¼šæ‰“åŒ…æ—¶å€™è‡ªåŠ¨æ ¹æ® html æ¨¡æ¿ç”Ÿæˆç›®æ ‡ html æ–‡ä»¶ï¼Œè‡ªåŠ¨ç”Ÿæˆç›®æ ‡æ‰“åŒ…ç›®å½•ï¼›å¦å¤–ï¼Œå¯é…ç½® html çš„ç›¸å…³æ‰“åŒ…é…ç½®ï¼Œå¦‚ï¼šå‹ç¼©ï¼Œå»åŒå¼•å·ç­‰ã€‚ new HtmlWebpackPlugin({ filename: &quot;index.html&quot;, // ç›®æ ‡æ–‡ä»¶åç§° template: path.resolve(__dirname + &#39;/src/template.html&#39;), // æ¨¡æ¿æ–‡ä»¶ minify: { // å‹ç¼©é…ç½® removeAttributeQuotes: true, // å»åŒå¼•å· collapseWhitespace: true, // ä¸æ¢è¡Œ }, hash: true // ç”Ÿæˆ hash æˆ³ }) mini-css-extract-pluginä½œç”¨ï¼šå°†ç”Ÿæˆçš„ cssæ ·å¼ æŠ½ç¦»æˆä¸€ä¸ª cssæ–‡ä»¶ï¼Œå¹¶å°†è¯¥æ ·å¼æ–‡ä»¶å¼•è¿›ç›®æ ‡ html æ–‡ä»¶ä¸­ã€‚ plugins: [ // æ’ä»¶ new MiniCssExtractPlugin({ filename: &quot;main.css&quot;, }) ], module: { // æ¨¡å— rules: [{ test: /\\.css$/, use: [ // { // loader: &quot;style-loader&quot;, // options: { // insertAt: &quot;top&quot; // æ’åˆ° head æ ‡ç­¾çš„é¡¶éƒ¨ï¼Œæ›´æ”¹ä¼˜å…ˆçº§ // } // }, MiniCssExtractPlugin.loader, // æ³¨æ„ loader çš„ä½¿ç”¨é¡ºåº &quot;css-loader&quot; ] }] } æ³¨ï¼šè¿™é‡ŒæŠ½ç¦»å‡ºæ¥çš„ main.css æ–‡ä»¶å¹¶æ²¡æœ‰å‹ç¼©ï¼Œè¦é€šè¿‡æ‰‹åŠ¨æ·»åŠ ä»¥ä¸‹ä¸¤ä¸ªæ’ä»¶åˆ°ä¼˜åŒ–é¡¹ï¼š optimize-css-assets-webpack-plugin uglifyjs-webpack-plugin optimization: { // ä¼˜åŒ–é¡¹ minimizer: [ new OptimizeCssAssetsWebpackPlugin({}), // å‹ç¼©æŠ½ç¦»çš„ css æ–‡ä»¶ new UglifyjsWebpackPlugin({ cache: true, parallel: true, }) // ä½¿ç”¨äº† optimize-css-assets-webpack-plugin æ’ä»¶åï¼ŒåŸå…ˆçš„ js å‹ç¼©ä¸èµ·ä½œç”¨ï¼Œè¦æ‰‹åŠ¨é‡æ–°é…ç½® ] }, optimize-css-assets-webpack-pluginæ’ä»¶ä½œç”¨ï¼šå‹ç¼©æŠ½ç¦»å‡ºæ¥çš„ main.css æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨äº† optimize-css-assets-webpack-plugin æ’ä»¶åï¼ŒåŸå…ˆçš„ js å‹ç¼©ä¸èµ·ä½œç”¨ï¼Œè¦æ‰‹åŠ¨é‡æ–°é…ç½®ä¼˜åŒ–é¡¹ uglifyjs-webpack-plugin ã€‚ uglifyjs-webpack-pluginæ’ä»¶ä½œç”¨ï¼šå‹ç¼©æ‰“åŒ…åçš„ js æ–‡ä»¶ã€‚ clean-webpack-pluginä½œç”¨ï¼šæ¸…ç†æ–‡ä»¶ plugins: [ new CleanWebpackPlugin(&quot;./build&quot;) ] copy-webpack-pluginä½œç”¨ï¼šå°†æŸäº›æ–‡ä»¶æ‹·è´åˆ°æ‰“åŒ…åçš„æ–‡ä»¶å¤¹ã€‚ new CopyWebpackPlugin([ {from: &quot;./copy&quot;, to: &quot;./&quot;} ]) banner-pluginä½œç”¨ï¼šç‰ˆæƒå£°æ˜ï¼Œæ˜¯ webpack çš„å†…ç½®æ¨¡å—ã€‚ new webpack.BannerPlugin(&quot;@copyright by Ertsul&quot;) webpack.DefinePlugin({ â€¦ })ä½œç”¨ï¼šå®šä¹‰ç¯å¢ƒå˜é‡ã€‚ plugins: [ new webpack.DefinePlugin({ DEV: JSON.stringify(&quot;development&quot;), PRO: JSON.stringify(&quot;production&quot;) }) ] webpacfk.IgnorePlugin()ä½œç”¨ï¼šå¿½ç•¥æ¨¡å—çš„å¼•è¿› plugins: [ new webpack.IgnorePlugin(/\\./locale/, /moment/) ] æ³¨ï¼šå¦‚æœç›´æ¥ä½¿ç”¨ DEV: â€˜developmentâ€™ çš„è¯ï¼Œä¼šæŠŠ DEV ç›´æ¥æ›¿æ¢ä¸º å¼•å·å†…éƒ¨çš„å†…å®¹ã€‚å¦‚ï¼šconsole.log(DEV)ï¼Œä¼šå˜æˆ console.log(dev)ï¼Œæœ€åçš„ç»“æœæ˜¯ undefinedã€‚æ‰€ä»¥ï¼Œéœ€è¦é€šè¿‡ JSON.stringfy() è¿›è¡Œè½¬åŒ–ã€‚ æ¨¡å— moduleæ¨¡å—ä¸»è¦æ˜¯å„ç§ loaderï¼Œä½œç”¨ï¼šè§£æå„ç§ç±»å‹çš„æ–‡ä»¶ã€‚ module: { rules: [ { test: regx, use: [loadName] } ] } css-loader / style-loader css-loaderï¼šä¸»è¦æ˜¯ç”¨äºè§£æåœ¨ css æ–‡ä»¶ä¸­é€šè¿‡ @import æ–¹å¼å¼•è¿›å…¶ä»–çš„ css æ–‡ä»¶ã€‚ style-loader: ä¸»è¦æ˜¯ç”¨äºå°† js æ–‡ä»¶ä¸­é€šè¿‡ require æ–¹å¼å¼•è¿›çš„ css æ–‡ä»¶æ’å…¥åˆ°ç›®æ ‡ html æ–‡ä»¶çš„ head ä¸­ï¼ˆæ’åˆ°æœ€åï¼Œå±‚çº§æœ€é«˜ï¼‰ã€‚ // æ•°ç»„æ–¹å¼ module: { // æ¨¡å— rules: [{ test: /\\.css$/, // æ­£åˆ™ use: [&quot;style-loader&quot;, &quot;css-loader&quot;] // loader æ•°ç»„ }] } // å¯¹è±¡æ–¹å¼ module: { // æ¨¡å— rules: [{ test: /\\.css$/, // æ­£åˆ™ use: [ { loader: &quot;style-loader&quot;, options: { insertAt: &quot;top&quot; // æ’åˆ° head æ ‡ç­¾çš„é¡¶éƒ¨ï¼Œæ›´æ”¹ä¼˜å…ˆçº§ } }, &quot;css-loader&quot; ] }] } æ³¨ï¼šloader æ˜¯ä»å³å‘å·¦ã€ä»ä¸‹åˆ°ä¸Šçš„æ‰§è¡Œé¡ºåºï¼Œæ•…ï¼šuse: [â€œstyle-loaderâ€, â€œcss-loaderâ€] postcss-loader + autoprefixerè¿™ä¸¤ä¸ªçš„é…åˆä½¿ç”¨å¯ä»¥è‡ªåŠ¨æ·»åŠ  css çš„æµè§ˆå™¨å‰ç¼€ã€‚ autoprefixerï¼šè‡ªåŠ¨æ·»åŠ  css çš„æµè§ˆå™¨å‰ç¼€ã€‚ postcss-loaderï¼šloader å¤„ç† autoprefixerã€‚ // ä½¿ç”¨ postcss-loader module: { // æ¨¡å— rules: [{ test: /\\.css$/, use: [ // { // loader: &quot;style-loader&quot;, // options: { // insertAt: &quot;top&quot; // æ’åˆ° head æ ‡ç­¾çš„é¡¶éƒ¨ï¼Œæ›´æ”¹ä¼˜å…ˆçº§ // } // }, MiniCssExtractPlugin.loader, &quot;css-loader&quot;, &quot;postcss-loader&quot; // æ³¨æ„é¡ºåº ] }] } æ ¹ç›®å½•ä¸‹æ–°å»º postcss.config.js æ–‡ä»¶ module.exports = { plugins: [ require(&quot;autoprefixer&quot;) ] } babel-loader + @babel/core + @babel/preset-envä½œç”¨ï¼šè½¬åŒ– es6 è¯­æ³• module: { // æ¨¡å— rules: [{ test: /\\.js$/, use: { loader: &quot;babel-loader&quot;, options: { // ç”¨ babel-loader éœ€è¦æŠŠ es6 è½¬åŒ–ä¸º es5 presets: [ &quot;@babel/preset-env&quot;, // è½¬åŒ– js è¯­æ³•ï¼Œä¸€ä¸ªå¤§çš„ babel åº“ï¼ŒåŒ…å«å°† es6 è½¬åŒ–ä¸º es5 çš„æ¨¡å— ], // plugins: [...] // å…¶ä»–çš„å°æ’ä»¶ } } }] } expose-loaderä½œç”¨ï¼šæš´éœ²å…¨å±€çš„ loaderï¼Œæš´éœ²åˆ° window ä¸Šã€‚ // ä¸€èˆ¬æƒ…å†µ import $ from &#39;jquery&#39;; console.log(window.$); // undefined // å†…è” loader æ–¹å¼ import $ from &#39;expose-loader?$!jquery&#39;; console.log(window.$); // å…¶ä»–æ–¹å¼ï¼šåœ¨æ¯ä¸ªæ¨¡å—ä¸­æ³¨å…¥ new webpack.ProvidePlugin({ $: &quot;jquery&quot; }) console.log($); console.log(window.$); // undefined file-loader &amp;&amp; url-loader &amp;&amp; html-withimg-loaderåœ¨ webpack é¡¹ç›®ä¸­ä¸èƒ½ç›´æ¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„çš„æ–¹å¼è°ƒç”¨å›¾ç‰‡ï¼Œä¸ç„¶æ‰“åŒ…åçš„å›¾ç‰‡è·¯å¾„ä¼šæŠ¥é”™ã€‚ file-loaderï¼šjs æ–‡ä»¶ä¸­é€šè¿‡ import æ–¹å¼å¼•è¿›å›¾ç‰‡ã€‚ html-withimg-loaderï¼šhtml æ–‡ä»¶ä¸­é€šè¿‡ scr æ–¹å¼å¼•è¿›å›¾ç‰‡ã€‚ åœ¨ css ä¸­ä½¿ç”¨å›¾ç‰‡ï¼Œstyle-loader å·²ç»åšäº†å¤„ç†ã€‚ url-loaderï¼šå°†å›¾ç‰‡è½¬åŒ–ä¸º base64 module: { rules: [ { test: /\\.(png|jpg|gif)$/, use: { loader: &quot;url-loader&quot;, options: { limit: 200 * 1024, // å›¾ç‰‡å°äº 200kï¼Œå˜æˆ base64ï¼Œå¦åˆ™ç”¨ file-loader // publicPath: &quot;http://&quot;, // å…¬å…±è·¯å¾„å‰ç¼€ } } }, { test: /\\.html$/, use: [&quot;html-withimg-loader&quot;] } ] } ` æ¨¡å— module â€“ noParseä½œç”¨ï¼šä¸è§£ææŒ‡å®šåŒ…çš„ä¾èµ–å…³ç³»ã€‚ module: { noParse: /jquery/ } æ¨¡å— module â€“ excludeä½œç”¨ï¼šæ’é™¤ module: { exclude: /node_module/ } æ¨¡å— module â€“ includeä½œç”¨ï¼šåŒ…å« module: { include: /src/ } åŒºåˆ†ä¸åŒç¯å¢ƒï¼Œå®ç°å¼€å‘å’Œç”Ÿäº§é…ç½®çš„åˆ†ç¦»å°† webpack çš„é…ç½®æ–‡ä»¶åˆ’åˆ†ä¸ºä»¥ä¸‹æ–‡ä»¶ï¼š webpack.base.jsï¼šåŸºæœ¬ã€å…±æœ‰çš„é…ç½®ã€‚ webpack.dev.jsï¼šå¼€å‘é…ç½®ã€‚ webpack.prod.jsï¼šç”Ÿäº§é…ç½®ã€‚ ä½¿ç”¨ webpack-merger æ’ä»¶ï¼š å®‰è£… webpack-merge æ’ä»¶ï¼› å¼•è¿›ç›®æ ‡æ¨¡å— import { smart } from &quot;webpack-merge&quot;; ä½¿ç”¨ const base = require(&quot;webpack.base.js); module.exports = smart(base, { ... }) webpack è‡ªå¸¦ä¼˜åŒ– import è¯­æ³•ï¼ˆç”Ÿæˆç¯å¢ƒï¼‰ï¼Œtree-shaking è‡ªåŠ¨åˆ é™¤æ²¡æœ‰ç”¨åˆ°çš„ä»£ç ï¼› es6 æ¨¡å—ä¼šæŠŠè¯­æ³•æ”¾åˆ° default ä¸Šï¼› è‡ªåŠ¨çœç•¥å¯ä»¥ç®€åŒ–çš„ä»£ç ï¼› scope hostingï¼Œä½œç”¨åŸŸæå‡ã€‚ webpack æ‡’åŠ è½½ é€šè¿‡ import å®ç°ï¼ˆè¯¥è¯­æ³•å†…éƒ¨ç”± jsonp å®ç°ï¼‰ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ª promiseã€‚ è¦åœ¨ babel-loader ä¸­æ·»åŠ  @babel/plugin-syntax-dynamic-import æ’ä»¶ã€‚ vue å’Œ react çš„læ‡’åŠ è½½éƒ½æ˜¯è¿™æ ·å®ç°çš„ã€‚ /* * æ¨¡æ‹Ÿç‚¹å‡»åŠ è½½ source.js çš„å†…å®¹ */ // 1 { loader: &#39;babel-loader&#39;, options: { presets: [ &#39;@babel/preset-env&#39; ], plugins: [ &#39;@babel/plugin-syntax-dynamic-import&#39; ] }, } // 2 let btn = document.createElement(&#39;button&#39;); btn.innerHTML = &#39;btn&#39;; btn.addEventListener(&#39;click&#39;, function () { // å†…éƒ¨ç”± jsonp å®ç°åŠ¨æ€åŠ è½½æ–‡ä»¶ import(&#39;./source.js&#39;) .then(data =&gt; { console.log(data); }) }) document.body.appendChild(btn); ç‚¹å‡»æŒ‰é’®åç»“æœå¦‚ä¸‹ï¼š çƒ­æ›´æ–° / çƒ­æ›¿æ¢ / Hot Module Replacement / HMRçƒ­æ›´æ–°ï¼šé¡µé¢åªæ›´æ–°æ”¹åŠ¨çš„æ¨¡å—ã€‚ devServer å¼€å§‹ hot çƒ­æ›´æ–°æ¨¡å—ã€‚ ä½¿ç”¨ webpack å†…ç½®çƒ­æ›´æ–°æ’ä»¶ã€‚ NamedModulesPlugin HotModuleReplacementPlugin // devServer é…ç½® devServer: { port: 8089, contentBase: path.resolve(__dirname + &#39;/dist/&#39;), compress: true, progress: true, // open: true hot: true, // å¼€å¯çƒ­æ›´æ–°ï¼Œåªæ›´æ–°æ›´æ”¹çš„æ¨¡å— }, // æ·»åŠ æ’ä»¶ plugins: [ new webpack.NamedModulesPlugin(), // çƒ­æ›´æ–°æ‰“å°æ›´æ–°çš„æ¨¡å—è·¯å¾„ new webpack.HotModuleReplacementPlugin(), // çƒ­æ›´æ–° ] ä½¿ç”¨çƒ­æ›´æ–° import source from &#39;./source.js&#39;; console.log(source); // æ·»åŠ çƒ­æ›´æ–°æ“ä½œï¼Œä¸ç„¶ä¸ä¼šå®ç°çƒ­æ›´æ–° if (module.hot) { module.hot.accept(&#39;./source.js&#39;, () =&gt; { require(&#39;./source.js&#39;); }) å¤šçº¿ç¨‹æ‰“åŒ…ä½¿ç”¨ happypack å¯ä»¥å®ç°å¤šçº¿ç¨‹æ‰“åŒ…ã€‚ å®‰è£…å¹¶å¼•è¿› happypack; æ”¹å†™ module; plugin é…ç½®ã€‚ // æ”¹å†™ module module: { rules: [ { test: /\\.js$/, // use: { // loader: &#39;babel-loader&#39;, // options: { // presets: [ // &#39;@babel/preset-env&#39; // ] // } // } use: { loader: &#39;Happypack/loader?id=js&#39;, } }, ] } // plugin é…ç½® plugins: [ new Happypack({ id: &#39;js&#39;, use: [ { loader: &#39;babel-loader&#39;, options: { presets: [ &#39;@babel/preset-env&#39; ] } } ] }), ] å¤šé¡µé¢æ‰“åŒ…const path = require(&quot;path&quot;); const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;); module.exports = { mode: &quot;production&quot;, entry: { home: &quot;./src/home.js&quot;, about: &quot;./src/about.js&quot;, other: &quot;./src/other.js&quot; }, output: { path: path.resolve(__dirname + &quot;/build/&quot;), filename: &quot;[name].js&quot;, }, plugins: [ new HtmlWebpackPlugin({ template: path.resolve(__dirname + &quot;/src/template.html&quot;), filename: &quot;home.html&quot;, chunks: [&quot;home&quot;] }), new HtmlWebpackPlugin({ template: path.resolve(__dirname + &quot;/src/template.html&quot;), filename: &quot;other.html&quot;, chunks: [&quot;other&quot;] }), new HtmlWebpackPlugin({ template: path.resolve(__dirname + &quot;/src/template.html&quot;), filename: &quot;about.html&quot;, chunks: [&quot;about&quot;] }), ] } å¤šé¡µé¢æ‰“åŒ…æŠ½ç¦»å…¬å…±ä»£ç å—æ‰“åŒ… å¤šé¡µé¢ éœ€è¦å°†å…¬å…±çš„ä»£ç å—æŠ½ç¦»å‡ºæ¥è¿›è¡Œä¼˜åŒ–ï¼š optimation: { splitChunks: { // åˆ†å‰²ä»£ç å— cacheGroups: { // ç¼“å­˜ç»„ common: { // å…¬å…±çš„æ¨¡å— chunks: &#39;initial&#39;, // ä»å“ªé‡Œå¼€å§‹ï¼Œinitial å³ï¼šå…¥å£ miniSize: 0, // å¤§å°å¤§äºå¤šå°‘å­—èŠ‚çš„æ—¶å€™æŠ½ç¦» miniChunks: 2 // å¼•ç”¨å¤šå°‘æ¬¡çš„æ—¶å€™æŠ½ç¦» }, vender: { // ç¬¬ä¸‰æ–¹æ¨¡å— priority: 1, // è®¾ç½®æƒé‡ï¼Œæ²¡æœ‰è®¾ç½®æƒé‡çš„è¯ï¼Œä»£ç é»˜è®¤ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œï¼Œä¸Šé¢çš„å…¬å…±ä»£ç ä¼šå…ˆå°†ç¬¬ä¸‰æ–¹æ¨¡å—æŠ½ç¦»å‡ºæ¥ï¼Œè¾¾ä¸åˆ°æŠ½ç¦»ç¬¬ä¸‰æ–¹æ¨¡å—çš„ä½œç”¨ test: /node_modules/, // æŠ½ç¦»å‡ºæ¥ chunks: &#39;initial&#39;, // ä»å“ªé‡Œå¼€å§‹ï¼Œinitial å³ï¼šå…¥å£ miniSize: 0, // å¤§å°å¤§äºå¤šå°‘å­—èŠ‚çš„æ—¶å€™æŠ½ç¦» miniChunks: 2 // å¼•ç”¨å¤šå°‘æ¬¡çš„æ—¶å€™æŠ½ç¦» } } } } Tapablewebpack æœ¬è´¨æ˜¯äº‹ä»¶æµçš„æœºåˆ¶ï¼Œå·¥ä½œæµç¨‹å°±æ˜¯å°†å„ä¸ªæ’ä»¶ä¸²è”èµ·æ¥ï¼Œå®ç°æ ¸å¿ƒå°±æ˜¯ Tapableï¼Œé€šè¿‡ Tapable å®ç°å„ç§é’©å­ï¼ˆå¦‚åŒæ­¥é’©å­å¼‚æ­¥é’©å­ï¼‰ã€‚è€Œ Tapable æ ¸å¿ƒæ˜¯ä¾èµ–äº å‘å¸ƒè®¢é˜…è€…æ¨¡å¼ã€‚ åŒæ­¥é’©å­åŸºæœ¬æ€è·¯ï¼ˆå‘å¸ƒè®¢é˜…è€…æ¨¡å¼ï¼‰ï¼šå°†æ‰€æœ‰æ³¨å†Œçš„å‡½æ•°å­˜æ”¾åˆ°ä¸€ä¸ªä»»åŠ¡æ•°ç»„ï¼Œå‘å¸ƒçš„æ—¶å€™æ‰€æœ‰è®¢é˜…è€…éƒ½ä¼šæ‰§è¡Œã€‚ä½¿ç”¨ tap æ³¨å†Œã€‚ ä½¿ç”¨ï¼š const { SyncHook } = require(&#39;tapable&#39;); class Hook { constructor() { this.hooks = { arch: new SyncHook([&#39;name&#39;]) } } tap() { // æ³¨å†Œç›‘å¬äº‹ä»¶ this.hooks.arch.tap(&#39;vue&#39;, (name) =&gt; { console.log(&#39;vue&#39;, name); }) this.hooks.arch.tap(&#39;react&#39;, (name) =&gt; { console.log(&#39;react&#39;, name); }) } start() { // å¼€å§‹ this.hooks.arch.call(&#39;Ertsul&#39;) } } let h = new Hook(); h.tap(); h.start(); å¼‚æ­¥é’©å­åŸºæœ¬æ€è·¯ï¼ˆå‘å¸ƒè®¢é˜…è€…æ¨¡å¼ï¼‰ï¼šå°†æ‰€æœ‰æ³¨å†Œçš„å‡½æ•°å­˜æ”¾åˆ°ä¸€ä¸ªä»»åŠ¡æ•°ç»„ï¼Œå‘å¸ƒçš„æ—¶å€™æ‰€æœ‰è®¢é˜…è€…éƒ½ä¼šæ‰§è¡Œã€‚ä½¿ç”¨ tapAsync æ³¨å†Œã€‚ setTimeout()æ–¹å¼ä½¿ç”¨ï¼š const { AsyncParallelHook } = require(&#39;tapable&#39;); class AsyncHook { constructor() { this.hooks = { arch: new AsyncParallelHook([&#39;name&#39;]) } } tap() { this.hooks.arch.tapAsync(&#39;vue&#39;, (name, cb) =&gt; { setTimeout(() =&gt; { console.log(&#39;vue&#39;, name); cb &amp;&amp; cb(); }, 1000) }) this.hooks.arch.tapAsync(&#39;react&#39;, (name, cb) =&gt; { setTimeout(() =&gt; { console.log(&#39;react&#39;, name); cb &amp;&amp; cb(); }, 1000) }) } start() { this.hooks.arch.callAsync(&#39;Ertsul&#39;, () =&gt; { console.log(&#39;All finished!&#39;); }) } } const a = new AsyncHook(); a.tap(); a.start(); Promise()æ–¹å¼ä½¿ç”¨ï¼š const { AsyncParallelHook } = require(&#39;tapable&#39;); class AsyncHook { constructor() { this.hooks = { arch: new AsyncParallelHook([&#39;name&#39;]) } } tap() { this.hooks.arch.tapPromise(&#39;vue&#39;, (name) =&gt; { return new Promise((resolve, reject) =&gt; { setTimeout(() =&gt; { console.log(&#39;vue&#39;, name); resolve(); }, 1000) }) }) this.hooks.arch.tapPromise(&#39;react&#39;, (name) =&gt; { return new Promise((resolve, reject) =&gt; { setTimeout(() =&gt; { console.log(&#39;react&#39;, name); resolve(); }, 1000) }) }) } start() { this.hooks.arch.promise(&#39;Ertsul&#39;).then(() =&gt; { console.log(&#39;hook all finished!&#39;); }) } } const a = new AsyncHook(); a.tap(); a.start(); Synchook åŒæ­¥é’©å­å®ç°ï¼š class Synchook { constructor(args) { // args =&gt; [&#39;Synchook&#39;] this.tasks = []; // æ³¨å†Œäº‹ä»¶æ•°ç»„ } tap(name, task) { // æ³¨å†Œäº‹ä»¶ this.tasks.push(task); } call(...args) { // å‘å¸ƒäº‹ä»¶ this.tasks.forEach(task =&gt; { task(...args); }) } } let hook = new Synchook([&#39;Synchook&#39;]); hook.tap(&#39;vue&#39;, (name) =&gt; { console.log(&#39;vue&#39;, name); }) hook.tap(&#39;react&#39;, (name) =&gt; { console.log(&#39;react&#39;, name); }) hook.call(&#39;Ertsul&#39;); SyncBailHook åŒæ­¥ç†”æ–­é’©å­Synchook åŒæ­¥é’©å­åœ¨æ‰§è¡Œæ¯ä¸ªå‡½æ•°çš„æ—¶å€™ä¼šæœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œundefinedï¼šæ‰§è¡ŒæˆåŠŸï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•°ï¼Œ!= undefinedï¼šç†”æ–­æ‰§è¡Œï¼Œä¸æ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•°ã€‚ å®ç°ï¼š // Syncbailhook åŒæ­¥ç†”æ–­æ‰§è¡Œï¼Œä¼šåˆ¤æ–­è¿”å›æ˜¯å¦ç­‰äº undefined æ¥æ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•° class Syncbailhook { constructor(args) { this.tasks = []; } tap(name, task) { this.tasks.push(task); } call(...args) { let ret = &#39;&#39;; // å½“å‰å‡½æ•°çš„è¿”å›å€¼ let index = 0; // å½“å‰ä»»åŠ¡æ•°ç»„çš„ç´¢å¼• do { ret = this.tasks[index++](...args); } while (ret === undefined &amp;&amp; index &lt; this.tasks.length) } } let hook = new Syncbailhook([&#39;Syncbailhook&#39;]); hook.tap(&#39;vue&#39;, (name) =&gt; { console.log(&#39;vue&#39;, name); }) hook.tap(&#39;react&#39;, (name) =&gt; { console.log(&#39;react&#39;, name); }) hook.call(&#39;Ertsul&#39;); SyncWaterfallHook åŒæ­¥ç€‘å¸ƒé’©å­Syncwaterfallhook åŒæ­¥ç€‘å¸ƒæ‰§è¡Œï¼Œå„ä¸ªå‡½æ•°ä¹‹é—´å­˜åœ¨å…³ç³»ï¼Œä¸Šä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œè¿”å›ç»“æœåœ¨å½“å‰å‡½æ•°çš„è¾“å…¥ã€‚ å®ç°ï¼š /** * Syncwaterfallhook åŒæ­¥ç€‘å¸ƒæ‰§è¡Œï¼Œå„ä¸ªå‡½æ•°ä¹‹é—´å­˜åœ¨å…³ç³» * ä¸Šä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œè¿”å›ç»“æœåœ¨å½“å‰å‡½æ•°çš„è¾“å…¥ */ class Syncwaterfallhook { constructor(args) { this.tasks = []; } tap(name, task) { this.tasks.push(task); } call(...args) { let [first, ...others] = this.tasks; let ret = first(...args); others.reduce((prev, current) =&gt; { return current(prev); }, ret) } } let hook = new Syncwaterfallhook([&#39;Syncwaterfallhook&#39;]); hook.tap(&#39;vue&#39;, (name) =&gt; { console.log(&#39;vue&#39;, name); return &#39;vue learnt&#39;; }) hook.tap(&#39;react&#39;, (data) =&gt; { console.log(&#39;react&#39;, data); }) hook.call(&#39;Ertsul&#39;); SyncLoopHook åŒæ­¥å¾ªç¯é’©å­åŒæ­¥å¾ªç¯é’©å­å›è®©æŸä¸ªå‡½æ•°æ‰§è¡Œä¸€å®šçš„æ¬¡æ•°ã€‚ å®ç°ï¼š // Tapable Syncloophook åŒæ­¥å¾ªç¯é’©å­ class Syncloophook { constructor(args) { // args =&gt; [&#39;Synchook&#39;] this.tasks = []; // æ³¨å†Œäº‹ä»¶æ•°ç»„ } tap(name, task) { // æ³¨å†Œäº‹ä»¶ this.tasks.push(task); } call(...args) { // å‘å¸ƒäº‹ä»¶ this.tasks.forEach(task =&gt; { let ret = &#39;&#39;; do { ret = task(...args); } while (ret != undefined); }) } } let hook = new Syncloophook([&#39;Syncloophook&#39;]); const total = 3; let index = 0; hook.tap(&#39;vue&#39;, (name) =&gt; { console.log(&#39;vue&#39;, name); return ++index === total ? undefined : &#39;continue&#39;; }) hook.tap(&#39;react&#39;, (name) =&gt; { console.log(&#39;react&#39;, name); }) hook.call(&#39;Ertsul&#39;); AsyncParallelHook å¼‚æ­¥å¹¶å‘é’©å­ å›è°ƒå‡½æ•°æ–¹å¼å®ç°ï¼š // Tapable Asynchook å¼‚æ­¥é’©å­ class asyncparallelhook { constructor(args) { // args =&gt; [&#39;Synchook&#39;] this.tasks = []; // æ³¨å†Œäº‹ä»¶æ•°ç»„ } tapAsync(name, task) { // æ³¨å†Œäº‹ä»¶ this.tasks.push(task); } callAsync(...args) { // å‘å¸ƒäº‹ä»¶ let finalCallback = args.pop(); let index = 0; const done = () =&gt; { index++; if (index === this.tasks.length) { finalCallback(); } } this.tasks.forEach(task =&gt; { task(...args, done); }) } } let hook = new asyncparallelhook([&#39;asyncparallelhook&#39;]); hook.tapAsync(&#39;vue&#39;, (name, cb) =&gt; { setTimeout(() =&gt; { console.log(&#39;vue&#39;, name); cb &amp;&amp; cb(); }, 1000) }) hook.tapAsync(&#39;react&#39;, (name, cb) =&gt; { setTimeout(() =&gt; { console.log(&#39;react&#39;, name); cb &amp;&amp; cb(); }, 1000) }) hook.callAsync(&#39;Ertsul&#39;, () =&gt; { console.log(&#39;All hook finished!&#39;); }); AsyncParallelHook å¼‚æ­¥å¹¶å‘é’©å­ Promiseæ–¹å¼å®ç°ï¼š // Tapable Asynchook å¼‚æ­¥é’©å­ class asyncparallelhook { constructor(args) { // args =&gt; [&#39;Synchook&#39;] this.tasks = []; // æ³¨å†Œäº‹ä»¶æ•°ç»„ } tapPromise(name, task) { // æ³¨å†Œäº‹ä»¶ this.tasks.push(task); } promise(...args) { // å‘å¸ƒäº‹ä»¶ let tasks = this.tasks.map(task =&gt; task(...args)); return Promise.all(tasks); } } let hook = new asyncparallelhook([&#39;asyncparallelhook&#39;]); hook.tapPromise(&#39;vue&#39;, (name) =&gt; { return new Promise((resolve, reject) =&gt; { setTimeout(() =&gt; { console.log(&#39;vue&#39;, name); resolve(); }, 1000) }) }) hook.tapPromise(&#39;react&#39;, (name) =&gt; { return new Promise((resolve, reject) =&gt; { setTimeout(() =&gt; { console.log(&#39;react&#39;, name); resolve(); }, 1000) }) }) hook.promise(&#39;Ertsul&#39;).then(() =&gt; { console.log(&#39;All hooks finished!&#39;); }) AsyncSeriesHook å¼‚æ­¥ä¸²è¡Œé’©å­AsyncWaterfallHook å¼‚æ­¥ç€‘å¸ƒæµé’©å­","categories":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/categories/frontEnd/"},{"name":"webpack","slug":"frontEnd/webpack","permalink":"https://ertsul.github.io/categories/frontEnd/webpack/"}],"tags":[{"name":"frontEnd","slug":"frontEnd","permalink":"https://ertsul.github.io/tags/frontEnd/"},{"name":"webpack","slug":"webpack","permalink":"https://ertsul.github.io/tags/webpack/"}]}]}